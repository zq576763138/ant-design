(self.webpackChunkantd=self.webpackChunkantd||[]).push([[7350],{62238:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ut=function(tt,Q){var J=tt.nodes,X=tt.edges,T=[],M={};if(!J)throw new Error("invalid nodes data!");return J&&J.forEach(function(C,_){M[C.id]=_;var b=[];T.push(b)}),X&&X.forEach(function(C){var _=C.source,b=C.target,L=M[_],S=M[b];!L&&L!==0||!S&&S!==0||(T[L][S]=1,Q||(T[S][L]=1))}),T},wt=ut;G.default=wt},810369:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDIAsync",{enumerable:!0,get:function(){return wt.GADDIAsync}}),Object.defineProperty(G,"connectedComponentAsync",{enumerable:!0,get:function(){return wt.connectedComponentAsync}}),G.default=void 0,Object.defineProperty(G,"detectAllCyclesAsync",{enumerable:!0,get:function(){return wt.detectAllCyclesAsync}}),Object.defineProperty(G,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return wt.detectAllDirectedCycleAsync}}),Object.defineProperty(G,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return wt.detectAllUndirectedCycleAsync}}),Object.defineProperty(G,"detectCycleAsync",{enumerable:!0,get:function(){return wt.detectCycleAsync}}),G.detectDirectedCycleAsync=void 0,Object.defineProperty(G,"dijkstraAsync",{enumerable:!0,get:function(){return wt.dijkstraAsync}}),Object.defineProperty(G,"findAllPathAsync",{enumerable:!0,get:function(){return wt.findAllPathAsync}}),Object.defineProperty(G,"findShortestPathAsync",{enumerable:!0,get:function(){return wt.findShortestPathAsync}}),Object.defineProperty(G,"floydWarshallAsync",{enumerable:!0,get:function(){return wt.floydWarshallAsync}}),Object.defineProperty(G,"getAdjMatrixAsync",{enumerable:!0,get:function(){return wt.getAdjMatrixAsync}}),Object.defineProperty(G,"getDegreeAsync",{enumerable:!0,get:function(){return wt.getDegreeAsync}}),Object.defineProperty(G,"getInDegreeAsync",{enumerable:!0,get:function(){return wt.getInDegreeAsync}}),Object.defineProperty(G,"getNeighborsAsync",{enumerable:!0,get:function(){return wt.getNeighborsAsync}}),Object.defineProperty(G,"getOutDegreeAsync",{enumerable:!0,get:function(){return wt.getOutDegreeAsync}}),Object.defineProperty(G,"labelPropagationAsync",{enumerable:!0,get:function(){return wt.labelPropagationAsync}}),Object.defineProperty(G,"louvainAsync",{enumerable:!0,get:function(){return wt.louvainAsync}}),Object.defineProperty(G,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return wt.minimumSpanningTreeAsync}}),Object.defineProperty(G,"pageRankAsync",{enumerable:!0,get:function(){return wt.pageRankAsync}});var wt=ut(430485),st=wt.detectCycleAsync;G.detectDirectedCycleAsync=st;var tt={getAdjMatrixAsync:wt.getAdjMatrixAsync,connectedComponentAsync:wt.connectedComponentAsync,getDegreeAsync:wt.getDegreeAsync,getInDegreeAsync:wt.getInDegreeAsync,getOutDegreeAsync:wt.getOutDegreeAsync,detectCycleAsync:wt.detectCycleAsync,detectDirectedCycleAsync:st,detectAllCyclesAsync:wt.detectAllCyclesAsync,detectAllDirectedCycleAsync:wt.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:wt.detectAllUndirectedCycleAsync,dijkstraAsync:wt.dijkstraAsync,findAllPathAsync:wt.findAllPathAsync,findShortestPathAsync:wt.findShortestPathAsync,floydWarshallAsync:wt.floydWarshallAsync,labelPropagationAsync:wt.labelPropagationAsync,louvainAsync:wt.louvainAsync,minimumSpanningTreeAsync:wt.minimumSpanningTreeAsync,pageRankAsync:wt.pageRankAsync,getNeighborsAsync:wt.getNeighborsAsync,GADDIAsync:wt.GADDIAsync};G.default=tt},683764:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=tt(ut(893026)),st=ut(770643);function tt(T){return T&&T.__esModule?T:{default:T}}function Q(T){T===void 0&&(T={});var M=T,C=function(){},_=function(){var b={};return function(L){var S=L.next,I=S;return b[I]?!1:(b[I]=!0,!0)}}();return M.allowTraversal=T.allowTraversal||_,M.enter=T.enter||C,M.leave=T.leave||C,M}var J=function(M,C,_,b){b===void 0&&(b=!0);var L=Q(_),S=new wt.default,I=M.edges,D=I===void 0?[]:I;S.enqueue(C);for(var P="",y=function(){var K=S.dequeue();L.enter({current:K,previous:P}),(0,st.getNeighbors)(K,D,b?"target":void 0).forEach(function(R){L.allowTraversal({previous:P,current:K,next:R})&&S.enqueue(R)}),L.leave({current:K,previous:P}),P=K};!S.isEmpty();)y()},X=J;G.default=X},759527:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=Q,G.detectStrongConnectComponents=G.detectConnectedComponents=void 0;var wt=ut(770643),st=function(X){for(var T=X.nodes,M=T===void 0?[]:T,C=X.edges,_=C===void 0?[]:C,b=[],L={},S=[],I=function v(K){S.push(K),L[K.id]=!0;for(var R=(0,wt.getNeighbors)(K.id,_),B=function(q){var H=R[q];if(!L[H]){var et=M.filter(function(ct){return ct.id===H});et.length>0&&v(et[0])}},Y=0;Y<R.length;++Y)B(Y)},D=0;D<M.length;D++){var P=M[D];if(!L[P.id]){I(P);for(var y=[];S.length>0;)y.push(S.pop());b.push(y)}}return b};G.detectConnectedComponents=st;var tt=function(X){for(var T=X.nodes,M=T===void 0?[]:T,C=X.edges,_=C===void 0?[]:C,b=[],L={},S={},I={},D=[],P=0,y=function B(Y){S[Y.id]=P,I[Y.id]=P,P+=1,b.push(Y),L[Y.id]=!0;for(var W=(0,wt.getNeighbors)(Y.id,_,"target").filter(function(at){return M.map(function(St){return St.id}).indexOf(at)>-1}),q=function(St){var bt=W[St];if(!S[bt]&&S[bt]!==0){var zt=M.filter(function(kt){return kt.id===bt});zt.length>0&&B(zt[0]),I[Y.id]=Math.min(I[Y.id],I[bt])}else L[bt]&&(I[Y.id]=Math.min(I[Y.id],S[bt]))},H=0;H<W.length;H++)q(H);if(I[Y.id]===S[Y.id]){for(var et=[];b.length>0;){var ct=b.pop();if(L[ct.id]=!1,et.push(ct),ct===Y)break}et.length>0&&D.push(et)}},v=0,K=M;v<K.length;v++){var R=K[v];!S[R.id]&&S[R.id]!==0&&y(R)}return D};G.detectStrongConnectComponents=tt;function Q(J,X){return X?tt(J):st(J)}},592935:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.secondReg=G.dateReg=void 0;var ut=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;G.secondReg=ut;var wt=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;G.dateReg=wt},182556:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getOutDegree=G.getInDegree=G.default=void 0;var ut=function(J){var X={},T=J.nodes,M=T===void 0?[]:T,C=J.edges,_=C===void 0?[]:C;return M.forEach(function(b){X[b.id]={degree:0,inDegree:0,outDegree:0}}),_.forEach(function(b){X[b.source].degree++,X[b.source].outDegree++,X[b.target].degree++,X[b.target].inDegree++}),X},wt=ut;G.default=wt;var st=function(J,X){var T=ut(J);return T[X]?ut(J)[X].inDegree:0};G.getInDegree=st;var tt=function(J,X){var T=ut(J);return T[X]?ut(J)[X].outDegree:0};G.getOutDegree=tt},994282:function(Sr,G,ut){"use strict";function wt(S){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},wt(S)}Object.defineProperty(G,"__esModule",{value:!0}),G.detectAllUndirectedCycle=G.detectAllDirectedCycle=G.detectAllCycles=G.default=void 0;var st=T(ut(45891)),tt=X(ut(759527)),Q=ut(770643);function J(S){if(typeof WeakMap!="function")return null;var I=new WeakMap,D=new WeakMap;return(J=function(y){return y?D:I})(S)}function X(S,I){if(!I&&S&&S.__esModule)return S;if(S===null||wt(S)!=="object"&&typeof S!="function")return{default:S};var D=J(I);if(D&&D.has(S))return D.get(S);var P={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in S)if(v!=="default"&&Object.prototype.hasOwnProperty.call(S,v)){var K=y?Object.getOwnPropertyDescriptor(S,v):null;K&&(K.get||K.set)?Object.defineProperty(P,v,K):P[v]=S[v]}return P.default=S,D&&D.set(S,P),P}function T(S){return S&&S.__esModule?S:{default:S}}var M=function(I){var D=null,P=I.nodes,y=P===void 0?[]:P,v={},K={},R={},B={};y.forEach(function(q){K[q.id]=q});for(var Y={enter:function(H){var et=H.current,ct=H.previous;if(R[et]){D={};for(var at=et,St=ct;St!==et;)D[at]=St,at=St,St=v[St];D[at]=St}else R[et]=et,delete K[et],v[et]=ct},leave:function(H){var et=H.current;B[et]=et,delete R[et]},allowTraversal:function(H){var et=H.next;return D?!1:!B[et]}};Object.keys(K).length;){var W=Object.keys(K)[0];(0,st.default)(I,W,Y)}return D},C=function(I,D,P){var y,v;P===void 0&&(P=!0);for(var K=[],R=(0,tt.default)(I,!1),B=0,Y=R;B<Y.length;B++){var W=Y[B];if(W.length)for(var q=W[0],H=q.id,et=[q],ct=(y={},y[H]=q,y),at=(v={},v[H]=new Set,v);et.length>0;)for(var St=et.pop(),bt=St.id,zt=(0,Q.getNeighbors)(bt,I.edges),kt=function(gt){var Vt,re=zt[gt],It=I.nodes.find(function(Ht){return Ht.id===re});if(re===bt)K.push((Vt={},Vt[re]=St,Vt));else if(!(re in at))ct[re]=St,et.push(It),at[re]=new Set([St]);else if(!at[bt].has(It)){for(var Wt=!0,$t=[It,St],ae=ct[bt];at[re].size&&!at[re].has(ae)&&($t.push(ae),ae!==ct[ae.id]);)ae=ct[ae.id];if($t.push(ae),D&&P?(Wt=!1,$t.findIndex(function(Ht){return D.indexOf(Ht.id)>-1})>-1&&(Wt=!0)):D&&!P&&$t.findIndex(function(Ht){return D.indexOf(Ht.id)>-1})>-1&&(Wt=!1),Wt){for(var Bt={},Ot=1;Ot<$t.length;Ot+=1)Bt[$t[Ot-1].id]=$t[Ot];$t.length&&(Bt[$t[$t.length-1].id]=$t[0]),K.push(Bt)}at[re].add(St)}},Kt=0;Kt<zt.length;Kt+=1)kt(Kt)}return K};G.detectAllUndirectedCycle=C;var _=function(I,D,P){P===void 0&&(P=!0);for(var y=[],v=new Set,K=[],R=[],B={},Y={},W=function(ae){for(var Bt=[ae];Bt.length>0;){var Ot=Bt.pop();v.has(Ot)&&(v.delete(Ot),K[Ot.id].forEach(function(Ht){Bt.push(Ht)}),K[Ot.id].clear())}},q=function $t(ae,Bt,Ot){var Ht=!1;if(D&&P===!1&&D.indexOf(ae.id)>-1)return Ht;y.push(ae),v.add(ae);for(var pe=Ot[ae.id],ve=0;ve<pe.length;ve+=1){var Tt=B[pe[ve]];if(Tt===Bt){for(var Zt={},Ce=1;Ce<y.length;Ce+=1)Zt[y[Ce-1].id]=y[Ce];y.length&&(Zt[y[y.length-1].id]=y[0]),R.push(Zt),Ht=!0}else v.has(Tt)||$t(Tt,Bt,Ot)&&(Ht=!0)}if(Ht)W(ae);else for(var ve=0;ve<pe.length;ve+=1){var Tt=B[pe[ve]];K[Tt.id].has(ae)||K[Tt.id].add(ae)}return y.pop(),Ht},H=I.nodes,et=H===void 0?[]:H,ct=0;ct<et.length;ct+=1){var at=et[ct],St=at.id;Y[St]=ct,B[ct]=at}if(D&&P)for(var bt=function(ae){var Bt=D[ae];Y[et[ae].id]=Y[Bt],Y[Bt]=0,B[0]=et.find(function(Ot){return Ot.id===Bt}),B[Y[et[ae].id]]=et[ae]},ct=0;ct<D.length;ct++)bt(ct);for(var zt=function(ae){for(var Bt,Ot,Ht=1/0,pe=0;pe<ae.length;pe+=1)for(var ve=ae[pe],Tt=0;Tt<ve.length;Tt++){var Zt=Y[ve[Tt].id];Zt<Ht&&(Ht=Zt,Ot=pe)}for(var Ce=ae[Ot],Ut=[],pe=0;pe<Ce.length;pe+=1){var se=Ce[pe];Ut[se.id]=[];for(var _e=0,$e=(0,Q.getNeighbors)(se.id,I.edges,"target").filter(function(Yt){return Ce.map(function(Mr){return Mr.id}).indexOf(Yt)>-1});_e<$e.length;_e++){var fr=$e[_e];fr===se.id&&!(P===!1&&D.indexOf(se.id)>-1)?R.push((Bt={},Bt[se.id]=se,Bt)):Ut[se.id].push(Y[fr])}}return{component:Ce,adjList:Ut,minIdx:Ht}},kt=0;kt<et.length;){var Kt=et.filter(function($t){return Y[$t.id]>=kt}),it=(0,tt.detectStrongConnectComponents)({nodes:Kt,edges:I.edges}).filter(function($t){return $t.length>1});if(it.length===0)break;var gt=zt(it),Vt=gt.minIdx,re=gt.adjList,It=gt.component;if(It.length>1){It.forEach(function($t){K[$t.id]=new Set});var Wt=B[Vt];if(D&&P&&D.indexOf(Wt.id)===-1)return R;q(Wt,Wt,re),kt=Vt+1}else break}return R};G.detectAllDirectedCycle=_;var b=function(I,D,P,y){return y===void 0&&(y=!0),D?_(I,P,y):C(I,P,y)};G.detectAllCycles=b;var L=M;G.default=L},45891:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=Q;var wt=ut(770643);function st(J){J===void 0&&(J={});var X=J,T=function(){},M=function(){var C={};return function(_){var b=_.next;return C[b]?!1:(C[b]=!0,!0)}}();return X.allowTraversal=J.allowTraversal||M,X.enter=J.enter||T,X.leave=J.leave||T,X}function tt(J,X,T,M,C){C===void 0&&(C=!0),M.enter({current:X,previous:T});var _=J.edges,b=_===void 0?[]:_;(0,wt.getNeighbors)(X,b,C?"target":void 0).forEach(function(L){M.allowTraversal({previous:T,current:X,next:L})&&tt(J,L,X,M,C)}),M.leave({current:X,previous:T})}function Q(J,X,T,M){M===void 0&&(M=!0),tt(J,X,"",st(T),M)}},878089:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=ut(185524),st=ut(413810),tt=ut(770643),Q=function(C,_,b){for(var L=1/0,S,I=0;I<_.length;I++){var D=_[I].id;!b[D]&&C[D]<=L&&(L=C[D],S=_[I])}return S},J=function(C,_,b,L){var S=C.nodes,I=S===void 0?[]:S,D=C.edges,P=D===void 0?[]:D,y=[],v={},K={},R={};I.forEach(function(ct,at){var St=ct.id;y.push(St),K[St]=1/0,St===_&&(K[St]=0)});for(var B=I.length,Y=function(at){var St=Q(K,I,v),bt=St.id;if(v[bt]=!0,K[bt]===1/0)return"continue";var zt=[];b?zt=(0,tt.getOutEdgesNodeId)(bt,P):zt=(0,tt.getEdgesByNodeId)(bt,P),zt.forEach(function(kt){var Kt=kt.target,it=kt.source,gt=Kt===bt?it:Kt,Vt=L&&kt[L]?kt[L]:1;K[gt]>K[St.id]+Vt?(K[gt]=K[St.id]+Vt,R[gt]=[St.id]):K[gt]===K[St.id]+Vt&&R[gt].push(St.id)})},W=0;W<B;W++)Y(W);R[_]=[_];var q={};for(var H in K)K[H]!==1/0&&T(_,H,R,q);var et={};for(var H in q)et[H]=q[H][0];return{length:K,path:et,allPath:q}},X=J;G.default=X;function T(M,C,_,b){if(M===C)return[M];if(b[C])return b[C];for(var L=[],S=0,I=_[C];S<I.length;S++){var D=I[S],P=T(M,D,_,b);if(!P)return;for(var y=0,v=P;y<v.length;y++){var K=v[y];(0,st.isArray)(K)?L.push((0,wt.__spreadArray)((0,wt.__spreadArray)([],K,!0),[C],!1)):L.push([K,C])}}return b[C]=L,b[C]}},241727:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.findShortestPath=G.findAllPath=void 0;var wt=tt(ut(878089)),st=ut(770643);function tt(X){return X&&X.__esModule?X:{default:X}}var Q=function(T,M,C,_,b){var L=(0,wt.default)(T,M,_,b),S=L.length,I=L.path,D=L.allPath;return{length:S[C],path:I[C],allPath:D[C]}};G.findShortestPath=Q;var J=function(T,M,C,_){var b;if(M===C)return[[M]];var L=T.edges,S=L===void 0?[]:L,I=[M],D=(b={},b[M]=!0,b),P=[],y=[],v=_?(0,st.getNeighbors)(M,S,"target"):(0,st.getNeighbors)(M,S);for(P.push(v);I.length>0&&P.length>0;){var K=P[P.length-1];if(K.length){var R=K.shift();R&&(I.push(R),D[R]=!0,v=_?(0,st.getNeighbors)(R,S,"target"):(0,st.getNeighbors)(R,S),P.push(v.filter(function(W){return!D[W]})))}else{var B=I.pop();D[B]=!1,P.pop();continue}if(I[I.length-1]===C){var Y=I.map(function(q){return q});y.push(Y);var B=I.pop();D[B]=!1,P.pop()}}return y};G.findAllPath=J},975033:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=st(ut(62238));function st(J){return J&&J.__esModule?J:{default:J}}var tt=function(X,T){for(var M=(0,wt.default)(X,T),C=[],_=M.length,b=0;b<_;b+=1){C[b]=[];for(var L=0;L<_;L+=1)b===L?C[b][L]=0:M[b][L]===0||!M[b][L]?C[b][L]=1/0:C[b][L]=M[b][L]}for(var S=0;S<_;S+=1)for(var b=0;b<_;b+=1)for(var L=0;L<_;L+=1)C[b][L]>C[b][S]+C[S][L]&&(C[b][L]=C[b][S]+C[S][L]);return C},Q=tt;G.default=Q},821146:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=ut(413810),st=ut(368575),tt=function(){function L(S,I,D,P,y){this.fromNode=S,this.toNode=I,this.nodeEdgeNodeLabel={nodeLabel1:D||st.VACANT_NODE_LABEL,edgeLabel:P||st.VACANT_EDGE_LABEL,nodeLabel2:y||st.VACANT_NODE_LABEL}}return L.prototype.equalTo=function(S){return this.fromNode===S.formNode&&this.toNode===S.toNode&&this.nodeEdgeNodeLabel===S.nodeEdgeNodeLabel},L.prototype.notEqualTo=function(S){return!this.equalTo(S)},L}(),Q=function(){function L(){this.rmpath=[],this.dfsEdgeList=[]}return L.prototype.equalTo=function(S){var I=this.dfsEdgeList.length,D=S.length;if(I!==D)return!1;for(var P=0;P<I;P++)if(this.dfsEdgeList[P]!==S[P])return!1;return!0},L.prototype.notEqualTo=function(S){return!this.equalTo(S)},L.prototype.pushBack=function(S,I,D,P,y){return this.dfsEdgeList.push(new tt(S,I,D,P,y)),this.dfsEdgeList},L.prototype.toGraph=function(S,I){S===void 0&&(S=st.VACANT_GRAPH_ID),I===void 0&&(I=!1);var D=new st.Graph(S,!0,I);return this.dfsEdgeList.forEach(function(P){var y=P.fromNode,v=P.toNode,K=P.nodeEdgeNodeLabel,R=K.nodeLabel1,B=K.edgeLabel,Y=K.nodeLabel2;R!==st.VACANT_NODE_LABEL&&D.addNode(y,R),Y!==st.VACANT_NODE_LABEL&&D.addNode(v,Y),R!==st.VACANT_NODE_LABEL&&Y!==R&&D.addEdge(void 0,y,v,B)}),D},L.prototype.buildRmpath=function(){this.rmpath=[];for(var S=void 0,I=this.dfsEdgeList.length,D=I-1;D>=0;D--){var P=this.dfsEdgeList[D],y=P.fromNode,v=P.toNode;y<v&&(S===void 0||v===S)&&(this.rmpath.push(D),S=y)}return this.rmpath},L.prototype.getNodeNum=function(){var S={};return this.dfsEdgeList.forEach(function(I){S[I.fromNode]||(S[I.fromNode]=!0),S[I.toNode]||(S[I.toNode]=!0)}),Object.keys(S).length},L}(),J=function(){function L(S){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!S){for(;S;){var I=S.edge;this.edges.push(I),this.nodesUsed[I.from]=1,this.nodesUsed[I.to]=1,this.edgesUsed[I.id]=1,S=S.preNode}this.edges=this.edges.reverse()}}return L.prototype.hasNode=function(S){return this.nodesUsed[S.id]===1},L.prototype.hasEdge=function(S){return this.edgesUsed[S.id]===1},L}(),X=function(){function L(S){var I=S.graphs,D=S.minSupport,P=D===void 0?2:D,y=S.minNodeNum,v=y===void 0?1:y,K=S.maxNodeNum,R=K===void 0?4:K,B=S.top,Y=B===void 0?10:B,W=S.directed,q=W===void 0?!1:W,H=S.verbose,et=H===void 0?!1:H;this.graphs=I,this.dfsCode=new Q,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=P,this.top=Y,this.directed=q,this.counter=0,this.maxNodeNum=R,this.minNodeNum=v,this.verbose=et,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return L.prototype.findForwardRootEdges=function(S,I){var D=this,P=[],y=S.nodeMap;return I.edges.forEach(function(v){(D.directed||I.label<=y[v.to].label)&&P.push(v)}),P},L.prototype.findBackwardEdge=function(S,I,D,P){if(!this.directed&&I===D)return null;for(var y=S.nodeMap,v=y[D.to],K=v.edges,R=K.length,B=0;B<R;B++){var Y=K[B];if(!(P.hasEdge(Y)||Y.to!==I.from)){if(this.directed){if(y[I.from].label<y[D.to].label||y[I.from].label===y[D.to].label&&I.label<=Y.label)return Y}else if(I.label<Y.label||I.label===Y.label&&y[I.to].label<=y[D.to].label)return Y}}return null},L.prototype.findForwardPureEdges=function(S,I,D,P){for(var y=[],v=I.to,K=S.nodeMap[v].edges,R=K.length,B=0;B<R;B++){var Y=K[B],W=S.nodeMap[Y.to];D<=W.label&&!P.hasNode(W)&&y.push(Y)}return y},L.prototype.findForwardRmpathEdges=function(S,I,D,P){for(var y=[],v=S.nodeMap,K=v[I.to].label,R=v[I.from],B=R.edges,Y=B.length,W=0;W<Y;W++){var q=B[W],H=v[q.to].label;I.to===q.to||D>H||P.hasNode(v[q.to])||(I.label<q.label||I.label===q.label&&K<=H)&&y.push(q)}return y},L.prototype.getSupport=function(S){var I={};return S.forEach(function(D){I[D.graphId]||(I[D.graphId]=!0)}),Object.keys(I).length},L.prototype.findMinLabel=function(S){var I=void 0;return Object.keys(S).forEach(function(D){var P=S[D],y=P.nodeLabel1,v=P.edgeLabel,K=P.nodeLabel2;if(!I){I={nodeLabel1:y,edgeLabel:v,nodeLabel2:K};return}(y<I.nodeLabel1||y===I.nodeLabel1&&v<I.edgeLabel||y===I.nodeLabel1&&v===I.edgeLabel&&K<I.nodeLabel2)&&(I={nodeLabel1:y,edgeLabel:v,nodeLabel2:K})}),I},L.prototype.isMin=function(){var S=this,I=this.dfsCode;if(this.verbose&&console.log("isMin checking",I),I.dfsEdgeList.length===1)return!0;var D=this.directed,P=I.toGraph(st.VACANT_GRAPH_ID,D),y=P.nodeMap,v=new Q,K={};P.nodes.forEach(function(W){var q=S.findForwardRootEdges(P,W);q.forEach(function(H){var et=y[H.to],ct="".concat(W.label,"-").concat(H.label,"-").concat(et.label);K[ct]||(K[ct]={projected:[],nodeLabel1:W.label,edgeLabel:H.label,nodeLabel2:et.label});var at={graphId:P.id,edge:H,preNode:null};K[ct].projected.push(at)})});var R=this.findMinLabel(K);if(R){v.dfsEdgeList.push(new tt(0,1,R.nodeLabel1,R.edgeLabel,R.nodeLabel2));var B=function W(q){for(var H=v.buildRmpath(),et=v.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ct=v.dfsEdgeList[H[0]].toNode,at={},St=!1,bt=0,zt=D?-1:0,kt=function(pe){if(St)return"break";q.forEach(function(ve){var Tt=new J(ve),Zt=S.findBackwardEdge(P,Tt.edges[H[pe]],Tt.edges[H[0]],Tt);Zt&&(at[Zt.label]||(at[Zt.label]={projected:[],edgeLabel:Zt.label}),at[Zt.label].projected.push({graphId:P.id,edge:at,preNode:ve}),bt=v.dfsEdgeList[H[pe]].fromNode,St=!0)})},Kt=H.length-1;Kt>zt;Kt--){var it=kt(Kt);if(it==="break")break}if(St){var gt=S.findMinLabel(at);v.dfsEdgeList.push(new tt(ct,bt,st.VACANT_NODE_LABEL,gt.edgeLabel,st.VACANT_NODE_LABEL));var Vt=v.dfsEdgeList.length-1;return S.dfsCode.dfsEdgeList[Vt]!==v.dfsEdgeList[Vt]?!1:W(at[gt.edgeLabel].projected)}var re={};St=!1;var It=0;q.forEach(function(Ht){var pe=new J(Ht),ve=S.findForwardPureEdges(P,pe.edges[H[0]],et,pe);ve.length>0&&(St=!0,It=ct,ve.forEach(function(Tt){var Zt="".concat(Tt.label,"-").concat(y[Tt.to].label);re[Zt]||(re[Zt]={projected:[],edgeLabel:Tt.label,nodeLabel2:y[Tt.to].label}),re[Zt].projected.push({graphId:P.id,edge:Tt,preNode:Ht})}))});for(var Wt=H.length,$t=function(pe){if(St)return"break";var ve=H[pe];q.forEach(function(Tt){var Zt=new J(Tt),Ce=S.findForwardRmpathEdges(P,Zt.edges[ve],et,Zt);Ce.length>0&&(St=!0,It=v.dfsEdgeList[ve].fromNode,Ce.forEach(function(Ut){var se="".concat(Ut.label,"-").concat(y[Ut.to].label);re[se]||(re[se]={projected:[],edgeLabel:Ut.label,nodeLabel2:y[Ut.to].label}),re[se].projected.push({graphId:P.id,edge:Ut,preNode:Tt})}))})},Kt=0;Kt<Wt;Kt++){var ae=$t(Kt);if(ae==="break")break}if(!St)return!0;var Bt=S.findMinLabel(re);v.dfsEdgeList.push(new tt(It,ct+1,st.VACANT_NODE_LABEL,Bt.edgeLabel,Bt.nodeLabel2));var Ot=v.dfsEdgeList.length-1;return I.dfsEdgeList[Ot]!==v.dfsEdgeList[Ot]?!1:W(re["".concat(Bt.edgeLabel,"-").concat(Bt.nodeLabel2)].projected)},Y="".concat(R.nodeLabel1,"-").concat(R.edgeLabel,"-").concat(R.nodeLabel2);return B(K[Y].projected)}},L.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var S=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,wt.clone)(S))}},L.prototype.subGraphMining=function(S){var I=this,D=this.getSupport(S);if(!(D<this.minSupport)&&this.isMin()){this.report();var P=this.dfsCode.getNodeNum(),y=this.dfsCode.buildRmpath(),v=this.dfsCode.dfsEdgeList[y[0]].toNode,K=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,R={},B={};S.forEach(function(Y){for(var W=I.graphs[Y.graphId],q=W.nodeMap,H=new J(Y),et=y.length-1;et>=0;et--){var ct=I.findBackwardEdge(W,H.edges[y[et]],H.edges[y[0]],H);if(ct){var at="".concat(I.dfsCode.dfsEdgeList[y[et]].fromNode,"-").concat(ct.label);B[at]||(B[at]={projected:[],toNodeId:I.dfsCode.dfsEdgeList[y[et]].fromNode,edgeLabel:ct.label}),B[at].projected.push({graphId:Y.graphId,edge:ct,preNode:Y})}}if(!(P>=I.maxNodeNum)){var St=I.findForwardPureEdges(W,H.edges[y[0]],K,H);St.forEach(function(zt){var kt="".concat(v,"-").concat(zt.label,"-").concat(q[zt.to].label);R[kt]||(R[kt]={projected:[],fromNodeId:v,edgeLabel:zt.label,nodeLabel2:q[zt.to].label}),R[kt].projected.push({graphId:Y.graphId,edge:zt,preNode:Y})});for(var bt=function(kt){var Kt=I.findForwardRmpathEdges(W,H.edges[y[kt]],K,H);Kt.forEach(function(it){var gt="".concat(I.dfsCode.dfsEdgeList[y[kt]].fromNode,"-").concat(it.label,"-").concat(q[it.to].label);R[gt]||(R[gt]={projected:[],fromNodeId:I.dfsCode.dfsEdgeList[y[kt]].fromNode,edgeLabel:it.label,nodeLabel2:q[it.to].label}),R[gt].projected.push({graphId:Y.graphId,edge:it,preNode:Y})})},et=0;et<y.length;et++)bt(et)}}),Object.keys(B).forEach(function(Y){var W=B[Y],q=W.toNodeId,H=W.edgeLabel;I.dfsCode.dfsEdgeList.push(new tt(v,q,"-1",H,"-1")),I.subGraphMining(B[Y].projected),I.dfsCode.dfsEdgeList.pop()}),Object.keys(R).forEach(function(Y){var W=R[Y],q=W.fromNodeId,H=W.edgeLabel,et=W.nodeLabel2;I.dfsCode.dfsEdgeList.push(new tt(q,v+1,st.VACANT_NODE_LABEL,H,et)),I.subGraphMining(R[Y].projected),I.dfsCode.dfsEdgeList.pop()})}},L.prototype.generate1EdgeFrequentSubGraphs=function(){var S=this.graphs,I=this.directed,D=this.minSupport,P=this.frequentSize1Subgraphs,y={},v={},K={},R={};return Object.keys(S).forEach(function(B){var Y=S[B],W=Y.nodeMap;Y.nodes.forEach(function(q,H){var et=q.label,ct="".concat(B,"-").concat(et);if(!K[ct]){var at=y[et]||0;at++,y[et]=at}K[ct]={graphKey:B,label:et},q.edges.forEach(function(St){var bt=et,zt=W[St.to].label;if(!I&&bt>zt){var kt=zt;zt=bt,bt=kt}var Kt=St.label,it="".concat(B,"-").concat(bt,"-").concat(Kt,"-").concat(zt),gt="".concat(bt,"-").concat(Kt,"-").concat(zt);if(!v[gt]){var Vt=v[gt]||0;Vt++,v[gt]=Vt}R[it]={graphId:B,nodeLabel1:bt,edgeLabel:Kt,nodeLabel2:zt}})})}),Object.keys(y).forEach(function(B){var Y=y[B];if(!(Y<D)){var W={nodes:[],edges:[]};W.nodes.push({id:"0",label:B}),P.push(W)}}),P},L.prototype.run=function(){var S=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var I=this.graphs,D=this.directed,P={};Object.keys(I).forEach(function(y){var v=I[y],K=v.nodeMap;v.nodes.forEach(function(R){var B=S.findForwardRootEdges(v,R);B.forEach(function(Y){var W=K[Y.to],q="".concat(R.label,"-").concat(Y.label,"-").concat(W.label);P[q]||(P[q]={projected:[],nodeLabel1:R.label,edgeLabel:Y.label,nodeLabel2:W.label});var H={graphId:y,edge:Y,preNode:null};P[q].projected.push(H)})})}),Object.keys(P).forEach(function(y){var v=P[y],K=v.projected,R=v.nodeLabel1,B=v.edgeLabel,Y=v.nodeLabel2;S.dfsCode.dfsEdgeList.push(new tt(0,1,R,B,Y)),S.subGraphMining(K),S.dfsCode.dfsEdgeList.pop()})}},L}(),T=function(S,I,D,P){var y={};return Object.keys(S).forEach(function(v,K){var R=S[v],B=new st.Graph(K,!0,I),Y={};R.nodes.forEach(function(W,q){B.addNode(q,W[D]),Y[W.id]=q}),R.edges.forEach(function(W,q){var H=Y[W.source],et=Y[W.target];B.addEdge(-1,H,et,W[P])}),B&&B.getNodeNum()&&(y[B.id]=B)}),y},M=function(S,I,D){var P=[];return S.forEach(function(y){var v={nodes:[],edges:[]};y.nodes.forEach(function(K){var R;v.nodes.push((R={id:"".concat(K.id)},R[I]=K.label,R))}),y.edges.forEach(function(K){var R;v.edges.push((R={source:"".concat(K.from),target:"".concat(K.to)},R[D]=K.label,R))}),P.push(v)}),P},C="cluster",_=function(S){var I=S.graphs,D=S.directed,P=D===void 0?!1:D,y=S.nodeLabelProp,v=y===void 0?C:y,K=S.edgeLabelProp,R=K===void 0?C:K,B=T(I,P,v,R),Y=S.minSupport,W=S.maxNodeNum,q=S.minNodeNum,H=S.verbose,et=S.top,ct={graphs:B,minSupport:Y,maxNodeNum:W,minNodeNum:q,top:et,verbose:H,directed:P},at=new X(ct);at.run();var St=M(at.frequentSubgraphs,v,R);return St},b=_;G.default=b},368575:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.VACANT_NODE_LABEL=G.VACANT_NODE_ID=G.VACANT_GRAPH_ID=G.VACANT_EDGE_LABEL=G.VACANT_EDGE_ID=G.Node=G.Graph=G.Edge=G.AUTO_EDGE_ID=void 0;var ut=-1;G.VACANT_EDGE_ID=ut;var wt=-1;G.VACANT_NODE_ID=wt;var st="-1";G.VACANT_EDGE_LABEL=st;var tt="-1";G.VACANT_NODE_LABEL=tt;var Q=-1;G.VACANT_GRAPH_ID=Q;var J="-1";G.AUTO_EDGE_ID=J;var X=function(){function C(_,b,L,S){_===void 0&&(_=ut),b===void 0&&(b=wt),L===void 0&&(L=wt),S===void 0&&(S=st),this.id=_,this.from=b,this.to=L,this.label=S}return C}();G.Edge=X;var T=function(){function C(_,b){_===void 0&&(_=wt),b===void 0&&(b=tt),this.id=_,this.label=b,this.edges=[],this.edgeMap={}}return C.prototype.addEdge=function(_){this.edges.push(_),this.edgeMap[_.id]=_},C}();G.Node=T;var M=function(){function C(_,b,L){_===void 0&&(_=wt),b===void 0&&(b=!0),L===void 0&&(L=!1),this.id=_,this.edgeIdAutoIncrease=b,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=L}return C.prototype.getNodeNum=function(){return this.nodes.length},C.prototype.addNode=function(_,b){if(!this.nodeMap[_]){var L=new T(_,b);this.nodes.push(L),this.nodeMap[_]=L,this.nodeLabelMap[b]||(this.nodeLabelMap[b]=[]),this.nodeLabelMap[b].push(_)}},C.prototype.addEdge=function(_,b,L,S){if((this.edgeIdAutoIncrease||_===void 0)&&(_=this.counter++),!(this.nodeMap[b]&&this.nodeMap[L]&&this.nodeMap[L].edgeMap[_])){var I=new X(_,b,L,S);if(this.edges.push(I),this.edgeMap[_]=I,this.nodeMap[b].addEdge(I),this.edgeLabelMap[S]||(this.edgeLabelMap[S]=[]),this.edgeLabelMap[S].push(I),!this.directed){var D=new X(_,L,b,S);this.nodeMap[L].addEdge(D),this.edgeLabelMap[S].push(D)}}},C}();G.Graph=M},882812:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=ut(185524),st=X(ut(975033)),tt=X(ut(821146)),Q=X(ut(878089)),J=ut(770643);function X(R){return R&&R.__esModule?R:{default:R}}var T=function(B,Y,W,q){W===void 0&&(W="cluster"),q===void 0&&(q=2);var H=[],et=B.nodes;return Y.forEach(function(ct,at){H.push(M(et,ct,at,W,q))}),H},M=function(B,Y,W,q,H){var et=[W],ct=[],at={};return Y.forEach(function(St,bt){if(St<=H&&W!==bt){et.push(bt),ct.push(B[bt]);var zt=B[bt][q];at[zt]?(at[zt].count++,at[zt].dists.push(St)):at[zt]={count:1,dists:[St]}}}),Object.keys(at).forEach(function(St){at[St].dists=at[St].dists.sort(function(bt,zt){return bt-zt})}),{nodeIdx:W,nodeId:B[W].id,nodeIdxs:et,neighbors:ct,neighborNum:et.length-1,nodeLabelCountMap:at}},C=function(B,Y,W,q,H){var et=Math.ceil(W/Y),ct={},at=0;return q.forEach(function(St,bt){for(var zt=0,kt=0,Kt=St.nodeIdxs,it=St.neighborNum-1;zt<et;){for(var gt=Kt[1+Math.floor(Math.random()*it)],Vt=0;(ct["".concat(bt,"-").concat(gt)]||ct["".concat(gt,"-").concat(bt)])&&(gt=Math.floor(Math.random()*Y),Vt++,!(Vt>2*Y)););if(Vt<2*Y&&(ct["".concat(bt,"-").concat(gt)]={start:bt,end:gt,distance:H[bt][gt]},zt++,at++,at>=W))return ct;if(kt++,kt>2*Y)break}if(zt<et){var re=et-zt;et=(et+re)/(Y-bt-1)}}),ct},_=function(B,Y,W,q){var H=W.nodes;return q||(q={}),Object.keys(B).forEach(function(et){var ct,at;if(!(q&&q[et])){q[et]={nodes:[],edges:[]};var St=B[et],bt=(ct=Y[St.start])===null||ct===void 0?void 0:ct.nodeIdxs,zt=(at=Y[St.end])===null||at===void 0?void 0:at.nodeIdxs;if(!(!bt||!zt)){var kt=new Set(zt),Kt=bt.filter(function(It){return kt.has(It)});if(!(!Kt||!Kt.length)){for(var it={},gt=Kt.length,Vt=0;Vt<gt;Vt++){var re=H[Kt[Vt]];q[et].nodes.push(re),it[re.id]=!0}W.edges.forEach(function(It){it[It.source]&&it[It.target]&&q[et].edges.push(It)})}}}}),q},b=function(B,Y,W,q){var H,et,ct={};B.nodes.forEach(function(St){ct[St.id]=St});var at=0;return!(!((H=Y==null?void 0:Y.edges)===null||H===void 0)&&H.length)||((et=Y==null?void 0:Y.nodes)===null||et===void 0?void 0:et.length)<2?0:(B.edges.forEach(function(St){var bt=ct[St.source][W],zt=ct[St.target][W],kt=Y==null?void 0:Y.nodes[0][W],Kt=Y==null?void 0:Y.nodes[1][W],it=Y==null?void 0:Y.edges[0][q];St[q]===it&&(bt===kt&&zt===Kt||bt===Kt&&zt===kt)&&at++}),at)},L=function(B,Y,W){for(var q=1/0,H=0,et=function(St){var bt=B[St],zt=Object.keys(bt).sort(function(It,Wt){return bt[It]-bt[Wt]}),kt=10,Kt=[];zt.forEach(function(It,Wt){Kt[Wt%kt]||(Kt[Wt%kt]={graphs:[],totalCount:0,aveCount:0}),Kt[Wt%kt].graphs.push(It),Kt[Wt%kt].totalCount+=bt[It]});var it=0,gt=[];Kt.forEach(function(It){var Wt=It.totalCount/It.graphs.length;It.aveCount=Wt,gt.push(Wt);var $t=0,ae=It.length;It.graphs.forEach(function(Bt,Ot){var Ht=bt[Bt];It.graphs.forEach(function(pe,ve){Ot!==ve&&($t+=Math.abs(Ht-bt[pe]))})}),$t/=ae*(ae-1)/2,it+=$t}),it/=Kt.length;var Vt=0;gt.forEach(function(It,Wt){gt.forEach(function($t,ae){Wt!==ae&&(Vt+=Math.abs(It-$t))}),Vt/=gt.length*(gt.length-1)/2});var re=Vt-it;q<re&&(q=re,H=St)},ct=0;ct<Y;ct++)et(ct);return{structure:W[H],structureCountMap:B[H]}},S=function(B,Y){var W={},q={};return B.forEach(function(H,et){W[H.id]={idx:et,node:H,degree:0,inDegree:0,outDegree:0};var ct=H[Y];q[ct]||(q[ct]=[]),q[ct].push(H)}),{nodeMap:W,nodeLabelMap:q}},I=function(B,Y,W){var q={},H={};return B.forEach(function(et,ct){q["".concat(J.uniqueId)]={idx:ct,edge:et};var at=et[Y];H[at]||(H[at]=[]),H[at].push(et);var St=W[et.source];St&&(St.degree++,St.outDegree++);var bt=W[et.target];bt&&(bt.degree++,bt.inDegree++)}),{edgeMap:q,edgeLabelMap:H}},D=function(B,Y,W){var q=Y.length,H={};return Y.forEach(function(et,ct){for(var at=W?0:ct+1,St=B[ct].id,bt=at;bt<q;bt++)if(ct!==bt){var zt=B[bt].id,kt=et[bt];H["".concat(St,"-").concat(zt)]=kt,W||(H["".concat(zt,"-").concat(St)]=kt)}}),H},P=function(B,Y,W,q,H,et,ct,at,St,bt,zt){var kt,Kt="".concat(Y.id,"-").concat(W.id);if(bt&&bt[Kt])return bt[Kt];var it=zt?zt[Kt]:void 0;if(!it){var gt=(kt={},kt[Kt]={start:q[Y.id].idx,end:q[W.id].idx,distance:H},kt);zt=_(gt,et,B,zt),it=zt[Kt]}return b(it,ct,at,St)},y=function(B,Y,W,q){var H,et,ct,at=(H=B[Y])===null||H===void 0?void 0:H.degree,St=(et=B[Y])===null||et===void 0?void 0:et.inDegree,bt=(ct=B[Y])===null||ct===void 0?void 0:ct.outDegree;return B[Y]===void 0&&(at=1/0,St=1/0,bt=1/0,q[Y].forEach(function(zt){var kt=W[zt.id].degree;at>kt&&(at=kt);var Kt=W[zt.id].inDegree;St>Kt&&(St=Kt);var it=W[zt.id].outDegree;bt>it&&(bt=it)}),B[Y]={degree:at,inDegree:St,outDegree:bt}),{minPatternNodeLabelDegree:at,minPatternNodeLabelInDegree:St,minPatternNodeLabelOutDegree:bt}},v=function(B,Y,W,q,H,et,ct){var at;if(W===void 0&&(W=!1),et===void 0&&(et="cluster"),ct===void 0&&(ct="cluster"),!(!B||!B.nodes)){var St=B.nodes.length;if(St){var bt=(0,st.default)(B,W),zt=(0,st.default)(Y,W),kt=D(B.nodes,bt,W),Kt=D(Y.nodes,zt,W),it=S(B.nodes,et),gt=it.nodeMap,Vt=it.nodeLabelMap,re=S(Y.nodes,et),It=re.nodeMap,Wt=re.nodeLabelMap;I(B.edges,ct,gt);var $t=I(Y.edges,ct,It).edgeLabelMap,ae=[];zt==null||zt.forEach(function(An){ae=ae.concat(An)}),H||(H=Math.max.apply(Math,(0,wt.__spreadArray)((0,wt.__spreadArray)([],ae,!1),[2],!1))),q||(q=H);var Bt=T(B,bt,et,q),Ot=T(Y,zt,et,q),Ht=Math.min(100,St*(St-1)/2),pe=C(q,St,Ht,Bt,bt),ve=_(pe,Bt,B),Tt=10,Zt=1,Ce=1,Ut=4,se={graphs:ve,nodeLabelProp:et,edgeLabelProp:ct,minSupport:Zt,minNodeNum:Ce,maxNodeNum:Ut,directed:W},_e=(0,tt.default)(se).slice(0,Tt),$e=_e.length,fr=[];_e.forEach(function(An,ua){fr[ua]={},Object.keys(ve).forEach(function(ra){var Fn=ve[ra],ka=b(Fn,An,et,ct);fr[ua][ra]=ka})});var gr=L(fr,$e,_e),Yt=gr.structure,Mr=gr.structureCountMap,Ln=Y.nodes[0],Yn=[],Ra=(at=Y.nodes[0])===null||at===void 0?void 0:at[et],ba=-1/0;Y.nodes.forEach(function(An){var ua=An[et],ra=Vt[ua];(ra==null?void 0:ra.length)>ba&&(ba=ra.length,Yn=ra,Ra=ua,Ln=An)});var Ba={},xa={},ya={},Na={},Ta={},hr={};Object.keys(Wt).forEach(function(An,ua){Ta[An]=[],W&&(hr[An]=[]);var ra=-1/0,Fn=Wt[An],ka={};Fn.forEach(function(Je){var Pr=Kt["".concat(Ln.id,"-").concat(Je.id)];if(Pr&&Ta[An].push(Pr),ra<Pr&&(ra=Pr),ka["".concat(Ln.id,"-").concat(Je.id)]={start:0,end:It[Je.id].idx,distance:Pr},W){var Or=Kt["".concat(Je.id,"-").concat(Ln.id)];Or&&hr[An].push(Or)}}),Ta[An]=Ta[An].sort(function(Je,Pr){return Je-Pr}),W&&(hr[An]=hr[An].sort(function(Je,Pr){return Je-Pr})),xa=_(ka,Ot,Y,xa);var U=[];if(Object.keys(ka).forEach(function(Je){if(ya[Je]){U.push(ya[Je]);return}var Pr=xa[Je];ya[Je]=b(Pr,Yt,et,ct),U.push(ya[Je])}),U=U.sort(function(Je,Pr){return Pr-Je}),Na["".concat(Ln.id,"-").concat(An)]=U,An!==Ra)for(var Ve=(Yn==null?void 0:Yn.length)||0,we=function(Pr){var Or=Yn[Pr],rn=Bt[gt[Or.id].idx],fn=rn.nodeLabelCountMap[An],jr=Wt[An].length;if(!fn||fn.count<jr)return Yn.splice(Pr,1),"continue";for(var ht=!1,yt=0;yt<jr;yt++)if(fn.dists[yt]>Ta[An][yt]){ht=!0;break}if(ht)return Yn.splice(Pr,1),"continue";var O={};rn.neighbors.forEach(function(V){var Et=kt["".concat(Or.id,"-").concat(V.id)];O["".concat(Or.id,"-").concat(V.id)]={start:gt[Or.id].idx,end:gt[V.id].idx,distance:Et}}),ve=_(O,Bt,B,ve);var E=[];Object.keys(O).forEach(function(V){if(Mr[V]){E.push(Mr[V]);return}var Et=ve[V];Mr[V]=b(Et,Yt,et,ct),E.push(Mr[V])}),E=E.sort(function(V,Et){return Et-V});for(var w=!1,yt=0;yt<jr;yt++)if(E[yt]<U[yt]){w=!0;break}if(w)return Yn.splice(Pr,1),"continue"},er=Ve-1;er>=0;er--)we(er)});var Br=[];Yn==null||Yn.forEach(function(An){for(var ua=gt[An.id].idx,ra=M(B.nodes,bt[ua],ua,et,H),Fn=ra.neighbors,ka=Fn.length,U=!1,Ve=ka-1;Ve>=0;Ve--){if(Fn.length+1<Y.nodes.length){U=!0;return}var we=Fn[Ve],er=we[et];if(!Wt[er]||!Wt[er].length){Fn.splice(Ve,1);continue}if(!Ta[er]||!Ta[er].length){Fn.splice(Ve,1);continue}var Je="".concat(An.id,"-").concat(we.id),Pr=kt[Je],Or=Ta[er].length-1,rn=Ta[er][Or];if(Pr>rn){Fn.splice(Ve,1);continue}if(W){var fn="".concat(we.id,"-").concat(An.id),jr=kt[fn];Or=hr[er].length-1;var ht=hr[er][Or];if(jr>ht){Fn.splice(Ve,1);continue}}var yt=Mr[Je]?Mr[Je]:P(B,An,we,gt,Pr,Bt,Yt,et,ct,Mr,ve),O="".concat(Ln.id,"-").concat(er),E=Na[O][Na[O].length-1];if(yt<E){Fn.splice(Ve,1);continue}var w=y(Ba,er,It,Wt),V=w.minPatternNodeLabelDegree,Et=w.minPatternNodeLabelInDegree,Gt=w.minPatternNodeLabelOutDegree;if(gt[we.id].degree<V){Fn.splice(Ve,1);continue}}U||Br.push({nodes:[An].concat(Fn)})});var cn=(0,Q.default)(Y,Ln.id,!1).length,Cn={};W?(Object.keys(cn).forEach(function(An){var ua=It[An].node[et];Cn[ua]?Cn[ua].push(cn[An]):Cn[ua]=[cn[An]]}),Object.keys(Cn).forEach(function(An){Cn[An].sort(function(ua,ra){return ua-ra})})):Cn=Ta;for(var Qn=Br.length,Bn=function(ua){var ra=Br[ua],Fn=ra.nodes[0],ka={},U={};ra.nodes.forEach(function(Fr,ee){U[Fr.id]={idx:ee,node:Fr,degree:0,inDegree:0,outDegree:0};var Lt=Fr[et];ka[Lt]?ka[Lt]++:ka[Lt]=1});var Ve=[],we={};B.edges.forEach(function(Fr){U[Fr.source]&&U[Fr.target]&&(Ve.push(Fr),we[Fr[ct]]?we[Fr[ct]]++:we[Fr[ct]]=1,U[Fr.source].degree++,U[Fr.target].degree++,U[Fr.source].outDegree++,U[Fr.target].inDegree++)});for(var er=Object.keys($t).length,Je=!1,Pr=0;Pr<er;Pr++){var Or=Object.keys($t)[Pr];if(!we[Or]||we[Or]<$t[Or].length){Je=!0;break}}if(Je)return Br.splice(ua,1),"continue";var rn=Ve.length;if(rn<Y.edges.length)return Br.splice(ua,1),"break";for(var fn=!1,jr=function(ee){var Lt=Ve[ee],ue=Lt[ct],Ee=$t[ue];if(!Ee||!Ee.length)return we[ue]--,Ee&&we[ue]<Ee.length?(fn=!0,"break"):(Ve.splice(ee,1),U[Lt.source].degree--,U[Lt.target].degree--,U[Lt.source].outDegree--,U[Lt.target].inDegree--,"continue");var me=U[Lt.source].node[et],Ie=U[Lt.target].node[et],rr=!1;if(Ee.forEach(function(ir){var Zr=It[ir.source].node,En=It[ir.target].node;Zr[et]===me&&En[et]===Ie&&(rr=!0),!W&&Zr[et]===Ie&&En[et]===me&&(rr=!0)}),!rr)return we[ue]--,Ee&&we[ue]<Ee.length?(fn=!0,"break"):(Ve.splice(ee,1),U[Lt.source].degree--,U[Lt.target].degree--,U[Lt.source].outDegree--,U[Lt.target].inDegree--,"continue")},Pr=rn-1;Pr>=0;Pr--){var ht=jr(Pr);if(ht==="break")break}if(fn)return Br.splice(ua,1),"continue";ra.edges=Ve;var yt=(0,Q.default)(ra,ra.nodes[0].id,!1).length;if(Object.keys(yt).reverse().forEach(function(Fr){if(!(Fr===ra.nodes[0].id||fn)){if(yt[Fr]===1/0){var ee=U[Fr].node[et];if(ka[ee]--,ka[ee]<Wt[ee].length){fn=!0;return}var Lt=ra.nodes.indexOf(U[Fr].node);ra.nodes.splice(Lt,1),U[Fr]=void 0;return}var ue=gt[Fr].node[et];if(!Cn[ue]||!Cn[ue].length||yt[Fr]>Cn[ue][Cn[ue].length-1]){var ee=U[Fr].node[et];if(ka[ee]--,ka[ee]<Wt[ee].length){fn=!0;return}var Lt=ra.nodes.indexOf(U[Fr].node);ra.nodes.splice(Lt,1),U[Fr]=void 0}}}),fn)return Br.splice(ua,1),"continue";for(var O=!0,E=0;O&&!fn;){O=!1;var w=W?U[Fn.id].degree<It[Ln.id].degree||U[Fn.id].inDegree<It[Ln.id].inDegree||U[Fn.id].outDegree<It[Ln.id].outDegree:U[Fn.id].degree<It[Ln.id].degree;if(w){fn=!0;break}if(ka[Fn[et]]<Wt[Fn[et]].length){fn=!0;break}for(var V=ra.nodes.length,Et=V-1;Et>=0;Et--){var Gt=ra.nodes[Et],Dt=U[Gt.id].degree,ie=U[Gt.id].inDegree,Ge=U[Gt.id].outDegree,Te=Gt[et],ar=y(Ba,Te,It,Wt),Ur=ar.minPatternNodeLabelDegree,pr=ar.minPatternNodeLabelInDegree,nn=ar.minPatternNodeLabelOutDegree,kn=W?Dt<Ur||ie<pr||Ge<nn:Dt<Ur;if(kn){if(ka[Gt[et]]--,ka[Gt[et]]<Wt[Gt[et]].length){fn=!0;break}ra.nodes.splice(Et,1),U[Gt.id]=void 0,O=!0}}if(fn||!O&&E!==0)break;rn=Ve.length;for(var We=rn-1;We>=0;We--){var vr=Ve[We];if(!U[vr.source]||!U[vr.target]){Ve.splice(We,1);var Nr=vr[ct];if(we[Nr]--,U[vr.source]&&(U[vr.source].degree--,U[vr.source].outDegree--),U[vr.target]&&(U[vr.target].degree--,U[vr.target].inDegree--),$t[Nr]&&we[Nr]<$t[Nr].length){fn=!0;break}O=!0}}E++}if(fn||fn||ra.nodes.length<Y.nodes.length||Ve.length<Y.edges.length)return Br.splice(ua,1),"continue"},ta=Qn-1;ta>=0;ta--){var sa=Bn(ta);if(sa==="break")break}for(var Fa=Br.length,wa=function(ua){var ra=Br[ua],Fn={};ra.edges.forEach(function(Ve){var we="".concat(Ve.source,"-").concat(Ve.target,"-").concat(Ve.label);Fn[we]?Fn[we]++:Fn[we]=1});for(var ka=function(we){var er=Br[we],Je={};er.edges.forEach(function(Or){var rn="".concat(Or.source,"-").concat(Or.target,"-").concat(Or.label);Je[rn]?Je[rn]++:Je[rn]=1});var Pr=!0;Object.keys(Je).length!==Object.keys(Fn).length?Pr=!1:Object.keys(Fn).forEach(function(Or){Je[Or]!==Fn[Or]&&(Pr=!1)}),Pr&&Br.splice(we,1)},U=Fa-1;U>ua;U--)ka(U);Fa=Br.length},ta=0;ta<=Fa-1;ta++)wa(ta);return Br}}},K=v;G.default=K},505170:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=tt(ut(62238)),st=ut(770643);function tt(X){return X&&X.__esModule?X:{default:X}}var Q=function(T,M,C,_){M===void 0&&(M=!1),C===void 0&&(C="weight"),_===void 0&&(_=1e3);var b=T.nodes,L=b===void 0?[]:b,S=T.edges,I=S===void 0?[]:S,D={},P={};L.forEach(function(et,ct){var at=(0,st.uniqueId)();et.clusterId=at,D[at]={id:at,nodes:[et]},P[et.id]={node:et,idx:ct}});var y=(0,wt.default)(T,M),v=[],K={};y.forEach(function(et,ct){var at=0,St=L[ct].id;K[St]={},et.forEach(function(bt,zt){if(bt){at+=bt;var kt=L[zt].id;K[St][kt]=bt}}),v.push(at)});for(var R=0,B=function(){var ct=!1;if(L.forEach(function(at){var St={};Object.keys(K[at.id]).forEach(function(re){var It=K[at.id][re],Wt=P[re].node,$t=Wt.clusterId;St[$t]||(St[$t]=0),St[$t]+=It});var bt=-1/0,zt=[];if(Object.keys(St).forEach(function(re){bt<St[re]?(bt=St[re],zt=[re]):bt===St[re]&&zt.push(re)}),!(zt.length===1&&zt[0]===at.clusterId)){var kt=zt.indexOf(at.clusterId);if(kt>=0&&zt.splice(kt,1),zt&&zt.length){ct=!0;var Kt=D[at.clusterId],it=Kt.nodes.indexOf(at);Kt.nodes.splice(it,1);var gt=Math.floor(Math.random()*zt.length),Vt=D[zt[gt]];Vt.nodes.push(at),at.clusterId=Vt.id}}}),!ct)return"break";R++};R<_;){var Y=B();if(Y==="break")break}Object.keys(D).forEach(function(et){var ct=D[et];(!ct.nodes||!ct.nodes.length)&&delete D[et]});var W=[],q={};I.forEach(function(et){var ct=et.source,at=et.target,St=et[C]||1,bt=P[ct].node.clusterId,zt=P[at].node.clusterId,kt="".concat(bt,"---").concat(zt);if(q[kt])q[kt].weight+=St,q[kt].count++;else{var Kt={source:bt,target:zt,weight:St,count:1};q[kt]=Kt,W.push(Kt)}});var H=[];return Object.keys(D).forEach(function(et){H.push(D[et])}),{clusters:H,clusterEdges:W}},J=Q;G.default=J},135179:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=ut(413810),st=X(ut(62238)),tt=X(ut(29741)),Q=ut(103665),J=ut(526838);function X(b){return b&&b.__esModule?b:{default:b}}var T=function(L,S,I,D){for(var P=S.length,y=2*D,v=0,K=0;K<P;K++)for(var R=L[K].clusterId,B=0;B<P;B++){var Y=L[B].clusterId;if(R===Y){var W=S[K][B]||0,q=I[K]||0,H=I[B]||0;v+=W-q*H/y}}return v*=1/y,v},M=function(L,S){L===void 0&&(L=[]);for(var I=L.length,D=new tt.default([]),P=0;P<I;P++)D=D.add(new tt.default(S[P]));var y=D.avg(I);y.normalize();for(var v=0,P=0;P<I;P++){var K=new tt.default(S[P]),R=K.squareEuclideanDistance(y);v+=R}var B=[];L.forEach(function(){B.push([])});for(var P=0;P<I;P++){var K=new tt.default(S[P]);L[P].clusterInertial=0;for(var Y=0;Y<I;Y++){if(P===Y){B[P][Y]=0;continue}var W=new tt.default(S[Y]);B[P][Y]=K.squareEuclideanDistance(W),L[P].clusterInertial+=B[P][Y]}}for(var q=0,H=2*I*v,P=0;P<I;P++)for(var et=L[P].clusterId,Y=0;Y<I;Y++){var ct=L[Y].clusterId;if(!(P===Y||et!==ct)){var at=L[P].clusterInertial*L[Y].clusterInertial/Math.pow(H,2)-B[P][Y]/H;q+=at}}return Number(q.toFixed(4))},C=function(L,S,I,D,P,y,v,K,R){S===void 0&&(S=!1),I===void 0&&(I="weight"),D===void 0&&(D=1e-4),P===void 0&&(P=!1),y===void 0&&(y=void 0),v===void 0&&(v=[]),K===void 0&&(K=["id"]),R===void 0&&(R=1);var B=L.nodes,Y=B===void 0?[]:B,W=L.edges,q=W===void 0?[]:W,H=[];if(P){Y.forEach(function(ve,Tt){ve.properties=ve.properties||{},ve.originIndex=Tt});var et=[];Y.every(function(ve){return ve.hasOwnProperty("nodeType")})&&(et=Array.from(new Set(Y.map(function(ve){return ve.nodeType}))),Y.forEach(function(ve){ve.properties.nodeType=et.findIndex(function(Tt){return Tt===ve.nodeType})}));var ct=(0,Q.getAllProperties)(Y,y);H=(0,J.oneHot)(ct,v,K)}var at=1,St={},bt={};Y.forEach(function(ve,Tt){var Zt=String(at++);ve.clusterId=Zt,St[Zt]={id:Zt,nodes:[ve]},bt[ve.id]={node:ve,idx:Tt}});var zt=(0,st.default)(L,S),kt=[],Kt={},it=0;zt.forEach(function(ve,Tt){var Zt=0,Ce=Y[Tt].id;Kt[Ce]={},ve.forEach(function(Ut,se){if(Ut){Zt+=Ut;var _e=Y[se].id;Kt[Ce][_e]=Ut,it+=Ut}}),kt.push(Zt)}),it/=2;for(var gt=1/0,Vt=1/0,re=0,It=[],Wt={};;){P&&Y.every(function(ve){return ve.hasOwnProperty("properties")})?gt=T(Y,zt,kt,it)+M(Y,H)*R:gt=T(Y,zt,kt,it),re===0&&(Vt=gt,It=Y,Wt=St);var $t=gt>0&&gt>Vt&&gt-Vt<D;if(gt>Vt&&(It=Y.map(function(ve){return{node:ve,clusterId:ve.clusterId}}),Wt=(0,wt.clone)(St),Vt=gt),$t||re>100)break;re++,Object.keys(St).forEach(function(ve){var Tt=0;q.forEach(function(Zt){var Ce=Zt.source,Ut=Zt.target,se=bt[Ce].node.clusterId,_e=bt[Ut].node.clusterId;(se===ve&&_e!==ve||_e===ve&&se!==ve)&&(Tt=Tt+(Zt[I]||1))}),St[ve].sumTot=Tt}),Y.forEach(function(ve,Tt){var Zt=St[ve.clusterId],Ce=0,Ut,se=kt[Tt]/(2*it),_e=0,$e=Zt.nodes;$e.forEach(function(xa){var ya=bt[xa.id].idx;_e+=zt[Tt][ya]||0});var fr=_e-Zt.sumTot*se,gr=$e.filter(function(xa){return xa.id!==ve.id}),Yt=[];gr.forEach(function(xa,ya){Yt[ya]=H[xa.originIndex]});var Mr=M(gr,H)*R,Ln=Kt[ve.id];if(Object.keys(Ln).forEach(function(xa){var ya=bt[xa].node,Na=ya.clusterId;if(Na!==ve.clusterId){var Ta=St[Na],hr=Ta.nodes;if(!(!hr||!hr.length)){var Br=0;hr.forEach(function(sa){var Fa=bt[sa.id].idx;Br+=zt[Tt][Fa]||0});var cn=Br-Ta.sumTot*se,Cn=hr.concat([ve]),Qn=[];Cn.forEach(function(sa,Fa){Qn[Fa]=H[sa.originIndex]});var Bn=M(Cn,H)*R,ta=cn-fr;P&&(ta=cn+Bn-(fr+Mr)),ta>Ce&&(Ce=ta,Ut=Ta)}}}),Ce>0){Ut.nodes.push(ve);var Yn=ve.clusterId;ve.clusterId=Ut.id;var Ra=Zt.nodes.indexOf(ve);Zt.nodes.splice(Ra,1);var ba=0,Ba=0;q.forEach(function(xa){var ya=xa.source,Na=xa.target,Ta=bt[ya].node.clusterId,hr=bt[Na].node.clusterId;(Ta===Ut.id&&hr!==Ut.id||hr===Ut.id&&Ta!==Ut.id)&&(ba=ba+(xa[I]||1)),(Ta===Yn&&hr!==Yn||hr===Yn&&Ta!==Yn)&&(Ba=Ba+(xa[I]||1))}),Ut.sumTot=ba,Zt.sumTot=Ba}})}var ae={},Bt=0;Object.keys(Wt).forEach(function(ve){var Tt=Wt[ve];if(!Tt.nodes||!Tt.nodes.length){delete Wt[ve];return}var Zt=String(Bt+1);Zt!==ve&&(Tt.id=Zt,Tt.nodes=Tt.nodes.map(function(Ce){return{id:Ce.id,clusterId:Zt}}),Wt[Zt]=Tt,ae[ve]=Zt,delete Wt[ve],Bt++)}),It.forEach(function(ve){var Tt=ve.node,Zt=ve.clusterId;Tt&&(Tt.clusterId=Zt,Tt.clusterId&&ae[Tt.clusterId]&&(Tt.clusterId=ae[Tt.clusterId]))});var Ot=[],Ht={};q.forEach(function(ve){var Tt=ve.source,Zt=ve.target,Ce=ve[I]||1,Ut=bt[Tt].node.clusterId,se=bt[Zt].node.clusterId;if(!(!Ut||!se)){var _e="".concat(Ut,"---").concat(se);if(Ht[_e])Ht[_e].weight+=Ce,Ht[_e].count++;else{var $e={source:Ut,target:se,weight:Ce,count:1};Ht[_e]=$e,Ot.push($e)}}});var pe=[];return Object.keys(Wt).forEach(function(ve){pe.push(Wt[ve])}),{clusters:pe,clusterEdges:Ot}},_=C;G.default=_},689454:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=Q(ut(838823)),st=Q(ut(257085)),tt=ut(770643);function Q(C){return C&&C.__esModule?C:{default:C}}var J=function(_,b){var L=[],S=_.nodes,I=S===void 0?[]:S,D=_.edges,P=D===void 0?[]:D;if(I.length===0)return L;var y=I[0],v=new Set;v.add(y);var K=function(H,et){return b?H.weight-et.weight:0},R=new st.default(K);for((0,tt.getEdgesByNodeId)(y.id,P).forEach(function(q){R.insert(q)});!R.isEmpty();){var B=R.delMin(),Y=B.source,W=B.target;v.has(Y)&&v.has(W)||(L.push(B),v.has(Y)||(v.add(Y),(0,tt.getEdgesByNodeId)(Y,P).forEach(function(q){R.insert(q)})),v.has(W)||(v.add(W),(0,tt.getEdgesByNodeId)(W,P).forEach(function(q){R.insert(q)})))}return L},X=function(_,b){var L=[],S=_.nodes,I=S===void 0?[]:S,D=_.edges,P=D===void 0?[]:D;if(I.length===0)return L;var y=P.map(function(Y){return Y});b&&y.sort(function(Y,W){return Y.weight-W.weight});for(var v=new wt.default(I.map(function(Y){return Y.id}));y.length>0;){var K=y.shift(),R=K.source,B=K.target;v.connected(R,B)||(L.push(K),v.union(R,B))}return L},T=function(_,b,L){var S={prim:J,kruskal:X};return L?S[L](_,b):X(_,b)},M=T;G.default=M},274926:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=tt(ut(182556)),st=ut(770643);function tt(X){return X&&X.__esModule?X:{default:X}}var Q=function(T,M,C){typeof M!="number"&&(M=1e-6),typeof C!="number"&&(C=.85);for(var _=1,b=0,L=1e3,S=T.nodes,I=S===void 0?[]:S,D=T.edges,P=D===void 0?[]:D,y=I.length,v,K={},R={},B=0;B<y;++B){var Y=I[B],W=Y.id;K[W]=1/y,R[W]=1/y}for(var q=(0,wt.default)(T);L>0&&_>M;){b=0;for(var B=0;B<y;++B){var Y=I[B],W=Y.id;if(v=0,q[Y.id].inDegree===0)K[W]=0;else{for(var H=(0,st.getNeighbors)(W,P,"source"),et=0;et<H.length;++et){var ct=H[et],at=q[ct].outDegree;at>0&&(v+=R[ct]/at)}K[W]=C*v,b+=K[W]}}b=(1-b)/y,_=0;for(var B=0;B<y;++B){var Y=I[B],W=Y.id;v=K[W]+b,_+=Math.abs(v-R[W]),R[W]=v}L-=1}return R},J=Q;G.default=J},257085:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ut=function(Q,J){return Q-J},wt=function(){function tt(Q){Q===void 0&&(Q=ut),this.compareFn=Q,this.list=[]}return tt.prototype.getLeft=function(Q){return 2*Q+1},tt.prototype.getRight=function(Q){return 2*Q+2},tt.prototype.getParent=function(Q){return Q===0?null:Math.floor((Q-1)/2)},tt.prototype.isEmpty=function(){return this.list.length<=0},tt.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},tt.prototype.delMin=function(){var Q=this.top(),J=this.list.pop();return this.list.length>0&&(this.list[0]=J,this.moveDown(0)),Q},tt.prototype.insert=function(Q){if(Q!==null){this.list.push(Q);var J=this.list.length-1;return this.moveUp(J),!0}return!1},tt.prototype.moveUp=function(Q){for(var J=this.getParent(Q);Q&&Q>0&&this.compareFn(this.list[J],this.list[Q])>0;){var X=this.list[J];this.list[J]=this.list[Q],this.list[Q]=X,Q=J,J=this.getParent(Q)}},tt.prototype.moveDown=function(Q){var J,X=Q,T=this.getLeft(Q),M=this.getRight(Q),C=this.list.length;T!==null&&T<C&&this.compareFn(this.list[X],this.list[T])>0?X=T:M!==null&&M<C&&this.compareFn(this.list[X],this.list[M])>0&&(X=M),Q!==X&&(J=[this.list[X],this.list[Q]],this.list[Q]=J[0],this.list[X]=J[1],this.moveDown(X))},tt}(),st=wt;G.default=st},488481:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.LinkedListNode=void 0;var ut=function(J,X){return J===X},wt=function(){function Q(J,X){X===void 0&&(X=null),this.value=J,this.next=X}return Q.prototype.toString=function(J){return J?J(this.value):"".concat(this.value)},Q}();G.LinkedListNode=wt;var st=function(){function Q(J){J===void 0&&(J=ut),this.head=null,this.tail=null,this.compare=J}return Q.prototype.prepend=function(J){var X=new wt(J,this.head);return this.head=X,this.tail||(this.tail=X),this},Q.prototype.append=function(J){var X=new wt(J);return this.head?(this.tail.next=X,this.tail=X,this):(this.head=X,this.tail=X,this)},Q.prototype.delete=function(J){if(!this.head)return null;for(var X=null;this.head&&this.compare(this.head.value,J);)X=this.head,this.head=this.head.next;var T=this.head;if(T!==null)for(;T.next;)this.compare(T.next.value,J)?(X=T.next,T.next=T.next.next):T=T.next;return this.compare(this.tail.value,J)&&(this.tail=T),X},Q.prototype.find=function(J){var X=J.value,T=X===void 0?void 0:X,M=J.callback,C=M===void 0?void 0:M;if(!this.head)return null;for(var _=this.head;_;){if(C&&C(_.value)||T!==void 0&&this.compare(_.value,T))return _;_=_.next}return null},Q.prototype.deleteTail=function(){var J=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,J;for(var X=this.head;X.next;)X.next.next?X=X.next:X.next=null;return this.tail=X,J},Q.prototype.deleteHead=function(){if(!this.head)return null;var J=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),J},Q.prototype.fromArray=function(J){var X=this;return J.forEach(function(T){return X.append(T)}),this},Q.prototype.toArray=function(){for(var J=[],X=this.head;X;)J.push(X),X=X.next;return J},Q.prototype.reverse=function(){for(var J=this.head,X=null,T=null;J;)T=J.next,J.next=X,X=J,J=T;this.tail=this.head,this.head=X},Q.prototype.toString=function(J){return J===void 0&&(J=void 0),this.toArray().map(function(X){return X.toString(J)}).toString()},Q}(),tt=st;G.default=tt},893026:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=st(ut(488481));function st(J){return J&&J.__esModule?J:{default:J}}var tt=function(){function J(){this.linkedList=new wt.default}return J.prototype.isEmpty=function(){return!this.linkedList.head},J.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},J.prototype.enqueue=function(X){this.linkedList.append(X)},J.prototype.dequeue=function(){var X=this.linkedList.deleteHead();return X?X.value:null},J.prototype.toString=function(X){return this.linkedList.toString(X)},J}(),Q=tt;G.default=Q},838823:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ut=function(){function st(tt){this.count=tt.length,this.parent={};for(var Q=0,J=tt;Q<J.length;Q++){var X=J[Q];this.parent[X]=X}}return st.prototype.find=function(tt){for(;this.parent[tt]!==tt;)tt=this.parent[tt];return tt},st.prototype.union=function(tt,Q){var J=this.find(tt),X=this.find(Q);J!==X&&(J<X?(this.parent[Q]!==Q&&this.union(this.parent[Q],tt),this.parent[Q]=this.parent[tt]):(this.parent[tt]!==tt&&this.union(this.parent[tt],Q),this.parent[tt]=this.parent[Q]))},st.prototype.connected=function(tt,Q){return this.find(tt)===this.find(Q)},st}(),wt=ut;G.default=wt},317892:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.DistanceType=void 0;var ut;G.DistanceType=ut,function(wt){wt.EuclideanDistance="euclideanDistance"}(ut||(G.DistanceType=ut={}))},770643:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.uniqueId=G.getOutEdgesNodeId=G.getNeighbors=G.getEdgesByNodeId=void 0;var ut=function(J,X,T){X===void 0&&(X=[]);var M=X.filter(function(L){return L.source===J||L.target===J});if(T==="target"){var C=function(S){return S.source===J};return M.filter(C).map(function(L){return L.target})}if(T==="source"){var _=function(S){return S.target===J};return M.filter(_).map(function(L){return L.source})}var b=function(S){return S.source===J?S.target:S.source};return M.map(b)};G.getNeighbors=ut;var wt=function(J,X){return X.filter(function(T){return T.source===J})};G.getOutEdgesNodeId=wt;var st=function(J,X){return X.filter(function(T){return T.source===J||T.target===J})};G.getEdgesByNodeId=st;var tt=function(J){J===void 0&&(J=0);var X="".concat(Math.random()).split(".")[1].substr(0,5),T="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(J,"-").concat(X).concat(T)};G.uniqueId=tt},526838:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.oneHot=G.getDistance=G.getAllKeyValueMap=G.default=void 0;var wt=ut(413810),st=ut(317892),tt=Q(ut(29741));function Q(C){return C&&C.__esModule?C:{default:C}}var J=function(_,b,L){var S=[];b!=null&&b.length?S=b:(_.forEach(function(D){S=S.concat(Object.keys(D))}),S=(0,wt.uniq)(S));var I={};return S.forEach(function(D){var P=[];_.forEach(function(y){y[D]!==void 0&&y[D]!==""&&P.push(y[D])}),P.length&&!(L!=null&&L.includes(D))&&(I[D]=(0,wt.uniq)(P))}),I};G.getAllKeyValueMap=J;var X=function(_,b,L){var S=J(_,b,L),I=[];if(!Object.keys(S).length)return I;var D=Object.values(S),P=D.every(function(y){return y.every(function(v){return typeof v=="number"})});return _.forEach(function(y,v){var K=[];Object.keys(S).forEach(function(R){var B=y[R],Y=S[R],W=Y.findIndex(function(et){return B===et}),q=[];if(P)q.push(B);else for(var H=0;H<Y.length;H++)H===W?q.push(1):q.push(0);K=K.concat(q)}),I[v]=K}),I};G.oneHot=X;var T=function(_,b,L,S){L===void 0&&(L=st.DistanceType.EuclideanDistance);var I=0;switch(L){case st.DistanceType.EuclideanDistance:I=new tt.default(_).euclideanDistance(new tt.default(b));break;default:break}return I};G.getDistance=T;var M={getAllKeyValueMap:J,oneHot:X,getDistance:T};G.default=M},103665:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getPropertyWeight=G.getAllSortProperties=G.getAllProperties=G.default=void 0;var wt=ut(592935),st=function(M,C){M===void 0&&(M=[]),C===void 0&&(C=100);var _={};M.forEach(function(L){L.properties&&Object.keys(L.properties).forEach(function(S){if(S==="id"||!"".concat(L.properties[S]).match(wt.secondReg)&&!"".concat(L.properties[S]).match(wt.dateReg)&&isNaN(Number(L.properties[S]))){_.hasOwnProperty(S)&&delete _[S];return}_.hasOwnProperty(S)?_[S]+=1:_[S]=1})});var b=Object.keys(_).sort(function(L,S){return _[S]-_[L]});return b.length<C?b:b.slice(0,C)};G.getAllSortProperties=st;var tt=function(M,C){return C.map(function(_){return M.hasOwnProperty(_)?M[_]:0})},Q=function(M){for(var C=st(M),_=[],b=0;b<M.length;b++)_[b]=tt(M[b].properties,C);return _};G.getPropertyWeight=Q;var J=function(M,C){C===void 0&&(C=void 0);var _=[];return M.forEach(function(b){C===void 0&&_.push(b),b[C]!==void 0&&_.push(b[C])}),_};G.getAllProperties=J;var X={getAllSortProperties:st,getPropertyWeight:Q,getAllProperties:J};G.default=X},29741:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=ut(413810),st=function(){function Q(J){this.arr=J}return Q.prototype.getArr=function(){return this.arr||[]},Q.prototype.add=function(J){var X,T=J.arr;if(!(!((X=this.arr)===null||X===void 0)&&X.length))return new Q(T);if(!(T!=null&&T.length))return new Q(this.arr);if(this.arr.length===T.length){var M=[];for(var C in this.arr)M[C]=this.arr[C]+T[C];return new Q(M)}},Q.prototype.subtract=function(J){var X,T=J.arr;if(!(!((X=this.arr)===null||X===void 0)&&X.length))return new Q(T);if(!(T!=null&&T.length))return new Q(this.arr);if(this.arr.length===T.length){var M=[];for(var C in this.arr)M[C]=this.arr[C]-T[C];return new Q(M)}},Q.prototype.avg=function(J){var X=[];if(J!==0)for(var T in this.arr)X[T]=this.arr[T]/J;return new Q(X)},Q.prototype.negate=function(){var J=[];for(var X in this.arr)J[X]=-this.arr[X];return new Q(J)},Q.prototype.squareEuclideanDistance=function(J){var X,T=J.arr;if(!(!((X=this.arr)===null||X===void 0)&&X.length)||!(T!=null&&T.length))return 0;if(this.arr.length===T.length){var M=0;for(var C in this.arr)M+=Math.pow(this.arr[C]-J.arr[C],2);return M}},Q.prototype.euclideanDistance=function(J){var X,T=J.arr;if(!(!((X=this.arr)===null||X===void 0)&&X.length)||!(T!=null&&T.length))return 0;if(this.arr.length===T.length){var M=0;for(var C in this.arr)M+=Math.pow(this.arr[C]-J.arr[C],2);return Math.sqrt(M)}else console.error("The two vectors are unequal in length.")},Q.prototype.normalize=function(){var J=[],X=(0,wt.clone)(this.arr);X.sort(function(_,b){return _-b});var T=X[X.length-1],M=X[0];for(var C in this.arr)J[C]=(this.arr[C]-M)/(T-M);return new Q(J)},Q.prototype.norm2=function(){var J;if(!(!((J=this.arr)===null||J===void 0)&&J.length))return 0;var X=0;for(var T in this.arr)X+=Math.pow(this.arr[T],2);return Math.sqrt(X)},Q.prototype.dot=function(J){var X,T=J.arr;if(!(!((X=this.arr)===null||X===void 0)&&X.length)||!(T!=null&&T.length))return 0;if(this.arr.length===T.length){var M=0;for(var C in this.arr)M+=this.arr[C]*J.arr[C];return M}else console.error("The two vectors are unequal in length.")},Q.prototype.equal=function(J){var X,T=J.arr;if(((X=this.arr)===null||X===void 0?void 0:X.length)!==(T==null?void 0:T.length))return!1;for(var M in this.arr)if(this.arr[M]!==T[M])return!1;return!0},Q}(),tt=st;G.default=tt},831656:function(Sr,G,ut){"use strict";function wt(R){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},wt(R)}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDI",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(G,"breadthFirstSearch",{enumerable:!0,get:function(){return tt.default}}),Object.defineProperty(G,"connectedComponent",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(G,"depthFirstSearch",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(G,"detectCycle",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(G,"dijkstra",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(G,"findAllPath",{enumerable:!0,get:function(){return C.findAllPath}}),Object.defineProperty(G,"findShortestPath",{enumerable:!0,get:function(){return C.findShortestPath}}),Object.defineProperty(G,"floydWarshall",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(G,"getAdjMatrix",{enumerable:!0,get:function(){return st.default}}),Object.defineProperty(G,"getDegree",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(G,"getInDegree",{enumerable:!0,get:function(){return J.getInDegree}}),Object.defineProperty(G,"getNeighbors",{enumerable:!0,get:function(){return P.getNeighbors}}),Object.defineProperty(G,"getOutDegree",{enumerable:!0,get:function(){return J.getOutDegree}}),Object.defineProperty(G,"labelPropagation",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(G,"louvain",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(G,"minimumSpanningTree",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(G,"pageRank",{enumerable:!0,get:function(){return I.default}});var st=K(ut(62238)),tt=K(ut(683764)),Q=K(ut(759527)),J=v(ut(182556)),X=K(ut(994282)),T=K(ut(45891)),M=K(ut(878089)),C=ut(241727),_=K(ut(975033)),b=K(ut(505170)),L=K(ut(135179)),S=K(ut(689454)),I=K(ut(274926)),D=K(ut(882812)),P=ut(770643);function y(R){if(typeof WeakMap!="function")return null;var B=new WeakMap,Y=new WeakMap;return(y=function(q){return q?Y:B})(R)}function v(R,B){if(!B&&R&&R.__esModule)return R;if(R===null||wt(R)!=="object"&&typeof R!="function")return{default:R};var Y=y(B);if(Y&&Y.has(R))return Y.get(R);var W={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in R)if(H!=="default"&&Object.prototype.hasOwnProperty.call(R,H)){var et=q?Object.getOwnPropertyDescriptor(R,H):null;et&&(et.get||et.set)?Object.defineProperty(W,H,et):W[H]=R[H]}return W.default=R,Y&&Y.set(R,W),W}function K(R){return R&&R.__esModule?R:{default:R}}},66044:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MESSAGE=G.ALGORITHM=void 0;var ut={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.ALGORITHM=ut;var wt={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.MESSAGE=wt},70585:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var wt=ut(66044),st=tt(ut(612067));function tt(X){return X&&X.__esModule?X:{default:X}}var Q=function(T){return function(){for(var M=[],C=0;C<arguments.length;C++)M[C]=arguments[C];return new Promise(function(_,b){var L=new st.default;L.postMessage({_algorithmType:T,data:M}),L.onmessage=function(S){var I=S.data,D=I.data,P=I._algorithmType;wt.MESSAGE.SUCCESS===P?_(D):b(),L.terminate()}})}},J=Q;G.default=J},430485:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.pageRankAsync=G.minimumSpanningTreeAsync=G.louvainAsync=G.labelPropagationAsync=G.getOutDegreeAsync=G.getNeighborsAsync=G.getInDegreeAsync=G.getDegreeAsync=G.getAdjMatrixAsync=G.floydWarshallAsync=G.findShortestPathAsync=G.findAllPathAsync=G.dijkstraAsync=G.detectCycleAsync=G.detectAllUndirectedCycleAsync=G.detectAllDirectedCycleAsync=G.detectAllCyclesAsync=G.connectedComponentAsync=G.GADDIAsync=void 0;var wt=tt(ut(70585)),st=ut(66044);function tt(W){return W&&W.__esModule?W:{default:W}}var Q=function(q,H){return(0,wt.default)(st.ALGORITHM.getAdjMatrix).apply(void 0,[q,H])};G.getAdjMatrixAsync=Q;var J=function(q,H){return(0,wt.default)(st.ALGORITHM.connectedComponent).apply(void 0,[q,H])};G.connectedComponentAsync=J;var X=function(q){return(0,wt.default)(st.ALGORITHM.getDegree)(q)};G.getDegreeAsync=X;var T=function(q,H){return(0,wt.default)(st.ALGORITHM.getInDegree)(q,H)};G.getInDegreeAsync=T;var M=function(q,H){return(0,wt.default)(st.ALGORITHM.getOutDegree)(q,H)};G.getOutDegreeAsync=M;var C=function(q){return(0,wt.default)(st.ALGORITHM.detectCycle)(q)};G.detectCycleAsync=C;var _=function(q){return(0,wt.default)(st.ALGORITHM.detectAllCycles)(q)};G.detectAllCyclesAsync=_;var b=function(q){return(0,wt.default)(st.ALGORITHM.detectAllDirectedCycle)(q)};G.detectAllDirectedCycleAsync=b;var L=function(q){return(0,wt.default)(st.ALGORITHM.detectAllUndirectedCycle)(q)};G.detectAllUndirectedCycleAsync=L;var S=function(q,H,et,ct){return(0,wt.default)(st.ALGORITHM.dijkstra).apply(void 0,[q,H,et,ct])};G.dijkstraAsync=S;var I=function(q,H,et,ct){return(0,wt.default)(st.ALGORITHM.findAllPath).apply(void 0,[q,H,et,ct])};G.findAllPathAsync=I;var D=function(q,H,et,ct,at){return(0,wt.default)(st.ALGORITHM.findShortestPath).apply(void 0,[q,H,et,ct,at])};G.findShortestPathAsync=D;var P=function(q,H){return(0,wt.default)(st.ALGORITHM.floydWarshall).apply(void 0,[q,H])};G.floydWarshallAsync=P;var y=function(q,H,et,ct){return ct===void 0&&(ct=1e3),(0,wt.default)(st.ALGORITHM.labelPropagation)(q,H,et,ct)};G.labelPropagationAsync=y;var v=function(q,H,et,ct){return(0,wt.default)(st.ALGORITHM.louvain)(q,H,et,ct)};G.louvainAsync=v;var K=function(q,H,et){return(0,wt.default)(st.ALGORITHM.minimumSpanningTree).apply(void 0,[q,H,et])};G.minimumSpanningTreeAsync=K;var R=function(q,H,et){return(0,wt.default)(st.ALGORITHM.pageRank).apply(void 0,[q,H,et])};G.pageRankAsync=R;var B=function(q,H,et){return(0,wt.default)(st.ALGORITHM.getNeighbors).apply(void 0,[q,H,et])};G.getNeighborsAsync=B;var Y=function(q,H,et,ct,at,St,bt){return et===void 0&&(et=!1),St===void 0&&(St="cluster"),bt===void 0&&(bt="cluster"),(0,wt.default)(st.ALGORITHM.GADDI).apply(void 0,[q,H,et,ct,at,St,bt])};G.GADDIAsync=Y},612067:function(Sr,G,ut){"use strict";function wt(M){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},wt(M)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var st=J(ut(831656)),tt=ut(66044);function Q(M){if(typeof WeakMap!="function")return null;var C=new WeakMap,_=new WeakMap;return(Q=function(L){return L?_:C})(M)}function J(M,C){if(!C&&M&&M.__esModule)return M;if(M===null||wt(M)!=="object"&&typeof M!="function")return{default:M};var _=Q(C);if(_&&_.has(M))return _.get(M);var b={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in M)if(S!=="default"&&Object.prototype.hasOwnProperty.call(M,S)){var I=L?Object.getOwnPropertyDescriptor(M,S):null;I&&(I.get||I.set)?Object.defineProperty(b,S,I):b[S]=M[S]}return b.default=M,_&&_.set(M,b),b}var X=typeof self!="undefined"?self:{};X.onmessage=function(M){var C=M.data,_=C._algorithmType,b=C.data;if(_){if(typeof st[_]=="function"){var L=st[_].apply(st,b);X.postMessage({_algorithmType:tt.MESSAGE.SUCCESS,data:L});return}X.postMessage({_algorithmType:tt.MESSAGE.FAILURE})}};var T=null;G.default=T},901029:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{Kernel:function(){return St},World:function(){return ka}});var wt=ut(115861),st=ut(204942),tt=ut(215671),Q=ut(143144),J=ut(936719),X=ut.n(J),T=ut(281763),M=ut.n(T),C=ut(701469),_=ut.n(C),b=ut(364687),L=ut.n(b),S=null,I=1;function D(){return I++}var P=null,y=null,v;(function(U){U[U.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",U[U.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",U[U.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",U[U.POINTS=0]="POINTS",U[U.LINES=1]="LINES",U[U.LINE_LOOP=2]="LINE_LOOP",U[U.LINE_STRIP=3]="LINE_STRIP",U[U.TRIANGLES=4]="TRIANGLES",U[U.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",U[U.TRIANGLE_FAN=6]="TRIANGLE_FAN",U[U.ZERO=0]="ZERO",U[U.ONE=1]="ONE",U[U.SRC_COLOR=768]="SRC_COLOR",U[U.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",U[U.SRC_ALPHA=770]="SRC_ALPHA",U[U.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",U[U.DST_ALPHA=772]="DST_ALPHA",U[U.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",U[U.DST_COLOR=774]="DST_COLOR",U[U.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",U[U.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",U[U.FUNC_ADD=32774]="FUNC_ADD",U[U.BLEND_EQUATION=32777]="BLEND_EQUATION",U[U.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",U[U.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",U[U.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",U[U.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",U[U.MAX_EXT=32776]="MAX_EXT",U[U.MIN_EXT=32775]="MIN_EXT",U[U.BLEND_DST_RGB=32968]="BLEND_DST_RGB",U[U.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",U[U.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",U[U.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",U[U.CONSTANT_COLOR=32769]="CONSTANT_COLOR",U[U.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",U[U.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",U[U.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",U[U.BLEND_COLOR=32773]="BLEND_COLOR",U[U.ARRAY_BUFFER=34962]="ARRAY_BUFFER",U[U.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",U[U.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",U[U.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",U[U.STREAM_DRAW=35040]="STREAM_DRAW",U[U.STATIC_DRAW=35044]="STATIC_DRAW",U[U.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",U[U.BUFFER_SIZE=34660]="BUFFER_SIZE",U[U.BUFFER_USAGE=34661]="BUFFER_USAGE",U[U.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",U[U.FRONT=1028]="FRONT",U[U.BACK=1029]="BACK",U[U.FRONT_AND_BACK=1032]="FRONT_AND_BACK",U[U.CULL_FACE=2884]="CULL_FACE",U[U.BLEND=3042]="BLEND",U[U.DITHER=3024]="DITHER",U[U.STENCIL_TEST=2960]="STENCIL_TEST",U[U.DEPTH_TEST=2929]="DEPTH_TEST",U[U.SCISSOR_TEST=3089]="SCISSOR_TEST",U[U.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",U[U.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",U[U.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",U[U.NO_ERROR=0]="NO_ERROR",U[U.INVALID_ENUM=1280]="INVALID_ENUM",U[U.INVALID_VALUE=1281]="INVALID_VALUE",U[U.INVALID_OPERATION=1282]="INVALID_OPERATION",U[U.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",U[U.CW=2304]="CW",U[U.CCW=2305]="CCW",U[U.LINE_WIDTH=2849]="LINE_WIDTH",U[U.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",U[U.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",U[U.CULL_FACE_MODE=2885]="CULL_FACE_MODE",U[U.FRONT_FACE=2886]="FRONT_FACE",U[U.DEPTH_RANGE=2928]="DEPTH_RANGE",U[U.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",U[U.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",U[U.DEPTH_FUNC=2932]="DEPTH_FUNC",U[U.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",U[U.STENCIL_FUNC=2962]="STENCIL_FUNC",U[U.STENCIL_FAIL=2964]="STENCIL_FAIL",U[U.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",U[U.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",U[U.STENCIL_REF=2967]="STENCIL_REF",U[U.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",U[U.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",U[U.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",U[U.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",U[U.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",U[U.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",U[U.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",U[U.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",U[U.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",U[U.VIEWPORT=2978]="VIEWPORT",U[U.SCISSOR_BOX=3088]="SCISSOR_BOX",U[U.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",U[U.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",U[U.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",U[U.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",U[U.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",U[U.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",U[U.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",U[U.RED_BITS=3410]="RED_BITS",U[U.GREEN_BITS=3411]="GREEN_BITS",U[U.BLUE_BITS=3412]="BLUE_BITS",U[U.ALPHA_BITS=3413]="ALPHA_BITS",U[U.DEPTH_BITS=3414]="DEPTH_BITS",U[U.STENCIL_BITS=3415]="STENCIL_BITS",U[U.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",U[U.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",U[U.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",U[U.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",U[U.SAMPLES=32937]="SAMPLES",U[U.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",U[U.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",U[U.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",U[U.DONT_CARE=4352]="DONT_CARE",U[U.FASTEST=4353]="FASTEST",U[U.NICEST=4354]="NICEST",U[U.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",U[U.BYTE=5120]="BYTE",U[U.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",U[U.SHORT=5122]="SHORT",U[U.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",U[U.INT=5124]="INT",U[U.UNSIGNED_INT=5125]="UNSIGNED_INT",U[U.FLOAT=5126]="FLOAT",U[U.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",U[U.ALPHA=6406]="ALPHA",U[U.RGB=6407]="RGB",U[U.RGBA=6408]="RGBA",U[U.LUMINANCE=6409]="LUMINANCE",U[U.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",U[U.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",U[U.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",U[U.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",U[U.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",U[U.VERTEX_SHADER=35633]="VERTEX_SHADER",U[U.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",U[U.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",U[U.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",U[U.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",U[U.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",U[U.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",U[U.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",U[U.SHADER_TYPE=35663]="SHADER_TYPE",U[U.DELETE_STATUS=35712]="DELETE_STATUS",U[U.LINK_STATUS=35714]="LINK_STATUS",U[U.VALIDATE_STATUS=35715]="VALIDATE_STATUS",U[U.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",U[U.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",U[U.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",U[U.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",U[U.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",U[U.NEVER=512]="NEVER",U[U.LESS=513]="LESS",U[U.EQUAL=514]="EQUAL",U[U.LEQUAL=515]="LEQUAL",U[U.GREATER=516]="GREATER",U[U.NOTEQUAL=517]="NOTEQUAL",U[U.GEQUAL=518]="GEQUAL",U[U.ALWAYS=519]="ALWAYS",U[U.KEEP=7680]="KEEP",U[U.REPLACE=7681]="REPLACE",U[U.INCR=7682]="INCR",U[U.DECR=7683]="DECR",U[U.INVERT=5386]="INVERT",U[U.INCR_WRAP=34055]="INCR_WRAP",U[U.DECR_WRAP=34056]="DECR_WRAP",U[U.VENDOR=7936]="VENDOR",U[U.RENDERER=7937]="RENDERER",U[U.VERSION=7938]="VERSION",U[U.NEAREST=9728]="NEAREST",U[U.LINEAR=9729]="LINEAR",U[U.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",U[U.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",U[U.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",U[U.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",U[U.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",U[U.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",U[U.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",U[U.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",U[U.TEXTURE_2D=3553]="TEXTURE_2D",U[U.TEXTURE=5890]="TEXTURE",U[U.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",U[U.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",U[U.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",U[U.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",U[U.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",U[U.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",U[U.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",U[U.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",U[U.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",U[U.TEXTURE0=33984]="TEXTURE0",U[U.TEXTURE1=33985]="TEXTURE1",U[U.TEXTURE2=33986]="TEXTURE2",U[U.TEXTURE3=33987]="TEXTURE3",U[U.TEXTURE4=33988]="TEXTURE4",U[U.TEXTURE5=33989]="TEXTURE5",U[U.TEXTURE6=33990]="TEXTURE6",U[U.TEXTURE7=33991]="TEXTURE7",U[U.TEXTURE8=33992]="TEXTURE8",U[U.TEXTURE9=33993]="TEXTURE9",U[U.TEXTURE10=33994]="TEXTURE10",U[U.TEXTURE11=33995]="TEXTURE11",U[U.TEXTURE12=33996]="TEXTURE12",U[U.TEXTURE13=33997]="TEXTURE13",U[U.TEXTURE14=33998]="TEXTURE14",U[U.TEXTURE15=33999]="TEXTURE15",U[U.TEXTURE16=34e3]="TEXTURE16",U[U.TEXTURE17=34001]="TEXTURE17",U[U.TEXTURE18=34002]="TEXTURE18",U[U.TEXTURE19=34003]="TEXTURE19",U[U.TEXTURE20=34004]="TEXTURE20",U[U.TEXTURE21=34005]="TEXTURE21",U[U.TEXTURE22=34006]="TEXTURE22",U[U.TEXTURE23=34007]="TEXTURE23",U[U.TEXTURE24=34008]="TEXTURE24",U[U.TEXTURE25=34009]="TEXTURE25",U[U.TEXTURE26=34010]="TEXTURE26",U[U.TEXTURE27=34011]="TEXTURE27",U[U.TEXTURE28=34012]="TEXTURE28",U[U.TEXTURE29=34013]="TEXTURE29",U[U.TEXTURE30=34014]="TEXTURE30",U[U.TEXTURE31=34015]="TEXTURE31",U[U.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",U[U.REPEAT=10497]="REPEAT",U[U.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",U[U.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",U[U.FLOAT_VEC2=35664]="FLOAT_VEC2",U[U.FLOAT_VEC3=35665]="FLOAT_VEC3",U[U.FLOAT_VEC4=35666]="FLOAT_VEC4",U[U.INT_VEC2=35667]="INT_VEC2",U[U.INT_VEC3=35668]="INT_VEC3",U[U.INT_VEC4=35669]="INT_VEC4",U[U.BOOL=35670]="BOOL",U[U.BOOL_VEC2=35671]="BOOL_VEC2",U[U.BOOL_VEC3=35672]="BOOL_VEC3",U[U.BOOL_VEC4=35673]="BOOL_VEC4",U[U.FLOAT_MAT2=35674]="FLOAT_MAT2",U[U.FLOAT_MAT3=35675]="FLOAT_MAT3",U[U.FLOAT_MAT4=35676]="FLOAT_MAT4",U[U.SAMPLER_2D=35678]="SAMPLER_2D",U[U.SAMPLER_CUBE=35680]="SAMPLER_CUBE",U[U.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",U[U.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",U[U.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",U[U.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",U[U.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",U[U.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",U[U.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",U[U.COMPILE_STATUS=35713]="COMPILE_STATUS",U[U.LOW_FLOAT=36336]="LOW_FLOAT",U[U.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",U[U.HIGH_FLOAT=36338]="HIGH_FLOAT",U[U.LOW_INT=36339]="LOW_INT",U[U.MEDIUM_INT=36340]="MEDIUM_INT",U[U.HIGH_INT=36341]="HIGH_INT",U[U.FRAMEBUFFER=36160]="FRAMEBUFFER",U[U.RENDERBUFFER=36161]="RENDERBUFFER",U[U.RGBA4=32854]="RGBA4",U[U.RGB5_A1=32855]="RGB5_A1",U[U.RGB565=36194]="RGB565",U[U.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",U[U.STENCIL_INDEX=6401]="STENCIL_INDEX",U[U.STENCIL_INDEX8=36168]="STENCIL_INDEX8",U[U.DEPTH_STENCIL=34041]="DEPTH_STENCIL",U[U.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",U[U.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",U[U.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",U[U.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",U[U.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",U[U.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",U[U.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",U[U.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",U[U.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",U[U.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",U[U.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",U[U.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",U[U.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",U[U.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",U[U.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",U[U.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",U[U.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",U[U.NONE=0]="NONE",U[U.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",U[U.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",U[U.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",U[U.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",U[U.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",U[U.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",U[U.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",U[U.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",U[U.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",U[U.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",U[U.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",U[U.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",U[U.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",U[U.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",U[U.COPY_SRC=1]="COPY_SRC",U[U.COPY_DST=2]="COPY_DST",U[U.SAMPLED=4]="SAMPLED",U[U.STORAGE=8]="STORAGE",U[U.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(v||(v={}));var K=function(){function U(){(0,tt.Z)(this,U),this.config=void 0}return(0,Q.Z)(U,[{key:"get",value:function(){return this.config}},{key:"set",value:function(we){this.config=we}}]),U}(),R=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),B;(function(U){U.Void="Void",U.Boolean="Boolean",U.Float="Float",U.Uint32="Uint32",U.Int32="Int32",U.Vector="Vector",U.Vector2Float="vec2<f32>",U.Vector3Float="vec3<f32>",U.Vector4Float="vec4<f32>",U.Vector2Boolean="vec2<bool>",U.Vector3Boolean="vec3<bool>",U.Vector4Boolean="vec4<bool>",U.Vector2Uint="vec2<u32>",U.Vector3Uint="vec3<u32>",U.Vector4Uint="vec4<u32>",U.Vector2Int="vec2<i32>",U.Vector3Int="vec3<i32>",U.Vector4Int="vec4<i32>",U.Matrix="Matrix",U.Matrix3x3Float="mat3x3<f32>",U.Matrix4x4Float="mat4x4<i32>",U.Struct="Struct",U.FloatArray="Float[]",U.Vector4FloatArray="vec4<f32>[]"})(B||(B={}));var Y;(function(U){U.Program="Program",U.Identifier="Identifier",U.VariableDeclaration="VariableDeclaration",U.BlockStatement="BlockStatement",U.ReturnStatement="ReturnStatement",U.FunctionDeclaration="FunctionDeclaration",U.VariableDeclarator="VariableDeclarator",U.AssignmentExpression="AssignmentExpression",U.LogicalExpression="LogicalExpression",U.BinaryExpression="BinaryExpression",U.ArrayExpression="ArrayExpression",U.UnaryExpression="UnaryExpression",U.UpdateExpression="UpdateExpression",U.FunctionExpression="FunctionExpression",U.MemberExpression="MemberExpression",U.ConditionalExpression="ConditionalExpression",U.ExpressionStatement="ExpressionStatement",U.CallExpression="CallExpression",U.NumThreadStatement="NumThreadStatement",U.StorageStatement="StorageStatement",U.DoWhileStatement="DoWhileStatement",U.WhileStatement="WhileStatement",U.ForStatement="ForStatement",U.BreakStatement="BreakStatement",U.ContinueStatement="ContinueStatement",U.IfStatement="IfStatement",U.ImportedFunctionStatement="ImportedFunctionStatement"})(Y||(Y={}));var W;(function(U){U.Input="Input",U.Output="Output",U.Uniform="Uniform",U.Workgroup="Workgroup",U.UniformConstant="UniformConstant",U.Image="Image",U.StorageBuffer="StorageBuffer",U.Private="Private",U.Function="Function"})(W||(W={}));var q;(function(U){U.GLSL100="GLSL100",U.GLSL450="GLSL450",U.WGSL="WGSL"})(q||(q={}));var H="__DefineValuePlaceholder__";function et(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ct(U,Ve){var we=Object.keys(U);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(U);Ve&&(er=er.filter(function(Je){return Object.getOwnPropertyDescriptor(U,Je).enumerable})),we.push.apply(we,er)}return we}function at(U){for(var Ve=1;Ve<arguments.length;Ve++){var we=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?ct(Object(we),!0).forEach(function(er){(0,st.Z)(U,er,we[er])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(we)):ct(Object(we)).forEach(function(er){Object.defineProperty(U,er,Object.getOwnPropertyDescriptor(we,er))})}return U}var St=function(){function U(Ve,we){(0,tt.Z)(this,U),this.engine=Ve,this.configService=we,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,Q.Z)(U,[{key:"init",value:function(){var we=this.configService.get(),er=we.canvas,Je=we.engineOptions;this.initPromise=this.engine.init(at({canvas:er||et(),antialiasing:!1},Je))}},{key:"setBundle",value:function(we){this.compiledBundle=JSON.parse(JSON.stringify(we))}},{key:"setDispatch",value:function(we){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=we),this}},{key:"setMaxIteration",value:function(we){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=we),this}},{key:"setBinding",value:function(we,er){var Je=this;if(typeof we=="string"){var Pr=M()(er)||X()(er)||_()(er);if(this.compiledBundle&&this.compiledBundle.context){var Or=this.compiledBundle.context.defines.find(function(fn){return fn.name===we});if(Or)return Or.value=er,this;var rn=this.compiledBundle.context.uniforms.find(function(fn){return fn.name===we});rn&&(Pr?(rn.data=er,rn.isReferer=!1,rn.storageClass===W.Uniform?this.model&&this.model.updateUniform(we,er):this.model&&this.model.updateBuffer(we,er)):(rn.isReferer=!0,rn.data=er))}}else Object.keys(we).forEach(function(fn){Je.setBinding(fn,we[fn])});return this}},{key:"execute",value:function(){var Ve=(0,wt.Z)(L().mark(function er(){var Je=this,Pr,Or,rn=arguments;return L().wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Pr=rn.length>0&&rn[0]!==void 0?rn[0]:1,!this.dirty){jr.next=6;break}return this.compiledBundle.context&&(Pr>1?this.compiledBundle.context.maxIteration=Pr:this.compiledBundle.context.maxIteration++),jr.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(ht){var yt=ht.isReferer;return yt}).forEach(function(ht){var yt=ht.data,O=ht.name;Je.model.confirmInput(yt.model,O)}),Or=0;Or<Pr;Or++)this.model.run();return this.engine.endFrame(),jr.abrupt("return",this);case 12:case"end":return jr.stop()}},er,this)}));function we(){return Ve.apply(this,arguments)}return we}()},{key:"getOutput",value:function(){var Ve=(0,wt.Z)(L().mark(function er(){return L().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Pr.abrupt("return",this.model.readData());case 1:case"end":return Pr.stop()}},er,this)}));function we(){return Ve.apply(this,arguments)}return we}()},{key:"compile",value:function(){var Ve=(0,wt.Z)(L().mark(function er(){var Je,Pr,Or;return L().wrap(function(fn){for(;;)switch(fn.prev=fn.next){case 0:return fn.next=2,this.initPromise;case 2:return Je=at({},this.compiledBundle.context),Pr=this.engine.supportWebGPU?this.engine.useWGSL?q.WGSL:q.GLSL450:q.GLSL100,Or=this.compiledBundle.shaders[Pr],Je.defines.filter(function(jr){return jr.runtime}).forEach(function(jr){var ht="".concat(H).concat(jr.name);Or=Or.replace(ht,"".concat(jr.value))}),Je.shader=Or,Je.uniforms.forEach(function(jr){if(!jr.data&&jr.storageClass===W.StorageBuffer){var ht=1;jr.type===B.FloatArray?ht=1:jr.type===B.Vector4FloatArray&&(ht=4),jr.data=new Float32Array(Je.output.length*ht).fill(0)}}),this.compiledBundle.context=Je,fn.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=fn.sent;case 12:case"end":return fn.stop()}},er,this)}));function we(){return Ve.apply(this,arguments)}return we}()}]),U}(),bt=ut(481550),zt=ut.n(bt),kt=function(){function U(Ve,we){(0,tt.Z)(this,U),this.attribute=void 0,this.buffer=void 0;var er=we.buffer,Je=we.offset,Pr=we.stride,Or=we.normalized,rn=we.size,fn=we.divisor;this.buffer=er,this.attribute={buffer:er.get(),offset:Je||0,stride:Pr||0,normalized:Or||!1,divisor:fn||0},rn&&(this.attribute.size=rn)}return(0,Q.Z)(U,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(we){this.buffer.subData(we)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),U}(),Kt,it,gt,Vt,re,It,Wt,$t,ae,Bt,Ot,Ht,pe,ve,Tt=(Kt={},(0,st.Z)(Kt,v.POINTS,"points"),(0,st.Z)(Kt,v.LINES,"lines"),(0,st.Z)(Kt,v.LINE_LOOP,"line loop"),(0,st.Z)(Kt,v.LINE_STRIP,"line strip"),(0,st.Z)(Kt,v.TRIANGLES,"triangles"),(0,st.Z)(Kt,v.TRIANGLE_FAN,"triangle fan"),(0,st.Z)(Kt,v.TRIANGLE_STRIP,"triangle strip"),Kt),Zt=(it={},(0,st.Z)(it,v.STATIC_DRAW,"static"),(0,st.Z)(it,v.DYNAMIC_DRAW,"dynamic"),(0,st.Z)(it,v.STREAM_DRAW,"stream"),it),Ce=(gt={},(0,st.Z)(gt,v.BYTE,"int8"),(0,st.Z)(gt,v.UNSIGNED_INT,"int16"),(0,st.Z)(gt,v.INT,"int32"),(0,st.Z)(gt,v.UNSIGNED_BYTE,"uint8"),(0,st.Z)(gt,v.UNSIGNED_SHORT,"uint16"),(0,st.Z)(gt,v.UNSIGNED_INT,"uint32"),(0,st.Z)(gt,v.FLOAT,"float"),gt),Ut=(Vt={},(0,st.Z)(Vt,v.ALPHA,"alpha"),(0,st.Z)(Vt,v.LUMINANCE,"luminance"),(0,st.Z)(Vt,v.LUMINANCE_ALPHA,"luminance alpha"),(0,st.Z)(Vt,v.RGB,"rgb"),(0,st.Z)(Vt,v.RGBA,"rgba"),(0,st.Z)(Vt,v.RGBA4,"rgba4"),(0,st.Z)(Vt,v.RGB5_A1,"rgb5 a1"),(0,st.Z)(Vt,v.RGB565,"rgb565"),(0,st.Z)(Vt,v.DEPTH_COMPONENT,"depth"),(0,st.Z)(Vt,v.DEPTH_STENCIL,"depth stencil"),Vt),se=(re={},(0,st.Z)(re,v.DONT_CARE,"dont care"),(0,st.Z)(re,v.NICEST,"nice"),(0,st.Z)(re,v.FASTEST,"fast"),re),_e=(It={},(0,st.Z)(It,v.NEAREST,"nearest"),(0,st.Z)(It,v.LINEAR,"linear"),(0,st.Z)(It,v.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,st.Z)(It,v.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,st.Z)(It,v.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,st.Z)(It,v.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),It),$e=(Wt={},(0,st.Z)(Wt,v.REPEAT,"repeat"),(0,st.Z)(Wt,v.CLAMP_TO_EDGE,"clamp"),(0,st.Z)(Wt,v.MIRRORED_REPEAT,"mirror"),Wt),fr=($t={},(0,st.Z)($t,v.NONE,"none"),(0,st.Z)($t,v.BROWSER_DEFAULT_WEBGL,"browser"),$t),gr=(ae={},(0,st.Z)(ae,v.NEVER,"never"),(0,st.Z)(ae,v.ALWAYS,"always"),(0,st.Z)(ae,v.LESS,"less"),(0,st.Z)(ae,v.LEQUAL,"lequal"),(0,st.Z)(ae,v.GREATER,"greater"),(0,st.Z)(ae,v.GEQUAL,"gequal"),(0,st.Z)(ae,v.EQUAL,"equal"),(0,st.Z)(ae,v.NOTEQUAL,"notequal"),ae),Yt=(Bt={},(0,st.Z)(Bt,v.FUNC_ADD,"add"),(0,st.Z)(Bt,v.MIN_EXT,"min"),(0,st.Z)(Bt,v.MAX_EXT,"max"),(0,st.Z)(Bt,v.FUNC_SUBTRACT,"subtract"),(0,st.Z)(Bt,v.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Bt),Mr=(Ot={},(0,st.Z)(Ot,v.ZERO,"zero"),(0,st.Z)(Ot,v.ONE,"one"),(0,st.Z)(Ot,v.SRC_COLOR,"src color"),(0,st.Z)(Ot,v.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,st.Z)(Ot,v.SRC_ALPHA,"src alpha"),(0,st.Z)(Ot,v.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,st.Z)(Ot,v.DST_COLOR,"dst color"),(0,st.Z)(Ot,v.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,st.Z)(Ot,v.DST_ALPHA,"dst alpha"),(0,st.Z)(Ot,v.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,st.Z)(Ot,v.CONSTANT_COLOR,"constant color"),(0,st.Z)(Ot,v.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,st.Z)(Ot,v.CONSTANT_ALPHA,"constant alpha"),(0,st.Z)(Ot,v.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,st.Z)(Ot,v.SRC_ALPHA_SATURATE,"src alpha saturate"),Ot),Ln=(Ht={},(0,st.Z)(Ht,v.NEVER,"never"),(0,st.Z)(Ht,v.ALWAYS,"always"),(0,st.Z)(Ht,v.LESS,"less"),(0,st.Z)(Ht,v.LEQUAL,"lequal"),(0,st.Z)(Ht,v.GREATER,"greater"),(0,st.Z)(Ht,v.GEQUAL,"gequal"),(0,st.Z)(Ht,v.EQUAL,"equal"),(0,st.Z)(Ht,v.NOTEQUAL,"notequal"),Ht),Yn=(pe={},(0,st.Z)(pe,v.ZERO,"zero"),(0,st.Z)(pe,v.KEEP,"keep"),(0,st.Z)(pe,v.REPLACE,"replace"),(0,st.Z)(pe,v.INVERT,"invert"),(0,st.Z)(pe,v.INCR,"increment"),(0,st.Z)(pe,v.DECR,"decrement"),(0,st.Z)(pe,v.INCR_WRAP,"increment wrap"),(0,st.Z)(pe,v.DECR_WRAP,"decrement wrap"),pe),Ra=(ve={},(0,st.Z)(ve,v.FRONT,"front"),(0,st.Z)(ve,v.BACK,"back"),ve),ba=function(){function U(Ve,we){(0,tt.Z)(this,U),this.buffer=void 0;var er=we.data,Je=we.usage,Pr=we.type;this.buffer=Ve.buffer({data:er,usage:Zt[Je||v.STATIC_DRAW],type:Ce[Pr||v.UNSIGNED_BYTE]})}return(0,Q.Z)(U,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(we){var er=we.data,Je=we.offset;this.buffer.subdata(er,Je)}}]),U}(),Ba=ut(974902);function xa(U,Ve){var we=Object.keys(U);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(U);Ve&&(er=er.filter(function(Je){return Object.getOwnPropertyDescriptor(U,Je).enumerable})),we.push.apply(we,er)}return we}function ya(U){for(var Ve=1;Ve<arguments.length;Ve++){var we=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?xa(Object(we),!0).forEach(function(er){(0,st.Z)(U,er,we[er])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(we)):xa(Object(we)).forEach(function(er){Object.defineProperty(U,er,Object.getOwnPropertyDescriptor(we,er))})}return U}var Na=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Ta=0,hr=!1,Br=function(){function U(Ve,we){var er=this;(0,tt.Z)(this,U),this.reGl=Ve,this.context=we,this.entity=D(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Je={};this.context.uniforms.forEach(function(jr){var ht=jr.name,yt=jr.type,O=jr.data,E=jr.isReferer,w=jr.storageClass;if(w===W.StorageBuffer){if(E)er.textureCache[ht]={data:void 0},Je["".concat(ht,"Size")]=function(){return O.compiledBundle.context.output.textureSize};else{er.textureCache[ht]=er.calcDataTexture(ht,yt,O);var V=er.textureCache[ht],Et=V.textureWidth,Gt=V.isOutput;Je["".concat(ht,"Size")]=[Et,Et],Gt&&(er.outputTextureName=ht,er.context.needPingpong&&(er.outputTextureName="".concat(ht,"Output"),er.textureCache[er.outputTextureName]=er.calcDataTexture(ht,yt,O)))}Je[ht]=function(){return hr&&console.log("[".concat(er.entity,"]: ").concat(ht," ").concat(er.textureCache[ht].id)),er.textureCache[ht].texture}}else if(w===W.Uniform){if(O&&(Array.isArray(O)||X()(O))&&O.length>16)throw new Error("invalid data type ".concat(yt));Je[ht]=function(){return jr.data}}});var Pr=this.getOuputDataTexture(),Or=Pr.textureWidth,rn=Pr.texelCount;Je.u_OutputTextureSize=[Or,Or],Je.u_OutputTexelCount=rn,this.context.output.textureSize=[Or,Or];var fn={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Je,vert:Na,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(fn)}return(0,Q.Z)(U,[{key:"run",value:function(){var we=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){we.computeCommand()}),hr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Ve=(0,wt.Z)(L().mark(function er(){var Je=this,Pr,Or,rn,fn,jr,ht,yt,O;return L().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Pr=Je.reGl.read()}),!Pr){w.next=6;break}if(Or=this.getOuputDataTexture(),rn=Or.originalDataLength,fn=Or.elementsPerTexel,jr=Or.typedArrayConstructor,ht=jr===void 0?Float32Array:jr,yt=[],fn!==4)for(O=0;O<Pr.length;O+=4)fn===1?yt.push(Pr[O]):fn===2?yt.push(Pr[O],Pr[O+1]):yt.push(Pr[O],Pr[O+1],Pr[O+2]);else yt=Pr;return w.abrupt("return",new ht(yt.slice(0,rn)));case 6:return w.abrupt("return",new Float32Array);case 7:case"end":return w.stop()}},er,this)}));function we(){return Ve.apply(this,arguments)}return we}()},{key:"confirmInput",value:function(we,er){var Je;this.entity===we.entity?(this.dynamicPingpong=!0,Je=this):Je=we,this.textureCache[er].id=Je.getOuputDataTexture().id,this.textureCache[er].texture=Je.getOuputDataTexture().texture,hr&&console.log("[".concat(this.entity,"]: confirm input ").concat(er," from model ").concat(Je.entity,", ").concat(Je.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(we,er){var Je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Pr=this.context.uniforms.find(function(jr){var ht=jr.name;return ht===we});if(Pr){var Or=this.calcDataTexture(we,Pr.type,er),rn=Or.texture,fn=Or.data;this.textureCache[we].data=fn,this.textureCache[we].texture=rn}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var we=this.context.output.name;this.textureCache[we].id=this.getOuputDataTexture().id,this.textureCache[we].texture=this.getOuputDataTexture().texture}var er=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=er,hr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var we=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=we}},{key:"cloneDataTexture",value:function(we){var er=we.data,Je=we.textureWidth;return ya(ya({},we),{},{id:Ta++,texture:this.reGl.texture({width:Je,height:Je,data:er,type:"float"})})}},{key:"calcDataTexture",value:function(we,er,Je){var Pr=1;er===B.Vector4FloatArray&&(Pr=4);for(var Or=[],rn=0;rn<Je.length;rn+=Pr)Pr===1?Or.push(Je[rn],0,0,0):Pr===2?Or.push(Je[rn],Je[rn+1],0,0):Pr===3?Or.push(Je[rn],Je[rn+1],Je[rn+2],0):Pr===4&&Or.push(Je[rn],Je[rn+1],Je[rn+2],Je[rn+3]);var fn=Je.length,jr=Math.ceil(fn/Pr),ht=Math.ceil(Math.sqrt(jr)),yt=ht*ht;jr<yt&&Or.push.apply(Or,(0,Ba.Z)(new Array((yt-jr)*4).fill(0)));var O=this.reGl.texture({width:ht,height:ht,data:Or,type:"float"});return{id:Ta++,data:Or,originalDataLength:fn,typedArrayConstructor:X()(Je)?Je.constructor:void 0,textureWidth:ht,texture:O,texelCount:jr,elementsPerTexel:Pr,isOutput:we===this.context.output.name}}}]),U}(),cn=function(){function U(Ve,we){(0,tt.Z)(this,U),this.elements=void 0;var er=we.data,Je=we.usage,Pr=we.type,Or=we.count;this.elements=Ve.elements({data:er,usage:Zt[Je||v.STATIC_DRAW],type:Ce[Pr||v.UNSIGNED_BYTE],count:Or})}return(0,Q.Z)(U,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(we){var er=we.data;this.elements.subdata(er)}},{key:"destroy",value:function(){this.elements.destroy()}}]),U}(),Cn=function(){function U(Ve,we){(0,tt.Z)(this,U),this.framebuffer=void 0;var er=we.width,Je=we.height,Pr=we.color,Or=we.colors,rn=we.depth,fn=we.stencil,jr={width:er,height:Je};Array.isArray(Or)&&(jr.colors=Or.map(function(ht){return ht.get()})),Pr&&typeof Pr!="boolean"&&(jr.color=Pr.get()),this.framebuffer=Ve.framebuffer(jr)}return(0,Q.Z)(U,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(we){var er=we.width,Je=we.height;this.framebuffer.resize(er,Je)}}]),U}(),Qn=ut(671002),Bn=ut(968630),ta=ut.n(Bn);function sa(U){var Ve={};return Object.keys(U).forEach(function(we){Fa(we,U[we],Ve,"")}),Ve}function Fa(U,Ve,we,er){if(Ve===null||typeof Ve=="number"||typeof Ve=="boolean"||Array.isArray(Ve)&&typeof Ve[0]=="number"||X()(Ve)||Ve===""||Ve.resize!==void 0){we["".concat(er&&er+".").concat(U)]=Ve;return}ta()(Ve)&&Object.keys(Ve).forEach(function(Je){Fa(Je,Ve[Je],we,"".concat(er&&er+".").concat(U))}),Array.isArray(Ve)&&Ve.forEach(function(Je,Pr){Object.keys(Je).forEach(function(Or){Fa(Or,Je[Or],we,"".concat(er&&er+".").concat(U,"[").concat(Pr,"]"))})})}function wa(U,Ve){var we=Object.keys(U);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(U);Ve&&(er=er.filter(function(Je){return Object.getOwnPropertyDescriptor(U,Je).enumerable})),we.push.apply(we,er)}return we}function An(U){for(var Ve=1;Ve<arguments.length;Ve++){var we=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?wa(Object(we),!0).forEach(function(er){(0,st.Z)(U,er,we[er])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(we)):wa(Object(we)).forEach(function(er){Object.defineProperty(U,er,Object.getOwnPropertyDescriptor(we,er))})}return U}var ua=function(){function U(Ve,we){(0,tt.Z)(this,U),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Ve;var er=we.vs,Je=we.fs,Pr=we.defines,Or=we.attributes,rn=we.uniforms,fn=we.primitive,jr=we.count,ht=we.elements,yt=we.depth,O=we.blend,E=we.stencil,w=we.cull,V=we.instances,Et=we.scissor,Gt=we.viewport,Dt={};rn&&(this.uniforms=sa(rn),Object.keys(rn).forEach(function(ar){Dt[ar]=Ve.prop(ar)}));var ie={};Object.keys(Or).forEach(function(ar){ie[ar]=Or[ar].get()});var Ge=Pr&&this.generateDefines(Pr)||"",Te={attributes:ie,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Ge,`
`).concat(Je),uniforms:Dt,vert:`
`.concat(Ge,`
`).concat(er),primitive:Tt[fn===void 0?v.TRIANGLES:fn]};V&&(Te.instances=V),jr&&(Te.count=jr),ht&&(Te.elements=ht.get()),Et&&(Te.scissor=Et),Gt&&(Te.viewport=Gt),this.initDepthDrawParams({depth:yt},Te),this.initBlendDrawParams({blend:O},Te),this.initStencilDrawParams({stencil:E},Te),this.initCullDrawParams({cull:w},Te),this.drawCommand=Ve(Te)}return(0,Q.Z)(U,[{key:"addUniforms",value:function(we){this.uniforms=An(An({},this.uniforms),sa(we))}},{key:"draw",value:function(we){var er=An(An({},this.uniforms),sa(we.uniforms||{})),Je={};Object.keys(er).forEach(function(Pr){var Or=(0,Qn.Z)(er[Pr]);Or==="boolean"||Or==="number"||Array.isArray(er[Pr])||er[Pr].BYTES_PER_ELEMENT?Je[Pr]=er[Pr]:Or==="string"||(Je[Pr]=er[Pr].get())}),this.drawCommand(Je)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(we,er){var Je=we.depth;Je&&(er.depth={enable:Je.enable===void 0?!0:!!Je.enable,mask:Je.mask===void 0?!0:!!Je.mask,func:gr[Je.func||v.LESS],range:Je.range||[0,1]})}},{key:"initBlendDrawParams",value:function(we,er){var Je=we.blend;if(Je){var Pr=Je.enable,Or=Je.func,rn=Je.equation,fn=Je.color,jr=fn===void 0?[0,0,0,0]:fn;er.blend={enable:!!Pr,func:{srcRGB:Mr[Or&&Or.srcRGB||v.SRC_ALPHA],srcAlpha:Mr[Or&&Or.srcAlpha||v.SRC_ALPHA],dstRGB:Mr[Or&&Or.dstRGB||v.ONE_MINUS_SRC_ALPHA],dstAlpha:Mr[Or&&Or.dstAlpha||v.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Yt[rn&&rn.rgb||v.FUNC_ADD],alpha:Yt[rn&&rn.alpha||v.FUNC_ADD]},color:jr}}}},{key:"initStencilDrawParams",value:function(we,er){var Je=we.stencil;if(Je){var Pr=Je.enable,Or=Je.mask,rn=Or===void 0?-1:Or,fn=Je.func,jr=fn===void 0?{cmp:v.ALWAYS,ref:0,mask:-1}:fn,ht=Je.opFront,yt=ht===void 0?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:ht,O=Je.opBack,E=O===void 0?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:O;er.stencil={enable:!!Pr,mask:rn,func:An(An({},jr),{},{cmp:Ln[jr.cmp]}),opFront:{fail:Yn[yt.fail],zfail:Yn[yt.zfail],zpass:Yn[yt.zpass]},opBack:{fail:Yn[E.fail],zfail:Yn[E.zfail],zpass:Yn[E.zpass]}}}}},{key:"initCullDrawParams",value:function(we,er){var Je=we.cull;if(Je){var Pr=Je.enable,Or=Je.face,rn=Or===void 0?v.BACK:Or;er.cull={enable:!!Pr,face:Ra[rn]}}}},{key:"generateDefines",value:function(we){return Object.keys(we).map(function(er){return"#define ".concat(er," ").concat(Number(we[er]))}).join(`
`)}}]),U}(),ra=function(){function U(Ve,we){(0,tt.Z)(this,U),this.texture=void 0,this.width=void 0,this.height=void 0;var er=we.data,Je=we.type,Pr=Je===void 0?v.UNSIGNED_BYTE:Je,Or=we.width,rn=we.height,fn=we.flipY,jr=fn===void 0?!1:fn,ht=we.format,yt=ht===void 0?v.RGBA:ht,O=we.mipmap,E=O===void 0?!1:O,w=we.wrapS,V=w===void 0?v.CLAMP_TO_EDGE:w,Et=we.wrapT,Gt=Et===void 0?v.CLAMP_TO_EDGE:Et,Dt=we.aniso,ie=Dt===void 0?0:Dt,Ge=we.alignment,Te=Ge===void 0?1:Ge,ar=we.premultiplyAlpha,Ur=ar===void 0?!1:ar,pr=we.mag,nn=pr===void 0?v.NEAREST:pr,kn=we.min,We=kn===void 0?v.NEAREST:kn,vr=we.colorSpace,Nr=vr===void 0?v.BROWSER_DEFAULT_WEBGL:vr;this.width=Or,this.height=rn;var Fr={width:Or,height:rn,type:Ce[Pr],format:Ut[yt],wrapS:$e[V],wrapT:$e[Gt],mag:_e[nn],min:_e[We],alignment:Te,flipY:jr,colorSpace:fr[Nr],premultiplyAlpha:Ur,aniso:ie};er&&(Fr.data=er),typeof E=="number"?Fr.mipmap=se[E]:typeof E=="boolean"&&(Fr.mipmap=E),this.texture=Ve.texture(Fr)}return(0,Q.Z)(U,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(we){var er=we.width,Je=we.height;this.texture.resize(er,Je),this.width=er,this.height=Je}},{key:"destroy",value:function(){this.texture.destroy()}}]),U}(),Fn=function(){function U(){var Ve=this;(0,tt.Z)(this,U),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var we=(0,wt.Z)(L().mark(function er(Je){return L().wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(!Je.uniforms){Or.next=3;break}return Or.next=3,Promise.all(Object.keys(Je.uniforms).map(function(){var rn=(0,wt.Z)(L().mark(function fn(jr){var ht;return L().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(Je.uniforms[jr]&&Je.uniforms[jr].load!==void 0)){O.next=5;break}return O.next=3,Je.uniforms[jr].load();case 3:ht=O.sent,Je.uniforms[jr]=ht;case 5:case"end":return O.stop()}},fn)}));return function(fn){return rn.apply(this,arguments)}}()));case 3:return Or.abrupt("return",new ua(Ve.gl,Je));case 4:case"end":return Or.stop()}},er)}));return function(er){return we.apply(this,arguments)}}(),this.createAttribute=function(we){return new kt(Ve.gl,we)},this.createBuffer=function(we){return new ba(Ve.gl,we)},this.createElements=function(we){return new cn(Ve.gl,we)},this.createTexture2D=function(we){return new ra(Ve.gl,we)},this.createFramebuffer=function(we){return new Cn(Ve.gl,we)},this.useFramebuffer=function(we,er){Ve.gl({framebuffer:we?we.get():null})(er)},this.createComputeModel=function(){var we=(0,wt.Z)(L().mark(function er(Je){return L().wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:return Or.abrupt("return",new Br(Ve.gl,Je));case 1:case"end":return Or.stop()}},er)}));return function(er){return we.apply(this,arguments)}}(),this.clear=function(we){var er=we.color,Je=we.depth,Pr=we.stencil,Or=we.framebuffer,rn=Or===void 0?null:Or,fn={color:er,depth:Je,stencil:Pr};fn.framebuffer=rn===null?rn:rn.get(),Ve.gl.clear(fn)},this.setScissor=function(we){Ve.gl&&Ve.gl._gl&&(we.enable&&we.box?(Ve.gl._gl.enable(v.SCISSOR_TEST),Ve.gl._gl.scissor(we.box.x,we.box.y,we.box.width,we.box.height)):Ve.gl._gl.disable(v.SCISSOR_TEST),Ve.gl._refresh())},this.viewport=function(we){var er=we.x,Je=we.y,Pr=we.width,Or=we.height;Ve.gl&&Ve.gl._gl&&(Ve.gl._gl.viewport(er,Je,Pr,Or),Ve.gl._refresh())},this.readPixels=function(we){var er=we.framebuffer,Je=we.x,Pr=we.y,Or=we.width,rn=we.height,fn={x:Je,y:Pr,width:Or,height:rn};return er&&(fn.framebuffer=er.get()),Ve.gl.read(fn)},this.getCanvas=function(){return Ve.$canvas},this.getGLContext=function(){return Ve.gl._gl},this.destroy=function(){Ve.gl&&(Ve.gl.destroy(),Ve.inited=!1)}}return(0,Q.Z)(U,[{key:"init",value:function(){var Ve=(0,wt.Z)(L().mark(function er(Je){return L().wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if(!this.inited){Or.next=2;break}return Or.abrupt("return");case 2:return this.$canvas=Je.canvas,Or.next=5,new Promise(function(rn,fn){zt()({canvas:Je.canvas,attributes:{alpha:!0,antialias:Je.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(ht,yt){(ht||!yt)&&fn(ht),rn(yt)}})});case 5:this.gl=Or.sent,this.inited=!0;case 7:case"end":return Or.stop()}},er,this)}));function we(er){return Ve.apply(this,arguments)}return we}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),U}(),ka=function(){function U(){(0,tt.Z)(this,U),this.engine=void 0,this.configService=new K}return(0,Q.Z)(U,[{key:"setConfig",value:function(we){this.configService.set(we)}},{key:"setEngine",value:function(we){this.engine=we}},{key:"createEntity",value:function(){return D()}},{key:"createKernel",value:function(we){var er=new St(this.engine,this.configService);return typeof we=="string"?er.setBundle(JSON.parse(we)):er.setBundle(we),er.init(),er}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},er=new U;return er.setConfig(we),er.setEngine(new Fn),er}}]),U}()},387350:function(Sr,G,ut){"use strict";ut.d(G,{ZP:function(){return oS}});var wt={};ut.r(wt),ut.d(wt,{GADDI:function(){return uo},Stack:function(){return Wo},breadthFirstSearch:function(){return Ce},connectedComponent:function(){return _e},cosineSimilarity:function(){return ie},default:function(){return fo},depthFirstSearch:function(){return Yn},detectAllCycles:function(){return xa},detectAllDirectedCycle:function(){return Ba},detectAllUndirectedCycle:function(){return ba},detectCycle:function(){return ya},detectDirectedCycle:function(){return Si},dijkstra:function(){return hr},findAllPath:function(){return Cn},findShortestPath:function(){return cn},floydWarshall:function(){return Bn},getAdjMatrix:function(){return Vt},getDegree:function(){return fr},getInDegree:function(){return gr},getNeighbors:function(){return Ot},getOutDegree:function(){return Yt},iLouvain:function(){return O},kCore:function(){return w},kMeans:function(){return Gt},labelPropagation:function(){return sa},louvain:function(){return ht},minimumSpanningTree:function(){return Fr},nodesCosineSimilarity:function(){return Te},pageRank:function(){return Lt}});var st={};ut.r(st),ut.d(st,{Line:function(){return Lo},applyMatrix:function(){return ji},compare:function(){return Do},distance:function(){return jo},floydWarshall:function(){return gs},fractionToLine:function(){return ho},getAdjMatrix:function(){return Ms},getBBoxBoundLine:function(){return di},getCircleCenterByPoints:function(){return Ho},getCircleIntersectByPoint:function(){return Pn},getDegree:function(){return lo},getEllipseIntersectByPoint:function(){return Hi},getLineIntersect:function(){return Vo},getPointsCenter:function(){return Zo},getRectIntersectByPoint:function(){return Ns},intersectBBox:function(){return Gi},invertMatrix:function(){return yi},isPointInPolygon:function(){return Po},isPointsOverlap:function(){return go},isPolygonsIntersect:function(){return Zi},itemIntersectByLine:function(){return Ro},lerp:function(){return zi},lerpArray:function(){return La},move:function(){return Sa},pointLineDistance:function(){return Oi},pointLineSquareDist:function(){return qo},pointRectSquareDist:function(){return Ia},rotate:function(){return So},scale:function(){return ks},scaleMatrix:function(){return co},squareDist:function(){return _o},translate:function(){return us}});var tt={};ut.r(tt),ut.d(tt,{cloneBesidesImg:function(){return Ks},getAnimateCfgWithCallback:function(){return xs},getBBox:function(){return si},getComboBBox:function(){return $s},getLabelPosition:function(){return vo},getLetterWidth:function(){return qs},getLoopCfgs:function(){return to},getTextSize:function(){return zu},plainCombosToTrees:function(){return nu},reconstructTree:function(){return au},shouldRefreshEdge:function(){return Os},traverseTree:function(){return Ui},traverseTreeUp:function(){return yo},truncateLabelByLength:function(){return xu}});var Q={};ut.r(Q),ut.d(Q,{catmullRomToBezier:function(){return lt},fillPath:function(){return Li},fillPathByDiff:function(){return ui},formatPath:function(){return ko},intersection:function(){return Ai},parsePathArray:function(){return Ye},parsePathString:function(){return A},pathToAbsolute:function(){return Nt},pathToCurve:function(){return be},rectPath:function(){return Tr}});var J={};ut.r(J),ut.d(J,{easeBack:function(){return cl},easeBackIn:function(){return fl},easeBackInOut:function(){return cl},easeBackOut:function(){return De},easeBounce:function(){return gf},easeBounceIn:function(){return Vl},easeBounceInOut:function(){return Hl},easeBounceOut:function(){return gf},easeCircle:function(){return Lc},easeCircleIn:function(){return il},easeCircleInOut:function(){return Lc},easeCircleOut:function(){return ol},easeCubic:function(){return df.tw},easeCubicIn:function(){return df.yD},easeCubicInOut:function(){return df.tw},easeCubicOut:function(){return df._e},easeElastic:function(){return hl},easeElasticIn:function(){return ll},easeElasticInOut:function(){return jl},easeElasticOut:function(){return hl},easeExp:function(){return Hu},easeExpIn:function(){return vf},easeExpInOut:function(){return Hu},easeExpOut:function(){return Gl},easeLinear:function(){return Mu},easePoly:function(){return su},easePolyIn:function(){return Ac},easePolyInOut:function(){return su},easePolyOut:function(){return Tc},easeQuad:function(){return hf},easeQuadIn:function(){return lf},easeQuadInOut:function(){return hf},easeQuadOut:function(){return ou},easeSin:function(){return Jo},easeSinIn:function(){return Ic},easeSinInOut:function(){return Jo},easeSinOut:function(){return uu}});var X={};ut.r(X),ut.d(X,{calculationItemsBBox:function(){return Da},cloneEvent:function(){return fa},formatPadding:function(){return vi},isNaN:function(){return Ya},isViewportChanged:function(){return Yi},processParallelEdges:function(){return Ri},uniqueId:function(){return qn}});var T={};ut.r(T),ut.d(T,{getClosedSpline:function(){return Md},getControlPoint:function(){return Xh},getSpline:function(){return mv},getStarPath:function(){return b0},paddedHull:function(){return Ev},pathToPoints:function(){return Sd},pointsToPolygon:function(){return m0},roundedHull:function(){return _d}});var M={};ut.r(M),ut.d(M,{defaultSubjectColors:function(){return z0}});var C={};ut.r(C),ut.d(C,{isForce:function(){return Ov}});var _={};ut.r(_),ut.d(_,{Base:function(){return Qu},Circle:function(){return ly},Ellipse:function(){return dy},Image:function(){return py},Line:function(){return yy},Marker:function(){return xy},Path:function(){return Fd},Polygon:function(){return Iy},Polyline:function(){return Ny},Rect:function(){return Py},Text:function(){return By}});var b={};ut.r(b),ut.d(b,{Base:function(){return Du},Circle:function(){return Vy},Dom:function(){return jy},Ellipse:function(){return qy},Image:function(){return Ky},Line:function(){return Jy},Marker:function(){return em},Path:function(){return nm},Polygon:function(){return im},Polyline:function(){return sm},Rect:function(){return hm},Text:function(){return ym}});var L={};ut.r(L),ut.d(L,{getColorSetsBySubjectColors:function(){return g1},getColorsWithSubjectColor:function(){return Vd},mixColor:function(){return cs}});var S={};ut.r(S),ut.d(S,{arrayToTextureData:function(){return N1},attributesToTextureData:function(){return L1},buildTextureData:function(){return A1},buildTextureDataWithOneEdgeAttr:function(){return T1},buildTextureDataWithTwoEdgeAttr:function(){return I1},proccessToFunc:function(){return C1},radialLayout:function(){return k1}});var I={};ut.r(I),ut.d(I,{gpuDetector:function(){return Np}});var D={};ut.r(D),ut.d(D,{getBrowserName:function(){return kp}});var P={};ut.r(P),ut.d(P,{assign:function(){return el},default:function(){return vg},defaultI18n:function(){return ev},format:function(){return hg},parse:function(){return dg},setGlobalDateI18n:function(){return ag},setGlobalDateMasks:function(){return lg}});var y=ut(197582),v=ut(413810),K={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,v.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,v.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},R=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,v.clone)(K);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,v.each)(u,function(c,l){f[l]=(0,v.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),B=R,Y=B,W="*",q=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[W]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],p=l.callback,g=l.once;g&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),p.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),H=q,et=ut(935600);function ct(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return et.fromTranslation(r,t),et.multiply(i,r,e)}function at(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return et.fromRotation(r,t),et.multiply(i,r,e)}function St(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return et.fromScaling(r,t),et.multiply(i,r,e)}function bt(i,e,t){return et.multiply(i,t,e)}function zt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ct(t,t,[a[1],a[2]]);break;case"s":St(t,t,[a[1],a[2]]);break;case"r":at(t,t,a[1]);break;case"m":bt(t,t,a[1]);break;default:break}}return t}function kt(i,e){return i[0]*e[1]-e[0]*i[1]}function Kt(i,e,t){var r=vec2.angle(i,e),n=kt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function it(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var gt=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},Vt=gt,re=function(e,t){return e===t},It=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),Wt=function(){function i(e){e===void 0&&(e=re),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new It(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new It(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),$t=Wt,ae=function(){function i(){this.linkedList=new $t}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Bt=ae,Ot=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},Ht=function(e,t){return t.filter(function(r){return r.source===e})},pe=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ve=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Tt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Zt=function(e,t,r,n){n===void 0&&(n=!0);var a=Tt(r),o=new Bt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var p=o.dequeue();a.enter({current:p,previous:f}),Ot(p,u,n?"target":void 0).forEach(function(g){a.allowTraversal({previous:f,current:p,next:g})&&o.enqueue(g)}),a.leave({current:p,previous:f}),f=p};!o.isEmpty();)c()},Ce=Zt,Ut=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function g(x){u.push(x),s[x.id]=!0;for(var N=Ot(x.id,a),F=function(nt){var ft=N[nt];if(!s[ft]){var Mt=r.filter(function(Rt){return Rt.id===ft});Mt.length>0&&g(Mt[0])}},j=0;j<N.length;++j)F(j)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var p=[];u.length>0;)p.push(u.pop());o.push(p)}}return o},se=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,p=function F(j){u[j.id]=l,f[j.id]=l,l+=1,o.push(j),s[j.id]=!0;for(var $=Ot(j.id,a,"target").filter(function(Pt){return r.map(function(ne){return ne.id}).indexOf(Pt)>-1}),nt=function(ne){var xe=$[ne];if(!u[xe]&&u[xe]!==0){var he=r.filter(function(Ne){return Ne.id===xe});he.length>0&&F(he[0]),f[j.id]=Math.min(f[j.id],f[xe])}else s[xe]&&(f[j.id]=Math.min(f[j.id],u[xe]))},ft=0;ft<$.length;ft++)nt(ft);if(f[j.id]===u[j.id]){for(var Mt=[];o.length>0;){var Rt=o.pop();if(s[Rt.id]=!1,Mt.push(Rt),Rt===j)break}Mt.length>0&&c.push(Mt)}},g=0,x=r;g<x.length;g++){var N=x[g];!u[N.id]&&u[N.id]!==0&&p(N)}return c};function _e(i,e){return e?se(i):Ut(i)}var $e=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},fr=$e,gr=function(e,t){var r=$e(e);return r[t]?$e(e)[t].inDegree:0},Yt=function(e,t){var r=$e(e);return r[t]?$e(e)[t].outDegree:0};function Mr(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Ln(i,e,t,r,n){n===void 0&&(n=!0),r.enter({current:e,previous:t});var a=i.edges,o=a===void 0?[]:a;Ot(e,o,n?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:e,next:s})&&Ln(i,s,e,r,n)}),r.leave({current:e,previous:t})}function Yn(i,e,t,r){r===void 0&&(r=!0),Ln(i,e,"",Mr(t),r)}var Ra=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(p){var g=p.current,x=p.previous;if(s[g]){t={};for(var N=g,F=x;F!==g;)t[N]=F,N=F,F=a[F];t[N]=F}else s[g]=g,delete o[g],a[g]=x},leave:function(p){var g=p.current;u[g]=g,delete s[g]},allowTraversal:function(p){var g=p.next;return t?!1:!u[g]}};Object.keys(o).length;){var c=Object.keys(o)[0];Yn(e,c,f)}return t},ba=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=_e(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],p=l.id,g=[l],x=(n={},n[p]=l,n),N=(a={},a[p]=new Set,a);g.length>0;)for(var F=g.pop(),j=F.id,$=Ot(j,e.edges),nt=function(Rt){var Pt,ne=$[Rt],xe=e.nodes.find(function(zr){return zr.id===ne});if(ne===j)o.push((Pt={},Pt[ne]=F,Pt));else if(!(ne in N))x[ne]=F,g.push(xe),N[ne]=new Set([F]);else if(!N[j].has(xe)){for(var he=!0,Ne=[xe,F],He=x[j];N[ne].size&&!N[ne].has(He)&&(Ne.push(He),He!==x[He.id]);)He=x[He.id];if(Ne.push(He),t&&r?(he=!1,Ne.findIndex(function(zr){return t.indexOf(zr.id)>-1})>-1&&(he=!0)):t&&!r&&Ne.findIndex(function(zr){return t.indexOf(zr.id)>-1})>-1&&(he=!1),he){for(var Dr={},$r=1;$r<Ne.length;$r+=1)Dr[Ne[$r-1].id]=Ne[$r];Ne.length&&(Dr[Ne[Ne.length-1].id]=Ne[0]),o.push(Dr)}N[ne].add(F)}},ft=0;ft<$.length;ft+=1)nt(ft)}return o},Ba=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(He){for(var Dr=[He];Dr.length>0;){var $r=Dr.pop();a.has($r)&&(a.delete($r),o[$r.id].forEach(function(zr){Dr.push(zr)}),o[$r.id].clear())}},l=function Ne(He,Dr,$r){var zr=!1;if(t&&r===!1&&t.indexOf(He.id)>-1)return zr;n.push(He),a.add(He);for(var _r=$r[He.id],pn=0;pn<_r.length;pn+=1){var hn=u[_r[pn]];if(hn===Dr){for(var Cr={},Yr=1;Yr<n.length;Yr+=1)Cr[n[Yr-1].id]=n[Yr];n.length&&(Cr[n[n.length-1].id]=n[0]),s.push(Cr),zr=!0}else a.has(hn)||Ne(hn,Dr,$r)&&(zr=!0)}if(zr)c(He);else for(var pn=0;pn<_r.length;pn+=1){var hn=u[_r[pn]];o[hn.id].has(He)||o[hn.id].add(He)}return n.pop(),zr},p=e.nodes,g=p===void 0?[]:p,x=0;x<g.length;x+=1){var N=g[x],F=N.id;f[F]=x,u[x]=N}if(t&&r)for(var j=function(He){var Dr=t[He];f[g[He].id]=f[Dr],f[Dr]=0,u[0]=g.find(function($r){return $r.id===Dr}),u[f[g[He].id]]=g[He]},x=0;x<t.length;x++)j(x);for(var $=function(He){for(var Dr,$r,zr=1/0,_r=0;_r<He.length;_r+=1)for(var pn=He[_r],hn=0;hn<pn.length;hn++){var Cr=f[pn[hn].id];Cr<zr&&(zr=Cr,$r=_r)}for(var Yr=He[$r],an=[],_r=0;_r<Yr.length;_r+=1){var on=Yr[_r];an[on.id]=[];for(var Sn=0,On=Ot(on.id,e.edges,"target").filter(function(pi){return Yr.map(function(ai){return ai.id}).indexOf(pi)>-1});Sn<On.length;Sn++){var ca=On[Sn];ca===on.id&&!(r===!1&&t.indexOf(on.id)>-1)?s.push((Dr={},Dr[on.id]=on,Dr)):an[on.id].push(f[ca])}}return{component:Yr,adjList:an,minIdx:zr}},nt=0;nt<g.length;){var ft=g.filter(function(Ne){return f[Ne.id]>=nt}),Mt=se({nodes:ft,edges:e.edges}).filter(function(Ne){return Ne.length>1});if(Mt.length===0)break;var Rt=$(Mt),Pt=Rt.minIdx,ne=Rt.adjList,xe=Rt.component;if(xe.length>1){xe.forEach(function(Ne){o[Ne.id]=new Set});var he=u[Pt];if(t&&r&&t.indexOf(he.id)===-1)return s;l(he,he,ne),nt=Pt+1}else break}return s},xa=function(e,t,r,n){return n===void 0&&(n=!0),t?Ba(e,r,n):ba(e,r,n)},ya=Ra,Na=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Ta=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},p={};o.forEach(function(nt,ft){var Mt=nt.id;f.push(Mt),l[Mt]=1/0,Mt===t&&(l[Mt]=0)});for(var g=o.length,x=function(ft){var Mt=Na(l,o,c),Rt=Mt.id;if(c[Rt]=!0,l[Rt]===1/0)return"continue";var Pt=[];r?Pt=Ht(Rt,u):Pt=pe(Rt,u),Pt.forEach(function(ne){var xe=ne.target,he=ne.source,Ne=xe===Rt?he:xe,He=n&&ne[n]?ne[n]:1;l[Ne]>l[Mt.id]+He?(l[Ne]=l[Mt.id]+He,p[Ne]=[Mt.id]):l[Ne]===l[Mt.id]+He&&p[Ne].push(Mt.id)})},N=0;N<g;N++)x(N);p[t]=[t];var F={};for(var j in l)l[j]!==1/0&&Br(t,j,p,F);var $={};for(var j in F)$[j]=F[j][0];return{length:l,path:$,allPath:F}},hr=Ta;function Br(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=Br(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,v.isArray)(l)?n.push((0,y.ev)((0,y.ev)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var cn=function(e,t,r,n,a){var o=hr(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},Cn=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],p=n?Ot(t,s,"target"):Ot(t,s);for(c.push(p);u.length>0&&c.length>0;){var g=c[c.length-1];if(g.length){var x=g.shift();x&&(u.push(x),f[x]=!0,p=n?Ot(x,s,"target"):Ot(x,s),c.push(p.filter(function(j){return!f[j]})))}else{var N=u.pop();f[N]=!1,c.pop();continue}if(u[u.length-1]===r){var F=u.map(function($){return $});l.push(F);var N=u.pop();f[N]=!1,c.pop()}}return l},Qn=function(e,t){for(var r=Vt(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Bn=Qn,ta=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(ft,Mt){var Rt=ve();ft.clusterId=Rt,f[Rt]={id:Rt,nodes:[ft]},c[ft.id]={node:ft,idx:Mt}});var l=Vt(e,t),p=[],g={};l.forEach(function(ft,Mt){var Rt=0,Pt=o[Mt].id;g[Pt]={},ft.forEach(function(ne,xe){if(ne){Rt+=ne;var he=o[xe].id;g[Pt][he]=ne}}),p.push(Rt)});for(var x=0,N=function(){var Mt=!1;if(o.forEach(function(Rt){var Pt={};Object.keys(g[Rt.id]).forEach(function(zr){var _r=g[Rt.id][zr],pn=c[zr].node,hn=pn.clusterId;Pt[hn]||(Pt[hn]=0),Pt[hn]+=_r});var ne=-1/0,xe=[];if(Object.keys(Pt).forEach(function(zr){ne<Pt[zr]?(ne=Pt[zr],xe=[zr]):ne===Pt[zr]&&xe.push(zr)}),!(xe.length===1&&xe[0]===Rt.clusterId)){var he=xe.indexOf(Rt.clusterId);if(he>=0&&xe.splice(he,1),xe&&xe.length){Mt=!0;var Ne=f[Rt.clusterId],He=Ne.nodes.indexOf(Rt);Ne.nodes.splice(He,1);var Dr=Math.floor(Math.random()*xe.length),$r=f[xe[Dr]];$r.nodes.push(Rt),Rt.clusterId=$r.id}}}),!Mt)return"break";x++};x<n;){var F=N();if(F==="break")break}Object.keys(f).forEach(function(ft){var Mt=f[ft];(!Mt.nodes||!Mt.nodes.length)&&delete f[ft]});var j=[],$={};u.forEach(function(ft){var Mt=ft.source,Rt=ft.target,Pt=ft[r]||1,ne=c[Mt].node.clusterId,xe=c[Rt].node.clusterId,he="".concat(ne,"---").concat(xe);if($[he])$[he].weight+=Pt,$[he].count++;else{var Ne={source:ne,target:xe,weight:Pt,count:1};$[he]=Ne,j.push(Ne)}});var nt=[];return Object.keys(f).forEach(function(ft){nt.push(f[ft])}),{clusters:nt,clusterEdges:j}},sa=ta,Fa=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,v.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),wa=Fa,An=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,ua=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,ra=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(An)&&!"".concat(a.properties[o]).match(ua)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},Fn=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},ka=function(e){for(var t=ra(e),r=[],n=0;n<e.length;n++)r[n]=Fn(e[n].properties,t);return r},U=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},Ve={getAllSortProperties:ra,getPropertyWeight:ka,getAllProperties:U},we;(function(i){i.EuclideanDistance="euclideanDistance"})(we||(we={}));var er=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,v.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,v.uniq)(s))}),a},Je=function(e,t,r){var n=er(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var p=u[l],g=n[l],x=g.findIndex(function(j){return p===j}),N=[];if(s)N.push(p);else for(var F=0;F<g.length;F++)F===x?N.push(1):N.push(0);c=c.concat(N)}),a[f]=c}),a},Pr=function(e,t,r,n){r===void 0&&(r=we.EuclideanDistance);var a=0;switch(r){case we.EuclideanDistance:a=new wa(e).euclideanDistance(new wa(t));break;default:break}return a},Or={getAllKeyValueMap:er,oneHot:Je,getDistance:Pr},rn=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var p=t[u][c]||0,g=r[u]||0,x=r[c]||0;s+=p-g*x/o}}return s*=1/o,s},fn=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new wa([]),a=0;a<r;a++)n=n.add(new wa(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new wa(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new wa(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var p=new wa(t[l]);c[a][l]=u.squareEuclideanDistance(p),e[a].clusterInertial+=c[a][l]}}for(var g=0,x=2*r*s,a=0;a<r;a++)for(var N=e[a].clusterId,l=0;l<r;l++){var F=e[l].clusterId;if(!(a===l||N!==F)){var j=e[a].clusterInertial*e[l].clusterInertial/Math.pow(x,2)-c[a][l]/x;g+=j}}return Number(g.toFixed(4))},jr=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,p=e.edges,g=p===void 0?[]:p,x=[];if(a){l.forEach(function(Cr,Yr){Cr.properties=Cr.properties||{},Cr.originIndex=Yr});var N=[];l.every(function(Cr){return Cr.hasOwnProperty("nodeType")})&&(N=Array.from(new Set(l.map(function(Cr){return Cr.nodeType}))),l.forEach(function(Cr){Cr.properties.nodeType=N.findIndex(function(Yr){return Yr===Cr.nodeType})}));var F=U(l,o);x=Je(F,s,u)}var j=1,$={},nt={};l.forEach(function(Cr,Yr){var an=String(j++);Cr.clusterId=an,$[an]={id:an,nodes:[Cr]},nt[Cr.id]={node:Cr,idx:Yr}});var ft=Vt(e,t),Mt=[],Rt={},Pt=0;ft.forEach(function(Cr,Yr){var an=0,on=l[Yr].id;Rt[on]={},Cr.forEach(function(Sn,On){if(Sn){an+=Sn;var ca=l[On].id;Rt[on][ca]=Sn,Pt+=Sn}}),Mt.push(an)}),Pt/=2;for(var ne=1/0,xe=1/0,he=0,Ne=[],He={};;){a&&l.every(function(Cr){return Cr.hasOwnProperty("properties")})?ne=rn(l,ft,Mt,Pt)+fn(l,x)*f:ne=rn(l,ft,Mt,Pt),he===0&&(xe=ne,Ne=l,He=$);var Dr=ne>0&&ne>xe&&ne-xe<n;if(ne>xe&&(Ne=l.map(function(Cr){return{node:Cr,clusterId:Cr.clusterId}}),He=(0,v.clone)($),xe=ne),Dr||he>100)break;he++,Object.keys($).forEach(function(Cr){var Yr=0;g.forEach(function(an){var on=an.source,Sn=an.target,On=nt[on].node.clusterId,ca=nt[Sn].node.clusterId;(On===Cr&&ca!==Cr||ca===Cr&&On!==Cr)&&(Yr=Yr+(an[r]||1))}),$[Cr].sumTot=Yr}),l.forEach(function(Cr,Yr){var an=$[Cr.clusterId],on=0,Sn,On=Mt[Yr]/(2*Pt),ca=0,Aa=an.nodes;Aa.forEach(function(os){var ss=nt[os.id].idx;ca+=ft[Yr][ss]||0});var pi=ca-an.sumTot*On,ai=Aa.filter(function(os){return os.id!==Cr.id}),gi=[];ai.forEach(function(os,ss){gi[ss]=x[os.originIndex]});var xi=fn(ai,x)*f,Ji=Rt[Cr.id];if(Object.keys(Ji).forEach(function(os){var ss=nt[os].node,gu=ss.clusterId;if(gu!==Cr.clusterId){var Ls=$[gu],Hs=Ls.nodes;if(!(!Hs||!Hs.length)){var Va=0;Hs.forEach(function($a){var Ja=nt[$a.id].idx;Va+=ft[Yr][Ja]||0});var li=Va-Ls.sumTot*On,Ua=Hs.concat([Cr]),hi=[];Ua.forEach(function($a,Ja){hi[Ja]=x[$a.originIndex]});var Ni=fn(Ua,x)*f,Kn=li-pi;a&&(Kn=li+Ni-(pi+xi)),Kn>on&&(on=Kn,Sn=Ls)}}}),on>0){Sn.nodes.push(Cr);var Fi=Cr.clusterId;Cr.clusterId=Sn.id;var Bu=an.nodes.indexOf(Cr);an.nodes.splice(Bu,1);var is=0,Fu=0;g.forEach(function(os){var ss=os.source,gu=os.target,Ls=nt[ss].node.clusterId,Hs=nt[gu].node.clusterId;(Ls===Sn.id&&Hs!==Sn.id||Hs===Sn.id&&Ls!==Sn.id)&&(is=is+(os[r]||1)),(Ls===Fi&&Hs!==Fi||Hs===Fi&&Ls!==Fi)&&(Fu=Fu+(os[r]||1))}),Sn.sumTot=is,an.sumTot=Fu}})}var $r={},zr=0;Object.keys(He).forEach(function(Cr){var Yr=He[Cr];if(!Yr.nodes||!Yr.nodes.length){delete He[Cr];return}var an=String(zr+1);an!==Cr&&(Yr.id=an,Yr.nodes=Yr.nodes.map(function(on){return{id:on.id,clusterId:an}}),He[an]=Yr,$r[Cr]=an,delete He[Cr],zr++)}),Ne.forEach(function(Cr){var Yr=Cr.node,an=Cr.clusterId;Yr&&(Yr.clusterId=an,Yr.clusterId&&$r[Yr.clusterId]&&(Yr.clusterId=$r[Yr.clusterId]))});var _r=[],pn={};g.forEach(function(Cr){var Yr=Cr.source,an=Cr.target,on=Cr[r]||1,Sn=nt[Yr].node.clusterId,On=nt[an].node.clusterId;if(!(!Sn||!On)){var ca="".concat(Sn,"---").concat(On);if(pn[ca])pn[ca].weight+=on,pn[ca].count++;else{var Aa={source:Sn,target:On,weight:on,count:1};pn[ca]=Aa,_r.push(Aa)}}});var hn=[];return Object.keys(He).forEach(function(Cr){hn.push(He[Cr])}),{clusters:hn,clusterEdges:_r}},ht=jr,yt=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),ht(e,t,r,n,!0,a,o,s,u)},O=yt,E=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,v.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var p=fr({nodes:o,edges:u}),g=Object.keys(p);g.sort(function(F,j){var $,nt;return(($=p[F])===null||$===void 0?void 0:$.degree)-((nt=p[j])===null||nt===void 0?void 0:nt.degree)});var x=g[0];if(!o.length||((r=p[x])===null||r===void 0?void 0:r.degree)>=t)return"break";var N=o.findIndex(function(F){return F.id===x});o.splice(N,1),u=u.filter(function(F){return!(F.source===x||F.target===x)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},w=E,V=function(e,t,r){var n=[];switch(e){case we.EuclideanDistance:n=t[r];break;default:n=[];break}return n},Et=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=we.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===we.EuclideanDistance&&!u.every(function(an){return an.hasOwnProperty(r)}))return l;var p=[],g=[];if(o===we.EuclideanDistance&&(p=U(u,r),g=Je(p,n,a)),!g.length)return l;for(var x=(0,v.uniq)(g.map(function(an){return an.join("")})),N=Math.min(t,u.length,x.length),F=0;F<u.length;F++)u[F].originIndex=F;for(var j=[],$=[],nt=[],F=0;F<N;F++)if(F===0){var ft=Math.floor(Math.random()*u.length);switch(o){case we.EuclideanDistance:j[F]=g[ft];break;default:j[F]=[];break}$.push(ft),nt[F]=[u[ft]],u[ft].clusterId=String(F)}else{for(var Mt=-1/0,Rt=0,Pt=function(Sn){if(!$.includes(Sn)){for(var On=0,ca=0;ca<j.length;ca++){var Aa=0;switch(o){case we.EuclideanDistance:Aa=Pr(g[u[Sn].originIndex],j[ca],o);break;default:break}On+=Aa}var pi=On/j.length;pi>Mt&&!j.find(function(ai){return(0,v.isEqual)(ai,V(o,g,u[Sn].originIndex))})&&(Mt=pi,Rt=Sn)}},ne=0;ne<u.length;ne++)Pt(ne);j[F]=V(o,g,Rt),$.push(Rt),nt[F]=[u[Rt]],u[Rt].clusterId=String(F)}for(var xe=0;;){for(var F=0;F<u.length;F++){var he=0,Ne=1/0;if(!(xe===0&&$.includes(F))){for(var He=0;He<j.length;He++){var Dr=0;switch(o){case we.EuclideanDistance:Dr=Pr(g[F],j[He],o);break;default:break}Dr<Ne&&(Ne=Dr,he=He)}if(u[F].clusterId!==void 0)for(var $r=nt[Number(u[F].clusterId)].length-1;$r>=0;$r--)nt[Number(u[F].clusterId)][$r].id===u[F].id&&nt[Number(u[F].clusterId)].splice($r,1);u[F].clusterId=String(he),nt[he].push(u[F])}}for(var zr=!1,F=0;F<nt.length;F++){for(var _r=nt[F],pn=new wa([]),He=0;He<_r.length;He++)pn=pn.add(new wa(g[_r[He].originIndex]));var hn=pn.avg(_r.length);hn.equal(new wa(j[F]))||(zr=!0,j[F]=hn.getArr())}if(xe++,u.every(function(an){return an.clusterId!==void 0})&&zr||xe>=1e3)break}var Cr=[],Yr={};return c.forEach(function(an){var on,Sn,On=an.source,ca=an.target,Aa=(on=u.find(function(xi){return xi.id===On}))===null||on===void 0?void 0:on.clusterId,pi=(Sn=u.find(function(xi){return xi.id===ca}))===null||Sn===void 0?void 0:Sn.clusterId,ai="".concat(Aa,"---").concat(pi);if(Yr[ai])Yr[ai].count++;else{var gi={source:Aa,target:pi,count:1};Yr[ai]=gi,Cr.push(gi)}}),{clusters:nt,clusterEdges:Cr}},Gt=Et,Dt=function(e,t){var r=new wa(t),n=r.norm2(),a=new wa(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},ie=Dt,Ge=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,v.clone)(e.filter(function(p){return p.id!==t.id})),s=e.findIndex(function(p){return p.id===t.id}),u=U(e,r),f=Je(u,n,a),c=f[s],l=[];return o.forEach(function(p,g){if(p.id!==t.id){var x=f[g],N=ie(x,c);l.push(N),p.cosineSimilarity=N}}),o.sort(function(p,g){return g.cosineSimilarity-p.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},Te=Ge,ar=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),Ur=ar,pr=function(e,t){return e-t},nn=function(){function i(e){e===void 0&&(e=pr),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),kn=nn,We=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(F,j){return t?F.weight-j.weight:0},l=new kn(c);for(pe(u.id,s).forEach(function(N){l.insert(N)});!l.isEmpty();){var p=l.delMin(),g=p.source,x=p.target;f.has(g)&&f.has(x)||(r.push(p),f.has(g)||(f.add(g),pe(g,s).forEach(function(N){l.insert(N)})),f.has(x)||(f.add(x),pe(x,s).forEach(function(N){l.insert(N)})))}return r},vr=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(g){return g});t&&u.sort(function(g,x){return g.weight-x.weight});for(var f=new Ur(a.map(function(g){return g.id}));u.length>0;){var c=u.shift(),l=c.source,p=c.target;f.connected(l,p)||(r.push(c),f.union(l,p))}return r},Nr=function(e,t,r){var n={prim:We,kruskal:vr};return r?n[r](e,t):vr(e,t)},Fr=Nr,ee=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,p,g={},x={},N=0;N<l;++N){var F=u[N],j=F.id;g[j]=1/l,x[j]=1/l}for(var $=fr(e);o>0&&n>t;){a=0;for(var N=0;N<l;++N){var F=u[N],j=F.id;if(p=0,$[F.id].inDegree===0)g[j]=0;else{for(var nt=Ot(j,c,"source"),ft=0;ft<nt.length;++ft){var Mt=nt[ft],Rt=$[Mt].outDegree;Rt>0&&(p+=x[Mt]/Rt)}g[j]=r*p,a+=g[j]}}a=(1-a)/l,n=0;for(var N=0;N<l;++N){var F=u[N],j=F.id;p=g[j]+a,n+=Math.abs(p-x[j]),x[j]=p}o-=1}return x},Lt=ee,ue=-1,Ee=-1,me="-1",Ie="-1",rr=-1,ir="-1",Zr=function(){function i(e,t,r,n){e===void 0&&(e=ue),t===void 0&&(t=Ee),r===void 0&&(r=Ee),n===void 0&&(n=me),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),En=function(){function i(e,t){e===void 0&&(e=Ee),t===void 0&&(t=Ie),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),ln=function(){function i(e,t,r){e===void 0&&(e=Ee),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new En(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new Zr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new Zr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),zn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Ie,edgeLabel:n||me,nodeLabel2:a||Ie}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),Gn=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new zn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=rr),t===void 0&&(t=!1);var r=new ln(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Ie&&r.addNode(a,u),c!==Ie&&r.addNode(o,c),u!==Ie&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),la=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),Ha=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,p=l===void 0?!1:l,g=e.verbose,x=g===void 0?!1:g;this.graphs=t,this.dfsCode=new Gn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=p,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=x,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var p=f[l],g=o[p.to].label;t.to===p.to||r>g||n.hasNode(o[p.to])||(t.label<p.label||t.label===p.label&&s<=g)&&a.push(p)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(rr,r),a=n.nodeMap,o=new Gn,s={};n.nodes.forEach(function(l){var p=e.findForwardRootEdges(n,l);p.forEach(function(g){var x=a[g.to],N="".concat(l.label,"-").concat(g.label,"-").concat(x.label);s[N]||(s[N]={projected:[],nodeLabel1:l.label,edgeLabel:g.label,nodeLabel2:x.label});var F={graphId:n.id,edge:g,preNode:null};s[N].projected.push(F)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new zn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(p){for(var g=o.buildRmpath(),x=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,N=o.dfsEdgeList[g[0]].toNode,F={},j=!1,$=0,nt=r?-1:0,ft=function(pn){if(j)return"break";p.forEach(function(hn){var Cr=new la(hn),Yr=e.findBackwardEdge(n,Cr.edges[g[pn]],Cr.edges[g[0]],Cr);Yr&&(F[Yr.label]||(F[Yr.label]={projected:[],edgeLabel:Yr.label}),F[Yr.label].projected.push({graphId:n.id,edge:F,preNode:hn}),$=o.dfsEdgeList[g[pn]].fromNode,j=!0)})},Mt=g.length-1;Mt>nt;Mt--){var Rt=ft(Mt);if(Rt==="break")break}if(j){var Pt=e.findMinLabel(F);o.dfsEdgeList.push(new zn(N,$,Ie,Pt.edgeLabel,Ie));var ne=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[ne]!==o.dfsEdgeList[ne]?!1:l(F[Pt.edgeLabel].projected)}var xe={};j=!1;var he=0;p.forEach(function(_r){var pn=new la(_r),hn=e.findForwardPureEdges(n,pn.edges[g[0]],x,pn);hn.length>0&&(j=!0,he=N,hn.forEach(function(Cr){var Yr="".concat(Cr.label,"-").concat(a[Cr.to].label);xe[Yr]||(xe[Yr]={projected:[],edgeLabel:Cr.label,nodeLabel2:a[Cr.to].label}),xe[Yr].projected.push({graphId:n.id,edge:Cr,preNode:_r})}))});for(var Ne=g.length,He=function(pn){if(j)return"break";var hn=g[pn];p.forEach(function(Cr){var Yr=new la(Cr),an=e.findForwardRmpathEdges(n,Yr.edges[hn],x,Yr);an.length>0&&(j=!0,he=o.dfsEdgeList[hn].fromNode,an.forEach(function(on){var Sn="".concat(on.label,"-").concat(a[on.to].label);xe[Sn]||(xe[Sn]={projected:[],edgeLabel:on.label,nodeLabel2:a[on.to].label}),xe[Sn].projected.push({graphId:n.id,edge:on,preNode:Cr})}))})},Mt=0;Mt<Ne;Mt++){var Dr=He(Mt);if(Dr==="break")break}if(!j)return!0;var $r=e.findMinLabel(xe);o.dfsEdgeList.push(new zn(he,N+1,Ie,$r.edgeLabel,$r.nodeLabel2));var zr=o.dfsEdgeList.length-1;return t.dfsEdgeList[zr]!==o.dfsEdgeList[zr]?!1:l(xe["".concat($r.edgeLabel,"-").concat($r.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,v.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],p=l.nodeMap,g=new la(c),x=a.length-1;x>=0;x--){var N=t.findBackwardEdge(l,g.edges[a[x]],g.edges[a[0]],g);if(N){var F="".concat(t.dfsCode.dfsEdgeList[a[x]].fromNode,"-").concat(N.label);f[F]||(f[F]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[x]].fromNode,edgeLabel:N.label}),f[F].projected.push({graphId:c.graphId,edge:N,preNode:c})}}if(!(n>=t.maxNodeNum)){var j=t.findForwardPureEdges(l,g.edges[a[0]],s,g);j.forEach(function(nt){var ft="".concat(o,"-").concat(nt.label,"-").concat(p[nt.to].label);u[ft]||(u[ft]={projected:[],fromNodeId:o,edgeLabel:nt.label,nodeLabel2:p[nt.to].label}),u[ft].projected.push({graphId:c.graphId,edge:nt,preNode:c})});for(var $=function(ft){var Mt=t.findForwardRmpathEdges(l,g.edges[a[ft]],s,g);Mt.forEach(function(Rt){var Pt="".concat(t.dfsCode.dfsEdgeList[a[ft]].fromNode,"-").concat(Rt.label,"-").concat(p[Rt.to].label);u[Pt]||(u[Pt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[ft]].fromNode,edgeLabel:Rt.label,nodeLabel2:p[Rt.to].label}),u[Pt].projected.push({graphId:c.graphId,edge:Rt,preNode:c})})},x=0;x<a.length;x++)$(x)}}),Object.keys(f).forEach(function(c){var l=f[c],p=l.toNodeId,g=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new zn(o,p,"-1",g,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],p=l.fromNodeId,g=l.edgeLabel,x=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new zn(p,o+1,Ie,g,x)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(p,g){var x=p.label,N="".concat(f,"-").concat(x);if(!s[N]){var F=a[x]||0;F++,a[x]=F}s[N]={graphKey:f,label:x},p.edges.forEach(function(j){var $=x,nt=l[j.to].label;if(!t&&$>nt){var ft=nt;nt=$,$=ft}var Mt=j.label,Rt="".concat(f,"-").concat($,"-").concat(Mt,"-").concat(nt),Pt="".concat($,"-").concat(Mt,"-").concat(nt);if(!o[Pt]){var ne=o[Pt]||0;ne++,o[Pt]=ne}u[Rt]={graphId:f,nodeLabel1:$,edgeLabel:Mt,nodeLabel2:nt}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],p="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[p]||(n[p]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var g={graphId:a,edge:c,preNode:null};n[p].projected.push(g)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new zn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),qa=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new ln(s,!0,t),c={};u.nodes.forEach(function(l,p){f.addNode(p,l[r]),c[l.id]=p}),u.edges.forEach(function(l,p){var g=c[l.source],x=c[l.target];f.addEdge(-1,g,x,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Oa=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Ao="cluster",wi=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Ao:a,s=e.edgeLabelProp,u=s===void 0?Ao:s,f=qa(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,p=e.minNodeNum,g=e.verbose,x=e.top,N={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:p,top:x,verbose:g,directed:n},F=new Ha(N);F.run();var j=Oa(F.frequentSubgraphs,o,u);return j},Ei=wi,oo=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(hs(o,s,u,r,n))}),a},hs=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},To=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,p=0,g=f.nodeIdxs,x=f.neighborNum-1;l<o;){for(var N=g[1+Math.floor(Math.random()*x)],F=0;(s["".concat(c,"-").concat(N)]||s["".concat(N,"-").concat(c)])&&(N=Math.floor(Math.random()*t),F++,!(F>2*t)););if(F<2*t&&(s["".concat(c,"-").concat(N)]={start:c,end:N,distance:a[c][N]},l++,u++,u>=r))return s;if(p++,p>2*t)break}if(l<o){var j=o-l;o=(o+j)/(t-c-1)}}),s},so=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var p=new Set(l),g=c.filter(function($){return p.has($)});if(!(!g||!g.length)){for(var x={},N=g.length,F=0;F<N;F++){var j=a[g[F]];n[o].nodes.push(j),x[j.id]=!0}r.edges.forEach(function($){x[$.source]&&x[$.target]&&n[o].edges.push($)})}}}}),n},ma=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],p=t==null?void 0:t.nodes[0][r],g=t==null?void 0:t.nodes[1][r],x=t==null?void 0:t.edges[0][n];f[n]===x&&(c===p&&l===g||c===g&&l===p)&&u++}),u)},Io=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function($,nt){return c[$]-c[nt]}),p=10,g=[];l.forEach(function($,nt){g[nt%p]||(g[nt%p]={graphs:[],totalCount:0,aveCount:0}),g[nt%p].graphs.push($),g[nt%p].totalCount+=c[$]});var x=0,N=[];g.forEach(function($){var nt=$.totalCount/$.graphs.length;$.aveCount=nt,N.push(nt);var ft=0,Mt=$.length;$.graphs.forEach(function(Rt,Pt){var ne=c[Rt];$.graphs.forEach(function(xe,he){Pt!==he&&(ft+=Math.abs(ne-c[xe]))})}),ft/=Mt*(Mt-1)/2,x+=ft}),x/=g.length;var F=0;N.forEach(function($,nt){N.forEach(function(ft,Mt){nt!==Mt&&(F+=Math.abs($-ft))}),F/=N.length*(N.length-1)/2});var j=F-x;n<j&&(n=j,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},ds=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},ei=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ve)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},Wi=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,p=o[c];a["".concat(f,"-").concat(l)]=p,r||(a["".concat(l,"-").concat(f)]=p)}}),a},vs=function(e,t,r,n,a,o,s,u,f,c,l){var p,g="".concat(t.id,"-").concat(r.id);if(c&&c[g])return c[g];var x=l?l[g]:void 0;if(!x){var N=(p={},p[g]={start:n[t.id].idx,end:n[r.id].idx,distance:a},p);l=so(N,o,e,l),x=l[g]}return ma(x,s,u,f)},Yo=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var p=r[l.id].degree;u>p&&(u=p);var g=r[l.id].inDegree;f>g&&(f=g);var x=r[l.id].outDegree;c>x&&(c=x)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Vi=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=Bn(e,r),l=Bn(t,r),p=Wi(e.nodes,c,r),g=Wi(t.nodes,l,r),x=ds(e.nodes,o),N=x.nodeMap,F=x.nodeLabelMap,j=ds(t.nodes,o),$=j.nodeMap,nt=j.nodeLabelMap;ei(e.edges,s,N);var ft=ei(t.edges,s,$).edgeLabelMap,Mt=[];l==null||l.forEach(function(Va){Mt=Mt.concat(Va)}),a||(a=Math.max.apply(Math,(0,y.ev)((0,y.ev)([],Mt,!1),[2],!1))),n||(n=a);var Rt=oo(e,c,o,n),Pt=oo(t,l,o,n),ne=Math.min(100,f*(f-1)/2),xe=To(n,f,ne,Rt,c),he=so(xe,Rt,e),Ne=10,He=1,Dr=1,$r=4,zr={graphs:he,nodeLabelProp:o,edgeLabelProp:s,minSupport:He,minNodeNum:Dr,maxNodeNum:$r,directed:r},_r=Ei(zr).slice(0,Ne),pn=_r.length,hn=[];_r.forEach(function(Va,li){hn[li]={},Object.keys(he).forEach(function(Ua){var hi=he[Ua],Ni=ma(hi,Va,o,s);hn[li][Ua]=Ni})});var Cr=Io(hn,pn,_r),Yr=Cr.structure,an=Cr.structureCountMap,on=t.nodes[0],Sn=[],On=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ca=-1/0;t.nodes.forEach(function(Va){var li=Va[o],Ua=F[li];(Ua==null?void 0:Ua.length)>ca&&(ca=Ua.length,Sn=Ua,On=li,on=Va)});var Aa={},pi={},ai={},gi={},xi={},Ji={};Object.keys(nt).forEach(function(Va,li){xi[Va]=[],r&&(Ji[Va]=[]);var Ua=-1/0,hi=nt[Va],Ni={};hi.forEach(function(ti){var ci=g["".concat(on.id,"-").concat(ti.id)];if(ci&&xi[Va].push(ci),Ua<ci&&(Ua=ci),Ni["".concat(on.id,"-").concat(ti.id)]={start:0,end:$[ti.id].idx,distance:ci},r){var po=g["".concat(ti.id,"-").concat(on.id)];po&&Ji[Va].push(po)}}),xi[Va]=xi[Va].sort(function(ti,ci){return ti-ci}),r&&(Ji[Va]=Ji[Va].sort(function(ti,ci){return ti-ci})),pi=so(Ni,Pt,t,pi);var Kn=[];if(Object.keys(Ni).forEach(function(ti){if(ai[ti]){Kn.push(ai[ti]);return}var ci=pi[ti];ai[ti]=ma(ci,Yr,o,s),Kn.push(ai[ti])}),Kn=Kn.sort(function(ti,ci){return ci-ti}),gi["".concat(on.id,"-").concat(Va)]=Kn,Va!==On)for(var $a=(Sn==null?void 0:Sn.length)||0,Ja=function(ci){var po=Sn[ci],yu=Rt[N[po.id].idx],Xo=yu.nodeLabelCountMap[Va],Bl=nt[Va].length;if(!Xo||Xo.count<Bl)return Sn.splice(ci,1),"continue";for(var lh=!1,js=0;js<Bl;js++)if(Xo.dists[js]>xi[Va][js]){lh=!0;break}if(lh)return Sn.splice(ci,1),"continue";var Gu={};yu.neighbors.forEach(function(Zs){var rf=p["".concat(po.id,"-").concat(Zs.id)];Gu["".concat(po.id,"-").concat(Zs.id)]={start:N[po.id].idx,end:N[Zs.id].idx,distance:rf}}),he=so(Gu,Rt,e,he);var Df=[];Object.keys(Gu).forEach(function(Zs){if(an[Zs]){Df.push(an[Zs]);return}var rf=he[Zs];an[Zs]=ma(rf,Yr,o,s),Df.push(an[Zs])}),Df=Df.sort(function(Zs,rf){return rf-Zs});for(var nl=!1,js=0;js<Bl;js++)if(Df[js]<Kn[js]){nl=!0;break}if(nl)return Sn.splice(ci,1),"continue"},ki=$a-1;ki>=0;ki--)Ja(ki)});var Fi=[];Sn==null||Sn.forEach(function(Va){for(var li=N[Va.id].idx,Ua=hs(e.nodes,c[li],li,o,a),hi=Ua.neighbors,Ni=hi.length,Kn=!1,$a=Ni-1;$a>=0;$a--){if(hi.length+1<t.nodes.length){Kn=!0;return}var Ja=hi[$a],ki=Ja[o];if(!nt[ki]||!nt[ki].length){hi.splice($a,1);continue}if(!xi[ki]||!xi[ki].length){hi.splice($a,1);continue}var ti="".concat(Va.id,"-").concat(Ja.id),ci=p[ti],po=xi[ki].length-1,yu=xi[ki][po];if(ci>yu){hi.splice($a,1);continue}if(r){var Xo="".concat(Ja.id,"-").concat(Va.id),Bl=p[Xo];po=Ji[ki].length-1;var lh=Ji[ki][po];if(Bl>lh){hi.splice($a,1);continue}}var js=an[ti]?an[ti]:vs(e,Va,Ja,N,ci,Rt,Yr,o,s,an,he),Gu="".concat(on.id,"-").concat(ki),Df=gi[Gu][gi[Gu].length-1];if(js<Df){hi.splice($a,1);continue}var nl=Yo(Aa,ki,$,nt),Zs=nl.minPatternNodeLabelDegree,rf=nl.minPatternNodeLabelInDegree,yc=nl.minPatternNodeLabelOutDegree;if(N[Ja.id].degree<Zs){hi.splice($a,1);continue}}Kn||Fi.push({nodes:[Va].concat(hi)})});var Bu=hr(t,on.id,!1).length,is={};r?(Object.keys(Bu).forEach(function(Va){var li=$[Va].node[o];is[li]?is[li].push(Bu[Va]):is[li]=[Bu[Va]]}),Object.keys(is).forEach(function(Va){is[Va].sort(function(li,Ua){return li-Ua})})):is=xi;for(var Fu=Fi.length,os=function(li){var Ua=Fi[li],hi=Ua.nodes[0],Ni={},Kn={};Ua.nodes.forEach(function(io,mu){Kn[io.id]={idx:mu,node:io,degree:0,inDegree:0,outDegree:0};var ls=io[o];Ni[ls]?Ni[ls]++:Ni[ls]=1});var $a=[],Ja={};e.edges.forEach(function(io){Kn[io.source]&&Kn[io.target]&&($a.push(io),Ja[io[s]]?Ja[io[s]]++:Ja[io[s]]=1,Kn[io.source].degree++,Kn[io.target].degree++,Kn[io.source].outDegree++,Kn[io.target].inDegree++)});for(var ki=Object.keys(ft).length,ti=!1,ci=0;ci<ki;ci++){var po=Object.keys(ft)[ci];if(!Ja[po]||Ja[po]<ft[po].length){ti=!0;break}}if(ti)return Fi.splice(li,1),"continue";var yu=$a.length;if(yu<t.edges.length)return Fi.splice(li,1),"break";for(var Xo=!1,Bl=function(mu){var ls=$a[mu],Pf=ls[s],Fl=ft[Pf];if(!Fl||!Fl.length)return Ja[Pf]--,Fl&&Ja[Pf]<Fl.length?(Xo=!0,"break"):($a.splice(mu,1),Kn[ls.source].degree--,Kn[ls.target].degree--,Kn[ls.source].outDegree--,Kn[ls.target].inDegree--,"continue");var c0=Kn[ls.source].node[o],l0=Kn[ls.target].node[o],yv=!1;if(Fl.forEach(function(h0){var d0=$[h0.source].node,v0=$[h0.target].node;d0[o]===c0&&v0[o]===l0&&(yv=!0),!r&&d0[o]===l0&&v0[o]===c0&&(yv=!0)}),!yv)return Ja[Pf]--,Fl&&Ja[Pf]<Fl.length?(Xo=!0,"break"):($a.splice(mu,1),Kn[ls.source].degree--,Kn[ls.target].degree--,Kn[ls.source].outDegree--,Kn[ls.target].inDegree--,"continue")},ci=yu-1;ci>=0;ci--){var lh=Bl(ci);if(lh==="break")break}if(Xo)return Fi.splice(li,1),"continue";Ua.edges=$a;var js=hr(Ua,Ua.nodes[0].id,!1).length;if(Object.keys(js).reverse().forEach(function(io){if(!(io===Ua.nodes[0].id||Xo)){if(js[io]===1/0){var mu=Kn[io].node[o];if(Ni[mu]--,Ni[mu]<nt[mu].length){Xo=!0;return}var ls=Ua.nodes.indexOf(Kn[io].node);Ua.nodes.splice(ls,1),Kn[io]=void 0;return}var Pf=N[io].node[o];if(!is[Pf]||!is[Pf].length||js[io]>is[Pf][is[Pf].length-1]){var mu=Kn[io].node[o];if(Ni[mu]--,Ni[mu]<nt[mu].length){Xo=!0;return}var ls=Ua.nodes.indexOf(Kn[io].node);Ua.nodes.splice(ls,1),Kn[io]=void 0}}}),Xo)return Fi.splice(li,1),"continue";for(var Gu=!0,Df=0;Gu&&!Xo;){Gu=!1;var nl=r?Kn[hi.id].degree<$[on.id].degree||Kn[hi.id].inDegree<$[on.id].inDegree||Kn[hi.id].outDegree<$[on.id].outDegree:Kn[hi.id].degree<$[on.id].degree;if(nl){Xo=!0;break}if(Ni[hi[o]]<nt[hi[o]].length){Xo=!0;break}for(var Zs=Ua.nodes.length,rf=Zs-1;rf>=0;rf--){var yc=Ua.nodes[rf],u0=Kn[yc.id].degree,sS=Kn[yc.id].inDegree,uS=Kn[yc.id].outDegree,fS=yc[o],gv=Yo(Aa,fS,$,nt),f0=gv.minPatternNodeLabelDegree,cS=gv.minPatternNodeLabelInDegree,lS=gv.minPatternNodeLabelOutDegree,hS=r?u0<f0||sS<cS||uS<lS:u0<f0;if(hS){if(Ni[yc[o]]--,Ni[yc[o]]<nt[yc[o]].length){Xo=!0;break}Ua.nodes.splice(rf,1),Kn[yc.id]=void 0,Gu=!0}}if(Xo||!Gu&&Df!==0)break;yu=$a.length;for(var wd=yu-1;wd>=0;wd--){var mc=$a[wd];if(!Kn[mc.source]||!Kn[mc.target]){$a.splice(wd,1);var Ed=mc[s];if(Ja[Ed]--,Kn[mc.source]&&(Kn[mc.source].degree--,Kn[mc.source].outDegree--),Kn[mc.target]&&(Kn[mc.target].degree--,Kn[mc.target].inDegree--),ft[Ed]&&Ja[Ed]<ft[Ed].length){Xo=!0;break}Gu=!0}}Df++}if(Xo||Xo||Ua.nodes.length<t.nodes.length||$a.length<t.edges.length)return Fi.splice(li,1),"continue"},ss=Fu-1;ss>=0;ss--){var gu=os(ss);if(gu==="break")break}for(var Ls=Fi.length,Hs=function(li){var Ua=Fi[li],hi={};Ua.edges.forEach(function($a){var Ja="".concat($a.source,"-").concat($a.target,"-").concat($a.label);hi[Ja]?hi[Ja]++:hi[Ja]=1});for(var Ni=function(Ja){var ki=Fi[Ja],ti={};ki.edges.forEach(function(po){var yu="".concat(po.source,"-").concat(po.target,"-").concat(po.label);ti[yu]?ti[yu]++:ti[yu]=1});var ci=!0;Object.keys(ti).length!==Object.keys(hi).length?ci=!1:Object.keys(hi).forEach(function(po){ti[po]!==hi[po]&&(ci=!1)}),ci&&Fi.splice(Ja,1)},Kn=Ls-1;Kn>li;Kn--)Ni(Kn);Ls=Fi.length},ss=0;ss<=Ls-1;ss++)Hs(ss);return Fi}}},uo=Vi,Gs=function(){function i(e){e===void 0&&(e=10),this.linkedList=new $t,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Wo=Gs,Si=ya,fo={getAdjMatrix:Vt,breadthFirstSearch:Ce,connectedComponent:_e,getDegree:fr,getInDegree:gr,getOutDegree:Yt,detectCycle:ya,detectDirectedCycle:Si,detectAllCycles:xa,detectAllDirectedCycle:Ba,detectAllUndirectedCycle:ba,depthFirstSearch:Yn,dijkstra:hr,findAllPath:Cn,findShortestPath:cn,floydWarshall:Bn,labelPropagation:sa,louvain:ht,iLouvain:O,kCore:w,kMeans:Gt,cosineSimilarity:ie,nodesCosineSimilarity:Te,minimumSpanningTree:Fr,pageRank:Lt,getNeighbors:Ot,Stack:Wo,GADDI:uo},ps=ut(277160),Tn=ut(631437),Eo=zt,Do=function(e){return function(t,r){return t[e]-r[e]}},Ss=function(e,t,r){return e>=t&&e<=r},Vo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,p=s.x*s.x+s.y*s.y,g=u.x*u.x+u.y*u.y;if(c>a*p*g){var x=(o.x*u.y-o.y*u.x)*l,N=(o.x*s.y-o.y*s.x)*l;return!Ss(x,0,1)||!Ss(N,0,1)?null:{x:e.x+x*s.x,y:e.y+x*s.y}}return null},Ns=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,p=1;p<f.length&&(l=Vo(f[p-1],f[p],c,t),!l);p++);return l},Pn=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},Hi=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},ji=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),ps.transformMat3(n,n,t),{x:n[0],y:n[1]}},yi=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=et.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return ps.transformMat3(a,a,n),{x:a[0],y:a[1]}},Ho=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},jo=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},co=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},gs=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Ms=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},us=function(e,t){e.translate(t.x,t.y)},Sa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,p=0,g=0,x=0;e.animate(function(F){return g=f*F,x=c*F,a=Eo(a,[["t",g-l,x-p]]),l=g,p=x,{matrix:a}},n)}else{var N=Eo(a,[["t",s,u]]);e.setMatrix(N)}},ks=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,v.isArray)(t)||(n=[t,t]),(0,v.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Eo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},So=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Eo(r,[["r",t]]),e.setMatrix(r)},lo=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function _s(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Po=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(_s(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Gi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Mo=function(e,t){var r=!1;return(0,v.each)(e,function(n){if(Vo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},Zi=function(e,t){var r=function(p){var g=p.map(function(N){return N[0]}),x=p.map(function(N){return N[1]});return{minX:Math.min.apply(null,g),maxX:Math.max.apply(null,g),minY:Math.min.apply(null,x),maxY:Math.max.apply(null,x)}},n=function(p){for(var g=[],x=p.length,N=0;N<x-1;N++){var F=p[N],j=p[N+1];g.push({from:{x:F[0],y:F[1]},to:{x:j[0],y:j[1]}})}if(g.length>1){var $=p[0],nt=p[x-1];g.push({from:{x:nt[0],y:nt[1]},to:{x:$[0],y:$[1]}})}return g};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Gi(a,o))return!1;var s=!1;if((0,v.each)(t,function(l){if(Po(e,l[0],l[1]))return s=!0,!1}),s||((0,v.each)(e,function(l){if(Po(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,v.each)(f,function(l){if(Mo(u,l))return c=!0,!1}),c},Lo=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),di=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Cs=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Ro=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=di(n,r[s]),f=u[0],c=u[1],l=u[2],p=u[3];o[s]=Vo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:p}),o[s]&&(a+=1)}return[o,a]},ho=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=di(n,r[s]),f=u[0],c=u[1],l=u[2],p=u[3],g=Cs(t,new Lo(f,c,l,p));g=Math.abs(g-.5),g>=0&&g<=1&&(o+=1,a=g<a?g:a)}return o===0?-1:a},Zo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},_o=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},qo=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},go=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Ia=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},Oi=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(Tn.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];Tn.normalize(c,c);var l=[s-r,u-n];return Math.abs(Tn.dot(l,c))},zi=function(e,t,r){return e+(t-e)*r},La=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=zi(e[o],t[o],r);return a},Ci="rgb(95, 149, 255)",$o="rgb(255, 255, 255)",Di="rgb(0, 0, 0)",Bo="rgb(247, 250, 255)",Co="rgb(239, 244, 255)",qi="rgb(253, 253, 253)",As="rgb(250, 250, 250)",ys="rgb(224, 224, 224)",Ko="rgb(234, 234, 234)",ms="rgb(245, 245, 245)",ru="rgb(191, 213, 255)",zs="#4572d9",bs="rgb(223, 234, 255)",At={mainStroke:Ci,mainFill:Co,activeStroke:Ci,activeFill:Bo,inactiveStroke:ru,inactiveFill:Bo,selectedStroke:Ci,selectedFill:$o,highlightStroke:zs,highlightFill:bs,disableStroke:ys,disableFill:As,edgeMainStroke:ys,edgeActiveStroke:Ci,edgeInactiveStroke:Ko,edgeSelectedStroke:Ci,edgeHighlightStroke:Ci,edgeDisableStroke:ms,comboMainStroke:ys,comboMainFill:qi,comboActiveStroke:Ci,comboActiveFill:Bo,comboInactiveStroke:ys,comboInactiveFill:qi,comboSelectedStroke:Ci,comboSelectedFill:qi,comboHighlightStroke:zs,comboHighlightFill:qi,comboDisableStroke:Ko,comboDisableFill:As},Jt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:At.mainStroke,fill:Co},size:20,color:At.mainStroke,linkPoints:{size:8,lineWidth:1,fill:At.activeFill,stroke:At.activeStroke}},nodeStateStyles:{active:{fill:At.activeFill,stroke:At.activeStroke,lineWidth:2,shadowColor:At.mainStroke,shadowBlur:10},selected:{fill:At.selectedFill,stroke:At.selectedStroke,lineWidth:4,shadowColor:At.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:At.highlightFill,stroke:At.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:At.inactiveFill,stroke:At.inactiveStroke,lineWidth:1},disable:{fill:At.disableFill,stroke:At.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Di,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:At.edgeMainStroke,lineAppendWidth:2},color:At.edgeMainStroke},edgeStateStyles:{active:{stroke:At.edgeActiveStroke,lineWidth:1},selected:{stroke:At.edgeSelectedStroke,lineWidth:2,shadowColor:At.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:At.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:At.edgeInactiveStroke,lineWidth:1},disable:{stroke:At.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Di,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:At.comboMainFill,lineWidth:1,stroke:At.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:At.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:At.comboActiveStroke,lineWidth:1,fill:At.comboActiveFill},selected:{stroke:At.comboSelectedStroke,lineWidth:2,fill:At.comboSelectedFill,shadowColor:At.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:At.comboHighlightStroke,lineWidth:2,fill:At.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:At.comboInactiveStroke,fill:At.comboInactiveFill,lineWidth:1},disable:{stroke:At.comboDisableStroke,fill:At.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Fe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},je=Math.PI,Ar=Math.sin,sn=Math.cos,wn=Ar(je/8),Wn=sn(je/8),si=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=ji(n,o),a=ji(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},to=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||Jt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],p=[e.endPoint.x,e.endPoint.y],g=o.height/2,x=o.width/2,N=g,F=g,j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,Mt=a.get("type"),Rt=Math.min(g/2,x/2),Pt=Math.min(g,x),ne=s!=null&&s.pointPadding?Math.min(Pt,s==null?void 0:s.pointPadding):Rt;if(l[0]===p[0]&&l[1]===p[1]){switch(f){case"top":Mt==="circle"?(l=[c[0]-j,c[1]-$],p=[c[0]+nt,c[1]-ft]):(l=[c[0]-ne,c[1]-g],p=[c[0]+ne,c[1]-g]);break;case"top-right":N=g,F=x,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]+j,c[1]-$],p=[c[0]+ft,c[1]-nt]):(l=[c[0]+x-ne,c[1]-g],p=[c[0]+x,c[1]-g+ne]);break;case"right":N=x,F=x,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]+$,c[1]-j],p=[c[0]+ft,c[1]+nt]):(l=[c[0]+x,c[1]-ne],p=[c[0]+x,c[1]+ne]);break;case"bottom-right":N=x,F=g,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]+$,c[1]+j],p=[c[0]+nt,c[1]+ft]):(l=[c[0]+x,c[1]+g-ne],p=[c[0]+x-ne,c[1]+g]);break;case"bottom":N=g,F=g,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]+j,c[1]+$],p=[c[0]-nt,c[1]+ft]):(l=[c[0]-ne,c[1]+g],p=[c[0]+ne,c[1]+g]);break;case"bottom-left":N=g,F=x,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]-j,c[1]+$],p=[c[0]-ft,c[1]+nt]):(l=[c[0]-x,c[1]+g-ne],p=[c[0]-x+ne,c[1]+g]);break;case"left":N=x,F=x,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]-$,c[1]+j],p=[c[0]-ft,c[1]-nt]):(l=[c[0]-x,c[1]-ne],p=[c[0]-x,c[1]+ne]);break;case"top-left":N=x,F=g,Mt==="circle"?(j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]-$,c[1]-j],p=[c[0]-nt,c[1]-ft]):(l=[c[0]-x+ne,c[1]-g],p=[c[0]-x,c[1]-g+ne]);break;default:N=x,F=x,j=N*wn,$=N*Wn,nt=F*wn,ft=F*Wn,l=[c[0]-j,c[1]-$],p=[c[0]+nt,c[1]-ft]}if(s.clockwise===!1){var xe=[l[0],l[1]];l=[p[0],p[1]],p=[xe[0],xe[1]]}}var he=[l[0]-c[0],l[1]-c[1]],Ne=(N+u)/N,He=(F+u)/F;s.clockwise===!1&&(Ne=(F+u)/F,He=(N+u)/N);var Dr=Tn.scale([0,0],he,Ne),$r=[c[0]+Dr[0],c[1]+Dr[1]],zr=[p[0]-c[0],p[1]-c[1]],_r=Tn.scale([0,0],zr,He),pn=[c[0]+_r[0],c[1]+_r[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:p[0],y:p[1]},e.controlPoints=[{x:$r[0],y:$r[1]},{x:pn[0],y:pn[1]}],e},vo=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=je*2),r&&(u.x+=sn(c)*r,u.y+=Ar(c)*r),n){var l=c-je/2;c>1/2*je&&c<3*1/2*je&&(l-=je),u.x+=sn(l)*n,u.y+=Ar(l)*n}var p={x:u.x,y:u.y,angle:c};return a?(c>.5*je&&c<1.5*je&&(c-=je),(0,y.pi)({rotate:c},p)):p},Us=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},bu=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Ui=function(e,t){typeof t=="function"&&Us(e,null,-1,t)},yo=function(e,t){typeof t=="function"&&bu(e,null,-1,t)},qs=function(e,t){return t*(Fe[e]||1)},zu=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=qs(a,t)}),[r,t]},xu=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},nu=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,v.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var p=n[l.parentId];if(p)p.children?p.children.push(c):p.children=[c];else{var g={id:l.parentId,children:[l]};n[l.parentId]=g,n[c.id]=c}return}if((0,v.isString)(u.parentId)){var x=n[u.parentId];if(x)x.children?x.children.push(c):x.children=[c],n[c.id]=c;else{var N={id:u.parentId,children:[c]};n[N.id]=N,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Ui(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var p=o[f.id];return p&&(p.depth=f.depth),!0})}),r},au=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(x){if(!u){if(x.id===t){o=x,x.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Ui(x,function(N){var F;return s[N.id]={children:(N==null?void 0:N.children)||[]},a=(F=s[N.parentId||N.comboId||"root"])===null||F===void 0?void 0:F.children,N&&(N.removed||t===N.id)&&a?(f=N.parentId||N.comboId||"root",o=N,N.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var p=0;(e||[]).forEach(function(x){l||Ui(x,function(N){return r===N.id?(l=!0,N.children?N.children.push(o):N.children=[o],p=N.depth,o.itemType==="node"?o.depth=p+2:o.depth=p+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var g=o.depth;Ui(o,function(x){return x.itemType==="node"?g+=2:g+=1,x.depth=g,!0})}return e},$s=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,p=c?l:f,g=(0,v.isArray)(p)?p:[p,p],x=g[0],N=g[1],F=[x/2,N/2];return{minX:s-F[0],minY:u-F[1],maxX:s+F[0],maxY:u+F[1],x:s,y:u,width:x,height:N}}return e.forEach(function(j){var $=t.findById(j.id);if(!(!$||!$.isVisible())){$.set("bboxCanvasCache",void 0);var nt=$.getCanvasBBox();nt.x&&n.minX>nt.minX&&(n.minX=nt.minX),nt.y&&n.minY>nt.minY&&(n.minY=nt.minY),nt.x&&n.maxX<nt.maxX&&(n.maxX=nt.maxX),nt.y&&n.maxY<nt.maxY&&(n.maxY=nt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(j){(n[j]===1/0||n[j]===-1/0)&&(n[j]=void 0)}),n},Os=function(e){var t=(0,v.isNumber)(e.x)||(0,v.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,v.isNumber)(e.style.r)||(0,v.isNumber)(e.style.width)||(0,v.isNumber)(e.style.height)||(0,v.isNumber)(e.style.rx)||(0,v.isNumber)(e.style.ry)),t},Ks=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,v.isString)(n)))if((0,v.isObject)(n)&&!(0,v.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,v.isString)(s)||(a[o]=(0,v.clone)(s))}),t[r]=a}else t[r]=(0,v.clone)(n)}),t},xs=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,v.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},No=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Ui(e,function(p){return(0,v.isString)(p.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(p){return!(0,v.isString)(p.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(p){return p.id}),f=a==null?void 0:a.map(function(p){return p.id}),c=(0,y.ev)((0,y.ev)([],u,!0),f,!0),l=(r||[]).find(function(p){return!c.includes(p.source)||!c.includes(p.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},nf=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,v.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Rf=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,v.each)(e,function(t){(0,v.each)(t,function(r,n){(0,v.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,v.each)(r||[],function(o){var s=B.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,v.each)(t,function(r){e.indexOf(r)<0&&((0,v.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,v.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,v.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,v.isArray)(e)?a=e:a=[e],(0,v.isArray)(t))return(0,v.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,v.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Bf=Rf,Ds=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Ff=new RegExp("([a-z])["+Ds+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ds+"]*,?["+Ds+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ds+"]*,?["+Ds+"]*","ig"),A=function(i){if(!i)return null;if((0,v.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Ff,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(h,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},lt=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},xt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Nt=function(i){if(i=A(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,p=o,g=i.length;p<g;p++){if(e.push(c=[]),l=i[p],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var x=2,N=u.length;x<N;x++)u[x]=+u[x]+t,u[++x]=+u[x]+r;e.pop(),e=e.concat(lt(u,f));break;case"O":e.pop(),u=xt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(xt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var x=1,N=l.length;x<N;x++)c[x]=+l[x]+(x%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(lt(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=xt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(xt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var F=0,j=l.length;F<j;F++)c[F]=l[F];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},jt=function(i,e,t,r){return[i,e,t,r,t,r]},qt=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},de=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),p=[],g,x,N,F,j,$=function(pi,ai,gi){var xi=pi*Math.cos(gi)-ai*Math.sin(gi),Ji=pi*Math.sin(gi)+ai*Math.cos(gi);return{x:xi,y:Ji}};if(f)x=f[0],N=f[1],F=f[2],j=f[3];else{g=$(i,e,-l),i=g.x,e=g.y,g=$(s,u,-l),s=g.x,u=g.y,i===s&&e===u&&(s+=1,u+=1);var nt=(i-s)/2,ft=(e-u)/2,Mt=nt*nt/(t*t)+ft*ft/(r*r);Mt>1&&(Mt=Math.sqrt(Mt),t=Mt*t,r=Mt*r);var Rt=t*t,Pt=r*r,ne=(a===o?-1:1)*Math.sqrt(Math.abs((Rt*Pt-Rt*ft*ft-Pt*nt*nt)/(Rt*ft*ft+Pt*nt*nt)));F=ne*t*ft/r+(i+s)/2,j=ne*-r*nt/t+(e+u)/2,x=Math.asin(((e-j)/r).toFixed(9)),N=Math.asin(((u-j)/r).toFixed(9)),x=i<F?Math.PI-x:x,N=s<F?Math.PI-N:N,x<0&&(x=Math.PI*2+x),N<0&&(N=Math.PI*2+N),o&&x>N&&(x=x-Math.PI*2),!o&&N>x&&(N=N-Math.PI*2)}var xe=N-x;if(Math.abs(xe)>c){var he=N,Ne=s,He=u;N=x+c*(o&&N>x?1:-1),s=F+t*Math.cos(N),u=j+r*Math.sin(N),p=de(s,u,t,r,n,0,o,Ne,He,[N,he,F,j])}xe=N-x;var Dr=Math.cos(x),$r=Math.sin(x),zr=Math.cos(N),_r=Math.sin(N),pn=Math.tan(xe/4),hn=4/3*t*pn,Cr=4/3*r*pn,Yr=[i,e],an=[i+hn*$r,e-Cr*Dr],on=[s+hn*_r,u-Cr*zr],Sn=[s,u];if(an[0]=2*Yr[0]-an[0],an[1]=2*Yr[1]-an[1],f)return[an,on,Sn].concat(p);p=[an,on,Sn].concat(p).join().split(",");for(var On=[],ca=0,Aa=p.length;ca<Aa;ca++)On[ca]=ca%2?$(p[ca-1],p[ca],l).y:$(p[ca],p[ca+1],l).x;return On},be=function(i,e){var t=Nt(i),r=e&&Nt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(nt,ft,Mt){var Rt,Pt;if(!nt)return["C",ft.x,ft.y,ft.x,ft.y,ft.x,ft.y];switch(!(nt[0]in{T:1,Q:1})&&(ft.qx=ft.qy=null),nt[0]){case"M":ft.X=nt[1],ft.Y=nt[2];break;case"A":nt=["C"].concat(de.apply(0,[ft.x,ft.y].concat(nt.slice(1))));break;case"S":Mt==="C"||Mt==="S"?(Rt=ft.x*2-ft.bx,Pt=ft.y*2-ft.by):(Rt=ft.x,Pt=ft.y),nt=["C",Rt,Pt].concat(nt.slice(1));break;case"T":Mt==="Q"||Mt==="T"?(ft.qx=ft.x*2-ft.qx,ft.qy=ft.y*2-ft.qy):(ft.qx=ft.x,ft.qy=ft.y),nt=["C"].concat(qt(ft.x,ft.y,ft.qx,ft.qy,nt[1],nt[2]));break;case"Q":ft.qx=nt[1],ft.qy=nt[2],nt=["C"].concat(qt(ft.x,ft.y,nt[1],nt[2],nt[3],nt[4]));break;case"L":nt=["C"].concat(jt(ft.x,ft.y,nt[1],nt[2]));break;case"H":nt=["C"].concat(jt(ft.x,ft.y,nt[1],ft.y));break;case"V":nt=["C"].concat(jt(ft.x,ft.y,ft.x,nt[1]));break;case"Z":nt=["C"].concat(jt(ft.x,ft.y,ft.X,ft.Y));break;default:break}return nt},p=function(nt,ft){if(nt[ft].length>7){nt[ft].shift();for(var Mt=nt[ft];Mt.length;)o[ft]="A",r&&(s[ft]="A"),nt.splice(ft++,0,["C"].concat(Mt.splice(0,6)));nt.splice(ft,1),c=Math.max(t.length,r&&r.length||0)}},g=function(nt,ft,Mt,Rt,Pt){nt&&ft&&nt[Pt][0]==="M"&&ft[Pt][0]!=="M"&&(ft.splice(Pt,0,["M",Rt.x,Rt.y]),Mt.bx=0,Mt.by=0,Mt.x=nt[Pt][1],Mt.y=nt[Pt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var x=0;x<c;x++){t[x]&&(u=t[x][0]),u!=="C"&&(o[x]=u,x&&(f=o[x-1])),t[x]=l(t[x],n,f),o[x]!=="A"&&u==="C"&&(o[x]="C"),p(t,x),r&&(r[x]&&(u=r[x][0]),u!=="C"&&(s[x]=u,x&&(f=s[x-1])),r[x]=l(r[x],a,f),s[x]!=="A"&&u==="C"&&(s[x]="C"),p(r,x)),g(t,r,n,a,x),g(r,t,a,n,x);var N=t[x],F=r&&r[x],j=N.length,$=r&&F.length;n.x=N[j-2],n.y=N[j-1],n.bx=parseFloat(N[j-4])||n.x,n.by=parseFloat(N[j-3])||n.y,a.bx=r&&(parseFloat(F[$-4])||a.x),a.by=r&&(parseFloat(F[$-3])||a.y),a.x=r&&F[$-2],a.y=r&&F[$-1]}return r?[t,r]:t},Le=/,?([a-z]),?/gi,Ye=function(i){return i.join(",").replace(Le,"$1")},mr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},xr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,x=0;x<c;x++){var N=f*l[x]+f,F=mr(N,i,t,n,o),j=mr(N,e,r,a,s),$=F*F+j*j;g+=p[x]*Math.sqrt($)}return f*g},yr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,p,g,x=0;x<2;++x){if(x===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,p=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,p=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;g=-p/l,g>0&&g<1&&u.push(g);continue}var N=l*l-4*p*c,F=Math.sqrt(N);if(!(N<0)){var j=(-l+F)/(2*c);j>0&&j<1&&u.push(j);var $=(-l-F)/(2*c);$>0&&$<1&&u.push($)}}for(var nt=u.length,ft=nt,Mt;nt--;)g=u[nt],Mt=1-g,f[0][nt]=Mt*Mt*Mt*i+3*Mt*Mt*g*t+3*Mt*g*g*n+g*g*g*o,f[1][nt]=Mt*Mt*Mt*e+3*Mt*Mt*g*r+3*Mt*g*g*a+g*g*g*s;return f[0][ft]=i,f[1][ft]=e,f[0][ft+1]=o,f[1][ft+1]=s,f[0].length=f[1].length=ft+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Vr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,p=f/c,g=+l.toFixed(2),x=+p.toFixed(2);if(!(g<+Math.min(i,t).toFixed(2)||g>+Math.max(i,t).toFixed(2)||g<+Math.min(n,o).toFixed(2)||g>+Math.max(n,o).toFixed(2)||x<+Math.min(e,r).toFixed(2)||x>+Math.max(e,r).toFixed(2)||x<+Math.min(a,s).toFixed(2)||x>+Math.max(a,s).toFixed(2)))return{x:l,y:p}}}},Jr=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Tr=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Ye,a},gn=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Tr(i,e,t,r),vb:[i,e,t,r].join(" ")}},da=function(i,e){return i=gn(i),e=gn(e),Jr(e,i.x,i.y)||Jr(e,i.x2,i.y)||Jr(e,i.x,i.y2)||Jr(e,i.x2,i.y2)||Jr(i,e.x,e.y)||Jr(i,e.x2,e.y)||Jr(i,e.x,e.y2)||Jr(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},va=function(i,e,t,r,n,a,o,s){(0,v.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=yr.apply(null,i);return gn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},na=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),p=u*u,g=p*u,x=c*i+l*3*u*t+f*3*u*u*n+g*o,N=c*e+l*3*u*r+f*3*u*u*a+g*s,F=i+2*u*(t-i)+p*(n-2*t+i),j=e+2*u*(r-e)+p*(a-2*r+e),$=t+2*u*(n-t)+p*(o-2*n+t),nt=r+2*u*(a-r)+p*(s-2*a+r),ft=f*i+u*t,Mt=f*e+u*r,Rt=f*n+u*o,Pt=f*a+u*s,ne=90-Math.atan2(F-$,j-nt)*180/Math.PI;return{x,y:N,m:{x:F,y:j},n:{x:$,y:nt},start:{x:ft,y:Mt},end:{x:Rt,y:Pt},alpha:ne}},Vn=function(i,e,t){var r=va(i),n=va(e);if(!da(r,n))return t?0:[];for(var a=xr.apply(0,i),o=xr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},p=t?0:[],g=0;g<s+1;g++){var x=na.apply(0,i.concat(g/s));f.push({x:x.x,y:x.y,t:g/s})}for(var g=0;g<u+1;g++){var x=na.apply(0,e.concat(g/u));c.push({x:x.x,y:x.y,t:g/u})}for(var g=0;g<s;g++)for(var N=0;N<u;N++){var F=f[g],j=f[g+1],$=c[N],nt=c[N+1],ft=Math.abs(j.x-F.x)<.001?"y":"x",Mt=Math.abs(nt.x-$.x)<.001?"y":"x",Rt=Vr(F.x,F.y,j.x,j.y,$.x,$.y,nt.x,nt.y);if(Rt){if(l[Rt.x.toFixed(4)]===Rt.y.toFixed(4))continue;l[Rt.x.toFixed(4)]=Rt.y.toFixed(4);var Pt=F.t+Math.abs((Rt[ft]-F[ft])/(j[ft]-F[ft]))*(j.t-F.t),ne=$.t+Math.abs((Rt[Mt]-$[Mt])/(nt[Mt]-$[Mt]))*(nt.t-$.t);Pt>=0&&Pt<=1&&ne>=0&&ne<=1&&(t?p+=1:p.push({x:Rt.x,y:Rt.y,t1:Pt,t2:ne}))}}return p},ea=function(i,e,t){i=be(i),e=be(e);for(var r,n,a,o,s,u,f,c,l,p,g=t?0:[],x=0,N=i.length;x<N;x++){var F=i[x];if(F[0]==="M")r=s=F[1],n=u=F[2];else{F[0]==="C"?(l=[r,n].concat(F.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var j=0,$=e.length;j<$;j++){var nt=e[j];if(nt[0]==="M")a=f=nt[1],o=c=nt[2];else{nt[0]==="C"?(p=[a,o].concat(nt.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,f,c,f,c],a=f,o=c);var ft=Vn(l,p,t);if(t)g+=ft;else{for(var Mt=0,Rt=ft.length;Mt<Rt;Mt++)ft[Mt].segment1=x,ft[Mt].segment2=j,ft[Mt].bez1=l,ft[Mt].bez2=p;g=g.concat(ft)}}}}}return g},Ai=function(i,e){return ea(i,e)};function Ti(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function Mi(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Ti(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var p=[];return l.length===4&&(p.push("C"),p=p.concat(l[2])),l.length>=3&&(l.length===3&&p.push("Q"),p=p.concat(l[1])),l.length===2&&p.push("L"),p=p.concat(l[l.length-1]),p});return c}var Ii=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(Mi(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Li=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(Ii(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Xi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,v.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function eo(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ga=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Xi(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,p=s[u-1][f-1].min+o;s[u][f]=eo(c,l,p)}}return s},ui=function(i,e){var t=Ga(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function Ps(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=ws(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function ws(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ko=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=ws(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Ps(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Ps(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=Ps(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},wu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),Gf=wu;function bc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var xc=typeof window!="undefined"&&typeof window.document!="undefined";function wc(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function zf(i){return i.cfg.visible&&i.cfg.capture}var Uf=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,v.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(H),Ec=Uf,af=ut(734155),of=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},Sc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),al=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=af.platform}return i}(),Rs=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),Mc=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),yn=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Eu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,za=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sf=3,Xf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Eu]],iu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Uu(i){return i?ff(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new yn:typeof navigator!="undefined"?ff(navigator.userAgent):Es()}function Xu(i){return i!==""&&Xf.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function uf(i){var e=Xu(i);return e?e[0]:null}function ff(i){var e=Xu(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Mc;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<sf&&(n=of(of([],n,!0),Cc(sf-n.length),!0)):n=[];var a=n.join("."),o=_c(i),s=za.exec(i);return s&&s[1]?new Rs(t,a,o,s[1]):new Sc(t,a,o)}function _c(i){for(var e=0,t=iu.length;e<t;e++){var r=iu[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function Es(){var i=typeof af!="undefined"&&af.version;return i?new al(af.version.slice(1)):null}function Cc(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function cf(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],p=e[0],g=e[1],x=e[2],N=e[3],F=e[4],j=e[5],$=e[6],nt=e[7],ft=e[8];return t[0]=p*r+g*o+x*f,t[1]=p*n+g*s+x*c,t[2]=p*a+g*u+x*l,t[3]=N*r+F*o+j*f,t[4]=N*n+F*s+j*c,t[5]=N*a+F*u+j*l,t[6]=$*r+nt*o+ft*f,t[7]=$*n+nt*s+ft*c,t[8]=$*a+nt*u+ft*l,t}function mi(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Yu(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,p=-c*a+s*u,g=f*a-o*u,x=t*l+r*p+n*g;return x?(x=1/x,e[0]=l*x,e[1]=(-c*r+n*f)*x,e[2]=(s*r-n*o)*x,e[3]=p*x,e[4]=(c*t-n*u)*x,e[5]=(-s*t+n*a)*x,e[6]=g*x,e[7]=(-f*t+r*u)*x,e[8]=(o*t-r*a)*x,e):null}var Ts=zt,Su="matrix",Z=["zIndex","capture","visible","type"],vt=["repeat"],_t=":",Xt="*";function ce(i){for(var e=[],t=0;t<i.length;t++)(0,v.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Be(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function ze(i,e){var t={},r=e.attr();return(0,v.each)(i,function(n,a){vt.indexOf(a)===-1&&!(0,v.isEqual)(r[a],n)&&(t[a]=n)}),t}function sr(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,v.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,v.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var Rr=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,v.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,v.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(bc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Su,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Su)},e.prototype.setMatrix=function(t){this.attr(Su,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=cf(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=cf(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?mi(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=Yu(r);if(n)return mi(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,v.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,v.each)(r,function(s,u){(0,v.isArray)(r[u])?n[u]=ce(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,v.each)(Z,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?v.noop:c,p=t[4],g=p===void 0?0:p,x,N,F,j,$;(0,v.isFunction)(o)?(x=o,o={}):(0,v.isObject)(o)&&o.onFrame&&(x=o.onFrame,N=o.repeat),(0,v.isObject)(s)?($=s,s=$.duration,f=$.easing||"easeLinear",g=$.delay||0,N=$.repeat||N||!1,l=$.callback||v.noop,F=$.pauseCallback||v.noop,j=$.resumeCallback||v.noop):((0,v.isNumber)(l)&&(g=l,l=null),(0,v.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var nt=ze(o,this),ft={fromAttrs:Be(nt,this),toAttrs:nt,duration:s,easing:f,repeat:N,callback:l,pauseCallback:F,resumeCallback:j,delay:g,startTime:n.getTime(),id:(0,v.uniqueId)(),onFrame:x,pathFormatted:!1};a.length>0?a=sr(a,ft):n.addAnimator(this),a.push(ft),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,v.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,v.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,v.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(p){var g=a[p],x=g.get("name");if(x){if((g.isGroup()||g.isCanvas&&g.isCanvas())&&s&&wc(g,s))return"break";(0,v.isArray)(x)?(0,v.each)(x,function(N){n.emitDelegateEvent(g,N,r)}):f.emitDelegateEvent(g,x,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+_t+n.type;(a[o]||a[Xt])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Ts(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Ts(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Ts(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Ts(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Ts(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(Ec),Wr=Rr,bn={},dn="_INDEX";function mn(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){mn(r,e)})}}function $n(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){$n(r,e)})}}function Ea(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function ha(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),bc(i.getChildren(),e)}function Zn(i){return function(e,t){var r=i(e,t);return r===0?e[dn]-t[dn]:r}}var Ma=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,v.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,p=f.minY,g=f.maxY;c<t&&(t=c),l>r&&(r=l),p<n&&(n=p),g>a&&(a=g)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,v.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,p=f.minY,g=f.maxY;c<t&&(t=c),l>r&&(r=l),p<n&&(n=p),g>a&&(a=g)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,v.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,v.isObject)(n)?a=n:a.type=n;var o=bn[a.type];o||(o=(0,v.upperFirst)(a.type),bn[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,v.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!zf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(zf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&ha(o,t,!1),t.set("parent",this),r&&mn(t,r),a&&$n(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var t=this.getChildren();(0,v.each)(t,function(r,n){return r[dn]=n,r}),t.sort(Zn(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,v.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,v.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Wr),Dn=Ma,_a=ut(235374),aa=ut(952677),Rn=ut(93951),Ca=ut(473782);function Ka(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function ii(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function ri(i,e){return(ii(e)?Ka:Xa)(i,e)}function Xa(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Qo(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function _i(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}var Pi=ut(979848);function bi(i,e){var t={},r={},n;(i===null||aa(i)!=="object")&&(i={}),(e===null||aa(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Qo(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var Wu=ut(218674),Yf=ut(993816);function Qo(i,e){var t=aa(e),r;return e==null||t==="boolean"?(0,Yf.Z)(e):(t==="number"?Pi.Z:t==="string"?(r=(0,Rn.ZP)(e))?(e=r,Ca.ZP):Wu.Z:e instanceof Rn.ZP?Ca.ZP:e instanceof Date?_i:ii(e)?Ka:Array.isArray(e)?Xa:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?bi:Pi.Z)(i,e)}function Mu(i){return+i}function lf(i){return i*i}function ou(i){return i*(2-i)}function hf(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}var df=ut(368716),Vu=3,Ac=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(Vu),Tc=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(Vu),su=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(Vu),Xs=Math.PI,_u=Xs/2;function Ic(i){return+i==1?1:1-Math.cos(i*_u)}function uu(i){return Math.sin(i*_u)}function Jo(i){return(1-Math.cos(Xs*i))/2}function Ys(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function vf(i){return Ys(1-+i)}function Gl(i){return 1-Ys(i)}function Hu(i){return((i*=2)<=1?Ys(1-i):2-Ys(i-1))/2}function il(i){return 1-Math.sqrt(1-i*i)}function ol(i){return Math.sqrt(1- --i*i)}function Lc(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Wf=4/11,sl=6/11,Nc=8/11,zl=3/4,Ul=9/11,Xl=10/11,Yl=15/16,Wl=21/22,ul=63/64,pf=1/Wf/Wf;function Vl(i){return 1-gf(1-i)}function gf(i){return(i=+i)<Wf?pf*i*i:i<Nc?pf*(i-=sl)*i+zl:i<Xl?pf*(i-=Ul)*i+Yl:pf*(i-=Wl)*i+ul}function Hl(i){return((i*=2)<=1?1-gf(1-i):gf(i-1)+1)/2}var ju=1.70158,fl=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(ju),De=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(ju),cl=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(ju),Ws=2*Math.PI,yf=1,kc=.3,ll=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Ws);function n(a){return e*Ys(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Ws)},n.period=function(a){return i(e,a)},n}(yf,kc),hl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Ws);function n(a){return 1-e*Ys(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Ws)},n.period=function(a){return i(e,a)},n}(yf,kc),jl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Ws);function n(a){return((a=a*2-1)<0?e*Ys(-a)*Math.sin((r-a)/t):2-e*Ys(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Ws)},n.period=function(a){return i(e,a)},n}(yf,kc),mf={};function Oc(i){return mf[i.toLowerCase()]||J[i]}function Zl(i,e){mf[i.toLowerCase()]=e}var Dc=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},mo=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},Zu=[1,0,0,0,1,0,0,0,1];function dl(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,v.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=A(a[s]),f=A(n[s]),f=ui(f,u),f=ko(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=A(a[s]),f=A(n[s]),f=ko(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],p=f[c],g=[],x=0;x<l.length;x++)(0,v.isNumber)(l[x])&&p&&(0,v.isNumber)(p[x])?(o=Qo(p[x],l[x]),g.push(o(t))):g.push(l[x]);r[s].push(g)}}else if(s==="matrix"){var N=ri(n[s]||Zu,a[s]||Zu),F=N(t);r[s]=F}else Dc(s)&&mo(a[s])?r[s]=a[s]:(0,v.isFunction)(a[s])||(o=Qo(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Vf(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=Oc(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else dl(i,e,a);return!1}var Qs=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=_a.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Vf(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),bf=Qs,qu=40,fu=0,xf=":",Cu=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function wf(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(xf+e)>=0)return!0;return!1}function Au(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function Pc(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&wc(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var Rc=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,v.each)(Cu,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,v.each)(Cu,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new Gf(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===fu&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===fu){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,p=s.clientY-e.clientY,g=l*l+p*p;c>120||g>qu?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,Au(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||Pc(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;Au(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Hf=Rc,Bc="px",Fc=Uu(),Ef=Fc&&Fc.name==="firefox",Bs=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,v.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Hf({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new bf(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");xc&&(n.style.width=t+Bc,n.style.height=r+Bc)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");xc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Ef&&!(0,v.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,v.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(Dn),Gc=Bs,ql=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(Dn),jf=ql,vl=function(i){(0,y.ZT)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=mi(r,[t.minX,t.minY]),f=mi(r,[t.maxX,t.minY]),c=mi(r,[t.minX,t.maxY]),l=mi(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var p=this.attrs;if(p.shadowColor){var g=p.shadowBlur,x=g===void 0?0:g,N=p.shadowOffsetX,F=N===void 0?0:N,j=p.shadowOffsetY,$=j===void 0?0:j,nt=n-x+F,ft=o+x+F,Mt=a-x+$,Rt=s+x+$;n=Math.min(n,nt),o=Math.max(o,ft),a=Math.min(a,Mt),s=Math.max(s,Rt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Wr),zc=vl,pl=new Map;function ts(i,e){pl.set(i,e)}function gl(i){return pl.get(i)}function yl(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function $l(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Fo(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Zf(i,e){return Math.abs(i-e)<.001}function Sf(i,e){var t=(0,v.min)(i),r=(0,v.min)(e),n=(0,v.max)(i),a=(0,v.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function hh(i,e,t,r){return{minX:(0,v.min)([i,t]),maxX:(0,v.max)([i,t]),minY:(0,v.min)([e,r]),maxY:(0,v.max)([e,r])}}function qf(i){return(i+Math.PI*2)%(Math.PI*2)}var Oo={box:function(i,e,t,r){return Sf([i,t],[e,r])},length:function(i,e,t,r){return Fo(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Fo(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Fo(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(Tn.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];Tn.normalize(s,s);var u=[n-i,a-e];return Math.abs(Tn.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},Kl=1e-4;function ml(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,p=0;p<=f;p++){var g=p*c,x=[n.apply(null,i.concat([g])),n.apply(null,e.concat([g]))],N=Fo(u[0],u[1],x[0],x[1]);N<s&&(o=g,s=N)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var F=i.length;return{x:i[F-1],y:e[F-1]}}s=1/0;for(var p=0;p<32&&!(l<Kl);p++){var j=o-l,$=o+l,x=[n.apply(null,i.concat([j])),n.apply(null,e.concat([j]))],N=Fo(u[0],u[1],x[0],x[1]);if(j>=0&&N<s)o=j,s=N;else{var nt=[n.apply(null,i.concat([$])),n.apply(null,e.concat([$]))],ft=Fo(u[0],u[1],nt[0],nt[1]);$<=1&&ft<s?(o=$,s=ft):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function Ql(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Fo(a,o,s,u)}return t/2}function cu(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function Uc(i,e,t){var r=i+t-2*e;if(Zf(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function Mf(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function $f(i,e,t,r,n,a,o){var s=cu(i,t,n,o),u=cu(e,r,a,o),f=Oo.pointAt(i,e,t,r,o),c=Oo.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function _f(i,e,t,r,n,a,o){if(o===0)return(Fo(i,e,t,r)+Fo(t,r,n,a)+Fo(i,e,n,a))/2;var s=$f(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),_f.apply(null,u)+_f.apply(null,f)}var Kf={box:function(i,e,t,r,n,a){var o=Uc(i,t,n)[0],s=Uc(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(cu(i,t,n,o)),s!==void 0&&f.push(cu(e,r,a,s)),Sf(u,f)},length:function(i,e,t,r,n,a){return _f(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return ml([i,t,n],[e,r,a],o,s,cu)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Fo(u.x,u.y,o,s)},interpolationAt:cu,pointAt:function(i,e,t,r,n,a,o){return{x:cu(i,t,n,o),y:cu(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return $f(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=Mf(i,t,n,o),u=Mf(e,r,a,o),f=Math.atan2(u,s);return qf(f)}};function Js(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function Qf(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function Cf(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Zf(n,0))Zf(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Zf(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function Af(i,e,t,r,n,a,o,s,u){var f=Js(i,t,n,o,u),c=Js(e,r,a,s,u),l=Oo.pointAt(i,e,t,r,u),p=Oo.pointAt(t,r,n,a,u),g=Oo.pointAt(n,a,o,s,u),x=Oo.pointAt(l.x,l.y,p.x,p.y,u),N=Oo.pointAt(p.x,p.y,g.x,g.y,u);return[[i,e,l.x,l.y,x.x,x.y,f,c],[f,c,N.x,N.y,g.x,g.y,o,s]]}function Jf(i,e,t,r,n,a,o,s,u){if(u===0)return Ql([i,t,n,o],[e,r,a,s]);var f=Af(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),Jf.apply(null,c)+Jf.apply(null,l)}var Tu={extrema:Cf,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=Cf(i,t,n,o),l=Cf(e,r,a,s),p=0;p<c.length;p++)u.push(Js(i,t,n,o,c[p]));for(var p=0;p<l.length;p++)f.push(Js(e,r,a,s,l[p]));return Sf(u,f)},length:function(i,e,t,r,n,a,o,s){return Jf(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return ml([i,t,n,o],[e,r,a,s],u,f,Js,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return Fo(l.x,l.y,u,f)},interpolationAt:Js,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:Js(i,t,n,o,u),y:Js(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return Af(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=Qf(i,t,n,o,u),c=Qf(e,r,a,s,u);return qf(Math.atan2(c,f))}};function tc(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Xc={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),p=o*o,g=s*s,x=Math.PI/4,N,F,j=0;j<4;j++){N=o*Math.cos(x),F=s*Math.sin(x);var $=(p-g)*Math.pow(Math.cos(x),3)/o,nt=(g-p)*Math.pow(Math.sin(x),3)/s,ft=N-$,Mt=F-nt,Rt=c-$,Pt=l-nt,ne=Math.hypot(Mt,ft),xe=Math.hypot(Pt,Rt),he=ne*Math.asin((ft*Pt-Mt*Rt)/(ne*xe)),Ne=he/Math.sqrt(p+g-N*N-F*F);x+=Ne,x=Math.min(Math.PI/2,Math.max(0,x))}return{x:i+tc(N,u),y:e+tc(F,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Fo(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return qf(o)}};function ec(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function rc(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Tf(i,e,t){return Math.atan(-e/i*Math.tan(t))}function nc(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function $u(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function bl(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function ac(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function Iu(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function xl(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var Yc={box:function(i,e,t,r,n,a,o){for(var s=Tf(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var p=s+l;a<o?a<p&&p<o&&c.push(p):o<p&&p<a&&c.push(p)}for(var l=0;l<c.length;l++){var g=$u(i,e,t,r,n,c[l]);g<u&&(u=g),g>f&&(f=g)}for(var x=nc(t,r,n),N=1/0,F=-1/0,j=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var $=x+l;a<o?a<$&&$<o&&j.push($):o<$&&$<a&&j.push($)}for(var l=0;l<j.length;l++){var nt=bl(i,e,t,r,n,j[l]);nt<N&&(N=nt),nt>F&&(F=nt)}return{x:u,y:N,width:f-u,height:F-N}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=xl(s-i,u-e,-n),c=f[0],l=f[1],p=Xc.nearestPoint(0,0,t,r,c,l),g=ac(t,r,p.x,p.y);g<a?p=Iu(t,r,a):g>o&&(p=Iu(t,r,o));var x=xl(p.x,p.y,n);return{x:x[0]+i,y:x[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return Fo(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:$u(i,e,t,r,n,u),y:bl(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=ec(i,e,t,r,n,a,o,u),c=rc(i,e,t,r,n,a,o,u);return qf(Math.atan2(c,f))}};function Jl(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Fo(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function th(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Fo(r[0],r[1],n[0],n[1])}return e}function eh(i,e){if(e>1||e<0||i.length<2)return null;var t=Jl(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var p=(e-a)/l;o=Oo.pointAt(f[0],f[1],c[0],c[1],p);break}a+=l}return o}function lu(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=Jl(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function wl(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=Oo.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var Wc={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return Sf(e,t)},length:function(i){return th(i)},pointAt:function(i,e){return eh(i,e)},pointDistance:function(i,e,t){return wl(i,e,t)},tangentAngle:function(i,e){return lu(i,e)}};function ic(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var Gh={box:function(i){return Wc.box(i)},length:function(i){return th(ic(i))},pointAt:function(i,e){return eh(ic(i),e)},pointDistance:function(i,e,t){return wl(ic(i),e,t)},tangentAngle:function(i,e){return lu(ic(i),e)}};function El(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Sl(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=El(e,n)),r&&(a=r.getCanvasBBox(),e=El(e,a)),e}function Go(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=Sf(r,n),u=s.x,f=s.y,c=s.width,l=s.height,p={minX:u,minY:f,maxX:u+c,maxY:f+l};return p=Sl(i,p),{x:p.minX,y:p.minY,width:p.maxX-p.minX,height:p.maxY-p.minY}}function rh(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return Sf(r,n)}var Lu=null;function hu(){if(!Lu){var i=document.createElement("canvas");i.width=1,i.height=1,Lu=i.getContext("2d")}return Lu}function Ml(i,e,t){var r=1;if((0,v.isString)(i)&&(r=i.split(`
`).length),r>1){var n=_l(e,t);return e*r+n*(r-1)}return e}function _l(i,e){return e?e-i:i*.14}function Vc(i,e){var t=hu(),r=0;if((0,v.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,v.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,v.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Cl(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function fs(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Cl(e));var u=Vc(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,p=Ml(n,a,o),g={x:t,y:r-p};c&&(c==="end"||c==="right"?g.x-=u:c==="center"&&(g.x-=u/2)),l&&(l==="top"?g.y+=p:l==="middle"&&(g.y+=p/2)),f={x:g.x,y:g.y,width:u,height:p}}return f}var Nu=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,ro=/[^\s\,]+/ig;function es(i){var e=i||[];if((0,v.isArray)(e))return e;if((0,v.isString)(e))return e=e.match(Nu),(0,v.each)(e,function(t,r){if(t=t.match(ro),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,v.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var Hc=es;function dh(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,p;if(a){u=r[0],f=r[1];for(var g=0,x=i.length;g<x;g+=1){var N=i[g];u=Tn.min([0,0],u,N),f=Tn.max([0,0],f,N)}}for(var g=0,F=i.length;g<F;g+=1){var N=i[g];if(g===0&&!t)p=N;else if(g===F-1&&!t)l=N,n.push(p),n.push(l);else{var j=[g?g-1:F-1,g-1][t?0:1];o=i[j],s=i[t?(g+1)%F:g+1];var $=[0,0];$=Tn.sub($,s,o),$=Tn.scale($,$,e);var nt=Tn.distance(N,o),ft=Tn.distance(N,s),Mt=nt+ft;Mt!==0&&(nt/=Mt,ft/=Mt);var Rt=Tn.scale([0,0],$,-nt),Pt=Tn.scale([0,0],$,ft);l=Tn.add([0,0],N,Rt),c=Tn.add([0,0],N,Pt),c=Tn.min([0,0],c,Tn.max([0,0],s,N)),c=Tn.max([0,0],c,Tn.min([0,0],s,N)),Rt=Tn.sub([0,0],c,N),Rt=Tn.scale([0,0],Rt,-nt/ft),l=Tn.add([0,0],N,Rt),l=Tn.min([0,0],l,Tn.max([0,0],o,N)),l=Tn.max([0,0],l,Tn.min([0,0],o,N)),Pt=Tn.sub([0,0],N,l),Pt=Tn.scale([0,0],Pt,ft/nt),c=Tn.add([0,0],N,Pt),a&&(l=Tn.max([0,0],l,u),l=Tn.min([0,0],l,f),c=Tn.max([0,0],c,u),c=Tn.min([0,0],c,f)),n.push(p),n.push(l),p=c}}return t&&n.push(n.shift()),n}function nh(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=dh(n,.4,r,t),u=n.length,f=[],c,l,p,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],p=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],p[0],p[1]]);return r&&(c=s[u],l=s[u+1],p=n[0],f.push(["C",c[0],c[1],l[0],l[1],p[0],p[1]])),f}var ah=nh;function vh(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var ih=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,p=s[u-1][f-1].min+o;s[u][f]=vh(c,l,p)}}return s};function zh(i,e){var t=ih(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var oc=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,ph=new RegExp("([a-z])["+oc+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+oc+"]*,?["+oc+"]*)+)","ig"),gh=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+oc+"]*,?["+oc+"]*","ig");function jc(i){if(!i)return null;if((0,v.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(ph,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(gh,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Al=/[a-z]/;function sc(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Tl(i){var e=jc(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Al.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,p,g=e[0];(g[0]==="M"||g[0]==="m")&&(o=+g[1],s=+g[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,x=e.length;r<x;r++){var N=e[r],F=a[r-1],j=[],n=N[0],$=n.toUpperCase();if(n!==$)switch(j[0]=$,$){case"A":j[1]=N[1],j[2]=N[2],j[3]=N[3],j[4]=N[4],j[5]=N[5],j[6]=+N[6]+o,j[7]=+N[7]+s;break;case"V":j[1]=+N[1]+s;break;case"H":j[1]=+N[1]+o;break;case"M":u=+N[1]+o,f=+N[2]+s,j[1]=u,j[2]=f;break;default:for(var nt=1,ft=N.length;nt<ft;nt++)j[nt]=+N[nt]+(nt%2?o:s)}else j=e[r];switch($){case"Z":o=+u,s=+f;break;case"H":o=j[1],j=["L",o,s];break;case"V":s=j[1],j=["L",o,s];break;case"T":o=j[1],s=j[2];var Mt=sc([F[1],F[2]],[F[3],F[4]]);j=["Q",Mt[0],Mt[1],o,s];break;case"S":o=j[j.length-2],s=j[j.length-1];var Rt=F.length,Pt=sc([F[Rt-4],F[Rt-3]],[F[Rt-2],F[Rt-1]]);j=["C",Pt[0],Pt[1],j[1],j[2],o,s];break;case"M":u=j[j.length-2],f=j[j.length-1];break;default:o=j[j.length-2],s=j[j.length-1]}a.push(j)}return a}var uc=Math.PI*2,Zc=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},oh=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},fc=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},pt=function(i,e,t,r,n,a,o,s,u,f,c,l){var p=Math.pow(n,2),g=Math.pow(a,2),x=Math.pow(c,2),N=Math.pow(l,2),F=p*g-p*N-g*x;F<0&&(F=0),F/=p*N+g*x,F=Math.sqrt(F)*(o===s?-1:1);var j=F*n/a*l,$=F*-a/n*c,nt=f*j-u*$+(i+t)/2,ft=u*j+f*$+(e+r)/2,Mt=(c-j)/n,Rt=(l-$)/a,Pt=(-c-j)/n,ne=(-l-$)/a,xe=fc(1,0,Mt,Rt),he=fc(Mt,Rt,Pt,ne);return s===0&&he>0&&(he-=uc),s===1&&he<0&&(he+=uc),[nt,ft,xe,he]},fe=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,p=l===void 0?0:l,g=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var x=Math.sin(u*uc/360),N=Math.cos(u*uc/360),F=N*(e-r)/2+x*(t-n)/2,j=-x*(e-r)/2+N*(t-n)/2;if(F===0&&j===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var $=Math.pow(F,2)/Math.pow(a,2)+Math.pow(j,2)/Math.pow(o,2);$>1&&(a*=Math.sqrt($),o*=Math.sqrt($));var nt=pt(e,t,r,n,a,o,c,p,x,N,F,j),ft=nt[0],Mt=nt[1],Rt=nt[2],Pt=nt[3],ne=Math.abs(Pt)/(uc/4);Math.abs(1-ne)<1e-7&&(ne=1);var xe=Math.max(Math.ceil(ne),1);Pt/=xe;for(var he=0;he<xe;he++)g.push(oh(Rt,Pt)),Rt+=Pt;return g.map(function(Ne){var He=Zc(Ne[0],a,o,N,x,ft,Mt),Dr=He.x,$r=He.y,zr=Zc(Ne[1],a,o,N,x,ft,Mt),_r=zr.x,pn=zr.y,hn=Zc(Ne[2],a,o,N,x,ft,Mt),Cr=hn.x,Yr=hn.y;return{x1:Dr,y1:$r,x2:_r,y2:pn,x:Cr,y:Yr}})};function Ae(i,e,t,r,n,a,o,s,u){var f=fe({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var p=l.x1,g=l.y1,x=l.x2,N=l.y2,F=l.x,j=l.y;return c.push(p,g,x,N,F,j),c},[])}function lr(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function Lr(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),cr(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function cr(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var br=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Xr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,x=0;x<c;x++){var N=f*l[x]+f,F=br(N,i,t,n,o),j=br(N,e,r,a,s),$=F*F+j*j;g+=p[x]*Math.sqrt($)}return f*g},qr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,p,g,x=0;x<2;++x){if(x===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,p=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,p=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;g=-p/l,g>0&&g<1&&u.push(g);continue}var N=l*l-4*p*c,F=Math.sqrt(N);if(!(N<0)){var j=(-l+F)/(2*c);j>0&&j<1&&u.push(j);var $=(-l-F)/(2*c);$>0&&$<1&&u.push($)}}for(var nt=u.length,ft=nt,Mt;nt--;)g=u[nt],Mt=1-g,f[0][nt]=Mt*Mt*Mt*i+3*Mt*Mt*g*t+3*Mt*g*g*n+g*g*g*o,f[1][nt]=Mt*Mt*Mt*e+3*Mt*Mt*g*r+3*Mt*g*g*a+g*g*g*s;return f[0][ft]=i,f[1][ft]=e,f[0][ft+1]=o,f[1][ft+1]=s,f[0].length=f[1].length=ft+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Kr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,p=f/c,g=+l.toFixed(2),x=+p.toFixed(2);if(!(g<+Math.min(i,t).toFixed(2)||g>+Math.max(i,t).toFixed(2)||g<+Math.min(n,o).toFixed(2)||g>+Math.max(n,o).toFixed(2)||x<+Math.min(e,r).toFixed(2)||x>+Math.max(e,r).toFixed(2)||x<+Math.min(a,s).toFixed(2)||x>+Math.max(a,s).toFixed(2)))return{x:l,y:p}}}},Gr=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},tn=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},d=function(i,e){return i=tn(i),e=tn(e),Gr(e,i.x,i.y)||Gr(e,i.x2,i.y)||Gr(e,i.x,i.y2)||Gr(e,i.x2,i.y2)||Gr(i,e.x,e.y)||Gr(i,e.x2,e.y)||Gr(i,e.x,e.y2)||Gr(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},m=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=qr.apply(null,i);return tn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},k=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),p=u*u,g=p*u,x=c*i+l*3*u*t+f*3*u*u*n+g*o,N=c*e+l*3*u*r+f*3*u*u*a+g*s,F=i+2*u*(t-i)+p*(n-2*t+i),j=e+2*u*(r-e)+p*(a-2*r+e),$=t+2*u*(n-t)+p*(o-2*n+t),nt=r+2*u*(a-r)+p*(s-2*a+r),ft=f*i+u*t,Mt=f*e+u*r,Rt=f*n+u*o,Pt=f*a+u*s,ne=90-Math.atan2(F-$,j-nt)*180/Math.PI;return{x,y:N,m:{x:F,y:j},n:{x:$,y:nt},start:{x:ft,y:Mt},end:{x:Rt,y:Pt},alpha:ne}},z=function(i,e,t){var r=m(i),n=m(e);if(!d(r,n))return t?0:[];for(var a=Xr.apply(0,i),o=Xr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},p=t?0:[],g=0;g<s+1;g++){var x=k.apply(0,i.concat(g/s));f.push({x:x.x,y:x.y,t:g/s})}for(var g=0;g<u+1;g++){var x=k.apply(0,e.concat(g/u));c.push({x:x.x,y:x.y,t:g/u})}for(var g=0;g<s;g++)for(var N=0;N<u;N++){var F=f[g],j=f[g+1],$=c[N],nt=c[N+1],ft=Math.abs(j.x-F.x)<.001?"y":"x",Mt=Math.abs(nt.x-$.x)<.001?"y":"x",Rt=Kr(F.x,F.y,j.x,j.y,$.x,$.y,nt.x,nt.y);if(Rt){if(l[Rt.x.toFixed(4)]===Rt.y.toFixed(4))continue;l[Rt.x.toFixed(4)]=Rt.y.toFixed(4);var Pt=F.t+Math.abs((Rt[ft]-F[ft])/(j[ft]-F[ft]))*(j.t-F.t),ne=$.t+Math.abs((Rt[Mt]-$[Mt])/(nt[Mt]-$[Mt]))*(nt.t-$.t);Pt>=0&&Pt<=1&&ne>=0&&ne<=1&&(t?p++:p.push({x:Rt.x,y:Rt.y,t1:Pt,t2:ne}))}}return p},rt=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,p,g=t?0:[],x=0,N=i.length;x<N;x++){var F=i[x];if(F[0]==="M")r=s=F[1],n=u=F[2];else{F[0]==="C"?(l=[r,n].concat(F.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var j=0,$=e.length;j<$;j++){var nt=e[j];if(nt[0]==="M")a=f=nt[1],o=c=nt[2];else{nt[0]==="C"?(p=[a,o].concat(nt.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,f,c,f,c],a=f,o=c);var ft=z(l,p,t);if(t)g+=ft;else{for(var Mt=0,Rt=ft.length;Mt<Rt;Mt++)ft[Mt].segment1=x,ft[Mt].segment2=j,ft[Mt].bez1=l,ft[Mt].bez2=p;g=g.concat(ft)}}}}}return g};function ot(i,e){return rt(i,e)}function dt(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function mt(i,e){return dt(i)*dt(e)?(i[0]*e[0]+i[1]*e[1])/(dt(i)*dt(e)):1}function Ct(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(mt(i,e))}function Ft(i,e){return i[0]===e[0]&&i[1]===e[1]}function oe(i,e){var t=e[1],r=e[2],n=(0,v.mod)((0,v.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,p=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,g=l*l/(t*t)+p*p/(r*r);g>1&&(t*=Math.sqrt(g),r*=Math.sqrt(g));var x=t*t*(p*p)+r*r*(l*l),N=x?Math.sqrt((t*t*(r*r)-x)/x):1;a===o&&(N*=-1),isNaN(N)&&(N=0);var F=r?N*t*p/r:0,j=t?N*-r*l/t:0,$=(s+f)/2+Math.cos(n)*F-Math.sin(n)*j,nt=(u+c)/2+Math.sin(n)*F+Math.cos(n)*j,ft=[(l-F)/t,(p-j)/r],Mt=[(-1*l-F)/t,(-1*p-j)/r],Rt=Ct([1,0],ft),Pt=Ct(ft,Mt);return mt(ft,Mt)<=-1&&(Pt=Math.PI),mt(ft,Mt)>=1&&(Pt=0),o===0&&Pt>0&&(Pt=Pt-2*Math.PI),o===1&&Pt<0&&(Pt=Pt+2*Math.PI),{cx:$,cy:nt,rx:Ft(i,[f,c])?0:t,ry:Ft(i,[f,c])?0:r,startAngle:Rt,endAngle:Rt+Pt,xRotation:n,arcFlag:a,sweepFlag:o}}function Qt(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Me(i){i=Hc(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=oe(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var p=u.length;t=[u[p-2],u[p-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Ft(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var g=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=g;var x=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[x[0]-t[0],x[1]-t[1]],c.endTangent=[t[0]-x[0],t[1]-x[1]];else if(f==="Q"){var N=[u[1],u[2]];c.startTangent=[x[0]-N[0],x[1]-N[1]],c.endTangent=[t[0]-N[0],t[1]-N[1]]}else if(f==="T"){var F=e[s-1],N=Qt(F.currentPoint,x);F.command==="Q"?(c.command="Q",c.startTangent=[x[0]-N[0],x[1]-N[1]],c.endTangent=[t[0]-N[0],t[1]-N[1]]):(c.command="TL",c.startTangent=[x[0]-t[0],x[1]-t[1]],c.endTangent=[t[0]-x[0],t[1]-x[1]])}else if(f==="C"){var j=[u[1],u[2]],$=[u[3],u[4]];c.startTangent=[x[0]-j[0],x[1]-j[1]],c.endTangent=[t[0]-$[0],t[1]-$[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[j[0]-$[0],j[1]-$[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[$[0]-j[0],$[1]-j[1]])}else if(f==="S"){var F=e[s-1],j=Qt(F.currentPoint,x),$=[u[1],u[2]];F.command==="C"?(c.command="C",c.startTangent=[x[0]-j[0],x[1]-j[1]],c.endTangent=[t[0]-$[0],t[1]-$[1]]):(c.command="SQ",c.startTangent=[x[0]-$[0],x[1]-$[1]],c.endTangent=[t[0]-$[0],t[1]-$[1]])}else if(f==="A"){var nt=.001,ft=c.arcParams||{},Mt=ft.cx,Rt=Mt===void 0?0:Mt,Pt=ft.cy,ne=Pt===void 0?0:Pt,xe=ft.rx,he=xe===void 0?0:xe,Ne=ft.ry,He=Ne===void 0?0:Ne,Dr=ft.sweepFlag,$r=Dr===void 0?0:Dr,zr=ft.startAngle,_r=zr===void 0?0:zr,pn=ft.endAngle,hn=pn===void 0?0:pn;$r===0&&(nt*=-1);var Cr=he*Math.cos(_r-nt)+Rt,Yr=He*Math.sin(_r-nt)+ne;c.startTangent=[Cr-n[0],Yr-n[1]];var an=he*Math.cos(_r+hn+nt)+Rt,on=He*Math.sin(_r+hn-nt)+ne;c.endTangent=[x[0]-an,x[1]-on]}e.push(c)}return e}function Ue(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function wr(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Ze(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Ke(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Qe(i,e){if(i.length<2||e.length<2)return!1;var t=Ze(i),r=Ze(e);if(!Ke(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=Ue(i),o=Ue(e),s=!1;return each(o,function(u){if(wr(a,u))return s=!0,!1}),s}function Hr(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=Kf.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Tu.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=Yc.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(j){return!Number.isNaN(j)&&j!==1/0&&j!==-1/0}),r=r.filter(function(j){return!Number.isNaN(j)&&j!==1/0&&j!==-1/0});var p=(0,v.min)(t),g=(0,v.min)(r),x=(0,v.max)(t),N=(0,v.max)(r);if(n.length===0)return{x:p,y:g,width:x-p,height:N-g};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,F=void 0;s[0]===p?(F=un(o,e),p=p-F.xExtra):s[0]===x&&(F=un(o,e),x=x+F.xExtra),s[1]===g?(F=un(o,e),g=g-F.yExtra):s[1]===N&&(F=un(o,e),N=N+F.yExtra)}return{x:p,y:g,width:x-p,height:N-g}}function un(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,v.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function en(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Me(t),o=Hr(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=Sl(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function In(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=Sl(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Mn(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}ts("rect",yl),ts("image",yl),ts("circle",$l),ts("marker",$l),ts("polyline",Go),ts("polygon",rh),ts("text",fs),ts("path",en),ts("line",In),ts("ellipse",Mn);var Un="0.5.11",ia=function(i){(0,y.ZT)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(Gf),qn=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},vi=function(e){if((0,v.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,v.isNumber)(e))return[e,e,e,e];if((0,v.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},fa=function(e){var t=new ia(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Yi=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Ya=function(e){return Number.isNaN(Number(e))},Da=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,p=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),p>a&&(a=p)}var g=Math.floor(t),x=Math.floor(n),N=Math.ceil(r)-Math.floor(t),F=Math.ceil(a)-Math.floor(n);return{x:g,y:x,width:N,height:F,minX:t,minY:n,maxX:r,maxY:a}},Ri=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},p=0;p<o;p++){var g=e[p],x=g.source,N=g.target,F="".concat(x,"-").concat(N);if(!c[p]){f[F]||(f[F]=[]),c[p]=!0,f[F].push(g);for(var j=0;j<o;j++)if(p!==j){var $=e[j],nt=$.source,ft=$.target;c[j]||(x===ft&&N===nt?(f[F].push($),c[j]=!0,l["".concat(nt,"|").concat(ft,"|").concat(f[F].length-1)]=!0):x===nt&&N===ft&&(f[F].push($),c[j]=!0))}}}for(var Mt in f)for(var Rt=f[Mt],Pt=Rt.length,ne=0;ne<Pt;ne++){var xe=Rt[ne];if(xe.source===xe.target){a&&(xe.type=a),xe.loopCfg={position:u[ne%8],dist:Math.floor(ne/8)*20+50};continue}if(Pt===1&&n&&xe.source!==xe.target){xe.type=n;continue}xe.type=r;var he=(ne%2===0?1:-1)*(l["".concat(xe.source,"|").concat(xe.target,"|").concat(ne)]?-1:1);Pt%2===1?xe.curveOffset=he*Math.ceil(ne/2)*s:xe.curveOffset=he*(Math.floor(ne/2)*s+t)}return e},Bi=ut(731278),bo=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(ft){var Mt=ft.getModel(),Rt=Mt.x,Pt=Mt.y;s>Rt&&(s=Rt),u>Pt&&(u=Pt),f<Rt&&(f=Rt),c<Pt&&(c=Pt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],p=ji({x:s,y:u},l),g=p.x,x=p.y,N=ji({x:f,y:c},l),F=N.x,j=N.y;a={minX:g,maxX:F,minY:x,maxY:j,width:F-g,height:j-x,x:g,y:x}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var $=this.getViewCenter(),nt={x:a.x+a.width/2,y:a.y+a.height/2};r.translate($.x-nt.x,$.y-nt.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,p=n.y+a.y-o.y-n.minY;if(!(Ya(l)||Ya(p))){var g=(0,Bi.vs)(c,[["t",l,p]]);if(!u){var x=xs({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:g})}});e.animate(function(ft){return{matrix:La(t,g,ft)}},x);return}var N=f.get("minZoom"),F=f.get("maxZoom"),j=s;N&&s<N?(j=N,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):F&&s>F&&(j=F,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var $=(0,Bi.vs)(g,[["t",-a.x,-a.y],["s",j,j],["t",a.x,a.y]]),nt=xs({animateCfg:r,callback:function(){e.setMatrix($),f.emit("viewportchange",{action:"translate",matrix:g}),f.emit("viewportchange",{action:"zoom",matrix:$})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(ft){return{matrix:La(t,$,ft)}},nt)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,p=1/0,g=-1/0,x=-1/0;c.forEach(function(Rt){var Pt=Rt.getModel(),ne=Pt.x,xe=Pt.y;l>ne&&(l=ne),p>xe&&(p=xe),g<ne&&(g=ne),x<xe&&(x=xe)}),f={minX:l,maxX:g,minY:p,maxY:x,width:g-l,height:x-p,x:l,y:p}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var N=this.getViewCenter(),F={x:f.x+f.width/2,y:f.y+f.height/2},j=(a-n[1]-n[3])/f.width,$=(o-n[0]-n[2])/f.height,nt=j;if(j>$&&(nt=$),e)this.animatedFitView(s,u,t,f,N,F,nt,!0);else{var ft=N.x-F.x,Mt=N.y-F.y;if(Ya(ft)||Ya(Mt))return;r.translate(ft,Mt),r.zoom(nt,N)||console.warn("zoom failed, ratio out of range, ratio: %f",nt)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),p=c.get("width"),g=c.get("height"),x=c.get("group"),N=x.getMatrix()||[1,0,0,0,1,0,0,0,1];x.resetMatrix();var F,j=c.getNodes();if(j.length>c.get("optimizeThreshold")){var $=1/0,nt=1/0,ft=-1/0,Mt=-1/0;j.forEach(function($r){var zr=$r.getModel(),_r=zr.x,pn=zr.y;$>_r&&($=_r),nt>pn&&(nt=pn),ft<_r&&(ft=_r),Mt<pn&&(Mt=pn)}),F={minX:$,maxX:ft,minY:nt,maxY:Mt,width:ft-$,height:Mt-nt,x:$,y:nt}}else F=x.getCanvasBBox();if(!(F.width===0||F.height===0)){var Rt=this.getViewCenter(),Pt={x:F.x+F.width/2,y:F.y+F.height/2},ne=(p-l[1]-l[3])/F.width,xe=(g-l[0]-l[2])/F.height,he;if(s==="x"?he=ne:s==="y"?he=xe:he=f==="max"?Math.max(ne,xe):Math.min(ne,xe),a&&(he=he<1?he:1),t)this.animatedFitView(x,N,r,F,Rt,Pt,he,!0);else{var Ne=c.getZoom(),He=Ne*he,Dr=c.get("minZoom");He<Dr&&(He=Dr,console.warn("fitview failed, ratio out of range, ratio: %f",he,"graph minzoom has been used instead")),c.translate(Rt.x-Pt.x,Rt.y-Pt.y),c.zoomTo(He,Rt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return vi(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,p=0,g=0;this.graph.get("canvas").animate(function(x){p=u*x,g=f*x,n.graph.translate(p-c,g-l),c=p,l=g},(0,y.pi)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=yi({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),ji({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,v.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},p=0,g=e;p<g.length;p++){var x=g[p],N=x.getBBox();N.minX<l.minX&&(l.minX=N.minX),N.minY<l.minY&&(l.minY=N.minY),N.maxX>l.maxX&&(l.maxX=N.maxX),N.maxY>l.maxY&&(l.maxY=N.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var F=this.getViewCenter(),j={x:l.x+l.width/2,y:l.y+l.height/2},$=(s-o[1]-o[3])/l.width,nt=(u-o[0]-o[2])/l.height,ft=$;$>nt&&(ft=nt),r?this.animatedFitView(f,c,n,l,F,j,ft,t):(a.translate(F.x-j.x,F.y-j.y),t&&!a.zoom(ft,F)&&console.warn("zoom failed, ratio out of range, ratio: %f",ft))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,v.isNumber)(e)||!(0,v.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),rs=bo;function $i(i){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$i(i)}function pa(i){if(typeof i!="string")return i;var e=function(Pt){if(typeof Pt!="string")return Pt;try{return JSON.parse(Pt.trim())}catch(ne){return Pt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Pt){return Pt[Pt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Pt=[],ne=0;ne<arguments.length;ne++)Pt[ne]=arguments[ne];return Pt.some(function(xe){return r(o)===xe})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var p=n[c],g=s('"',"'");if(!g&&!p.trim()){c+=1;continue}var x=n[c-1]==="\\",N=s("}"),F=s("]"),j=s(","),$=u();if(g)if(r(o)===p&&!x){o.pop();var nt=e(l);$.push(nt),f=nt,l=""}else l+=p;else if(F&&p===",")l&&($.push(e(l)),l="");else if(N&&p===":")o.push(","),l&&($.push(l),l="");else if(j&&p===",")l&&($.push(e(l)),l=""),o.pop();else if(p==="}"&&(N||j)){l&&($.push(e(l)),l=""),j&&o.pop();for(var ft={},Mt=1;Mt<$.length;Mt+=2)ft[$[Mt-1]]=$[Mt];a.pop(),a.length&&r(a).push(ft),o.pop(),f=ft}else p==="]"&&F?(l&&($.push(e(l)),l=""),a.pop(),a.length&&r(a).push($),o.pop(),f=$):p==="{"?(a.push([]),o.push("}")):p==="["?(a.push([]),o.push("]")):p==='"'?o.push('"'):p==="'"?o.push("'"):l+=p;c+=1}return f||l}var ns=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},oi=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,v.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Xn(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Xn(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=ns(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=pa(f);t=(0,y.pi)((0,y.pi)({},t),c)}else a[u]=pa(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&$i(e.style[a.name])==="object"&&(a.attrs=(0,y.pi)((0,y.pi)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,y.pi)((0,y.pi)({},a.attrs),e.style)),n.length&&(a.children=n),a}function Pa(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=zu(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,y.pi)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function ja(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,y.pi)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,y.pi)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=ja(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=Pa(i,e,r),i.attrs=(0,y.pi)((0,y.pi)({},i.attrs),i.bbox),i}function no(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],p=0;p<f;p+=1)u.push(no(l[p],c[p]));var g=Object.keys(e.attrs),x=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:g.filter(function(N){return N!=="children"}).some(function(N){return i.attrs[N]!==e.attrs[N]||!x.includes(N)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function du(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=oi(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=ja(Xn(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,p=l===void 0?{}:l,g=c.bbox,x=c.type,N=c.children,F=(0,y._T)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var j=a.addShape(c.type,(0,y.pi)({attrs:p,origin:{bbox:g,type:x,children:N}},F));c.keyshape&&(s=j)}c.children&&c.children.forEach(function($){return f($)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=no(u,f),l=function x(N){var F;N.type!=="group"&&o.addShape(N.type,{attrs:N.attrs}),!((F=N.children)===null||F===void 0)&&F.length&&N.children.map(function(j){return x(j)})},p=function x(N){var F,j=s.find(function($){return $.attrs.key===N.attrs.key});j&&o.removeChild(j),!((F=N.children)===null||F===void 0)&&F.length&&N.children.map(function($){return x($)})},g=function x(N){var F=N.key;if(N.type!=="group"){var j=s.find(function(nt){return nt.attrs.key===F});switch(N.action){case"change":if(j){var $=N.val.keyshape?a.getOriginStyle():{};j.attr((0,y.pi)((0,y.pi)({},$),N.val.attrs))}break;case"add":l(N.val);break;case"delete":p(N.val);break;case"restructure":p(N.formerTarget),l(N.nowTarget);break;default:break}}N.children&&N.children.forEach(function(nt){return x(nt)})};g(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ku={};function Se(i){return Ku[i]||(Ku[i]=(0,v.upperFirst)(i)),Ku[i]}var dr={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},ur={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},xn=function(){function i(){}return i.registerFactory=function(e,t){var r=Se(e),n=dr,a=(0,y.pi)((0,y.pi)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=Se(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=du(t);a=(0,y.pi)((0,y.pi)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=du(s);a=(0,y.pi)((0,y.pi)((0,y.pi)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):ur;a=(0,y.pi)((0,y.pi)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):ur,o=(0,y.pi)((0,y.pi)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):ur,o=(0,y.pi)((0,y.pi)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Hn=xn;xn.registerFactory("node",{defaultShapeType:"circle"}),xn.registerFactory("edge",{defaultShapeType:"line"}),xn.registerFactory("combo",{defaultShapeType:"circle"});var ge="bboxCache",te="bboxCanvasCache",Pe=null,tr=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=qn(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,v.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=si(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=si(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var g=this.get("originStyle");a&&!g[a]&&(g[a]={});for(var x=this.getCurrentStatesStyle(),N=function(j){var $=t[j],nt=$.get("name"),ft=$.attr();if(nt&&nt!==a){var Mt=x[nt];g[nt]||(g[nt]={}),Mt?Object.keys(ft).forEach(function(ne){var xe=ft[ne];xe!==Mt[ne]&&(g[nt][ne]=xe)}):g[nt]=$.get("type")!=="image"?(0,v.clone)(ft):n.getShapeStyleByName(nt)}else{var Rt=$.attr(),Pt={};Object.keys(x).forEach(function(ne){var xe=x[ne];(ne===a||!(0,v.isPlainObject)(xe))&&(Pt[ne]=xe)}),Object.keys(Rt).forEach(function(ne){var xe=Rt[ne];Pt[ne]!==xe&&(a?g[a][ne]=xe:g[ne]=xe)})}},s=0;s<t.length;s++)N(s);delete g.path,delete g.matrix,delete g.x,delete g.y,g[a]&&(delete g[a].x,delete g[a].y,delete g[a].matrix,delete g[a].path),n.set("originStyle",g)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,v.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var p=qn("shape");u.set("name",p),e.shapeMap[p]=u,o[p]=f!=="image"?(0,v.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,v.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Hn.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,v.isPlainObject)(e)?this._cfg=(0,y.pi)((0,y.pi)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(ge,null),this.set(te,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,v.each)(r.attr(),function(a,o){(o!=="img"||(0,v.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,y.pi)((0,y.pi)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,v.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,v.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,v.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,v.isString)(t)){var f=r.filter(function(p){return p.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(p){return!p.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,v.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,v.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),us(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(ge);return e||(e=this.calculateBBox(),this.set(ge,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(te);return e||(e=this.calculateCanvasBBox(),this.set(te,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),nr=tr,Re={source:"start",target:"end"},ke="Node",Xe="Point",ye="Anchor",Oe=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Re[t]+Xe,a=t+ke,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,v.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Re[t]+Xe,o=t+ke,s=this.get(a);if(!s){var u=this.get(o),f=t+ye,c=this.getPrePoint(t,n),l=r[f];(0,v.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,v.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+ke,n=Re[t]+Xe,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+ke,n=Re[t]+Xe,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(ke)),n=this.get("target".concat(ke));return r?delete t["source".concat(ke)]:t.source=this.get("start".concat(Xe)),n?delete t["target".concat(ke)]:t.target=this.get("end".concat(Xe)),!(0,v.isString)(t.source)&&!(0,v.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,v.isString)(t.target)&&!(0,v.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,v.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(ke)),r=this.get("target".concat(ke));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(nr),le=Oe,qe="anchorPointsCache",or="bboxCache",Ir=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=jo(t[0],r),s=0;s<t.length;s++){var u=t[s],f=jo(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=Pn({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=Hi({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Ns(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(qe);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,v.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(qe,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(or,null),this.set(qe,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,v.isNil)(t.x),f=!(0,v.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,v.isNumber)(t.x)||(0,v.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(nr),kr=Ir,Er="bboxCache",Qr="bboxCanvasCache",Nn="sizeCache",ga="anchorPointsCache",_n=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,v.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,v.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||Jt.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,y.pi)((0,y.pi)((0,y.pi)({},r),t.style),f);var c=t.padding||Jt.defaultCombo.padding;return(0,v.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Nn,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(Er)||{},a=n.x,o=n.x,s=this.get(Nn),u=si(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(Nn,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set(ga,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Qr,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Er,null),this.set(Qr,null),this.set(ga,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Nn,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(kr),jn=_n,oa="node",Za="edge",Ki="vedge",zo="combo",yh="default",Vs="Mapper",ku="stateStyles",vu=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,v.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Ki?Za:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,v.upperFirst)(n),s=null,u=r.get(n+(0,v.upperFirst)(ku))||{},f=r.get(yh+o);t[ku]&&(u=t[ku]),f&&(0,v.each)(f,function(Rt,Pt){(0,v.isObject)(Rt)&&!(0,v.isArray)(Rt)?t[Pt]=(0,v.deepMix)({},Rt,t[Pt]):(0,v.isArray)(Rt)?t[Pt]=t[Pt]||(0,v.clone)(f[Pt]):t[Pt]=t[Pt]||f[Pt]});var c=r.get(n+Vs);if(c){var l=c(t);l[ku]&&(u=l[ku],delete l[ku]),(0,v.each)(l,function(Rt,Pt){(0,v.isObject)(Rt)&&!(0,v.isArray)(Rt)?t[Pt]=(0,v.deepMix)({},t[Pt],Rt):t[Pt]=l[Pt]||t[Pt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Za||e===Ki){var p=void 0,g=void 0;if(p=t.source,g=t.target,p&&(0,v.isString)(p)&&(p=r.findById(p)),g&&(0,v.isString)(g)&&(g=r.findById(g)),!p||!g){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}p.getType&&p.getType()==="combo"&&(t.isComboEdge=!0),g.getType&&g.getType()==="combo"&&(t.isComboEdge=!0),s=new le({model:t,source:p,target:g,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===oa)s=new kr({model:t,styles:u,group:a.addGroup()});else if(e===zo){var x=t.children,N=$s(x,r),F=void 0,j=void 0;if(isNaN(N.x)?isNaN(t.x)&&(F=Math.random()*100):F=N.x,isNaN(N.y)?isNaN(t.y)&&(j=Math.random()*100):j=N.y,isNaN(t.x)||isNaN(t.y))t.x=F,t.y=j;else{var $=t.x-F,nt=t.y-j;this.updateComboSucceeds(t.id,$,nt,x)}var ft=a.addGroup();ft.setZIndex(t.depth),s=new jn({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?$s([],r):N,group:ft}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(N.width=Math.hypot(N.height,N.width),N.height=N.width,s.set("bbox",N),s.refresh());var Mt=s.getModel();(x||[]).forEach(function(Rt){var Pt=r.findById(Rt.id);s.addChild(Pt),Rt.depth=Mt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,v.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Vs),f=e.getModel(),c=f.x,l=f.y,p=e.getUpdateType(t);if(u){var g=(0,v.deepMix)({},f,t),x=u(g),N=(0,v.deepMix)({},f,x,t);x[ku]&&(e.set("styles",N[ku]),delete N[ku]),(0,v.each)(N,function(he,Ne){t[Ne]=he})}else(0,v.each)(t,function(he,Ne){f[Ne]&&(0,v.isObject)(he)&&!(0,v.isArray)(he)&&(t[Ne]=(0,y.pi)((0,y.pi)({},f[Ne]),t[Ne]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Za){if(t.source){var F=t.source;(0,v.isString)(F)&&(F=o.findById(F)),e.setSource(F)}if(t.target){var j=t.target;(0,v.isString)(j)&&(j=o.findById(j)),e.setTarget(j)}e.update(t)}else if(s===oa){e.update(t,p);var $=e.getEdges();p==="move"?(0,v.each)($,function(he){r.edgeToBeUpdateMap[he.getID()]={edge:he,updateType:p},r.throttleRefresh()}):p!=null&&p.includes("bbox")&&(0,v.each)($,function(he){he.refresh(p)})}else if(s===zo){if(e.update(t,p),!isNaN(t.x)||!isNaN(t.y)){var nt=t.x-c||0,ft=t.y-l||0;this.updateComboSucceeds(f.id,nt,ft)}var Mt=e.getEdges(),Rt=(p==null?void 0:p.includes("bbox"))||p==="move";if(Rt&&s===zo){var Pt=e.get("shapeFactory"),ne=f.type||"circle",xe=f.animate===void 0||t.animate===void 0?(a=(n=Pt[ne])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;xe?setTimeout(function(){if(!(!e||e.destroyed)){var he=e.getKeyShape();!he||he.destroyed||(0,v.each)(Mt,function(Ne){Ne&&!Ne.destroyed&&Ne.refresh()})}},201):(0,v.each)(Mt,function(he){he.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,v.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=$s(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var p=c,g=l;r?(p=isNaN(u.x)?c:u.x,g=isNaN(u.y)?l:u.y):(p=isNaN(c)?u.x:c,g=isNaN(l)?u.y:l),e.update({x:p,y:g});var x=e.get("shapeFactory"),N=u.type||"circle",F=u.animate===void 0?(o=(a=x[N])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;F?setTimeout(function(){if(!(!e||e.destroyed)){var j=e.getKeyShape();!j||j.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Ui(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,v.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,v.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Za){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var p=r.get("comboTrees"),g=e.get("id");if(a===oa){var x=e.getModel().comboId;if(p&&x){var N=p,F=!1;p.forEach(function(Rt){F||Ui(Rt,function(Pt){if(Pt.id===g&&N){var ne=N.indexOf(Pt);return N.splice(ne,1),F=!0,!1}return N=Pt.children,!0})})}for(var j=e.getEdges(),$=j.length-1;$>=0;$--)r.removeItem(j[$],!1);x&&r.updateCombo(x)}else if(a===zo){var nt=e.getModel().parentId,ft,Mt=!1;(p||[]).forEach(function(Pt){Mt||Ui(Pt,function(ne){return ne.id===g?(ft=ne,Mt=!0,!1):!0})}),ft.removed=!0,ft&&ft.children&&ft.children.forEach(function(Pt){t.removeItem(Pt.id)});for(var j=e.getEdges(),$=j.length;$>=0;$--)r.removeItem(j[$],!1);nt&&r.updateCombo(nt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,v.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,v.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,v.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,v.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){yo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,v.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===oa){var a=e.getEdges();(0,v.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===zo){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Ui(l,function(p){return p.id===s?(u=p.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var p=n.findById(l.id);r.changeItemVisibility(p,t)});var a=e.getEdges();(0,v.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Uh=vu,p0=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,v.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,v.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,v.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),g0=p0,y0=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},mv=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=ah(t);return u.unshift(["M",e[0].x,e[0].y]),u},Xh=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];Tn.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},m0=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=y0(a,s)}return t&&(n+="Z"),n},Sd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Md=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,p=e[s+1].x,g=e[s+1].y,x=s!==e.length-2?e[s+2].x:p,N=s!==e.length-2?e[s+2].y:g,F=c+(p-u)/6,j=l+(g-f)/6,$=p-(x-c)/6,nt=g-(N-l)/6;o.push(["C",F,j,$,nt,p,g])}return o.unshift(["M",n.x,n.y]),o},bv=function(e,t){return Tn.scale([0,0],Tn.normalize([0,0],e),t)},xv=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},wv=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function _d(i,e){var t=function(l){var p=[l[0][0],l[0][1]-e],g=[l[0][0],l[0][1]+e];return"M ".concat(p," A ").concat(e,",").concat(e,",0,0,0,").concat(g," A ").concat(e,",").concat(e,",0,0,0,").concat(p)},r=function(l){var p=Tn.scale([0,0],xv(l[0],l[1]),e),g=Tn.scale([0,0],p,-1),x=Tn.add([0,0],l[0],p),N=Tn.add([0,0],l[1],p),F=Tn.add([0,0],l[1],g),j=Tn.add([0,0],l[0],g);return"M ".concat(x," L ").concat(N," A ").concat([e,e,"0,0,0",F].join(",")," L ").concat(j," A ").concat([e,e,"0,0,0",x].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=Tn.scale([0,0],xv(o,s),e);n[a]=[Tn.add([0,0],o,u),Tn.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var p="";return l===0&&(p="M ".concat(n[n.length-1][1]," ")),p+="".concat(f+c[0]," L ").concat(c[1]),p}),n.join(" ")}function Ev(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],p=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",p].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=wv(c[0],c[1]),p=bv(l,e),g=Tn.add([0,0],c[0],Tn.scale([0,0],p,-1)),x=Tn.add([0,0],c[1],p),N=1.2*e,F=bv(Tn.normalize([0,0],l),N),j=Tn.scale([0,0],F,-1),$=Tn.add([0,0],g,j),nt=Tn.add([0,0],x,j),ft=Tn.add([0,0],g,F);return"M ".concat(g," C ").concat([$,nt,x].join(",")," S ").concat([ft,g].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:Tn.normalize([0,0],wv(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=Tn.normalize([0,0],Tn.add([0,0],a[s].v,Tn.scale([0,0],a[o].v,-1)));a[o].p=Tn.add([0,0],a[o].p,Tn.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var b0=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},Sv=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},Mv=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,p){return l.x===p.x?l.y-p.y:l.x-p.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&Sv(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&Sv(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},x0={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function w0(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,p,g,x=0;x<e.width*e.height;x++){if(p=c,g=l,i.findIndex(function(F){return F.x===c&&F.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var N=a(c,l);switch(N){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:p===0&&(g===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:p===1&&(g===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(N)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var E0=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},S0=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=_o(s,u),c=new Lo(s.x,s.y,u.x,u.y),l=r.reduce(function(p,g){return ho(g,c)>0?p+1:p},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},_v=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=ho(a,t);o>=0&&o<r&&(n=a,r=o)}),n},M0=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(g,x){var N=!1;return x.forEach(function(F){N||(go(g,{x:F.x1,y:F.y1})||go(g,{x:F.x2,y:F.y2}))&&(N=!0)}),N},c=function(g,x){for(var N=0,F=x;N<F.length;N++){var j=F[N],$=j.getBBox(),nt=[[$.x,$.y],[$.x+$.width,$.y],[$.x,$.y+$.height],[$.x+$.width,$.y+$.height]];if(Po(nt,g.x,g.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var g=o.pop(),x=_v(t,g);if(x){var N=Ro(x,g),F=N[0],j=N[1];if(j===2){var $=function(ft){for(var Mt=n,Rt=Cv(x,Mt,F,ft),Pt=f(Rt,o)||f(Rt,a),ne=c(Rt,t);!Pt&&ne&&Mt>=1;)Mt/=1.5,Rt=Cv(x,Mt,F,ft),Pt=f(Rt,o)||f(Rt,a),ne=c(Rt,t);Rt&&!Pt&&(!ft||!ne)&&(o.push(new Lo(g.x1,g.y1,Rt.x,Rt.y)),o.push(new Lo(Rt.x,Rt.y,g.x2,g.y2)),s=!0)};$(!0),s||$(!1)}}s||a.push(g),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function _0(i,e,t,r,n){var a=S0(i,t,e);if(a===null)return[];var o=function(l){for(var p=[];l.length>0;){var g=l.pop();if(l.length===0){p.push(g);break}var x=l.pop(),N=new Lo(g.x1,g.y1,x.x2,x.y2),F=_v(e,N);F?(p.push(g),l.push(x)):l.push(N)}return p},s=new Lo(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=M0(s,e,r,n),f=o(u);return f}var C0=function(e,t,r){var n=Object.assign(x0,r),a=Zo(e.map(function($){return{x:$.getModel().x,y:$.getModel().y}}));e=e.sort(function($,nt){return _o({x:$.getModel().x,y:$.getModel().y},a)-_o({x:nt.getModel().x,y:nt.getModel().y},a)});var o=[],s=[];e.forEach(function($){var nt=_0($,t,o,n.maxRoutingIterations,n.morphBuffer);nt.forEach(function(ft){s.push(ft)}),o.push($)});for(var u=A0(e,s,n.nodeR0),f=E0(u.width,u.height,n.pixelGroupSize),c=[],l=[],p=0;p<n.maxMarchingIterations;p++)if(T0(e,t,s,u,f,n),c=[],l=[],!!new w0(c,f,n.threshold).march()){var g=c.map(function($){return{x:Math.round($.x*n.pixelGroupSize+u.minX),y:Math.round($.y*n.pixelGroupSize+u.minY)}});if(g){var x=g.length;if(n.skip>1)for(x=Math.floor(g.length/n.skip);x<3&&n.skip>1;)n.skip-=1,x=Math.floor(g.length/n.skip);for(var N=0,F=0;F<x;F+=1,N+=n.skip)l.push({x:g[N].x,y:g[N].y})}var j=function(){for(var nt=0,ft=e;nt<ft.length;nt++){var Mt=ft[nt],Rt=l.map(function(Pt){return[Pt.x,Pt.y]});if(!Po(Rt,Mt.getBBox().centerX,Mt.getBBox().centerY))return!1}return!0};if(l&&j())return l;if(n.threshold*=.9,p<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function A0(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function T0(i,e,t,r,n,a){function o(g,x){var N=Math.floor((g-x)/a.pixelGroupSize);return N<0?0:N}function s(g,x){return g*a.pixelGroupSize+x}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(x,N){var F=Math.min(o(x.minX,N+r.minX),n.width),j=Math.min(o(x.minY,N+r.minY),n.height),$=Math.min(o(x.maxX,-N+r.minX),n.width),nt=Math.min(o(x.maxY,-N+r.minY),n.height);return[F,j,$,nt]},l=function(x,N){for(var F=x.getBBox(),j=c(F,a.nodeR1),$=j[0],nt=j[1],ft=j[2],Mt=j[3],Rt=nt;Rt<Mt;Rt+=1)for(var Pt=$;Pt<ft;Pt+=1)if(!(N<0&&n[Pt+Rt*n.width]<=0)){var ne=s(Pt,r.minX),xe=s(Rt,r.minY),he=Ia({x:ne,y:xe},{x:F.minX,y:F.minY,width:F.width,height:F.height});if(he<Math.pow(a.nodeR1,2)){var Ne=Math.sqrt(he)-a.nodeR1;n.cells[Pt+Rt*n.width]+=N*Ne*Ne}}},p=function(x,N){for(var F=x.getBBox(),j=c(F,a.edgeR1),$=j[0],nt=j[1],ft=j[2],Mt=j[3],Rt=nt;Rt<Mt;Rt+=1)for(var Pt=$;Pt<ft;Pt+=1)if(!(N<0&&n.cells[Pt+Rt*n.width]<=0)){var ne=s(Pt,r.minX),xe=s(Rt,r.minY),he=qo({x:ne,y:xe},x);if(he<Math.pow(a.edgeR1,2)){var Ne=Math.sqrt(he)-a.edgeR1;n.cells[Pt+Rt*n.width]+=N*Ne*Ne}}};a.nodeInfluenceFactor&&i.forEach(function(g){l(g,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(g){p(g,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(g){l(g,a.negativeNodeInfluenceFactor/u)})}function Cv(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(x,N){return n.width*((x.y-n.minY+(N.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var p=l(o,u);return p<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var g=l(a,s);return g<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var I0=function(){function i(e,t){this.cfg=(0,v.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,v.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,v.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=Mv(e),a=_d(r.map(function(o){return[o.x,o.y]}),this.padding),n=jc(a);break;case"smooth-convex":r=Mv(e),r.length===2?(a=_d(r.map(function(o){return[o.x,o.y]}),this.padding),n=jc(a)):r.length>2&&(a=Ev(r.map(function(o){return[o.x,o.y]}),this.padding),n=Md(a));break;case"bubble":r=C0(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Md(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.pi)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,v.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,v.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,y.pi)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,v.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,v.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,v.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,v.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Sd(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Zi(n,Sd(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),Av=I0,mh=zt,L0="node",N0=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,v.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Ui(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,p=o[c.target]||0,g=Math.max(l,p);a[g]?a[g].push(c.id):a[g]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,v.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Wo(r.cfg.maxStep),r.redoStack=new Wo(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new rs(this),r=new Bf(this),n=new Uh(this),a=new g0(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:Jt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Jt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:Jt.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:Jt.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:Jt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,v.isPlainObject)(t)?this.cfg=(0,y.pi)((0,y.pi)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Wo(this.cfg.maxStep),this.redoStack=new Wo(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,v.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,v.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,v.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,v.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=xs({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Sa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=mh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Sa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,v.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,p=l*t,g=t,x=!1;if(f&&p<f?(g=f/l,x=!0):c&&p>c&&(g=c/l,x=!0),r?u=mh(u,[["t",-r.x,-r.y],["s",g,g],["t",r.x,r.y]]):u=mh(u,[["s",g,g]]),n){var N=(0,v.clone)(s.getMatrix());N||(N=[1,0,0,0,1,0,0,0,1]);var F=N[0],j=F*g,$=xs({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(nt){if(nt===1)N=u;else{var ft=zi(F,j,nt)/N[0];r?N=mh(N,[["t",-r.x,-r.y],["s",ft,ft],["t",r.x,r.y]]):N=mh(N,[["s",ft,ft]])}return{matrix:N}},$)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!x},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,v.isString)(t)&&(n=this.findById(t)),!n&&(0,v.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,y.pi)((0,y.pi)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,y.pi)((0,y.pi)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var p=au(this.get("comboTrees"));this.set("comboTrees",p)}}},e.prototype.innerAddItem=function(t,r,n){if(!nf(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(x){u||yo(x,function(N){if(r.parentId===N.id){u=!0;var F=(0,y.pi)({id:r.id,depth:N.depth+2},r);N.children?N.children.push(F):N.children=[F],r.depth=F.depth,a=n.addItem(t,r)}var j=s[N.id];return u&&j&&j.getType&&j.getType()==="combo"&&n.updateCombo(j,N.children),!0})}),!u){var f=(0,y.pi)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,v.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),p=!1,g=!1;o.forEach(function(x){g||p||yo(x,function(N){if(N.id===r.id)return g=!0,!1;if(r.comboId===N.id&&!g){p=!0;var F=(0,v.clone)(r);F.itemType="node",N.children?N.children.push(F):N.children=[F],F.depth=N.depth+1}return p&&l[N.id].getType&&l[N.id].getType()==="combo"&&n.updateCombo(l[N.id],N.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,y.pi)((0,y.pi)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var p=t[u].type,g=s[u];if(g&&g!==!0){var x=(0,y.pi)((0,y.pi)({},g.getModel()),{itemType:p});switch(p){case"node":l.nodes.push(x);break;case"edge":l.edges.push(x);break;case"combo":l.combos.push(x);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,v.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,v.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,y.ev)([],s.getStates(),!0);if(c==="combo"&&(0,v.each)(l,function(N){return a.setItemState(s,N,!1)}),o.updateItem(s,r),c==="combo"&&(0,v.each)(l,function(N){return a.setItemState(s,N,!0)}),u){var p={nodes:[],edges:[],combos:[]},g={nodes:[],edges:[],combos:[]},x=(0,y.pi)({id:f.id},r);switch(c){case"node":p.nodes.push(f),g.nodes.push(x);break;case"edge":p.edges.push(f),g.edges.push(x);break;case"combo":p.combos.push(f),g.combos.push(x);break;default:break}this.pushStack("update",{before:p,after:g})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,v.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){No(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(F){return{type:"node",model:F}}),!1,!1),(f==null?void 0:f.length)!==0){var c=nu(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(F){return{type:"edge",model:F}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var p=t.get("layoutController");if(p){if(p.layout(g),this.destroyed)return}else g();function g(){(t.get("comboTrees")||[]).forEach(function(F){yo(F,function(j){var $=t.findById(j.id);return $.getType()==="combo"&&j.collapsed&&(t.collapseCombo(j.id,!1),t.updateCombo($)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var F;(F=t.getCombos())===null||F===void 0||F.forEach(function(j){j.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var x=this.getNodes();x.forEach(function(F){F.toFront()})}else{var N=this.getEdges();N.forEach(function(F){F.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,v.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===L0){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!No(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ft){return o.clearItemStates(ft)}),this.getEdges().map(function(ft){return o.clearItemStates(ft)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},p=s.combos;if(p){var g=nu(p,s.nodes);this.set("comboTrees",g)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,v.each)(c,function(ft,Mt){c[Mt].getModel().depth=0,!(ft.getType&&ft.getType()==="edge")&&(ft.getType&&ft.getType()==="combo"?(delete c[Mt],ft.destroy()):l.nodes.indexOf(ft)<0&&(delete c[Mt],o.remove(ft,!1)))});for(var x=this.getCombos(),N=x.length,F=N-1;F>=0;F--)x[F].destroyed&&x.splice(F,1);p&&(o.addCombos(p),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,v.each)(c,function(ft,Mt){ft.getType&&(ft.getType()==="node"||ft.getType()==="combo")||l.edges.indexOf(ft)<0&&(delete c[Mt],o.remove(ft,!1))}),(this.get("comboTrees")||[]).forEach(function(ft){yo(ft,function(Mt){var Rt=n.findById(Mt.id);return Rt.getType()==="combo"&&Mt.collapsed&&n.collapseCombo(Mt.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var j=(this.get("layout")||{}).relayoutAtChangeData,$=j===void 0?!0:j,nt=this.get("layoutController");return $&&nt&&(nt.changeData(function(){setTimeout(function(){var ft;(ft=o.getCombos())===null||ft===void 0||ft.forEach(function(Mt){Mt.set("animate",!0)})},0)}),o.get("animate")&&!nt.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ft){return ft.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,v.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(j){var $=a.findById(j),nt=$.getType();if(!(nt!=="node"&&nt!=="combo")){var ft=$.getModel();c["".concat(nt,"s")].push({id:j,parentId:nt==="node"?ft.comboId:ft.parentId})}});var l=this.get("comboTrees"),p=new Set(r),g=new Map;l&&(l.forEach(function(j){yo(j,function($,nt,ft){if(p.has($.id)){if(nt){var Mt=a.findById(nt.id),Rt=a.findById($.id);nt.children.splice(ft,1),Mt.removeChild(Rt),o.updateCombo(Mt,nt.children)}$.itemType==="combo"&&g.set($.id,$)}return!0})}),l=l.filter(function(j){return!p.has(j.id)}),this.set("comboTrees",l));var x={nodes:[],combos:[]},N=r.map(function(j){var $=a.findById(j),nt=$.getModel(),ft="";$.getType&&(ft=$.getType());var Mt=g.get(j)||{id:$.getID(),itemType:ft};return ft==="combo"?(Mt.parentId=s,nt.parentId=s):ft==="node"&&(Mt.comboId=s,nt.comboId=s),f&&x["".concat(ft,"s")].push({id:nt.id,parentId:s}),Mt});u.children=N,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(j){Ui(j,function($){return $.id===s?($.itemType="combo",$.children=N,!1):!0})}),this.sortCombos()),f&&(x.combos.push(u),this.pushStack("createCombo",{before:c,after:x}));var F=this.findById(s);!F.getModel().parentId&&F.getChildren().combos.length&&this.updateComboTree(F,void 0,!1),setTimeout(function(){F.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,v.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var p=this.get("itemMap"),g=u.get("id"),x,N=[],F=this.get("combos"),j=this.findById(c),$=r&&this.get("enabledStack"),nt={};if($&&(nt=(0,v.clone)(f),nt.children=[]),l.forEach(function(Pt){x||yo(Pt,function(ne){var xe;if(ne.id===g){x=ne;var he=u.getEdges().map(function(Dr){return Dr.getID()});he.forEach(function(Dr){n.removeItem(Dr,!1)});var Ne=F.indexOf(u);F.splice(Ne,1),delete p[g];var He=(0,v.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:He,type:"combo"})}if(c&&x&&ne.id===c){j.removeCombo(u),N=ne.children;var Ne=N.indexOf(x);return Ne!==-1&&N.splice(Ne,1),(xe=x.children)===null||xe===void 0||xe.forEach(function($r){var zr=n.findById($r.id),_r=zr.getModel();zr.getType&&zr.getType()==="combo"?($r.parentId=c,delete $r.comboId,_r.parentId=c,delete _r.comboId):zr.getType&&zr.getType()==="node"&&($r.comboId=c,_r.comboId=c),j.addChild(zr),N.push($r)}),n.updateCombo(j),!1}return!0})}),!c&&x){var ft=l.indexOf(x);l.splice(ft,1),(a=x.children)===null||a===void 0||a.forEach(function(Pt){Pt.parentId=void 0;var ne=n.findById(Pt.id).getModel();delete ne.parentId,delete ne.comboId,Pt.itemType!=="node"&&l.push(Pt)})}if($){var Mt={nodes:[],combos:[]},Rt={nodes:[],combos:[]};(o=x.children)===null||o===void 0||o.forEach(function(Pt){var ne=n.findById(Pt.id),xe=ne.getType();xe!=="node"&&xe!=="combo"||(Mt["".concat(xe,"s")].push({id:Pt.id,parentId:g}),Rt["".concat(xe,"s")].push({id:Pt.id,parentId:c}))}),Mt.combos.push(nt),this.pushStack("uncombo",{before:Mt,after:Rt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){yo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var p=(0,y.ev)([],l.getStates(),!0);(0,v.each)(p,function(g){return r.setItemState(l,g,!1)}),o.updateCombo(l,f.children,t),(0,v.each)(p,function(g){return r.setItemState(l,g,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,v.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){yo(c,function(l){if(!l)return!0;var p=f[l.id];if(o===l.id&&p&&p.getType&&p.getType()==="combo"){var g=(0,y.ev)([],p.getStates(),!0);(0,v.each)(g,function(x){p.getStateStyle(x)&&r.setItemState(p,x,!1)}),u.updateCombo(p,l.children),(0,v.each)(g,function(x){p.getStateStyle(x)&&r.setItemState(p,x,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,v.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,p;if((c||[]).forEach(function($){p||Ui($,function(nt){if(!p)return nt.id===o.getID()&&(p=nt),!0})}),Ui(p,function($){return $.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var g={},x={};f==="combo"?(g.combos=[{id:s.id,parentId:s.parentId}],x.combos=[{id:s.id,parentId:r}]):f==="node"&&(g.nodes=[{id:s.id,parentId:s.comboId}],x.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:g,after:x})}if(s.parentId||s.comboId){var N=this.findById(s.parentId||s.comboId);N&&N.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var F=this.findById(r);F&&F.addChild(o)}if(u){var F=this.findById(u);F&&F.removeChild(o)}var j=au(this.get("comboTrees"),s.id,r);this.set("comboTrees",j),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,v.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,v.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,v.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,v.each)(r,function(o){o.refresh()}),(0,v.each)(n,function(o){o.refresh()}),(0,v.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,v.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,v.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var p=l.get("originAttrs"),g=l.get("model"),x=l.getContainer().getMatrix();if(p==null&&(x&&(p={x:x[6],y:x[7]}),l.set("originAttrs",p||0)),a){var N=a(l,f,c,p||{x:0,y:0});l.set("model",Object.assign(g,N))}else p?(g.x=p.x+(c.x-p.x)*f,g.y=p.y+(c.y-p.y)*f):(g.x=c.x,g.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,v.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(p){(0,v.each)(p,function(g){u=g.getModel();var x=g.get("originAttrs");if(!(x&&u.x===x.x&&u.y===x.y)){var N=g.updatePosition({x:u.x,y:u.y});f[u.id]=N,u.comboId&&(f[u.comboId]=f[u.comboId]||N),u.parentId&&(f[u.parentId]=f[u.parentId]||N)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,v.each)(a,function(l){var p=l.getSource().getModel(),g=l.getTarget();if(!(0,v.isPlainObject)(g)){var x=g.getModel();(f[p.id]||f[x.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,v.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,v.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(p){var g=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*g[0]+g[6],u.y=u.y*g[0]+g[7];var x=o.getGroup().getCanvasBBox(),N=x.minX,F=x.maxX,j=x.minY,$=x.maxY,nt={x:(N+F)/2,y:(j+$)/2};r==="begin"&&(nt.x=N,nt.y=j),o.translate(u.x-nt.x,u.y-nt.y)})}var c=(0,y.pi)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,v.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(p){c||Ui(p,function(g){if(c&&g.depth<=a.depth)return!1;if(a.id===g.id&&(c=!0),c){var x=n.findById(g.id);x&&x.getType&&x.getType()==="combo"&&(u=u.concat(x.getNodes()),u=u.concat(x.getCombos()))}return!0})});var l={};s.forEach(function(p){var g=p.getModel(),x=g.isVEdge,N=g.size,F=N===void 0?1:N;if(!(p.isVisible()&&!x)){var j=p.getSource(),$=p.getTarget(),nt=null,ft;if(j.getModel().id===a.id||u.includes(j)&&!u.includes($)?(nt=$,ft=!1):($.getModel().id===a.id||!u.includes(j)&&u.includes($))&&(nt=j,ft=!0),nt){if(x){n.removeItem(p,!1);return}for(var Mt=nt.getModel();!nt.isVisible();){var Rt=Mt.parentId,Pt=Mt.comboId,ne=Rt||Pt;if(nt=n.findById(ne),!nt||!ne)return;Mt=nt.getModel()}var xe=Mt.id,he=ft?{source:xe,target:a.id,size:F,isVEdge:!0}:{source:a.id,target:xe,size:F,isVEdge:!0},Ne="".concat(he.source,"-").concat(he.target);if(l[Ne]){l[Ne].size+=F;return}l[Ne]=he}}}),this.addItems(Object.values(l).map(function(p){return{type:"vedge",model:p}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,v.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(p){c||Ui(p,function(g){if(c&&g.depth<=a.depth)return!1;if(a.id===g.id&&(c=!0),c){var x=n.findById(g.id);x&&x.getType&&x.getType()==="combo"&&(u=u.concat(x.getNodes()),u=u.concat(x.getCombos()))}return!0})});var l={};s.forEach(function(p){if(!(p.isVisible()&&!p.getModel().isVEdge)){var g=p.getSource(),x=p.getTarget(),N=g.get("id"),F=x.get("id"),j=null,$;if(N===a.id||u.includes(g)&&!u.includes(x)?(j=x,$=!1):F===a.id||!u.includes(g)&&u.includes(x)?(j=g,$=!0):u.includes(g)&&u.includes(x)&&g.isVisible()&&x.isVisible()&&p.show(),j){var nt=p.getModel(),ft=nt.isVEdge,Mt=nt.size,Rt=Mt===void 0?1:Mt;if(ft){n.removeItem(p,!1);return}for(var Pt=j.getModel();!j.isVisible();){var ne=Pt.parentId,xe=Pt.comboId,he=ne||xe;if(j=n.findById(he),!j||!he)return;Pt=j.getModel()}for(var Ne=Pt.id,He=$?x:g,Dr=He.getModel();!He.isVisible();){var $r=Dr.parentId,zr=Dr.comboId,_r=$r||zr;if(He=n.findById(_r),!He||!_r)return;if(Dr.comboId===a.id||Dr.parentId===a.id)break;Dr=He.getModel()}var pn=Dr.id;if(Ne){var hn=$?{source:Ne,target:pn,isVEdge:!0,size:Rt}:{source:pn,target:Ne,isVEdge:!0,size:Rt},Cr="".concat(hn.source,"-").concat(hn.target);if(l[Cr]){l[Cr].size+=Rt;return}l[Cr]=hn}}}}),this.addItems(Object.values(l).map(function(p){return{type:"vedge",model:p}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,v.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,v.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,v.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=fr(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,v.clone)(r):{before:{},after:(0,v.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=Vt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=Vt(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Bn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new Av(this,(0,y.pi)((0,y.pi)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,v.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(H),Tv=N0;function Cd(i){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(i)}var sh=zt,Iv="-shape",Ad="-label",Yh=["startArrow","endArrow"],Lv={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},k0={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Wh={edge:k0,node:Lv,combo:Lv},Td="-label-bg",Id={options:{labelCfg:{style:{fontFamily:Jt.windowFontFamily}},descriptionCfg:{style:{fontFamily:Jt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,v.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+Iv),t.shapeMap[this.itemType+Iv]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Ad),t.shapeMap[this.itemType+Ad]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=sh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=sh(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=sh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=sh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=sh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Td;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,v.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=Jt[a]?Jt[a].style:null;return(0,y.pi)((0,y.pi)((0,y.pi)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,v.mix)({},o.attr(),e.style),u=function(l){var p,g=s[l];if((0,v.isPlainObject)(g)){var x=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(N){return N.get("name")===l});x==null||x.attr(g)}else o.attr((p={},p[l]=g,p))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Ad,c=o.shapeMap[f]||o.find(function(ft){return ft.get("className")===f}),l=this.itemType+Td,p=o.shapeMap[l]||o.find(function(ft){return ft.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],p&&(o.removeChild(p),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,v.deepMix)(u,e.labelCfg));var x=this.getLabelStyleByPosition(e,u,o),N=(n=e.labelCfg)===null||n===void 0?void 0:n.style,F=(0,y.pi)((0,y.pi)({},x),N),j=F.rotate;if(delete F.rotate,!isNaN(j)&&j!==""){var $=[1,0,0,0,1,0,0,0,1];$=sh($,[["t",-F.x,-F.y],["r",j],["t",F.x,F.y]]),F.matrix=$,c.attr(F)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(F);if(!p)F.background&&(p=this.drawLabelBg(e,o,c),p.set("classname",l),o.shapeMap[l]=p,c.toFront());else if(F.background){var nt=this.getLabelBgStyleByPosition(c,u);p.attr(nt)}else o.removeChild(p)}else{var g=this.drawLabel(e,o);g.set("className",f),o.shapeMap[f]=g}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,v.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var p=(0,v.mix)({},l||c),g=r.getContainer(),x={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(x.r=1,x.width=1,x.height=1),t){var N=function(_r){var pn,hn=p[_r];if((0,v.isPlainObject)(hn)&&!Yh.includes(_r)){var Cr=((o=g.shapeMap)===null||o===void 0?void 0:o[_r])||g.find(function(Yr){return Yr.get("name")===_r});Cr==null||Cr.attr(hn)}else s.attr((pn={},pn[_r]=hn,pn))};for(var F in p)N(F)}else{var j=Ks(r.getCurrentStatesStyle()),$=r.getModel(),nt=(0,v.mix)({},$.style,Ks(r.getOriginStyle())),ft=s.get("name"),Mt=s.attr(),Rt={};Object.keys(Mt).forEach(function(zr){if(zr!=="img"){var _r=Mt[zr];_r&&Cd(_r)==="object"?Rt[zr]=(0,v.clone)(_r):Rt[zr]=_r}});var Pt={},ne=function(_r){var pn=p[_r];if((0,v.isPlainObject)(pn)&&!Yh.includes(_r)){var hn=g.shapeMap[_r]||g.find(function(an){return an.get("name")===_r});if(hn){var Cr=Ks(hn.attr());(0,v.each)(pn,function(an,on){if(_r===ft&&Rt[on]&&!x[on]){delete Rt[on];var Sn=nt[_r][on]||Wh[u][on];s.attr(on,Sn)}else if(Cr[on]||Cr[on]===0){delete Cr[on];var On=nt[_r][on]||Wh[u][on];hn.attr(on,On)}}),Pt[_r]=Cr}}else if(Rt[_r]&&!x[_r]){delete Rt[_r];var Yr=nt[_r]||(nt[ft]?nt[ft][_r]:void 0)||Wh[u][_r];s.attr(_r,Yr)}};for(var xe in p)ne(xe);ft?Pt[ft]=Rt:(0,v.mix)(Pt,Rt);for(var F in j)if(!x[F]){var he=j[F];(!(0,v.isPlainObject)(he)||Yh.includes(F))&&(ft?((0,v.mix)(nt[ft],(a={},a[F]=he,a)),delete nt[F]):(0,v.mix)(nt,(n={},n[F]=he,n)),delete j[F])}var Ne={};(0,v.deepMix)(Ne,nt,Pt,j);var He=!1,Dr=function(_r){var pn,hn,Cr=Ne[_r];if((0,v.isPlainObject)(Cr)&&!Yh.includes(_r)){var Yr=g.shapeMap[_r]||g.find(function(on){return on.get("name")===_r});Yr&&((Yr.get("type")==="text"||Yr.get("labelRelated"))&&(delete Cr.x,delete Cr.y,delete Cr.matrix),_r===ft&&(u==="combo"&&(delete Cr.r,delete Cr.width,delete Cr.height),He=!0),Yr.attr(Cr))}else if(!He){var an=Cr||Wh[u][_r];u==="combo"?ft||s.attr((pn={},pn[_r]=an,pn)):s.attr((hn={},hn[_r]=an,hn))}};for(var $r in Ne)Dr($r)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,v.clone)(f):(0,v.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},O0={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Jt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Jt.defaultNode.size;return(0,v.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,v.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=xu(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,v.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=vi(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,y.pi)((0,y.pi)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ne){return Ne.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ne){return Ne.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ne){return Ne.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Ne){return Ne.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,v.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,p=f.lineWidth,g=f.size/2;g||(g=f.r);var x=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},N=x.left,F=x.right,j=x.top,$=x.bottom,nt=this.getSize(e),ft=nt[0],Mt=nt[1],Rt={r:g,fill:c,stroke:l,lineWidth:p};if(n)!N&&N!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.pi)((0,y.pi)({},Rt),{x:-ft/2,y:0}));else if(N){var Pt="link-point-left";t.shapeMap[Pt]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},Rt),{x:-ft/2,y:0}),className:Pt,name:Pt,isAnchorPoint:!0})}if(a)!F&&F!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,y.pi)((0,y.pi)({},Rt),{x:ft/2,y:0}));else if(F){var ne="link-point-right";t.shapeMap[ne]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},Rt),{x:ft/2,y:0}),className:ne,name:ne,isAnchorPoint:!0})}if(o)!j&&j!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,y.pi)((0,y.pi)({},Rt),{x:0,y:-Mt/2}));else if(j){var xe="link-point-top";t.shapeMap[xe]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},Rt),{x:0,y:-Mt/2}),className:xe,name:xe,isAnchorPoint:!0})}if(s)!$&&$!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,y.pi)((0,y.pi)({},Rt),{x:0,y:Mt/2}));else if($){var he="link-point-bottom";t.shapeMap[he]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},Rt),{x:0,y:Mt/2}),className:he,name:he,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.pi)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(j){return j.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,v.mix)({},f.attr(),a),l=c.width,p=l===void 0?20:l,g=c.height,x=g===void 0?20:g;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(p=0,x=0),f.attr((0,y.pi)((0,y.pi)({},c),{x:-p/2,y:-x/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var N="".concat(this.type,"-icon");if(u)n.shapeMap[N]=n.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:N,name:N});else{var p=a.width,x=a.height;n.shapeMap[N]=n.addShape("image",{attrs:(0,y.pi)((0,y.pi)({},a),{x:-p/2,y:-x/2}),className:N,name:N})}var F=n.shapeMap["node-label"]||n.find(function(j){return j.get("name")==="node-label"});F&&F.toFront()}}},D0=(0,y.pi)((0,y.pi)({},Id),O0);Hn.registerNode("single-node",D0);var Vh="edge-shape";function P0(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var R0={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Jt.defaultEdge.size,style:{x:0,y:0,stroke:Jt.defaultEdge.style.stroke,lineAppendWidth:Jt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Jt.edgeLabel.style.fill,fontSize:Jt.edgeLabel.style.fontSize,fontFamily:Jt.windowFontFamily}},stateStyles:(0,y.pi)({},Jt.edgeStateStyles)},getPath:function(e){var t=[];return(0,v.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,v.mix)({},t,r,e.style),a=e.size||Jt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,v.mix)({},Jt.defaultEdge.style,{stroke:Jt.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var p=o.attr(),g=e.style||{};g.stroke===void 0&&(g.stroke=e.color);var x=e.sourceNode,N=e.targetNode,F={radius:g.radius};c||(F={source:x,target:N,offset:g.offset,radius:g.radius});var j=this.getPath(l,F),$={};r==="move"?$={path:j}:(p.endArrow&&g.endArrow===!1&&(e.style.endArrow={path:""}),p.startArrow&&g.startArrow===!1&&(e.style.startArrow={path:""}),$=(0,y.pi)({},e.style),$.lineWidth===void 0&&($.lineWidth=((0,v.isNumber)(s)?s:s==null?void 0:s[0])||p.lineWidth),$.path===void 0&&($.path=j),$.stroke===void 0&&($.stroke=p.stroke||e.color)),o&&o.attr($)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[Vh],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,v.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=vo(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,y.pi)((0,y.pi)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,v.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=P0(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:Vh,name:Vh,attrs:r});return t.shapeMap[Vh]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,v.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Td;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,v.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},B0=(0,y.pi)((0,y.pi)({},Id),R0);Hn.registerEdge("single-edge",B0),Hn.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Hn.registerEdge("spline",{getPath:function(e){var t=mv(e);return t}},"single-edge"),Hn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Ho(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,v.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Ho(t,o,r)}var f=jo(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Hn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,v.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,v.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Xh(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Hn.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Xh(r,n,e.curvePosition[0],e.curveOffset[0]),o=Xh(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Hn.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Hn.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Hn.registerEdge("loop",{getPathPoints:function(e){return to(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var F0={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Jt.comboLabel.refX,refY:Jt.comboLabel.refY,options:{style:{stroke:Jt.defaultCombo.style.stroke,fill:Jt.defaultCombo.style.fill,lineWidth:Jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Jt.comboLabel.style.fill,fontSize:Jt.comboLabel.style.fontSize,fontFamily:Jt.windowFontFamily}},stateStyles:(0,y.pi)({},Jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,v.clone)(e.size||this.options.size||Jt.defaultCombo.size);return(0,v.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,v.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,v.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,v.isNil)(o)&&(o=this.refX),(0,v.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,p=t.getContainer(),g=p.find(function(j){return j.get("name")==="combo-collapsed-substitute-icon"}),x=g&&!g.destroyed,N=t.get("keyShape");if(n&&u){if(x)g.show();else{var F={width:c||r.r*2||r.width,height:l||r.r*2||r.height};g=p.addShape("image",{attrs:(0,y.pi)({img:f,x:-F.width/2,y:-F.height/2},F),name:"combo-collapsed-substitute-icon",draggable:!0})}N.hide()}else x&&(g.hide(),N.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,y.pi)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},G0=(0,y.pi)((0,y.pi)({},Id),F0);Hn.registerCombo("single-combo",G0),Hn.registerCombo("circle",{options:{size:[Jt.defaultCombo.size[0],Jt.defaultCombo.size[0]],padding:Math.max.apply(Math,Jt.defaultCombo.padding),animate:!0,style:{stroke:Jt.defaultCombo.style.stroke,fill:Jt.defaultCombo.style.fill,lineWidth:Jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Jt.comboLabel.style.fill,fontSize:Jt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.pi)({},Jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,v.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,v.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,v.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,v.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||Jt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,y.pi)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,v.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,v.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,v.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,v.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),Hn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Jt.defaultCombo.style.stroke,fill:Jt.defaultCombo.style.fill,lineWidth:Jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Jt.comboLabel.style.fill,fontSize:Jt.comboLabel.style.fontSize,fontFamily:Jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.pi)({},Jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,v.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,v.isNil)(o)&&(o=this.refX),(0,v.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],p;switch(r){case"top":p={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":p={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":p={x:u+s,y:0,textAlign:"left"};break;case"center":p={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":p={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:p={x:f+o,y:0,textAlign:"right"};break}return p.text=e.label,p},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,v.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,v.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,v.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,v.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Jt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,v.isNumber)(a.height)||isNaN(a.height)?u=o[1]||Jt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var p=(0,y.pi)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},p},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,v.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,v.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,v.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),p=(0,v.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,p,!1)}},"single-combo"),Hn.registerNode("simple-circle",{options:{size:Jt.defaultNode.size,style:{x:0,y:0,stroke:Jt.defaultNode.style.stroke,fill:Jt.defaultNode.style.fill,lineWidth:Jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jt.nodeLabel.style.fill,fontSize:Jt.nodeLabel.style.fontSize,fontFamily:Jt.windowFontFamily}},stateStyles:(0,y.pi)({},Jt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.pi)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,v.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Hn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Jt.defaultNode.style.stroke,fill:Jt.defaultNode.style.fill,lineWidth:Jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jt.nodeLabel.style.fill,fontSize:Jt.nodeLabel.style.fontSize,fontFamily:Jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.pi)({},Jt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,v.mix)({},a,s.attr(),u);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Hn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Jt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,y.pi)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,p=o-c/2;t.setClip({type:"rect",attrs:(0,y.pi)({x:l,y:p,width:f,height:c},s)})}else if(n==="ellipse"){var g=r.rx,x=r.ry;t.setClip({type:"ellipse",attrs:(0,y.pi)({x:a,y:o,rx:g,ry:x},s)})}else if(n==="polygon"){var N=r.points;t.setClip({type:"polygon",attrs:(0,y.pi)({points:N},s)})}else if(n==="path"){var F=r.path;t.setClip({type:"path",attrs:(0,y.pi)({path:F},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,y.pi)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var Nv={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},kv={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},qc=Hn,z0=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Ov=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},U0=zt,X0=(0,y.pi)((0,y.pi)((0,y.pi)((0,y.pi)((0,y.pi)((0,y.pi)((0,y.pi)({},X),tt),T),st),M),C),{transform:U0,mat3:et}),Is=X0,Y0=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Ov(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,y._T)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),p=f.length,g=0;g<p;g++){var x=f[g];if(!(!x||x.destroyed)){var N=x.getModel();if(!x.isVisible()){r.push(N);continue}t.push(N)}}for(var F=c.length,g=0;g<F;g++){var j=c[g];if(!(!j||j.destroyed)){var N=j.getModel();if(!j.isVisible()){a.push(N);continue}N.isComboEdge?o.push(N):n.push(N)}}for(var $=l.length,g=0;g<$;g++){var nt=l[g];if(!nt.destroyed){var N=nt.getModel();if(!nt.isVisible()){u.push(N);continue}s.push(N)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(ft){return ft.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var p,g=t.execLayoutMethod(l,c);return c===a.length-1&&((p=o.onAllLayoutEnd)===null||p===void 0||p.call(o)),g})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,y._T)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,v.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,v.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,y.pi)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,v.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Da(o);return s.size=[s.width,s.height],s}),a=Object.values((0,v.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Ya(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,y.mG)(this,void 0,void 0,function(){var n,a,o;return(0,y.Jh)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Ya(u.x)||Ya(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),p=u/(c-1),g=f/(l-1);(!isFinite(p)||!p)&&(p=0),(!isFinite(g)||!p)&&(g=0);for(var x=e[0]-u/2,N=e[1]-f/2,F=!0,j=0;j<o;j++){var $=a[j];Ya(+$.x)&&(F=!1,$.x=j%c*p+x),Ya(+$.y)&&(F=!1,$.y=Math.floor(j/c)*g+N)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),Dv=Y0,W0=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),Pv=W0,cc=qc.registerNode,Rv=qc.registerEdge,V0=qc.registerCombo,Bv=Y.registerBehavior,vn=Jt,dS={version:Jt.version,AbstractGraph:Tv,BaseGlobal:vn,Util:Is,Shape:qc,Node:kr,Edge:le,Combo:jn,Hull:Av,registerNode:qc.registerNode,registerEdge:qc.registerEdge,registerCombo:qc.registerCombo,registerBehavior:Y.registerBehavior,Arrow:Nv,Marker:kv,AbstractLayout:Dv,AbstractEvent:Pv},H0=ut(810369);function j0(){return window?window.devicePixelRatio:1}function Fv(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Il(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function bh(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Z0(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Gv(i,e){return i[0]===e[0]&&i[1]===e[1]}var q0=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,$0=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,K0=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,zv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Uv(i,e){var t=i.match(zv);(0,v.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function Q0(i,e,t){var r=q0.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,p=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,g=i.createLinearGradient(s.x,s.y,l,p);return Uv(a,g),g}function J0(i,e,t){var r=$0.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(zv);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,p=Math.sqrt(c*c+l*l)/2,g=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*p);return Uv(s,g),g}function ty(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=K0.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function ey(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,v.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Q0(i,e,t);if(t[0]==="r")return J0(i,e,t);if(t[0]==="p")return ty(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function ry(i){var e=0,t=0,r=0,n=0;return(0,v.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function Hh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Ld(i,e){return Hh(i)*Hh(e)?(i[0]*e[0]+i[1]*e[1])/(Hh(i)*Hh(e)):1}function Xv(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Ld(i,e))}function Yv(i,e){var t=e[1],r=e[2],n=(0,v.mod)((0,v.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,p=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,g=l*l/(t*t)+p*p/(r*r);g>1&&(t*=Math.sqrt(g),r*=Math.sqrt(g));var x=t*t*(p*p)+r*r*(l*l),N=x?Math.sqrt((t*t*(r*r)-x)/x):1;a===o&&(N*=-1),isNaN(N)&&(N=0);var F=r?N*t*p/r:0,j=t?N*-r*l/t:0,$=(s+f)/2+Math.cos(n)*F-Math.sin(n)*j,nt=(u+c)/2+Math.sin(n)*F+Math.cos(n)*j,ft=[(l-F)/t,(p-j)/r],Mt=[(-1*l-F)/t,(-1*p-j)/r],Rt=Xv([1,0],ft),Pt=Xv(ft,Mt);return Ld(ft,Mt)<=-1&&(Pt=Math.PI),Ld(ft,Mt)>=1&&(Pt=0),o===0&&Pt>0&&(Pt=Pt-2*Math.PI),o===1&&Pt<0&&(Pt=Pt+2*Math.PI),{cx:$,cy:nt,rx:Gv(i,[f,c])?0:t,ry:Gv(i,[f,c])?0:r,startAngle:Rt,endAngle:Rt+Pt,xRotation:n,arcFlag:a,sweepFlag:o}}var jh=Math.sin,Zh=Math.cos,Nd=Math.atan2,qh=Math.PI;function Wv(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=Nd(c,f),p=new Fd({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Zh(qh/6)+","+10*jh(qh/6)+" L0,0 L"+10*Zh(qh/6)+",-"+10*jh(qh/6),stroke:s,lineWidth:u}});p.translate(n,a),p.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",p)}function Vv(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,p=l.d,g=l.fill,x=l.stroke,N=l.lineWidth,F=(0,y._T)(l,["d","fill","stroke","lineWidth"]),j=t-n,$=r-a,nt=Nd($,j);p&&(n=n-Zh(nt)*p,a=a-jh(nt)*p);var ft=new Fd({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,y.pi)((0,y.pi)({},F),{stroke:x||f,lineWidth:N||c,fill:g})});ft.translate(n,a),ft.rotateAtPoint(n,a,nt),i.set(o?"startArrowShape":"endArrowShape",ft)}function Ll(i,e,t,r,n){var a=Nd(r-e,t-i);return{dx:Zh(a)*n,dy:jh(a)*n}}function kd(i,e,t,r,n,a){typeof e.startArrow=="object"?Vv(i,e,t,r,n,a,!0):e.startArrow?Wv(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Od(i,e,t,r,n,a){typeof e.endArrow=="object"?Vv(i,e,t,r,n,a,!1):e.endArrow?Wv(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Hv={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function uh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Hv[r]?Hv[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,v.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=ey(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Dd(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function ny(i,e,t){var r=i.get("refreshElements");(0,v.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?Rd(e,t):Pd(e,t)}function Pd(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Rd(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Pd(r.cfg.children,e);else{var n=ay(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Pd(r.cfg.children,e)}}}function jv(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&jv(t.cfg.children)}}function Rd(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&Rd(r.get("children"),e))}}function ay(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&bh(t,e);return r}function Zv(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],p=l[0];if(c===0&&a&&a.d){var g=i.getStartTangent();f=Ll(g[0][0],g[0][1],g[1][0],g[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var x=n[c+1];if(x[0]==="Z"){var g=i.getEndTangent();f=Ll(g[0][0],g[0][1],g[1][0],g[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var g=i.getEndTangent();f=Ll(g[0][0],g[0][1],g[1][0],g[1][1],o.d)}var N=f.dx,F=f.dy;switch(p){case"M":e.moveTo(l[1]-N,l[2]-F),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-N,l[2]-F);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-N,l[4]-F);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-N,l[6]-F);break;case"A":{var j=void 0;r?(j=r[c],j||(j=Yv(s,l),r[c]=j)):j=Yv(s,l);var $=j.cx,nt=j.cy,ft=j.rx,Mt=j.ry,Rt=j.startAngle,Pt=j.endAngle,ne=j.xRotation,xe=j.sweepFlag;if(e.ellipse)e.ellipse($,nt,ft,Mt,ne,Rt,Pt,1-xe);else{var he=ft>Mt?ft:Mt,Ne=ft>Mt?1:ft/Mt,He=ft>Mt?Mt/ft:1;e.translate($,nt),e.rotate(ne),e.scale(Ne,He),e.arc(0,0,he,Rt,Pt,1-xe),e.scale(1/Ne,1/He),e.rotate(-ne),e.translate(-$,-nt)}break}case"Z":e.closePath();break;default:break}if(p==="Z")s=u;else{var Dr=l.length;s=[l[Dr-2],l[Dr-1]]}}}}function qv(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function iy(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Z0(t,n):r?e=t:a&&(e=n)}return e}function oy(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,v.each)(i,function(a){var o=iy(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,v.min)(e),minY:(0,v.min)(t),maxX:(0,v.max)(r),maxY:(0,v.max)(n)}}function sy(i,e){return!i||!e||!bh(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var uy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){qv(this,t)},e.prototype.getShapeBase=function(){return _},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),uh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,v.each)(t,function(p){var g=p.cfg.cacheCanvasBBox;g&&p.cfg.isInView&&(r.push(g.minX,g.maxX),n.push(g.minY,g.maxY))});var a=null;if(r.length){var o=(0,v.min)(r),s=(0,v.max)(r),u=(0,v.min)(n),f=(0,v.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",bh(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),uh(t,this),this._applyClip(t,this.getClip()),Dd(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(jf),$v=uy,fy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return _},e.prototype.getGroupBase=function(){return $v},e.prototype.onCanvasChange=function(t){qv(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=gl(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),uh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!bh(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),uh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=bh(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,v.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,v.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(zc),Qu=fy,cy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,p=Fv(u,f,t,r);return a&&n?p<=c+l:a?p<=c:n?p>=c-l&&p<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(Qu),ly=cy;function $h(i,e,t,r){return i/(t*t)+e/(r*r)}var hy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,p=s.ry,g=(t-f)*(t-f),x=(r-c)*(r-c);return a&&n?$h(g,x,l+u,p+u)<=1:a?$h(g,x,l,p)<=1:n?$h(g,x,l-u,p-u)>=1&&$h(g,x,l+u,p+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(Qu),dy=hy;function Kv(i){return i instanceof HTMLElement&&(0,v.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var vy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,v.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Kv(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,p=r.img;(p instanceof Image||Kv(p))&&(!(0,v.isNil)(u)&&!(0,v.isNil)(f)&&!(0,v.isNil)(c)&&!(0,v.isNil)(l)?t.drawImage(p,u,f,c,l,n,a,o,s):t.drawImage(p,n,a,o,s))},e}(Qu),py=vy;function $c(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?Oo.pointToLine(i,e,t,r,a,o)<=n/2:!1}var gy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&kd(this,t,a,o,r,n),u&&Od(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return $c(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Ll(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Ll(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Oo.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Oo.pointAt(n,a,o,s,t)},e}(Qu),yy=gy,my={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},by=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,v.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,v.isFunction)(a))s=a,u=s(r,n,o),u=Tl(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Zv(this,t,{path:r},n)},e.Symbols=my,e}(Qu),xy=by;function Qv(i,e,t){var r=hu();return i.createPath(r),r.isPointInPath(e,t)}var wy=1e-6;function Bd(i){return Math.abs(i)<wy?0:i<0?-1:1}function Ey(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Jv(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Ey(o,s,[e,t]))return!0;Bd(o[1]-t)>0!=Bd(s[1]-t)>0&&Bd(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function xh(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return Fv(f.x,f.y,o,s)<=a/2}var Sy=zt;function My(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function _y(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,p=u.box;if(!(p&&!Il(p.x-o,p.y-o,p.width+e,p.height+e,t,r))){switch(u.command){case"L":case"Z":a=$c(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var g=Kf.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=g<=e/2;break;case"C":var x=Tu.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=x<=e/2;break;case"A":var N=u.arcParams,F=N.cx,j=N.cy,$=N.rx,nt=N.ry,ft=N.startAngle,Mt=N.endAngle,Rt=N.xRotation,Pt=[t,r,1],ne=$>nt?$:nt,xe=$>nt?1:$/nt,he=$>nt?nt/$:1,Ne=Sy(null,[["t",-F,-j],["r",-Rt],["s",1/xe,1/he]]);ps.transformMat3(Pt,Pt,Ne),a=xh(0,0,ne,ft,Mt,e,Pt[0],Pt[1]);break;default:break}if(a)break}}return a}function Cy(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var Kh=(0,y.pi)({hasArc:My,extractPolygons:Cy,isPointInStroke:_y},Q);function tp(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Jv(a,e,t),r)break}return r}var Ay=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Tl(t);var r=Kh.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Me(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();kd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Od(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=Kh.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Qv(this,t,r);else{var l=this.attr("path"),p=Kh.extractPolygons(l);f=tp(p.polygons,t,r)||tp(p.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Zv(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,v.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,v.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,v.isNil)(s)||(0,v.isNil)(a))return null;var u=s.length,f=o[a+1];return Tu.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Kh.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,v.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=Tu.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,v.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=Tu.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(Qu),Fd=Ay;function ep(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if($c(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],p=i[a-1];if($c(l[0],l[1],p[0],p[1],e,t,r))return!0}return!1}var Ty=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=ep(s,o,t,r,!0)),!u&&a&&(u=Jv(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(Qu),Iy=Ty,Ly=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&kd(this,t,n[1][0],n[1][1],u,f),o&&Od(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return ep(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var p=Ll(u,f,n[1][0],n[1][1],a.d);u+=p.dx,f+=p.dy}if(o&&o.d){var p=Ll(n[s-2][0],n[s-2][1],c,l,o.d);c-=p.dx,l-=p.dy}t.beginPath(),t.moveTo(u,f);for(var g=0;g<s-1;g++){var x=n[g];t.lineTo(x[0],x[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,v.isNil)(r)?(this.set("totalLength",Wc.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,v.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Oo.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,v.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Oo.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Qu),Ny=Ly;function ky(i,e,t,r,n,a,o){var s=n/2;return Il(i-s,e-s,t,n,a,o)||Il(i+t-s,e-s,n,r,a,o)||Il(i+s,e+r-s,t,n,a,o)||Il(i-s,e+s,n,r,a,o)}function Oy(i,e,t,r,n,a,o,s){var u=a/2;return $c(i+n,e,i+t-n,e,a,o,s)||$c(i+t,e+n,i+t,e+r-n,a,o,s)||$c(i+t-n,e+r,i+n,e+r,a,o,s)||$c(i,e+r-n,i,e+n,a,o,s)||xh(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||xh(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||xh(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||xh(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Dy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,p=s.radius;if(p){var x=!1;return n&&(x=Oy(u,f,c,l,p,o,t,r)),!x&&a&&(x=Qv(this,t,r)),x}else{var g=o/2;if(a&&n)return Il(u-g,f-g,c+g,l+g,t,r);if(a)return Il(u,f,c,l,t,r);if(n)return ky(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=ry(u),c=f[0],l=f[1],p=f[2],g=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-p),p!==0&&t.arc(n+o-p,a+s-p,p,0,Math.PI/2),t.lineTo(n+g,a+s),g!==0&&t.arc(n+g,a+s-g,g,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(Qu),Py=Dy,Ry=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Cl(t)},e.prototype._setText=function(t){var r=null;(0,v.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Ml(a.text,a.fontSize,a.lineHeight),p;(0,v.each)(r,function(g,x){p=u+x*(c+f)-l+f,o==="middle"&&(p+=l-f-(l-f)/2),o==="top"&&(p+=l-f),(0,v.isNil)(g)||(n?t.fillText(g,s,p):t.strokeText(g,s,p))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,v.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,v.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,v.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(Qu),By=Ry;function Fy(i,e){if(e){var t=Yu(e);return mi(t,i)}return i}function rp(i,e,t){var r=i.getTotalMatrix();if(r){var n=Fy([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function np(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!zf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=rp(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function ap(i,e,t){if(!np(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=ap(s,e,t);else if(np(s,e,t)){var u=s,f=rp(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var Gy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return _},e.prototype.getGroupBase=function(){return $v},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||j0();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=ap(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=oy(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=sy(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,v.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),uh(t,this),Dd(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),uh(t,this),ny(this,n,a),Dd(t,n,a),t.restore()):r.length&&jv(r),(0,v.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame"),n=this.get("drawFrameCallback");r||(r=(0,v.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),n&&n()}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Gc),lc=Gy,vS="0.5.12",Gd={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},fi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},pS=null;function Ou(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ip(i){var e=Gd[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Ou(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function op(i,e){var t=i.get("el"),r=(0,v.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function zy(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Uy(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function wh(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Eh(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){ip(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function sp(i,e){e.forEach(function(t){t.draw(i)})}function up(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")zy(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&op(i,function(l,p){return c.indexOf(l)-c.indexOf(p)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?wh(i):e==="clip"?Eh(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Xy=function(i){(0,y.ZT)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Ou("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){up(this,t)},e.prototype.getShapeBase=function(){return b},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Eh(this,t),this.createPath(t),r.length&&sp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){fi[s]&&a.setAttribute(fi[s],o)}),wh(this)},e}(jf),fp=Xy,Yy=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return b},e.prototype.getGroupBase=function(){return fp},e.prototype.onCanvasChange=function(t){up(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=gl(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,p=o-c,g=a+s+c,x=o+u+c;return{x:l,y:p,minX:l,minY:p,maxX:g,maxY:x,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||ip(this),Eh(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,p=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&p.setAttribute(fi.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&p.setAttribute(fi.strokeOpacity,c),l&&p.setAttribute(fi.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(fi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(fi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(fi[r],"url(#"+o+")")}else a.setAttribute(fi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&Uy(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&wh(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(zc),Du=Yy,Wy=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):fi[s]&&a.setAttribute(fi[s],o)})},e}(Du),Vy=Wy,Hy=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,v.each)(r||n,function(f,c){fi[c]&&a.setAttribute(fi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Du),jy=Hy,Zy=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):fi[s]&&a.setAttribute(fi[s],o)})},e}(Du),qy=Zy,$y=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,v.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):fi[u]&&o.setAttribute(fi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,v.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,v.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Du),Ky=$y,Qy=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,v.isObject)(o)?t.addArrow(n,fi[s]):t.getDefaultArrow(n,fi[s]);a.setAttribute(fi[s],"url(#"+u+")")}else a.removeAttribute(fi[s]);else fi[s]&&a.setAttribute(fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Oo.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Oo.pointAt(n,a,o,s,t)},e}(Du),Jy=Qy,Qh={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},cp={get:function(i){return Qh[i]},register:function(i,e){Qh[i]=e},remove:function(i){delete Qh[i]},getAll:function(){return Qh}},tm=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,v.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,v.isFunction)(o)?s=o:s=cp.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=cp,e}(Du),em=tm,rm=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,v.each)(r||a,function(s,u){if(u==="path"&&(0,v.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,v.isObject)(s)?t.addArrow(a,fi[u]):t.getDefaultArrow(a,fi[u]);o.setAttribute(fi[u],"url(#"+f+")")}else o.removeAttribute(fi[u]);else fi[u]&&o.setAttribute(fi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Du),nm=rm,am=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="points"&&(0,v.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):fi[s]&&a.setAttribute(fi[s],o)})},e}(Du),im=am,om=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="points"&&(0,v.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):fi[s]&&a.setAttribute(fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,v.isNil)(r)?(this.set("totalLength",Wc.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,v.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Oo.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,v.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Oo.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Du),sm=om,um=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,fm=/[^\s,]+/gi;function cm(i){var e=0,t=0,r=0,n=0;return(0,v.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function gS(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(um),each(i,function(e,t){if(e=e.match(fm),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var lm=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,v.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&fi[c]&&o.setAttribute(fi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=cm(s);(0,v.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Du),hm=lm,lp=.3,dm={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},vm={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},pm={left:"left",start:"left",center:"middle",right:"end",end:"end"},gm=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.pi)((0,y.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,v.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?wh(n):fi[u]&&o.setAttribute(fi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=Uu();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",vm[n]||"alphabetic"):t.setAttribute("alignment-baseline",dm[n]||"baseline"),t.setAttribute("text-anchor",pm[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,v.each)(u,function(l,p){p===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+lp)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-lp)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Du),ym=gm,mm=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,bm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,xm=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function hp(i){var e=i.match(xm);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,v.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function wm(i,e){var t=mm.exec(i),r=(0,v.mod)((0,v.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=hp(n)}function Em(i,e){var t=bm.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=hp(o)}var Sm=function(){function i(e){this.cfg={};var t=null,r=(0,v.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Ou("linearGradient"),wm(e,t)):(t=Ou("radialGradient"),Em(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),Mm=Sm,_m={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Cm={x:"-40%",y:"-40%",width:"200%",height:"200%"},Am=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Ou("filter");return(0,v.each)(Cm,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,v.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,v.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[_m[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),Tm=Am,Im=function(){function i(e,t){this.cfg={};var r=Ou("marker"),n=(0,v.uniqueId)("marker_");r.setAttribute("id",n);var a=Ou("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,v.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),dp=Im,Lm=function(){function i(e){this.type="clip",this.cfg={};var t=Ou("clipPath");this.el=t,this.id=(0,v.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),Nm=Lm,km=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Om=function(){function i(e){this.cfg={};var t=Ou("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Ou("image");t.appendChild(r);var n=(0,v.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=km.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),Dm=Om,Pm=function(){function i(e){var t=Ou("defs"),r=(0,v.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new dp(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new Mm(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new dp(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new Tm(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new Dm(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new Nm(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),Rm=Pm,Bm=function(i){(0,y.ZT)(e,i);function e(t){return i.call(this,(0,y.pi)((0,y.pi)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return b},e.prototype.getGroupBase=function(){return fp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!Gd[a.tagName]){for(var o=a.parentNode;o&&!Gd[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Ou("svg"),r=new Rm(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&op(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?wh(this):t==="clip"?Eh(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Eh(this,t),r.length&&sp(t,r)},e}(Gc),Sh=Bm,yS="0.5.6",Mh,zd,vp,Ud;function Fm(){Mh=document.createElement("table"),zd=document.createElement("tr"),vp=/^\s*<(\w+|!)[^>]*>/,Ud={tr:document.createElement("tbody"),tbody:Mh,thead:Mh,tfoot:Mh,td:zd,th:zd,"*":document.createElement("div")}}function ao(i){Mh||Fm();var e=vp.test(i)&&RegExp.$1;(!e||!(e in Ud))&&(e="*");var t=Ud[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var Gm=ut(6767),_h=ut.n(Gm);function Jh(i){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(i)}var zm=/^\s+/,Um=/\s+$/;function Jn(i,e){if(i=i||"",e=e||{},i instanceof Jn)return i;if(!(this instanceof Jn))return new Jn(i,e);var t=Xm(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Jn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,n,a,o,s;return t=e.r/255,r=e.g/255,n=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=xp(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=gp(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=gp(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=pp(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=pp(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return yp(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Hm(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xo(this._r,255)*100)+"%",g:Math.round(xo(this._g,255)*100)+"%",b:Math.round(xo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xo(this._r,255)*100)+"%, "+Math.round(xo(this._g,255)*100)+"%, "+Math.round(xo(this._b,255)*100)+"%)":"rgba("+Math.round(xo(this._r,255)*100)+"%, "+Math.round(xo(this._g,255)*100)+"%, "+Math.round(xo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:a1[yp(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+mp(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=Jn(e);r="#"+mp(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Jn(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification($m,arguments)},brighten:function(){return this._applyModification(Km,arguments)},darken:function(){return this._applyModification(Qm,arguments)},desaturate:function(){return this._applyModification(jm,arguments)},saturate:function(){return this._applyModification(Zm,arguments)},greyscale:function(){return this._applyModification(qm,arguments)},spin:function(){return this._applyModification(Jm,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(r1,arguments)},complement:function(){return this._applyCombination(t1,arguments)},monochromatic:function(){return this._applyCombination(n1,arguments)},splitcomplement:function(){return this._applyCombination(e1,arguments)},triad:function(){return this._applyCombination(bp,[3])},tetrad:function(){return this._applyCombination(bp,[4])}},Jn.fromRatio=function(i,e){if(Jh(i)=="object"){var t={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?t[r]=i[r]:t[r]=Ch(i[r]));i=t}return Jn(i,e)};function Xm(i){var e={r:0,g:0,b:0},t=1,r=null,n=null,a=null,o=!1,s=!1;return typeof i=="string"&&(i=u1(i)),Jh(i)=="object"&&(hc(i.r)&&hc(i.g)&&hc(i.b)?(e=Ym(i.r,i.g,i.b),o=!0,s=String(i.r).substr(-1)==="%"?"prgb":"rgb"):hc(i.h)&&hc(i.s)&&hc(i.v)?(r=Ch(i.s),n=Ch(i.v),e=Vm(i.h,r,n),o=!0,s="hsv"):hc(i.h)&&hc(i.s)&&hc(i.l)&&(r=Ch(i.s),a=Ch(i.l),e=Wm(i.h,r,a),o=!0,s="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=xp(t),{ok:o,format:i.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function Ym(i,e,t){return{r:xo(i,255)*255,g:xo(e,255)*255,b:xo(t,255)*255}}function pp(i,e,t){i=xo(i,255),e=xo(e,255),t=xo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=(r+n)/2;if(r==n)a=o=0;else{var u=r-n;switch(o=s>.5?u/(2-r-n):u/(r+n),r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function Wm(i,e,t){var r,n,a;i=xo(i,360),e=xo(e,100),t=xo(t,100);function o(f,c,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?f+(c-f)*6*l:l<1/2?c:l<2/3?f+(c-f)*(2/3-l)*6:f}if(e===0)r=n=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;r=o(u,s,i+1/3),n=o(u,s,i),a=o(u,s,i-1/3)}return{r:r*255,g:n*255,b:a*255}}function gp(i,e,t){i=xo(i,255),e=xo(e,255),t=xo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=r,u=r-n;if(o=r===0?0:u/r,r==n)a=0;else{switch(r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:s}}function Vm(i,e,t){i=xo(i,360)*6,e=xo(e,100),t=xo(t,100);var r=Math.floor(i),n=i-r,a=t*(1-e),o=t*(1-n*e),s=t*(1-(1-n)*e),u=r%6,f=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],l=[a,a,s,t,t,o][u];return{r:f*255,g:c*255,b:l*255}}function yp(i,e,t,r){var n=[Ju(Math.round(i).toString(16)),Ju(Math.round(e).toString(16)),Ju(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Hm(i,e,t,r,n){var a=[Ju(Math.round(i).toString(16)),Ju(Math.round(e).toString(16)),Ju(Math.round(t).toString(16)),Ju(wp(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function mp(i,e,t,r){var n=[Ju(wp(r)),Ju(Math.round(i).toString(16)),Ju(Math.round(e).toString(16)),Ju(Math.round(t).toString(16))];return n.join("")}Jn.equals=function(i,e){return!i||!e?!1:Jn(i).toRgbString()==Jn(e).toRgbString()},Jn.random=function(){return Jn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function jm(i,e){e=e===0?0:e||10;var t=Jn(i).toHsl();return t.s-=e/100,t.s=td(t.s),Jn(t)}function Zm(i,e){e=e===0?0:e||10;var t=Jn(i).toHsl();return t.s+=e/100,t.s=td(t.s),Jn(t)}function qm(i){return Jn(i).desaturate(100)}function $m(i,e){e=e===0?0:e||10;var t=Jn(i).toHsl();return t.l+=e/100,t.l=td(t.l),Jn(t)}function Km(i,e){e=e===0?0:e||10;var t=Jn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Jn(t)}function Qm(i,e){e=e===0?0:e||10;var t=Jn(i).toHsl();return t.l-=e/100,t.l=td(t.l),Jn(t)}function Jm(i,e){var t=Jn(i).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,Jn(t)}function t1(i){var e=Jn(i).toHsl();return e.h=(e.h+180)%360,Jn(e)}function bp(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Jn(i).toHsl(),r=[Jn(i)],n=360/e,a=1;a<e;a++)r.push(Jn({h:(t.h+a*n)%360,s:t.s,l:t.l}));return r}function e1(i){var e=Jn(i).toHsl(),t=e.h;return[Jn(i),Jn({h:(t+72)%360,s:e.s,l:e.l}),Jn({h:(t+216)%360,s:e.s,l:e.l})]}function r1(i,e,t){e=e||6,t=t||30;var r=Jn(i).toHsl(),n=360/t,a=[Jn(i)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,a.push(Jn(r));return a}function n1(i,e){e=e||6;for(var t=Jn(i).toHsv(),r=t.h,n=t.s,a=t.v,o=[],s=1/e;e--;)o.push(Jn({h:r,s:n,v:a})),a=(a+s)%1;return o}Jn.mix=function(i,e,t){t=t===0?0:t||50;var r=Jn(i).toRgb(),n=Jn(e).toRgb(),a=t/100,o={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return Jn(o)},Jn.readability=function(i,e){var t=Jn(i),r=Jn(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)},Jn.isReadable=function(i,e,t){var r=Jn.readability(i,e),n,a;switch(a=!1,n=f1(t),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a},Jn.mostReadable=function(i,e,t){var r=null,n=0,a,o,s,u;t=t||{},o=t.includeFallbackColors,s=t.level,u=t.size;for(var f=0;f<e.length;f++)a=Jn.readability(i,e[f]),a>n&&(n=a,r=Jn(e[f]));return Jn.isReadable(i,r,{level:s,size:u})||!o?r:(t.includeFallbackColors=!1,Jn.mostReadable(i,["#fff","#000"],t))};var Xd=Jn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},a1=Jn.hexNames=i1(Xd);function i1(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function xp(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function xo(i,e){o1(i)&&(i="100%");var t=s1(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function td(i){return Math.min(1,Math.max(0,i))}function pu(i){return parseInt(i,16)}function o1(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function s1(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Ju(i){return i.length==1?"0"+i:""+i}function Ch(i){return i<=1&&(i=i*100+"%"),i}function wp(i){return Math.round(parseFloat(i)*255).toString(16)}function Ep(i){return pu(i)/255}var tf=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hc(i){return!!tf.CSS_UNIT.exec(i)}function u1(i){i=i.replace(zm,"").replace(Um,"").toLowerCase();var e=!1;if(Xd[i])i=Xd[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=tf.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=tf.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=tf.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=tf.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=tf.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=tf.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=tf.hex8.exec(i))?{r:pu(t[1]),g:pu(t[2]),b:pu(t[3]),a:Ep(t[4]),format:e?"name":"hex8"}:(t=tf.hex6.exec(i))?{r:pu(t[1]),g:pu(t[2]),b:pu(t[3]),format:e?"name":"hex"}:(t=tf.hex4.exec(i))?{r:pu(t[1]+""+t[1]),g:pu(t[2]+""+t[2]),b:pu(t[3]+""+t[3]),a:Ep(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=tf.hex3.exec(i))?{r:pu(t[1]+""+t[1]),g:pu(t[2]+""+t[2]),b:pu(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function f1(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var ed=2,Sp=.16,c1=.05,l1=.05,h1=.15,Mp=5,_p=4,d1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Cp(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-ed*e:Math.round(i.h)+ed*e:r=t?Math.round(i.h)+ed*e:Math.round(i.h)-ed*e,r<0?r+=360:r>=360&&(r-=360),r}function Ap(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-Sp*e:e===_p?r=i.s+Sp:r=i.s+c1*e,r>1&&(r=1),t&&e===Mp&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Tp(i,e,t){var r;return t?r=i.v+l1*e:r=i.v-h1*e,r>1&&(r=1),Number(r.toFixed(2))}function rd(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=Jn(i),n=Mp;n>0;n-=1){var a=r.toHsv(),o=Jn({h:Cp(a,n,!0),s:Ap(a,n,!0),v:Tp(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=_p;s+=1){var u=r.toHsv(),f=Jn({h:Cp(u,s),s:Ap(u,s),v:Tp(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?d1.map(function(c){var l=c.index,p=c.opacity,g=Jn.mix(e.backgroundColor||"#141414",t[l],p*100).toHexString();return g}):t}var Yd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Fs={},Wd={};Object.keys(Yd).forEach(function(i){Fs[i]=rd(Yd[i]),Fs[i].primary=Fs[i][5],Wd[i]=rd(Yd[i],{theme:"dark",backgroundColor:"#141414"}),Wd[i].primary=Wd[i][5]});var mS=Fs.red,bS=Fs.volcano,xS=Fs.gold,wS=Fs.orange,ES=Fs.yellow,SS=Fs.lime,MS=Fs.green,_S=Fs.cyan,CS=Fs.blue,AS=Fs.geekblue,TS=Fs.purple,IS=Fs.magenta,LS=Fs.grey,cs=function(e,t,r){var n=_h()(e),a=_h()(t);return _h()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},v1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=cs(t,e,.05).rgb().toString(),a=cs(t,e,.1).rgb().toString(),o=cs(t,e,.2).rgb().toString(),s=cs(t,e,.4).rgb().toString(),u=cs(t,r,.02).rgb().toString(),f=cs(t,r,.05).rgb().toString(),c=cs(t,r,.1).rgb().toString(),l=cs(t,r,.2).rgb().toString(),p=cs(t,r,.3).rgb().toString(),g=rd(e,{theme:"default",backgroundColor:t}),x=_h()(e).hex().toLowerCase(),N=g.indexOf(x),F=e;return N!==-1&&(F=g[N+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:F,highlightFill:o,disableStroke:p,disableFill:f,edgeMainStroke:p,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:p,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:p,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:F,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},p1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=cs(t,e,.2).rgb().toString(),a=cs(t,e,.3).rgb().toString(),o=cs(t,e,.6).rgb().toString(),s=cs(t,e,.8).rgb().toString(),u=cs(t,r,.2).rgb().toString(),f=cs(t,r,.25).rgb().toString(),c=cs(t,r,.3).rgb().toString(),l=cs(t,r,.4).rgb().toString(),p=cs(t,r,.5).rgb().toString(),g=rd(e,{theme:"dark",backgroundColor:t}),x=_h()(e).hex().toLowerCase(),N=g.indexOf(x),F=e;return N!==-1&&(F=g[N+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:p,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:F,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},Vd=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?v1(e,t,"rgb(150, 150, 150)"):p1(e,t,"#777")},g1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(Vd(o,t,r,n))}),a},y1="rgb(95, 149, 255)",m1="rgb(255, 255, 255)",Ip="rgb(0, 0, 0)",ni=Vd(y1,m1),Nl={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ni.mainStroke,fill:ni.mainFill},size:20,color:ni.mainStroke,linkPoints:{size:8,lineWidth:1,fill:ni.activeFill,stroke:ni.activeStroke}},nodeStateStyles:{active:{fill:ni.activeFill,stroke:ni.activeStroke,lineWidth:2,shadowColor:ni.mainStroke,shadowBlur:10},selected:{fill:ni.selectedFill,stroke:ni.selectedStroke,lineWidth:4,shadowColor:ni.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:ni.highlightFill,stroke:ni.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:ni.inactiveFill,stroke:ni.inactiveStroke,lineWidth:1},disable:{fill:ni.disableFill,stroke:ni.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Ip,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ni.edgeMainStroke,lineAppendWidth:2},color:ni.edgeMainStroke},edgeStateStyles:{active:{stroke:ni.edgeActiveStroke,lineWidth:1},selected:{stroke:ni.edgeSelectedStroke,lineWidth:2,shadowColor:ni.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ni.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:ni.edgeInactiveStroke,lineWidth:1},disable:{stroke:ni.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Ip,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ni.comboMainFill,lineWidth:1,stroke:ni.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:ni.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ni.comboActiveStroke,lineWidth:1,fill:ni.comboActiveFill},selected:{stroke:ni.comboSelectedStroke,lineWidth:2,fill:ni.comboSelectedFill,shadowColor:ni.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ni.comboHighlightStroke,lineWidth:2,fill:ni.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:ni.comboInactiveStroke,fill:ni.comboInactiveFill,lineWidth:1},disable:{stroke:ni.comboDisableStroke,fill:ni.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},b1=function(e){var t=e.clone();return x1(e,t),t},x1=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}};function nd(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var w1=Is.cloneEvent,E1=Is.isViewportChanged,S1=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,v.wrapBehavior)(this,"onCanvasEvents"),f=(0,v.wrapBehavior)(this,"onExtendEvents"),c=(0,v.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(nd(s,"wheel",c)),typeof window!="undefined"&&(a.push(nd(window,"keydown",f)),a.push(nd(window,"keyup",f)),a.push(nd(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,v.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),E1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var p=l.get("item");if(!p.destroyed){var g=p.getType();if(t.target=o,t.item=p,t.canvasX===t.x&&t.canvasY===t.y){var x=n.getCanvasByPoint(t.x,t.y);t.canvasX=x.x,t.canvasY=x.y}t.name&&!t.name.includes(":")?(n.emit("".concat(g,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,g)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,v.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=w1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,v.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(Pv),M1=S1,Qa=ut(483360),_1=ut(981746),ad=ut.n(_1),Lp=Is.traverseTree,C1=function(e,t){var r;return e?(0,v.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},A1=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],p=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var g=0;g<p;++g){var x=l[g];r.push(+x)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},T1=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,p=a[s],g=p.length;n[s*4+2]=l,n[s*4+3]=g/2,c=Math.max(c,g/2);for(var x=0;x<g;++x){var N=p[x];n.push(+N)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},I1=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var p=a.length,g=o[u],x=g.length;a[u*4+2]=p+1048576*x/4,a[u*4+3]=0,l=Math.max(l,x/4);for(var N=0;N<x;++N){var F=g[N];a.push(+F)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},L1=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},N1=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},k1=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;Lp(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||Lp(e,function(l){var p=(l[s]-n[s])/c*(Math.PI*2-f)+f,g=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=g*Math.cos(p),l.y=g*Math.sin(p),!0}),e},Np=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},kp=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},O1=(0,y.pi)((0,y.pi)((0,y.pi)((0,y.pi)((0,y.pi)({},Is),L),S),I),D),dc=O1,D1=dc.radialLayout,P1=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=ad()[t.type](r,t.config);return D1(n),n};return}this.layoutMethod=function(r){return ad()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),R1=P1;(0,Qa.registerLayout)("grid",Qa.GridLayout),(0,Qa.registerLayout)("random",Qa.RandomLayout),(0,Qa.registerLayout)("force",Qa.ForceLayout),(0,Qa.registerLayout)("circular",Qa.CircularLayout),(0,Qa.registerLayout)("dagre",Qa.DagreLayout),(0,Qa.registerLayout)("dagreCompound",Qa.DagreCompoundLayout),(0,Qa.registerLayout)("radial",Qa.RadialLayout),(0,Qa.registerLayout)("concentric",Qa.ConcentricLayout),(0,Qa.registerLayout)("mds",Qa.MDSLayout),(0,Qa.registerLayout)("fruchterman",Qa.FruchtermanLayout),(0,Qa.registerLayout)("fruchterman-gpu",Qa.FruchtermanGPULayout),(0,Qa.registerLayout)("gForce",Qa.GForceLayout),(0,Qa.registerLayout)("force2",Qa.Force2Layout),(0,Qa.registerLayout)("gForce-gpu",Qa.GForceGPULayout),(0,Qa.registerLayout)("comboForce",Qa.ComboForceLayout),(0,Qa.registerLayout)("comboCombined",Qa.ComboCombinedLayout),(0,Qa.registerLayout)("forceAtlas2",Qa.ForceAtlas2Layout);var B1=function(e,t){t.isCustomLayout=!0,Qa.Layouts[e]=(0,Qa.registerLayout)(e,t)},F1=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),G1=F1,z1=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,p=c.edges,g=c.layoutCfg,x=g===void 0?{}:g,N=x.type,F=layout.getLayoutByName(N);if(!F){this.postMessage({type:n.ERROR,message:"layout ".concat(N," not found")});break}var j;x.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),j==null||j.destroy()},j=new F(x),j.init({nodes:l,edges:p}),j.execute();break}case n.GPURUN:{var $=s.data,nt=$.nodes,p=$.edges,ft=$.layoutCfg,x=ft===void 0?{}:ft,Mt=$.canvas,N=x.type,F=layout.getLayoutByName(N);if(!F){this.postMessage({type:n.ERROR,message:"layout ".concat(N," not found")});break}if(N.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(N," does not support GPU")});break}var Rt=new F(x);Rt.init({nodes:nt,edges:p}),Rt.executeWithWorker(Mt,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new G1(t,e);return r},fh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function Hd(i){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(i)}var Op=function(e){return setTimeout(e,16)},Dp=function(e){return clearTimeout(e)},id={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Op;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Dp;return t(e)}},U1=["fruchterman","gForce"],X1=["force","grid","circular"],Y1=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=z1(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(id.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(id.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.mG)(n,void 0,void 0,function(){var s,u,f,c,l,N,p,g,x,N,F;return(0,y.Jh)(this,function(j){switch(j.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(Pp(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Is.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),N=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=N):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),p=!1;try{g=new Qa.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=g}catch($){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return p=g.enableTick,p&&(x=t.onTick,N=function(){x&&x(),s.refreshPositions()},g.tick=N),F=this.filterLayoutData(this.data,t),j1(F,r),g.init(F),s.emit("beforesublayout",{type:u}),[4,g.execute()];case 1:return j.sent(),g.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.mG)(n,void 0,void 0,function(){var s,u,f,c,l,p,g;return(0,y.Jh)(this,function(x){switch(x.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Is.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),p=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=p),g=this.filterLayoutData(this.data,r),t.init(g),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return x.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var p=l.type,g=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Mt){var Rt;return g=!!(!((Rt=Mt.nodes)===null||Rt===void 0)&&Rt.length)||g});var x=this.destoryLayoutMethods();a.emit("beforelayout");var N=Promise.resolve();g&&p&&(x==null?void 0:x.length)===1&&x[0]===p?this.tweakInit():N=this.initPositions(l.center,s);var F=this.initPositions(l.center,u);F.then(),this.isGPU=Rp(l,p);var j=l.onLayoutEnd,$=l.layoutEndFormatted,nt=l.adjust;if($||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,y.mG)(r,void 0,void 0,function(){return(0,y.Jh)(this,function(Mt){switch(Mt.label){case 0:return j&&j(s),this.refreshLayout(),nt&&l.pipes?[4,this.adjustPipesBox(this.data,nt)]:[3,2];case 1:Mt.sent(),this.refreshLayout(),Mt.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var ft=!1;return l.type?(ft=!0,N=N.then(function(){return(0,y.mG)(r,void 0,void 0,function(){return(0,y.Jh)(this,function(Mt){switch(Mt.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,Mt.sent()]}})})})):l.pipes&&(ft=!0,l.pipes.forEach(function(Mt,Rt){N=N.then(function(){return(0,y.mG)(r,void 0,void 0,function(){return(0,y.Jh)(this,function(Pt){switch(Pt.label){case 0:return[4,this.execLayoutMethod(Mt,Rt)];case 1:return[2,Pt.sent()]}})})})})),ft?N.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(Mt){console.warn("graph layout failed,",Mt)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,p=c.y;!isNaN(l)&&!isNaN(p)&&(s[c.id]={x:l,y:p},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,p=c.target,g=s[l],x=s[p];!g&&x?s[l]={x:x.x+(Math.random()-.5)*80,y:x.y+(Math.random()-.5)*80}:!x&&g&&(s[p]={x:g.x+(Math.random()-.5)*80,y:g.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.mG)(n,void 0,void 0,function(){var s,u,f,c,l,p,g;return(0,y.Jh)(this,function(x){switch(x.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Qa.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=Rp(c,c.type),p=l?"".concat(c.type,"-gpu"):c.type,g=new Qa.Layouts[p](c),delete u.preset,g.init(f),[4,g.execute()]);case 1:return x.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var p=function(j){c=c.then(function(){return n.runWebworker(u,t,j)})},g=0,x=o.pipes;g<x.length;g++){var N=x[g];p(N)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(F){console.error("layout failed",F)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,p=V1(n,function(x){return typeof x!="function"});if(!l)t.postMessage({type:fh.RUN,nodes:u,edges:f,layoutCfg:p});else{var g=c.transferControlToOffscreen();p.type="".concat(p.type,"-gpu"),t.postMessage({type:fh.GPURUN,nodes:u,edges:f,layoutCfg:p,canvas:g},[g])}return new Promise(function(x,N){t.onmessage=function(F){a.handleWorkerMessage(x,N,F,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,p=function(){o.onTick&&o.onTick()};switch(l){case fh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=id.requestAnimationFrame(function(){jd(a,c),u.refreshPositions(),p(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=id.requestAnimationFrame(function(){jd(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,p(),t()})),f.requestId=null}));break;case fh.END:f.currentTick==null&&(jd(a,c),t());break;case fh.GPUEND:f.currentTick==null&&(H1(a,c),t());break;case fh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,y._T)(t,["disableTriggerLayout"]),f=(0,v.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,y.mG)(r,void 0,void 0,function(){return(0,y.Jh)(this,function(p){switch(p.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,p.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(p,g){var x=f.pipes[g];c=c.then(function(){return(0,y.mG)(r,void 0,void 0,function(){return(0,y.Jh)(this,function(N){switch(N.label){case 0:return[4,this.updateLayoutMethod(p,x)];case 1:return[2,N.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(p){console.warn("layout failed",p)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),X1.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(x){return Math.max(x.height,x.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,v.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(g,x){var N,F,j,$=g.x-((N=l[x])===null||N===void 0?void 0:N.x),nt=g.y-((F=l[x])===null||F===void 0?void 0:F.y);(j=f[x])===null||j===void 0||j.forEach(function(ft){ft.x+=$,ft.y+=nt})}),a()};var p=new Qa.Layouts[r](s);p.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(Dv),W1=Y1;function jd(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function V1(i,e){var t={};return i&&Hd(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function H1(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function j1(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function Pp(i){return U1.includes(i)}function Rp(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,Np().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Pp(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Bp=zt,Z1="svg",q1=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new W1(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new M1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===Z1)u=new Sh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new lc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,v.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,y.mG)(this,void 0,void 0,function(){var o,s,u;return(0,y.Jh)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),p=s||c.get("el"),g="";t||(t="image/png"),setTimeout(function(){return(0,y.mG)(u,void 0,void 0,function(){var x,N,F,j,$,nt,ft,Mt,Rt,Pt;return(0,y.Jh)(this,function(ne){switch(ne.label){case 0:return l!=="svg"?[3,1]:(x=p.cloneNode(!0),N=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),F=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",N),F.replaceChild(x,F.documentElement),j=new XMLSerializer().serializeToString(F),g="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(j)),[3,4]);case 1:return $=void 0,nt=p.getContext("2d"),ft=a||this.get("width"),Mt=o||this.get("height"),Rt=void 0,f?[4,this.downloadImageWatermark(f,nt,ft,Mt)]:[3,3];case 2:ne.sent(),ne.label=3;case 3:if(r){Pt=typeof window!="undefined"?window.devicePixelRatio:1;try{$=nt.getImageData(0,0,ft*Pt,Mt*Pt),Rt=nt.globalCompositeOperation,nt.globalCompositeOperation="destination-over",nt.fillStyle=r,nt.fillRect(0,0,ft,Mt)}catch(xe){console.error("Download image failed. Out of memory at ImageData creation")}}g=p.toDataURL(t),r&&(nt.clearRect(0,0,ft,Mt),nt.putImageData($,0,0),nt.globalCompositeOperation=Rt),ne.label=4;case 4:return n&&n(g),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var p=void 0,g=o.getContext("2d"),x=Math.max(this.get("width"),500),N=Math.max(this.get("height"),500),F=void 0;if(r){var j=typeof window!="undefined"&&window.devicePixelRatio||1;try{p=g.getImageData(0,0,x*j,N*j),F=g.globalCompositeOperation,g.globalCompositeOperation="destination-over",g.fillStyle=r,g.fillRect(0,0,x,N)}catch($){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(g.clearRect(0,0,x,N),g.putImageData(p,0,0),g.globalCompositeOperation=F)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=ao('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,v.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var p=o+l[0]+l[2],g=s+l[1]+l[3],x={container:f,height:p,width:g,quickHit:!0},N=u==="svg"?new Sh(x):new lc(x),F=this.get("group"),j=F.clone(),$=(0,v.clone)(j.getMatrix());$||($=[1,0,0,0,1,0,0,0,1]);var nt=(a.maxX+a.minX)/2,ft=(a.maxY+a.minY)/2;$=Bp($,[["t",-nt,-ft],["t",s/2+l[3],o/2+l[0]]]),j.resetMatrix(),j.setMatrix($),N.add(j);var Mt=N.get("el"),Rt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Pt=Mt.cloneNode(!0),ne=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),xe=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",ne);xe.replaceChild(Pt,xe.documentElement);var he=new XMLSerializer().serializeToString(xe);Rt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(he))}else{var Ne=void 0,He=Mt.getContext("2d"),Dr=void 0;if(c){var $r=typeof window!="undefined"?window.devicePixelRatio:1;try{Ne=He.getImageData(0,0,g*$r,p*$r),Dr=He.globalCompositeOperation,He.globalCompositeOperation="destination-over",He.fillStyle=c,He.fillRect(0,0,g,p)}catch(zr){console.error("Download image failed. Out of memory at ImageData creation")}}Rt=Mt.toDataURL(r),c&&(He.clearRect(0,0,g,p),He.putImageData(Ne,0,0),He.globalCompositeOperation=Dr)}t&&t(Rt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=ao('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),p=n?n.backgroundColor:void 0,g=n?n.padding:void 0;g?(0,v.isNumber)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var x=s+g[0]+g[2],N=u+g[1]+g[3];if(l){var F=this.get("graphWaterMarker").cfg||{},j=F.width,$=F.height;x=Math.ceil(x/$)*$,N=Math.ceil(N/j)*j}var nt={container:c,height:x,width:N},ft=f==="svg"?new Sh(nt):new lc(nt),Mt=this.get("group"),Rt=b1(Mt),Pt=(0,v.clone)(Rt.getMatrix());Pt||(Pt=[1,0,0,0,1,0,0,0,1]);var ne=(o.maxX+o.minX)/2,xe=(o.maxY+o.minY)/2;Pt=Bp(Pt,[["t",-ne,-xe],["t",u/2+g[3],s/2+g[0]]]),Rt.resetMatrix(),Rt.setMatrix(Pt),ft.add(Rt);var he=ft.get("el");r||(r="image/png"),this.asyncToDataUrl(r,p,function(Ne){var He=document.createElement("a"),Dr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Ne,f,He,Dr);var $r=document.createEvent("MouseEvents");$r.initEvent("click",!1,!1),He.dispatchEvent($r)},N,x,he)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var p=document.createEvent("MouseEvents");p.initEvent("click",!1,!1),c.dispatchEvent(p)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var p=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(p,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(p)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Nl.waterMarkerImage);var n=this.get("container");(0,v.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,v.deepMix)({},Nl.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var p={container:n,width:s,height:u,capture:!1},g=this.get("pixelRatio");g&&(p.pixelRatio=g,window.devicePixelRatio=g),a=new lc(p),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var x=a.get("context"),N=c.rotate,F=c.x,j=c.y;x.rotate(-N*Math.PI/180);var $=new Image;$.crossOrigin="anonymous",$.src=t,$.onload=function(){if(x.drawImage($,F,j,c.width,c.height),x.rotate(N*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var nt=document.querySelector(".g6-graph-watermarker");nt||(nt=document.createElement("div"),nt.className="g6-graph-watermarker"),nt.className="g6-graph-watermarker",a.destroyed||(nt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(nt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,v.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,v.deepMix)({},Nl.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var p={container:n,width:s,height:u,capture:!1},g=this.get("pixelRatio");g&&(p.pixelRatio=g,window.devicePixelRatio=g),a=new lc(p),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var x=a.get("context"),N=c.rotate,F=c.fill,j=c.fontFamily,$=c.fontSize,nt=c.baseline,ft=c.x,Mt=c.y,Rt=c.lineHeight;x.rotate(-N*Math.PI/180),x.font="".concat($,"px ").concat(j),x.fillStyle=F,x.textBaseline=nt;for(var Pt=(0,v.isString)(t)?[t]:t,ne=Pt.length-1;ne>=0;ne--)x.fillText(Pt[ne],ft,Mt+ne*Rt);if(x.rotate(N*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var xe=document.querySelector(".g6-graph-watermarker");xe||(xe=document.createElement("div"),xe.className="g6-graph-watermarker"),xe.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(xe)}},e.prototype.destroy=function(){var t,r,n,a;(0,v.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(Tv),Fp=q1;function Zd(i){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(i)}function Gp(i,e){if(e===void 0&&(e=new WeakMap),i===null)return i;if(i instanceof Date)return new Date(i);if(i instanceof RegExp)return new RegExp(i);if(Zd(i)!=="object")return i;if(e.get(i))return e.get(i);var t=Array.isArray(i)?[]:{};e.set(i,t);for(var r in i)i.hasOwnProperty(r)&&i[r]!==void 0&&(t[r]=Gp(i[r],e));return t}function $1(i){try{return structuredClone(i)}catch(e){return Gp(i)}}var K1=dc.radialLayout,qd=dc.traverseTree,Q1=function(i){(0,y.ZT)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=ad()[t.type](r,t);return K1(n),n}:function(r){return ad()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,v.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,v.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,v.each)(t.children||[],function(x){a.innerUpdateChild(x,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,p;o.get("originAttrs")&&(l=o.get("originAttrs").x,p=o.get("originAttrs").y);var g=o.getModel();n&&o.set("originAttrs",{x:g.x,y:g.y}),o.set("model",Object.assign(g,t.data)),(l!==t.x||p!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,v.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,p=f.minY,g=f.maxY,x={x:(c+l)/2,y:(p+g)/2};r==="begin"&&(x.x=c,x.y=p),this.translate(s.x-x.x,s.y-x.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,v.clone)(n.get("data"));var f={};qd(a,function(p){var g=p.children;if(!(g!=null&&g.length))return!0;for(var x=g.length-1;x>=0;x--){var N=r.findById(g[x].id),F=N?!N.isVisible():g[x].visible===!1;F&&(f[p.id]=f[p.id]||[],f[p.id].push({idx:x,child:g.splice(x,1)[0]}))}}),u=o?o(a,n.get("layout")):a,qd(u,function(p){var g=f[p.id];if(g!=null&&g.length)for(var x=g.length-1;x>=0;x--){var N=g[x],F=N.idx,j=N.child;p.children.splice(F,0,j)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,v.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var p=l.getModel().children||[];return!!p.find(function(g){return g.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,v.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){qd(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,v.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,v.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,v.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,v.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",$1(t))},e}(Fp),J1=Q1;function Wa(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var tb=function(){function i(e){this._cfgs=(0,v.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,v.each)(r,function(a,o){var s=(0,v.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,v.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),tu=tb,eb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zp="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",rb=function(i){eb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:zp,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||zp;a.includes("url(")||(a='url("'.concat(a,'")'));var o=ao(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=ao(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Wa(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Wa(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Wa(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(tu),nb=rb,ab=ut(738186),od=ut.n(ab),ib=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&od()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var ob=function(i){ib(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=ao("<div class=".concat(t||"g6-component-contextmenu","></div>"));Wa(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,v.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,v.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(ne){c(ne.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var p=u.get("width"),g=u.get("height"),x=o.getBoundingClientRect(),N=this.get("offsetX")||0,F=this.get("offsetY")||0,j=u.getContainer().offsetTop,$=u.getContainer().offsetLeft,nt=t.canvasX+$+N,ft=t.canvasY+j+F;nt+x.width>p&&(nt=t.canvasX-x.width-N+$),ft+x.height>g&&(ft=t.canvasY-x.height-F+j),ft<0&&(ft=0),Wa(o,{top:"".concat(ft,"px"),left:"".concat(nt,"px"),visibility:"visible"});var Mt=this.get("trigger")==="click",Rt=function(ne){if(Mt){Mt=!1;return}r.onMenuHide()};document.body.addEventListener("click",Rt),this.set("handler",Rt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Wa(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(tu),sb=ob,ub=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$d=function(){return $d=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},$d.apply(this,arguments)},Up=Math.max,fb=zt,cb="default",lb="keyShape",hb="delegate",Xp="svg",db=function(i){ub(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,v.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=ao(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,p=0,g=!1,x=0,N=0,F=0,j=0,$=0,nt=0,ft=f||u?"mousedown":"dragstart";c.addEventListener(ft,function(ne){var xe,he;if(ne.dataTransfer){var Ne=new Image;Ne.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(he=(xe=ne.dataTransfer).setDragImage)===null||he===void 0||he.call(xe,Ne,0,0);try{ne.dataTransfer.setData("text/html","view-port-minimap")}catch(Dr){ne.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,ne.target===c){var He=c.style;x=parseInt(He.left,10),N=parseInt(He.top,10),F=parseInt(He.width,10),j=parseInt(He.height,10),!(F>n[0]||j>n[1])&&(nt=a.getZoom(),$=t.get("ratio"),g=!0,l=ne.clientX,p=ne.clientY)}},!1);var Mt=function(xe){if(!(!g||(0,v.isNil)(xe.clientX)||(0,v.isNil)(xe.clientY))){var he=l-xe.clientX,Ne=p-xe.clientY;(x-he<0||x-he+F>=n[0])&&(he=0),(N-Ne<0||N-Ne+j>=n[1])&&(Ne=0),x-=he,N-=Ne,Wa(c,{left:"".concat(x,"px"),top:"".concat(N,"px")}),a.translate(he*nt/$,Ne*nt/$),l=xe.clientX,p=xe.clientY}};!f&&!u&&c.addEventListener("drag",Mt,!1);var Rt=function(){g=!1,r.refresh=!0},Pt=f||u?"mouseup":"dragend";c.addEventListener(Pt,Rt,!1),s.addEventListener("mouseleave",Rt),s.addEventListener("mouseup",Rt),(f||u)&&s.addEventListener("mousemove",Mt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),p=this.get("viewport");p||this.initViewport();var g=(l.x-c.x)*t,x=(l.y-c.y)*t,N=c.x*t+r,F=c.y*t+n,j=N+g,$=F+x;N<0&&(g+=N,N=0),j>o[0]&&(g=g-(j-o[0])),F<0&&(x+=F,F=0),$>o[1]&&(x=x-($-o[1])),this.set("ratio",t);var nt="".concat(N,"px"),ft="".concat(F,"px");Wa(p,{left:nt,top:ft,width:"".concat(g,"px"),height:"".concat(x,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===Xp&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,v.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,v.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,v.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,v.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,v.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,v.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:$d({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=ao("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,v.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=ao('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===Xp?f=new Sh({container:u,width:n[0],height:n[1]}):f=new lc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case cb:this.updateGraphShapes();break;case lb:this.updateKeyShapes();break;case hb:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,p=c.width/l,g=c.height/l;Number.isFinite(f.width)&&(p=Up(f.width,p),g=Up(f.height,g)),p+=2*s,g+=2*s;var x=Math.min(n[0]/p,n[1]/g),N=[1,0,0,0,1,0,0,0,1],F=0,j=0;Number.isFinite(f.minX)&&(F=-f.minX),Number.isFinite(f.minY)&&(j=-f.minY);var $=(n[0]-(p-2*s)*x)/2,nt=(n[1]-(g-2*s)*x)/2;N=fb(N,[["t",F,j],["s",x,x],["t",$,nt]]),u.setMatrix(N),this.set("ratio",x),this.set("totaldx",$+F*x),this.set("totaldy",nt+j*x),this.set("dx",$),this.set("dy",nt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(tu),vb=db,pb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function If(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function gb(i,e){return i.x*e.x+i.y*e.y}function Yp(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var yb=function(i){pb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(ft){(ft.x===null||!ft.y===null||ft.x===void 0||!ft.y===void 0)&&(s=!0),o[ft.id]=ft}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var p=r.get("cycles"),g=r.get("iterations"),x=r.get("iterRate"),N=r.get("lambda"),F=0;F<p;F++){for(var j=function(Mt){var Rt=[];n.forEach(function(Pt,ne){if(Pt.source!==Pt.target){var xe=o[Pt.source],he=o[Pt.target];Rt[ne]=r.getEdgeForces({source:xe,target:he},ne,u,N);for(var Ne=0;Ne<u+1;Ne++)c[ne][Ne].x+=Rt[ne][Ne].x,c[ne][Ne].y+=Rt[ne][Ne].y}})},$=0;$<g;$++)j($);N=N/2,u*=f,g*=x,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(ft,Mt){ft.source!==ft.target&&(ft.type="polyline",ft.controlPoints=c[Mt].slice(1,c[Mt].length-1))});var nt=r.get("graph");nt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var p=0;!((f=o[u])===null||f===void 0)&&f.length?p=r.getEdgeLength(o[u]):p=If({x:c.x,y:c.y},{x:l.x,y:l.y});var g=p/(t+1),x=g,N=[{x:c.x,y:c.y}];o[u].forEach(function(F,j){if(j!==0){for(var $=If(F,o[u][j-1]);$>x;){var nt=x/$,ft={x:o[u][j-1].x,y:o[u][j-1].y};ft.x+=nt*(F.x-o[u][j-1].x),ft.y+=nt*(F.y-o[u][j-1].y),N.push(ft),$-=x,x=g}x-=$}}),N.push({x:l.x,y:l.y}),o[u]=N}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=If(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(p,g){if(!(g<=f)){var x=o[p.source],N=o[p.target],F=t.getBundleScore({source:c,target:l},{source:x,target:N});F>=a&&(s[f].push(g),s[g].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=If({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=If({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=gb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=If(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=Yp(r.source,t),a=Yp(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*If(o,s)/If(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(If(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var p={x:0,y:0},g=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),x=o.getElectrostaticForce(l,r);p.x=a*(g.x+x.x),p.y=a*(g.y+x.y),c.push(p)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var p=If(s[c][t],s[r][t]),g=1/p;f.x+=l.x*g,f.y+=l.y*g}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(tu),mb=yb,bb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kd=function(){return Kd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Kd.apply(this,arguments)},sd=.05,Wp={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},xb=function(i){bb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,v.clone)(Wp),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-sd:a=1/(1-sd);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var p=r.get("d");r.set("molecularParam",(p+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-sd:o=1/(1-sd);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),p=n.get("molecularParam"),g=a.getNodes(),x=g.length,N=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(N=n.get("cacheCenter"));var F=n.get("delegateCenterDiff");F&&(N.x+=F.x,N.y+=F.y),n.updateDelegate(N,f);for(var j=0;j<x;j++){var $=g[j].getModel(),nt=$.x,ft=$.y;if(!(isNaN(nt)||isNaN(ft))){var Mt=(nt-N.x)*(nt-N.x)+(ft-N.y)*(ft-N.y);if(!isNaN(Mt)&&Mt<c&&Mt!==0){var Rt=Math.sqrt(Mt),Pt=p*Rt/(l*Rt+f),ne=(nt-N.x)/Rt,xe=(ft-N.y)/Rt;if($.x=ne*Pt+N.x,$.y=xe*Pt+N.y,s[$.id]||(s[$.id]={x:nt,y:ft,texts:[]}),o.push($),u&&2*Rt<f)for(var he=g[j],Ne=he.getContainer(),He=Ne.getChildren(),Dr=He.length,$r=0;$r<Dr;$r++){var zr=He[$r];zr.get("type")==="text"&&(s[$.id].texts.push({visible:zr.get("visible"),shape:zr}),zr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var p=f.texts[l];p.shape.set("visible",p.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,p=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var g=r.get("d"),x=r.get("r");if(r.set("molecularParam",(g+1)*x),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var N=r.get("dPercentText");N&&(N.remove(),N.destroy())}if(p==="drag"||p==="wheel"||p==="unset"){r.set("scaleRBy",p),r.get("delegate").remove(),r.get("delegate").destroy();var N=r.get("dPercentText");N&&(N.remove(),N.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||Wp;s=u.addShape("circle",{attrs:Kd({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(x){a.scaleRByWheel(x)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(x){a.set("dragging",!0),a.set("cacheCenter",{x:x.x,y:x.y}),a.set("dragPrePos",{x:x.x,y:x.y})}),s.on("drag",function(x){a.scaleRByDrag(x)}),s.on("dragend",function(x){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(x){n.scaleDByWheel(x)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(x){a.set("dragging",!0),a.set("cacheCenter",{x:x.x,y:x.y}),a.set("dragPrePos",{x:x.x,y:x.y})}),s.on("drag",function(x){n.scaleDByDrag(x)}),s.on("dragend",function(x){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),p=t.y+r/1.5+16;if(!l||l.destroyed){var g=o.get("group");l=g.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:p,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:p})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(tu),wb=xb,Eb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vp=.05;typeof document!="undefined"&&od()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Sb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Mb=function(i){Eb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,v.isString)(a)&&(o=ao(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,v.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var p=Sb(l).filter(function(x){return x.nodeName==="LI"});if(p.length!==0){var g=p[0].getAttribute("code");g&&(f?f(g,r):t.handleDefaultOperator(g))}});var c=this.get("position");c&&Wa(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,v.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var p=o[l];p&&p.forEach(function(g){var x=t.findById(g.id);g.visible?t.showItem(x,!1):t.hideItem(x,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var p=o[l];p&&p.forEach(function(g){var x=t.findById(g.id);delete g.id,t.updateItem(x,g,!1),x.getType()==="combo"&&t.updateCombo(x)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var p=o[l];p&&p.forEach(function(g){var x=g.itemType;delete g.itemType,t.addItem(x,g,!1)})});break}case"add":Object.keys(o).forEach(function(l){var p=o[l];p&&p.forEach(function(g){t.removeItem(g.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var p=o[l];p&&p.forEach(function(g){t.updateComboTree(g.id,g.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var p=o[l];p&&p.forEach(function(g){t.updateComboTree(g.id,g.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,v.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(p){var g=t.findById(p.id);p.visible?t.showItem(g,!1):t.hideItem(g,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(p){var g=t.findById(p.id);delete p.id,t.updateItem(g,p,!1),g.getType()==="combo"&&t.updateCombo(g)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(p){var g=p.itemType;delete p.itemType,t.addItem(g,p,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(p){t.updateComboTree(p.id,p.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-Vp*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-Vp*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(tu),_b=Mb,Cb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&od()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Ab=function(i){Cb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=ao("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,v.isString)(a)&&(a=document.getElementById(a)),Wa(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Wa(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,v.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Wa(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Wa(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),p=t.item;if(p.getType&&p.getType()==="node"&&l&&(0,v.isArray)(l)&&l.length>=2){var g=p.getBBox();c={x:g.minX+g.width*l[0],y:g.minY+g.height*l[1]}}var x=a.getCanvasByPoint(c.x,c.y),N=x.x,F=x.y,j=a.getContainer(),$={x:N+j.offsetLeft+u,y:F+j.offsetTop+f};Wa(n,{visibility:"visible",display:"unset"});var nt=n.getBoundingClientRect();N+nt.width+u>o&&($.x-=nt.width+u),F+nt.height+f>s&&($.y-=nt.height+f,$.y<0&&($.y=0)),Wa(n,{left:"".concat($.x,"px"),top:"".concat($.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(tu),Tb=Ab,Hp="timebarstartplay",jp="timebarendplay",Lf="valuechange",kl="timebarConfigChanged",Kc="playPauseBtn",Ah="nextStepBtn",Th="preStepBtn",NS={opacity:.5,fill:"#000"},kS={opacity:.5,fill:"#000",r:5},OS={fill:"#fff",fontSize:12},Ib=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,p=e.backgroundColor,g=p===void 0?"#000":p,x=e.textColor,N=x===void 0?"#fff":x,F=e.opacity,j=F===void 0?.8:F,$=e.fontSize,nt=$===void 0?12:$;this.container=o,this.className=l,this.backgroundColor=g,this.textColor=N,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=j,this.fontSize=nt,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,p=ao("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,v.isString)(l)&&(l=document.getElementById(l)),l.appendChild(p),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,Wa(p,{visibility:"hidden",top:0,left:0});var g=ao(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));g.innerHTML=s,p.appendChild(g),e.backgroundDOM=g;var x=ao("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));p.appendChild(x),e.arrowDOM=x,e.container=p},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Wa(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Wa(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var p=n-u/2,g=n+u/2;p<0?Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2-p,"px")}):g>t.parentWidth&&Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2-g+t.parentWidth+12,"px")})},i.prototype.hide=function(){Wa(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Lb=Ib,Qd=function(){return Qd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Qd.apply(this,arguments)},Nb=function(){function i(e){this.config=(0,v.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,v.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,p=t.addGroup({name:Kc});this.startMarkerGroup=p.addGroup({name:Kc}),this.circle=t.addShape("circle",{attrs:Qd({x:c,y:l,r:this.config.r*a},r),name:Kc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=p.addGroup({name:Kc});var g=.25*this.config.r*a,x=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-x/2,width:g,height:x,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-x/2,width:g,height:x,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),kb=Nb,Uo=function(){return Uo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Uo.apply(this,arguments)},Ih=zt,Ob="#aaa",Db="green",Pb={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Rb={fill:"#fff"},Bb={fill:"green"},Zp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},qp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Fb={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Zp,timeTypeControllerStyle:qp},Jd=110,Qc=50,Nf={SINGLE:"single",RANGE:"range"},Gb=function(){function i(e){this.controllerCfg=(0,v.deepMix)({},Fb,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Nf.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Ob:s,f=e.stroke,c=f===void 0?Db:f,l=e.containerStyle,p=l===void 0?{}:l,g=Uo(Uo({},Pb),e.playBtnStyle||{}),x=Uo(Uo({},Rb),e.preBtnStyle||{}),N=Uo(Uo({},Bb),e.nextBtnStyle||{}),F=r/2-5,j=a+10,$=this.controllerGroup.addShape("rect",{attrs:Uo({x:n,y:j,width:t,height:r,stroke:c,fill:u},p),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:j,r:F}):this.playButton=new kb({group:this.controllerGroup,x:t/2,y:j+F+5,r:F,isPlay:this.isPlay,style:g});var nt=x.offsetX||0,ft=x.offsetY||0,Mt=(x.scale||1)*F;this.controllerGroup.addShape("path",{attrs:Uo({path:this.getPreMarkerPath(t/2-5*F+nt,j+F+5+ft,Mt*.5)},x),name:Th});var Rt=N.offsetX||0,Pt=N.offsetY||0,ne=(N.scale||1)*F;this.controllerGroup.addShape("path",{attrs:Uo({path:this.getNextMarkerPath(t/2+5*F+Rt,j+F+5+Pt,ne*.5)},N),name:Ah}),$.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var xe=this.controllerCfg.scale,he=xe===void 0?1:xe,Ne=this.controllerGroup.getCanvasBBox(),He=(Ne.maxX+Ne.minX)/2,Dr=(Ne.maxY+Ne.minY)/2,$r=Ih([1,0,0,0,1,0,0,0,1],[["t",-He,-Dr],["s",he,he],["t",He,Dr]]);this.controllerGroup.setMatrix($r)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=Uo(Uo({},Zp),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,p=a.scale,g=p===void 0?1:p,x=a.offsetX,N=x===void 0?0:x,F=a.offsetY,j=F===void 0?0:F,$=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=$;var nt=[],ft=5;this.speedAxisY=[19,22,26,32,39];for(var Mt=0;Mt<5;Mt++){var Rt=t+this.speedAxisY[Mt],Pt=r-(n?Qc:Jd);$.addShape("line",{attrs:Uo({x1:Pt,x2:Pt+15,y1:Rt,y2:Rt},s),speed:ft,name:"speed-rect"}),this.speedAxisY[Mt]=Rt,nt.push(ft),ft=ft-1}this.speedText=$.addShape("text",{attrs:Uo({x:r-(n?Qc:Jd)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=$.addShape("path",{attrs:Uo({path:this.getPointerPath(r-(n?Qc:Jd),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var ne=this.speedGroup.getCanvasBBox(),xe=(ne.maxX+ne.minX)/2,he=(ne.maxY+ne.minY)/2,Ne=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ne=Ih(Ne,[["t",-xe,-he],["s",g,g],["t",xe+N*g,he+j*g]]),this.speedGroup.setMatrix(Ne)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=Uo(Uo({},qp),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,p=l===void 0?0:l,g=o.box,x=g===void 0?{}:g,N=o.check,F=N===void 0?{}:N,j=o.text,$=j===void 0?{}:j;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var nt=a===Nf.SINGLE;this.toggleGroup.addShape("rect",{attrs:Uo({x:n-Qc,y:this.speedAxisY[0]+3.5},x),isChecked:nt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Uo({path:[["M",n-Qc+3,this.speedAxisY[1]+6],["L",n-Qc+7,this.speedAxisY[1]+10],["L",n-Qc+12,this.speedAxisY[1]+4]]},F),capture:!1,name:"check-icon"}),nt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Uo({text:nt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Qc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},$),name:"checked-text"});var ft=this.toggleGroup.getCanvasBBox(),Mt=(ft.maxX+ft.minX)/2,Rt=(ft.maxY+ft.minY)/2,Pt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Pt=Ih(Pt,[["t",-Mt,-Rt],["s",u,u],["t",Mt+c*u,Rt+p*u]]),this.toggleGroup.setMatrix(Pt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Ih(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(kl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Ih(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(kl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Nf.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Nf.SINGLE),t.target.set("isChecked",!a),e.group.emit(kl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),$p=Gb,Lh=function(){return Lh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Lh.apply(this,arguments)},zb=zt,Ub={fill:"#5B8FF9"},Xb={fill:"#e6e8e9"},Yb=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,p=l===void 0?0:l,g=e.y,x=g===void 0?0:g,N=e.tickLabelFormatter,F=e.selectedTickStyle,j=F===void 0?Ub:F,$=e.unselectedTickStyle,nt=$===void 0?Xb:$,ft=e.tooltipBackgroundColor,Mt=e.tooltipFomatter,Rt=e.tickLabelStyle,Pt=e.controllerCfg,ne=Pt===void 0?{speed:1}:Pt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=N,this.tickLabelStyle=Rt||{},this.selectedTickStyle=j,this.unselectedTickStyle=nt,this.controllerCfg=ne,this.currentSpeed=ne.speed||1,this.x=p,this.y=x,this.tooltipBackgroundColor=ft,this.tooltipFomatter=Mt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,p=t.tickLabelStyle,g=r-2*a,x=10,N=4,F=3*a+N+x,j=n-F-2*a,$=2,nt=o.length,ft=(g-$*(nt-1))/nt;this.tickWidth=ft;var Mt=this.sliceGroup,Rt=[],Pt=[],ne=Math.round(nt*s),xe=Math.round(nt*u);this.startTickRectId=ne,this.endTickRectId=xe;var he=p.rotate;delete p.rotate,o.forEach(function(He,Dr){var $r=Dr>=ne&&Dr<=xe,zr=$r?c:l,_r=Mt.addShape("rect",{attrs:Lh({x:a+Dr*(ft+$),y:a,width:ft,height:j},zr),draggable:!0,name:"tick-rect-".concat(Dr)}),pn=Mt.addShape("rect",{attrs:{x:a+Dr*ft+$*(2*Dr-1)/2,y:a,width:Dr===0||Dr===nt-1?ft+$/2:ft+$,height:j,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Dr)});pn.toFront();var hn=_r.getBBox(),Cr=(hn.minX+hn.maxX)/2;Rt.push({rect:_r,pickRect:pn,value:He.date,x:Cr,y:hn.minY});var Yr;if(f?(Yr=f(He),!(0,v.isString)(Yr)&&Yr&&(Yr=He.date)):Dr%Math.round(nt/10)===0&&(Yr=He.date),Yr){Pt.push(Yr);var an=hn.maxY+a*2;Mt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Cr,y1:an,x2:Cr,y2:an+N},name:"tick-line"});var on=an+N+a,Sn=Mt.addShape("text",{attrs:Lh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Cr,y:on,textAlign:"center",text:Yr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},p),capture:!1,name:"tick-label"}),On=Sn.getBBox();if(On.maxX>r?Sn.attr("textAlign","right"):On.minX<0&&Sn.attr("textAlign","left"),(0,v.isNumber)(he)&&Pt.length!==10){var ca=zb([1,0,0,0,1,0,0,0,1],[["t",-Cr,-on],["r",he],["t",Cr-5,on+2]]);Sn.attr({textAlign:"left",matrix:ca})}Pt.length===1?Sn.attr({textAlign:"left"}):Pt.length===10&&Sn.attr({textAlign:"right"})}}),this.tickRects=Rt;var Ne=this.group;this.currentSpeed=1,this.controllerBtnGroup=new $p(Lh({group:Ne,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var p=parseInt(l.get("name").split("-")[2],10);if(!isNaN(p)){var g=e.tickRects,x=e.unselectedTickStyle;g.forEach(function($){$.rect.attr(x)});var N=e.selectedTickStyle;g[p].rect.attr(N),e.startTickRectId=p,e.endTickRectId=p;var F=g.length,j=p/F;e.graph.emit(Lf,{value:[j,j]})}}}),t.on("dragstart",function(c){var l=e.tickRects,p=e.unselectedTickStyle;l.forEach(function($){$.rect.attr(p)});var g=c.target,x=parseInt(g.get("name").split("-")[2],10),N=e.selectedTickStyle;l[x].rect.attr(N),e.startTickRectId=x;var F=l.length,j=x/F;e.graph.emit(Lf,{value:[j,j]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),p=e.startTickRectId,g=e.tickRects,x=e.selectedTickStyle,N=e.unselectedTickStyle,F=0;F<g.length;F++){var j=F>=p&&F<=l?x:N;g[F].rect.attr(j)}var $=g.length;e.endTickRectId=l;var nt=p/$,ft=l/$;e.graph.emit(Lf,{value:[nt,ft]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,p=parseInt(c.target.get("name").split("-")[2],10);if(!(p<l)){var g=e.selectedTickStyle,x=e.tickRects;x[p].rect.attr(g),e.endTickRectId=p;var N=x.length,F=l/N,j=p/N;e.graph.emit(Lf,{value:[F,j]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Lb({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(p){var g=p.target;if(g.get("type")==="rect"){var x=parseInt(g.get("name").split("-")[2],10),N=o.getClientByPoint(u[x].x,u[x].y);s.show({x:u[x].x,y:u[x].y,clientX:N.x,clientY:N.y,text:a?a(u[x].value):u[x].value})}}),l.on("mouseleave",function(p){s.hide()})});var f=this.group;f.on("".concat(Kc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Ah,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Th,":click"),function(){e.updateStartEnd(-1)}),f.on(kl,function(c){var l=c.type,p=c.speed;e.currentSpeed=p})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Hp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(jp,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Lf,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Kc,":click")),e.off("".concat(Ah,":click")),e.off("".concat(Th,":click")),e.off(kl),this.sliceGroup.destroy()},i}(),Wb=Yb,Kp={};function Vb(i){return Kp[i]}function kf(i,e){Kp[i]=e}var Hb=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,v.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,v.map)(this.ticks,function(t,r){return(0,v.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,v.isNil)(n)||!(0,v.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,v.assign)(this,this.__cfg__),this.setDomain(),(0,v.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,v.isString)(e)){var r=Vb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,v.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,v.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),tv=Hb,jb=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,v.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,v.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,y.pr)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,v.isNil)(this.getConfig("min"))&&(this.min=0),(0,v.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(tv),Nh=jb,Qp=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Jc="\\d\\d?",tl="\\d\\d",Zb="\\d{3}",qb="\\d{4}",kh="[^\\s]+",Jp=/\[([^]*?)\]/gm;function tg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var eg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function el(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var rg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ng=["January","February","March","April","May","June","July","August","September","October","November","December"],$b=tg(ng,3),Kb=tg(rg,3),ev={dayNamesShort:Kb,dayNames:rg,monthNamesShort:$b,monthNames:ng,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},ud=el({},ev),ag=function(i){return ud=el(ud,i)},ig=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},eu=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},Qb={D:function(i){return String(i.getDate())},DD:function(i){return eu(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return eu(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return eu(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return eu(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return eu(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return eu(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return eu(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return eu(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return eu(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return eu(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return eu(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+eu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+eu(Math.floor(Math.abs(e)/60),2)+":"+eu(Math.abs(e)%60,2)}},og=function(i){return+i-1},sg=[null,Jc],ug=[null,kh],fg=["isPm",kh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],cg=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Jb={D:["day",Jc],DD:["day",tl],Do:["day",Jc+kh,function(i){return parseInt(i,10)}],M:["month",Jc,og],MM:["month",tl,og],YY:["year",tl,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Jc,void 0,"isPm"],hh:["hour",tl,void 0,"isPm"],H:["hour",Jc],HH:["hour",tl],m:["minute",Jc],mm:["minute",tl],s:["second",Jc],ss:["second",tl],YYYY:["year",qb],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",tl,function(i){return+i*10}],SSS:["millisecond",Zb],d:sg,dd:sg,ddd:ug,dddd:ug,MMM:["month",kh,eg("monthNamesShort")],MMMM:["month",kh,eg("monthNames")],a:fg,A:fg,ZZ:cg,Z:cg},fd={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},lg=function(i){return el(fd,i)},hg=function(i,e,t){if(e===void 0&&(e=fd.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=fd[e]||e;var r=[];e=e.replace(Jp,function(a,o){return r.push(o),"@@@"});var n=el(el({},ud),t);return e=e.replace(Qp,function(a){return Qb[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function dg(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=fd[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Jp,function(ft,Mt){return o.push(ig(Mt)),"@@@"}),u={},f={};s=ig(s).replace(Qp,function(ft){var Mt=Jb[ft],Rt=Mt[0],Pt=Mt[1],ne=Mt[3];if(u[Rt])throw new Error("Invalid format. "+Rt+" specified twice in format");return u[Rt]=!0,ne&&(f[ne]=!0),a.push(Mt),"("+Pt+")"}),Object.keys(f).forEach(function(ft){if(!u[ft])throw new Error("Invalid format. "+ft+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=el(el({},ud),t),p=1;p<c.length;p++){var g=a[p-1],x=g[0],N=g[2],F=N?N(c[p],l):+c[p];if(F==null)return null;n[x]=F}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var j;if(n.timezoneOffset==null){j=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var $=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],p=0,nt=$.length;p<nt;p++)if(u[$[p][0]]&&n[$[p][0]]!==j[$[p][1]]())return null}else if(j=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return j}var tx={format:hg,parse:dg,defaultI18n:ev,setGlobalDateI18n:ag,setGlobalDateMasks:lg},vg=tx;function ex(i){return function(e,t,r,n){for(var a=(0,v.isNil)(r)?0:r,o=(0,v.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var pg="format";function gg(i,e){var t=P[pg]||vg[pg];return t(i,e)}function cd(i){return(0,v.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,v.isDate)(i)&&(i=i.getTime()),i}var ef=1e3,Ol=60*ef,Dl=60*Ol,vc=24*Dl,Oh=vc*31,yg=vc*365,Dh=[["HH:mm:ss",ef],["HH:mm:ss",ef*10],["HH:mm:ss",ef*30],["HH:mm",Ol],["HH:mm",Ol*10],["HH:mm",Ol*30],["HH",Dl],["HH",Dl*6],["HH",Dl*12],["YYYY-MM-DD",vc],["YYYY-MM-DD",vc*4],["YYYY-WW",vc*7],["YYYY-MM",Oh],["YYYY-MM",Oh*4],["YYYY-MM",Oh*6],["YYYY",vc*380]];function rx(i,e,t){var r=(e-i)/t,n=ex(function(o){return o[1]})(Dh,r)-1,a=Dh[n];return n<0?a=Dh[0]:n>=Dh.length&&(a=(0,v.last)(Dh)),a}var nx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=cd(t);var r=this.values.indexOf(t);return r===-1&&((0,v.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):gg(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,v.each)(t,function(r,n){t[n]=cd(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Nh),ax=nx,ix=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,v.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,v.head)(t),n=(0,v.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,v.isNil)(this.minLimit)||(this.min=r),(0,v.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,v.getRange)(this.values),r=t.min,n=t.max;(0,v.isNil)(this.min)&&(this.min=r),(0,v.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,v.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(tv),ld=ix,ox=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(ld),Ph=ox;function rl(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Pu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function mg(i,e,t){(0,v.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,v.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function bg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function DS(i,e){var t=bg(i),r=bg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var sx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Pu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Pu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Pu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=mg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Pu(a,r)-Pu(a,n)):s=(Pu(a,t)-Pu(a,n))/(Pu(a,r)-Pu(a,n)),s},e}(ld),ux=sx,fx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=rl(n,this.max),o=rl(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(rl(a,t)-rl(a,n))/(rl(a,r)-rl(a,n));return o},e}(ld),cx=fx,lx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):gg(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,v.isString)(r)||(0,v.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return cd(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,v.isNil)(r)||!(0,v.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,v.isNil)(n)||!(0,v.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,v.each)(t,function(f){var c=cd(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,v.isNil)(r)&&(this.min=o),(0,v.isNil)(n)&&(this.max=u)}},e}(Ph),hx=lx,dx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,v.last)(r);if(o<0)return(0,v.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,v.last)(t)!==this.max&&t.push(this.max),(0,v.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,v.head)(r))return 0;if(t>(0,v.last)(r))return 1;var n=0;return(0,v.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(ld),xg=dx,vx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(xg),px=vx,wg={};function gx(i){return wg[i]}function Of(i,e){if(gx(i))throw new Error("type '"+i+"' existed.");wg[i]=e}var yx=function(i){(0,y.ZT)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,v.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(tv),mx=yx;function Eg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,v.isNumber)(t)){var a=(0,v.filter)(e,function(x,N){return N%t===0}),o=(0,v.last)(e);return n&&(0,v.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,v.isNil)(u)&&(u=0),(0,v.isNil)(f)&&(f=e.length-1),!(0,v.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],p=u,g=0;g<r&&!(p>=f);g++)p=Math.min(u+g*c,f),g===r-1&&n?l.push(e[f]):l.push(e[p]);return l}function bx(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new xx;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var rv=5,Sg=Math.sqrt(50),Mg=Math.sqrt(10),_g=Math.sqrt(2),xx=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=rv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=hd(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=hd(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=hd(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=rv),wx(this._domain[0],this._domain[this._domain.length-1],e||rv)},i}();function wx(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=hd(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function hd(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Sg?10:a>=Mg?5:a>=_g?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Sg?10:a>=Mg?5:a>=_g?2:1)}function Cg(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function nv(i,e,t){var r=Cg(i,t,"floor"),n=Cg(e,t,"ceil");r=(0,v.fixedBase)(r,t),n=(0,v.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,v.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function av(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,v.isNil)(n)?(0,v.isNil)(e)?o:e:n,l=(0,v.isNil)(a)?(0,v.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var p=(l-c)/(f-1),g=[],x=0;x<f;x++)g.push(c+p*x);return g}function Ex(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=bx(i);return!(0,v.isNil)(n)||!(0,v.isNil)(a)?av(i,(0,v.head)(o),(0,v.last)(o)):r?nv(e,t,r).ticks:o}function Pl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var Sx=[1,5,2,2.5,4,3],PS=null,Ag=Number.EPSILON*100;function Mx(i,e){return(i%e+e)%e}function _x(i){return Math.round(i*1e12)/1e12}function Cx(i,e,t,r,n,a){var o=(0,v.size)(e),s=(0,v.indexOf)(e,i),u=0,f=Mx(r,a);return(f<Ag||a-f<Ag)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function Ax(i,e,t){var r=(0,v.size)(e),n=(0,v.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function Tx(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function Ix(i,e){return i>=e?2-(i-1)/(e-1):1}function Lx(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function Nx(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function kx(){return 1}function Ox(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=Sx),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(an,on){return Pl(i+u*on)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var p=n[l],g=Ax(p,n,c);if(a[0]*g+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var x=2;x<1/0;){var N=Ix(x,o);if(a[0]*g+a[1]+a[2]*N+a[3]<f.score)break;for(var F=(e-i)/(x+1)/c/p,j=Math.ceil(Math.log10(F));j<1/0;){var $=c*p*Math.pow(10,j),nt=Nx(i,e,$*(x-1));if(a[0]*g+a[1]*nt+a[2]*N+a[3]<f.score)break;var ft=Math.floor(e/$)*c-(x-1)*c,Mt=Math.ceil(i/$)*c;if(ft<=Mt)for(var s=Mt-ft,Rt=0;Rt<=s;Rt+=1){var Pt=ft+Rt,ne=Pt*($/c),xe=ne+$*(x-1),he=$,Ne=Cx(p,n,c,ne,xe,he),He=Lx(i,e,ne,xe),Dr=Tx(x,o,i,e,ne,xe),$r=kx(),zr=a[0]*Ne+a[1]*He+a[2]*Dr+a[3]*$r;zr>f.score&&(!r||ne<=i&&xe>=e)&&(f.lmin=ne,f.lmax=xe,f.lstep=he,f.score=zr)}j+=1}x+=1}}c+=1}var _r=Pl(f.lmax),pn=Pl(f.lmin),hn=Pl(f.lstep),Cr=Math.floor(_x((_r-pn)/hn))+1,Yr=new Array(Cr);Yr[0]=Pl(pn);for(var l=1;l<Cr;l++)Yr[l]=Pl(Yr[l-1]+hn);return{min:Math.min(i,(0,v.head)(Yr)),max:Math.max(e,(0,v.last)(Yr)),ticks:Yr}}function Dx(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=Ox(e,t,r,n).ticks;return!(0,v.isNil)(o)||!(0,v.isNil)(s)?av(i,(0,v.head)(u),(0,v.last)(u)):a?nv(e,t,a).ticks:u}function Px(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Pu(e,n);if(r>0)o=Math.floor(Pu(e,r));else{var u=mg(a,e,n);o=Math.floor(Pu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],p=o;p<s+c;p=p+c)l.push(Math.pow(e,p));return r<=0&&l.unshift(0),l}function Tg(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),p=Math.max(c*f,e),g=Math.min(l*f,i),x=Math.floor((p-g)/f)+1,N=new Array(x),F=0;F<x;F++)N[F]=Pl(g+F*f);return{min:g,max:p,ticks:N}}function Rx(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(rl(e,i.max)),n=Math.floor(rl(e,i.min)),a=Tg(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function Bx(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function Fx(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(Bx(r,o))}return n}function Gx(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=Tg(e,t,r).ticks;return!(0,v.isNil)(a)||!(0,v.isNil)(o)?av(i,(0,v.head)(s),(0,v.last)(s)):n?nv(e,t,n).ticks:s}function zx(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=rx(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function Ux(i){var e=Eg((0,y.pi)({showLast:!0},i));return e}function dd(i){return new Date(i).getFullYear()}function Xx(i){return new Date(i,0,1).getTime()}function iv(i){return new Date(i).getMonth()}function Yx(i,e){var t=dd(i),r=dd(e),n=iv(i),a=iv(e);return(r-t)*12+(a-n)%12}function Wx(i,e){return new Date(i,e,1).getTime()}function Vx(i,e){return Math.ceil((e-i)/vc)}function Hx(i,e){return Math.ceil((e-i)/Dl)}function jx(i,e){return Math.ceil((e-i)/(60*1e3))}function Zx(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=dd(e);if(a>yg)for(var u=dd(t),f=Math.ceil(a/yg),c=s;c<=u+f;c=c+f)o.push(Xx(c));else if(a>Oh)for(var l=Math.ceil(a/Oh),p=iv(e),g=Yx(e,t),c=0;c<=g+l;c=c+l)o.push(Wx(s,c+p));else if(a>vc)for(var x=new Date(e),N=x.getFullYear(),F=x.getMonth(),j=x.getDate(),$=Math.ceil(a/vc),nt=Vx(e,t),c=0;c<nt+$;c=c+$)o.push(new Date(N,F,j+c).getTime());else if(a>Dl)for(var x=new Date(e),N=x.getFullYear(),F=x.getMonth(),$=x.getDate(),ft=x.getHours(),Mt=Math.ceil(a/Dl),Rt=Hx(e,t),c=0;c<=Rt+Mt;c=c+Mt)o.push(new Date(N,F,$,ft+c).getTime());else if(a>Ol)for(var Pt=jx(e,t),ne=Math.ceil(a/Ol),c=0;c<=Pt+ne;c=c+ne)o.push(e+c*Ol);else{var xe=a;xe<ef&&(xe=ef);for(var he=Math.floor(e/ef)*ef,Ne=Math.ceil((t-e)/ef),He=Math.ceil(xe/ef),c=0;c<Ne+He;c=c+He)o.push(he+c*ef)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}kf("cat",Eg),kf("time-cat",Ux),kf("wilkinson-extended",Dx),kf("r-pretty",Gx),kf("time",zx),kf("time-pretty",Zx),kf("log",Px),kf("pow",Rx),kf("quantile",Fx),kf("d3-linear",Ex),Of("cat",Nh),Of("category",Nh),Of("identity",mx),Of("linear",Ph),Of("log",ux),Of("pow",cx),Of("time",hx),Of("timeCat",ax),Of("quantize",xg),Of("quantile",px);var qx=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function $x(i){return(0,v.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function Ig(i){return $x(i)}function Kx(i){if(i.length<=2)return Ig(i);var e=[];(0,v.each)(i,function(o){(0,v.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=ah(e,!1),r=(0,v.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function Qx(i,e,t,r){r===void 0&&(r=!0);var n=new Ph({values:i}),a=new Nh({values:(0,v.map)(i,function(s,u){return u})}),o=(0,v.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?Kx(o):Ig(o)}function Jx(i,e,t,r){r===void 0&&(r=5);for(var n=new Ph({values:i}),a=new Nh({values:(0,v.map)(i,function(p,g){return g})}),o=(0,v.map)(i,function(p,g){return[a.scale(g)*e,t-n.scale(p)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=rw(c);s.push.apply(s,l)}return nw(s)}function tw(i,e){var t=new Ph({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function ew(i,e,t,r){var n=qx([],i,!0),a=tw(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function rw(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,v.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,v.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function nw(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Rh=function(){return Rh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Rh.apply(this,arguments)},aw={stroke:"#C5C5C5",strokeOpacity:.85},iw={fill:"#CACED4",opacity:.85},ow=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,p=e.isArea,g=p===void 0?!1:p,x=e.data,N=x===void 0?[]:x,F=e.lineStyle,j=e.areaStyle,$=e.group,nt=e.interval,ft=nt===void 0?null:nt;this.group=$,this.x=r,this.y=a,this.width=s,this.height=f,this.data=N,this.smooth=l,this.isArea=g,this.lineStyle=Object.assign({},aw,F),this.areaStyle=Object.assign({},iw,j),this.intervalConfig=ft,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,p=this.group.addGroup({name:"trend-group"});if(s){var g=Qx(s,n,a,u);if(p.addShape("path",{attrs:Rh({path:g},c),name:"trend-line"}),f){var x=ew(g,n,a,s);p.addShape("path",{attrs:Rh({path:x},l),name:"trend-area"})}}this.intervalConfig&&p.addShape("path",{attrs:Rh({path:Jx(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),p.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),sw=ow,ch=function(){return ch=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ch.apply(this,arguments)},uw={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},fw={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},cw=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,p=l===void 0?24:l,g=e.style,x=g===void 0?{}:g;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=p,n==="trend"?this.style=ch(ch({},uw),x):n==="simple"&&(this.style=ch(ch({},fw),x)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,v.isNumber)(e)&&(this.x=e),(0,v.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Lg=cw,Qi=function(){return Qi=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Qi.apply(this,arguments)},lw=zt,hw={fill:"#416180",opacity:.05},dw={fill:"#416180",opacity:.15,radius:5},vw={fill:"#5B8FF9",opacity:.3,cursor:"grab"},ov=2,pw={width:ov,height:24},gw={textBaseline:"middle",fill:"#000",opacity:.45},yw={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},mw={lineWidth:1,stroke:"#ccc"},bw=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(an){return function(on){t.currentHandler=an;var Sn=on.originalEvent;Sn.stopPropagation(),Sn.preventDefault(),t.prevX=(0,v.get)(Sn,"touches.0.pageX",Sn.pageX);var On=t.canvas.get("container");On.addEventListener("mousemove",t.onMouseMove),On.addEventListener("mouseup",t.onMouseUp),On.addEventListener("mouseleave",t.onMouseUp),On.addEventListener("touchmove",t.onMouseMove),On.addEventListener("touchend",t.onMouseUp),On.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(an){an.stopPropagation(),an.preventDefault();var on=(0,v.get)(an,"touches.0.pageX",an.pageX),Sn=on-t.prevX,On=t.adjustOffsetRange(Sn/t.width);t.updateStartEnd(On),t.updateUI(),t.prevX=on},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var an=t.canvas.get("container");an&&(an.removeEventListener("mousemove",t.onMouseMove),an.removeEventListener("mouseup",t.onMouseUp),an.removeEventListener("mouseleave",t.onMouseUp),an.removeEventListener("touchmove",t.onMouseMove),an.removeEventListener("touchend",t.onMouseUp),an.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,p=e.trendCfg,g=e.controllerCfg,x=g===void 0?{speed:1}:g,N=e.backgroundStyle,F=N===void 0?{}:N,j=e.foregroundStyle,$=j===void 0?{}:j,nt=e.handlerStyle,ft=nt===void 0?{}:nt,Mt=e.textStyle,Rt=Mt===void 0?{}:Mt,Pt=e.start,ne=Pt===void 0?0:Pt,xe=e.end,he=xe===void 0?1:xe,Ne=e.minText,He=Ne===void 0?"":Ne,Dr=e.maxText,$r=Dr===void 0?"":Dr,zr=e.group,_r=e.graph,pn=e.canvas,hn=e.tick,Cr=hn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(on){return on},ticks:[]}:hn,Yr=e.type;this.graph=_r,this.canvas=pn,this.group=zr,this.timeBarType=Yr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=Cr.ticks,this.trendCfg=p,this.controllerCfg=x,this.currentSpeed=x.speed||1,this.tickLabelFormatter=Cr.tickLabelFormatter,Yr==="trend"?this.backgroundStyle=Qi(Qi({},hw),F):Yr==="simple"&&(this.backgroundStyle=Qi(Qi({},dw),F)),this.foregroundStyle=Qi(Qi({},vw),$),this.handlerStyle=Qi(Qi({},pw),ft),this.textStyle=Qi(Qi({},gw),Rt),this.tickLabelStyle=Qi(Qi({},yw),Cr.tickLabelStyle),this.tickLineStyle=Qi(Qi({},mw),Cr.tickLineStyle),this.currentMode=x.defaultTimeType||Nf.RANGE,this.start=ne,this.end=he,this.minText=He,this.maxText=$r,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,v.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,v.size)((0,v.get)(this.trendCfg,"data"))){var o=new sw(Qi(Qi({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Qi({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Qi({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Qi({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Qi({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Qi({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Qi({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(j){j.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(j){j.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,v.get)(this.handlerStyle,"width",2),c=(0,v.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Lg({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var p=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Lg({name:"maxHandlerShape",group:p,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var g=this.ticks,x=r/(g.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(j){j.destroy()});var N=-1/0,F=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=g.map(function(j,$){e.tickPosList.push(e.x+$*x);var nt;e.tickLabelFormatter?(nt=e.tickLabelFormatter(j),!(0,v.isString)(nt)&&nt&&(nt=j.date)):nt=j.date;var ft=e.x+$*x,Mt=e.y+n+5,Rt=e.group.addShape("text",{attrs:Qi({x:ft,y:Mt,text:nt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,v.isNumber)(F)&&$!==g.length-1){var Pt=lw([1,0,0,0,1,0,0,0,1],[["t",-ft,-Mt],["r",F],["t",ft-5,Mt+2]]);Rt.attr({textAlign:"left",matrix:Pt})}$===0?Rt.attr({textAlign:"left"}):$!==g.length-1&&Rt.attr({textAlign:"right"});var ne=e.group.addShape("line",{attrs:Qi({x1:e.x+$*x,y1:e.y+n+2,x2:e.x+$*x,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});ne.toBack();var xe=Rt.getBBox();return xe.minX>N?(Rt.show(),ne.show(),N=xe.minX+xe.width+10):(Rt.hide(),ne.hide()),Rt}),this.controllerBtnGroup=new $p(Qi({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Nf.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Kc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Ah,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Th,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(kl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Nf.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Nf.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,v.get)(this.handlerStyle,"width",ov);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,v.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,v.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Nf.RANGE?this.graph.emit(Lf,{value:[this.start,this.end].sort()}):this.currentMode===Nf.SINGLE&&this.graph.emit(Lf,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,v.get)(this.handlerStyle,"width",ov),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),p=s.getBBox(),g=null,x=null;return this.timeBarType==="trend"?(g=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},x=f+p.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(g=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},x=s.attr("x")>this.width-p.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[x,g]:[g,x]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Hp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(jp,null))},i.prototype.destory=function(){this.graph.off(Lf,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Kc,":click")),e.off("".concat(Ah,":click")),e.off("".concat(Th,":click")),e.off(kl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),xw=bw,ww=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pc=function(){return pc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},pc.apply(this,arguments)},Ew=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},Sw=4,Mw=26,_w=function(i){ww(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,v.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,v.isString)(u)&&(u=document.getElementById(u)),f=u):(f=ao("<div class='".concat(s,"'></div>")),Wa(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,p=t.get("renderer");p==="SVG"?l=new Sh({container:f,width:n,height:a}):l=new lc({container:f,width:n,height:a}),this.get("containerCSS")&&Wa(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,p=r.textStyle,g=r.tick,x=r.backgroundStyle,N=r.foregroundStyle,F=f.data,j=Ew(f,["data"]),$=n-2*s,nt=u==="trend"?Mw:Sw,ft=this.get("graph"),Mt=this.get("timeBarGroup"),Rt=this.get("canvas"),Pt=null;if(u==="trend"||u==="simple"){var ne=this.get("getValue");Pt=new xw(pc(pc({graph:ft,canvas:Rt,group:Mt,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:$,height:nt,padding:s,backgroundStyle:x,foregroundStyle:N,trendCfg:pc(pc({},j),{data:F.map(function(he){return(ne==null?void 0:ne(he))||he.value})})},c),{tick:{ticks:F,tickLabelFormatter:g.tickLabelFormatter,tickLabelStyle:g.tickLabelStyle,tickLineStyle:g.tickLineStyle},handlerStyle:pc(pc({},c.handlerStyle),{height:c.height||nt}),controllerCfg:l,textStyle:p}))}else u==="tick"&&(Pt=new Wb(pc({graph:ft,canvas:Rt,group:Mt,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},g)));var xe=function he(){var Ne=t.get("timebar");Ne.draggingHandler=!1,Ne.isPlay&&(Ne.isPlay=!1,Ne.currentHandler=Ne.maxHandlerShape,Ne.changePlayStatus()),document.removeEventListener("mouseup",he)};Rt.on("mousedown",function(he){(he.target.get("name")==="maxHandlerShape-handler"||he.target.get("name")==="minHandlerShape-handler"||he.target===Pt.foregroundShape)&&document.addEventListener("mouseup",xe)}),this.set("timebar",Pt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var p=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,g=p?p(o[c]):o[c].date,x=p?p(o[l]):o[l].date;if(s!=="tick"){var N=this.get("timebar");N.setText(g,x)}if(u)u(f,g,x);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var F=this.get("filterItemTypes"),j=this.get("changeData"),$=this.get("getDate"),nt=this.get("shouldIgnore"),ft=o[c].date,Mt=o[l].date;if(j||j===void 0){var Rt=this.cacheGraphData.nodes,Pt=this.cacheGraphData.edges,ne={},xe={};f.getNodes().forEach(function(he){return ne[he.getID()]=!0}),f.getEdges().forEach(function(he){return xe[he.getID()]=!0}),F.includes("node")&&(Rt==null||Rt.forEach(function(he){var Ne=+(($==null?void 0:$(he))||he.date),He=Ne>=ft&&Ne<=Mt||(nt==null?void 0:nt("node",he,{min:ft,max:Mt})),Dr=ne[he.id];Dr&&!He?(f.removeItem(he.id),ne[he.id]=!1):!Dr&&He&&(f.addItem("node",he),ne[he.id]=!0)}),Pt==null||Pt.forEach(function(he){var Ne=ne[he.source]&&ne[he.target]||(nt==null?void 0:nt("edge",he,{min:ft,max:Mt})),He=!!f.findById(he.id);He&&!Ne?(f.removeItem(he.id),xe[he.id]=!1):!He&&Ne?(f.addItem("edge",he),xe[he.id]=!0):He||(xe[he.id]=!1)})),(this.get("filterEdge")||F.includes("edge"))&&(Pt==null||Pt.filter(function(he){var Ne=+(($==null?void 0:$(he))||he.date),He=Ne>=ft&&Ne<=Mt||(nt==null?void 0:nt("edge",he,{min:ft,max:Mt})),Dr=ne[he.source]&&ne[he.target],$r=He&&Dr,zr=xe[he.id];zr&&!$r?(xe[he.id]=!1,f.removeItem(he.id)):!zr&&$r&&(xe[he.id]=!0,f.addItem("edge",he))}))}else F.includes("node")&&f.getNodes().forEach(function(he){var Ne=he.getModel();if(!(nt!=null&&nt("node",Ne,{min:ft,max:Mt}))){var He=+(($==null?void 0:$(Ne))||Ne.date);He<ft||He>Mt?f.hideItem(he):f.showItem(he)}}),(this.get("filterEdge")||F.includes("edge"))&&f.getEdges().forEach(function(he){var Ne=he.getModel();if(!(nt!=null&&nt("edge",Ne,{min:o[c].date,max:o[l].date}))){var He=+(($==null?void 0:$(Ne))||Ne.date);if(He<o[c].date||He>o[l].date)f.hideItem(he);else{var Dr=he.getSource().isVisible(),$r=he.getTarget().isVisible();Dr&&$r&&f.showItem(he)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Lf,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Lf,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,v.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(tu),Cw=_w,Aw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tw=Is.applyMatrix;function Iw(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var Lw=function(i){Aw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,v.isString)(a)&&(a=document.getElementById(a));var o=ao("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,p=0,g=0,x=0,N=0;a.addEventListener("mousedown",function(F){if(r.refresh=!1,F.target===o){var j=o.style;p=parseInt(j.width,10),g=parseInt(j.height,10);var $=t.get("width"),nt=t.get("height");p>$||g>nt||(N=n.getZoom(),x=t.get("ratio"),f=!0,s=F.clientX,u=F.clientY)}},!1),a.addEventListener("mousemove",function(F){if(!(!f||(0,v.isNil)(F.clientX)||(0,v.isNil)(F.clientY))){var j=t.get("width"),$=t.get("height"),nt=o.style;c=parseInt(nt.left,10),l=parseInt(nt.top,10),p=parseInt(nt.width,10),g=parseInt(nt.height,10);var ft=s-F.clientX,Mt=u-F.clientY;c-ft<0?ft=c:c-ft+p>=j&&(ft=0),l-Mt<0?Mt=l:l-Mt+g>=$&&(Mt=0),c-=ft,l-=Mt,Wa(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(ft*N/x,Mt*N/x),s=F.clientX,u=F.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],p=[c.maxX-c.minX,c.maxY-c.minY],g={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(g.width=p[0],g.height=g.width/u):(g.height=p[1],g.width=g.height*u),g.minX=l[0]-g.width/2,g.minY=l[1]-g.height/2;var x=f.getMatrix();x||(x=[1,0,0,0,1,0,0,0,1]);var N=et.invert([1,0,0,0,1,0,0,0,1],x),F=Tw({x:g.minX,y:g.minY},N),j=a.getCanvasByPoint(F.x,F.y),$=this.get("viewport");$||this.initViewport();var nt=o/g.width,ft=nt*r,Mt=nt*n,Rt=r*-j.x/g.width,Pt=n*-j.y/g.height,ne=Rt+ft,xe=Pt+Mt;Rt<0&&(ft+=Rt,Rt=0),ne>r&&(ft=ft-(ne-r)),Pt<0&&(Mt+=Pt,Pt=0),xe>n&&(Mt=Mt-(xe-n)),this.set("ratio",t);var he="".concat(Rt,"px"),Ne="".concat(Pt,"px");Wa($,{left:he,top:Ne,width:"".concat(ft,"px"),height:"".concat(Mt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=ao("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,v.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var p=ao('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(p);var g=ao('<span style="display: table-cell; vertical-align: middle; "></span>');p.appendChild(g),t.set("containerDOM",p),t.set("containerSpan",g);var x=ao('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",x),t.updateImgSize(),g.appendChild(x),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=Iw(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=ao('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(tu),Nw=Lw,kw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sv=function(){return sv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},sv.apply(this,arguments)},Ow=Is.distance,Ng=.05,kg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Dw=function(i){kw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,v.clone)(kg),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Ng:a=1/(1-Ng);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(j){j.remove(),j.destroy()}),l=[],a.forEach(function(j){var $=j.getModel(),nt=$.x,ft=$.y;Ow({x:nt,y:ft},f)<s&&(o[$.id]=j)});var p=n.getEdges(),g=[];p.forEach(function(j){var $=j.getModel(),nt=$.source,ft=$.target;c($)&&(u==="only-source"||u==="one"?o[nt]&&!o[ft]&&g.push(j):u==="only-target"||u==="one"?o[ft]&&!o[nt]&&g.push(j):u==="both"&&o[nt]&&o[ft]&&g.push(j))});var x=r.get("showNodeLabel"),N=r.get("showEdgelabel"),F=n.get("group");g.forEach(function(j){var $=j.get("group").get("children");$.forEach(function(nt){var ft=nt.get("type"),Mt=F.addShape(ft,{attrs:nt.attr()});l.push(Mt),x&&ft==="text"&&Mt.set("visible",!0)})}),Object.keys(o).forEach(function(j){var $=o[j],nt=$.get("group").clone();if(F.add(nt),l.push(nt),N)for(var ft=nt.get("children"),Mt=0;Mt<ft.length;Mt++){var Rt=ft[Mt];Rt.get("type")==="text"&&Rt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||kg;o=s.addShape("circle",{attrs:sv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(tu),Pw=Dw,Rw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bw=Is.pointLineDistance,Fw={stroke:"#FA8C16",lineWidth:1},Gw=function(i){Rw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:Fw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,v.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},p={x:n.x+r.width/2,y:n.y+r.height},g={x:n.x,y:n.y+r.height/2},x={x:n.x+r.width,y:n.y+r.height/2},N=[],F=[],j=null;if(this.clearAlignLine(),(0,v.each)(s,function(nt){nt[4].isVisible&&(N.push(a.getLineDisObject(nt,c)),N.push(a.getLineDisObject(nt,l)),N.push(a.getLineDisObject(nt,p)))}),(0,v.each)(u,function(nt){nt[4].isVisible&&(F.push(a.getLineDisObject(nt,g)),F.push(a.getLineDisObject(nt,l)),F.push(a.getLineDisObject(nt,x)))}),N.sort(function(nt,ft){return nt.dis-ft.dis}),F.sort(function(nt,ft){return nt.dis-ft.dis}),N.length!==0&&N[0].dis<f){t.y=N[0].line[1]-N[0].point.y+n.y,j={type:"item",horizontals:[N[0]]};for(var $=1;$<3;$++)N[0].dis===N[$].dis&&j.horizontals.push(N[$])}if(F.length!==0&&F[0].dis<f){t.x=F[0].line[0]-F[0].point.x+n.x,j?j.verticals=[F[0]]:j={type:"item",verticals:[F[0]]};for(var $=1;$<3;$++)F[0].dis===F[$].dis&&j.verticals.push(F[$])}j&&(j.bbox=r,this.addAlignLine(j))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,v.each)(a,function(p){var g=p.line,x=p.point,N=(g[0]+g[2])/2,F,j;x.x<N?(F=x.x-r.width/2,j=Math.max(g[0],g[2])):(F=x.x+r.width/2,j=Math.min(g[0],g[2]));var $=(0,v.mix)({x1:F,y1:g[1],x2:j,y2:g[1]},u),nt=l.addShape("line",{attrs:$,capture:!1});f.push(nt)}),o&&(0,v.each)(o,function(p){var g=p.line,x=p.point,N=(g[1]+g[3])/2,F,j;x.y<N?(F=x.y-r.height/2,j=Math.max(g[1],g[3])):(F=x.y+r.height/2,j=Math.min(g[1],g[3]));var $=(0,v.mix)({x1:g[0],y1:F,x2:g[0],y2:j},u),nt=l.addShape("line",{attrs:$,capture:!1});f.push(nt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:Bw(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,v.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(tu),zw=Gw,Uw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wo=function(){return wo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},wo.apply(this,arguments)},Xw=["click","mouseenter"],Yw=function(i){Uw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=ao(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();Wa(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,p={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(g){var x=s[f[g]],N=g;switch(g){case"top":x+=l;break;case"left":x+=c;break;case"bottom":x=n.getHeight()-t[1]-x+l,N="top";break;default:x=n.getWidth()-t[0]-x+c,N="left";break}p[N]=x}),p.top+=o+n.getContainer().offsetTop,p.left+=a+n.getContainer().offsetLeft,Object.keys(p).forEach(function(g){p[g]="".concat(p[g],"px")}),p},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";Xw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Wa(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var p=l.get("children"),g=p[0],x=p[1];g.attr(wo(wo({},g.get("oriAttrs")),s)),x.attr(wo(wo({},x.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var p=l.get("children"),g=p[0],x=p[1];g.attr(wo(wo({},g.get("oriAttrs")),f)),x.attr(wo(wo({},x.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(j){return j.get("name")==="root"}),l=c.find(function(j){return j.get("name")==="node-group"}),p=c.find(function(j){return j.get("name")==="edge-group"}),g=l.get("children").filter(function(j){return j.get("active")}),x=p.get("children").filter(function(j){return j.get("active")}),N=0,F=["getNodes","getEdges"];F.forEach(function(j){o[j]().forEach(function($){var nt=!1,ft=j==="getNodes"?g:x;ft.forEach(function(Mt){var Rt=n[Mt.get("id")];nt=nt||Rt($.getModel())}),nt?(o.setItemState($,u,!1),o.setItemState($,s,!0),N++):(o.setItemState($,s,!1),o.setItemState($,u,!0))})}),N||F.forEach(function(j){o[j]().forEach(function($){o.clearItemStates($,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new lc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(_r,pn){s[_r].forEach(function(hn){var Cr,Yr=f[pn].addGroup({id:hn.id,name:"node-container"}),an,on=hn.type,Sn=t.getShapeSize(hn),On=Sn.width,ca=Sn.height,Aa=Sn.r,pi=t.getStyle(_r.substr(0,4),hn);switch(hn.type){case"circle":an={r:Aa,x:0,y:0};break;case"rect":an={width:On,height:ca,x:-On/2,y:-ca/2};break;case"ellipse":an={rx:On,ry:ca,x:0,y:0},on="ellipse";break;case"line":an={x1:-On/2,y1:0,x2:On/2,y2:0},on="line";break;case"quadratic":an={path:[["M",-On/2,0],["Q",0,On/2,On/2,0]]},on="path";break;case"cubic":an={path:[["M",-On/2,0],["C",-On/6,On/2,On/6,-On/2,On/2,0]]},on="path";break;case"diamond":an={path:[["M",0,-ca],["L",On,0],["L",0,ca],["L",-On,0],["Z"]]},on="path";break;case"triangle":an={path:[["M",-On,ca],["L",0,-ca],["L",On,ca],["Z"]]},on="path";break;case"star":an={path:Is.getStarPath(Aa*3,Aa*1.2)},on="path";break;default:an={r:Aa,x:0,y:0};break}var ai=Yr.addShape(on,{attrs:wo(wo({},an),pi),name:"".concat(hn.type,"-node-keyShape"),oriAttrs:wo({opacity:1},pi)});if(hn.label){var gi=ai.getBBox(),xi=((Cr=hn.labelCfg)===null||Cr===void 0?void 0:Cr.style)||{},Ji=wo({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},xi);Yr.addShape("text",{attrs:wo({x:gi.maxX+4,y:0,text:hn.label},Ji),className:"legend-label",name:"".concat(hn.type,"-node-text"),oriAttrs:Ji})}})});var c=this.get("padding"),l,p=n.find(function(_r){return _r.get("name")==="title-container"}),g={height:0,maxY:0,width:0};if(this.get("title")){p||(p=n.addGroup({name:"title-container"}));var x={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},N=this.get("titleConfig")||{},F=Object.assign(x,N.style||{});l=p.addShape("text",{attrs:wo({text:this.get("title")},F)}),g=p.getCanvasBBox(),p.setMatrix([1,0,0,0,1,0,N.offsetX,N.offsetY,1])}this.layoutItems();var j=n.getCanvasBBox(),$=a.getCanvasBBox(),nt=$.minX<0?Math.abs($.minX)+c[3]:c[3],ft=g.maxY<$.minY?Math.abs(g.maxY-$.minY)+c[0]:g.maxY+c[0],Mt=[1,0,0,0,1,0,nt,ft,1];a.setMatrix(Mt),j=n.getCanvasBBox();var Rt=[j.minX+j.width+c[1],j.minY+j.height+c[2]];if(l){var N=wo({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));g=p.getCanvasBBox();var Pt=p.getMatrix()||[1,0,0,0,1,0,0,0,1];N.position==="center"?Pt[6]=Rt[0]/2+N.offsetX:N.position==="right"?(Pt[6]=Rt[0]-c[3]+N.offsetX,l.attr({textAlign:"right"})):(Pt[6]=c[3]+N.offsetX,l.attr({textAlign:"left"})),p.setMatrix(Pt),g=p.getCanvasBBox(),nt=$.minX<0?Math.abs($.minX)+c[3]:c[3],ft=$.minY<g.maxY?Math.abs(g.maxY-$.minY)+c[0]:g.maxY+c[0],Mt=[1,0,0,0,1,0,nt,ft,1],a.setMatrix(Mt);var ne=[1,0,0,0,1,0,nt,ft,1];this.get("layout")==="vertical"?ne[6]+=$.maxX+this.get("horiSep"):ne[7]+=$.maxY+this.get("vertiSep"),o.setMatrix(ne)}else{$=a.getCanvasBBox();var xe=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?xe[6]+=Mt[6]+$.maxX+this.get("horiSep"):xe[7]+=Mt[7]+$.maxY+this.get("vertiSep"),o.setMatrix(xe)}j=n.getCanvasBBox(),$=a.getCanvasBBox(),Mt=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var he=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Ne=o.getCanvasBBox();Rt=[Math.max($.width+Mt[6],Ne.width+he[6])+c[1],Math.max($.height+Mt[7],Ne.height+he[7])+c[2]],r.changeSize(Rt[0],Rt[1]);var He=this.get("containerStyle"),Dr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],$r=Is.invertMatrix({x:0,y:0},Dr),zr=n.addShape("rect",{attrs:wo({x:$r.x+(He.lineWidth||1),y:$r.y+(He.lineWidth||1),width:Rt[0]-2*(He.lineWidth||1),height:Rt[1]-2*(He.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},He),name:"legend-back-rect",capture:!1});return zr.toBack(),Rt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(ft){return ft.get("name")==="root"}),f=u.find(function(ft){return ft.get("name")==="node-group"}),c=u.find(function(ft){return ft.get("name")==="edge-group"}),l={min:0,max:-1/0},p=-1/0;f.get("children").forEach(function(ft,Mt){Mt===0&&(l.min=s[0]);var Rt=ft.get("children")[0],Pt=ft.getCanvasBBox(),ne=Rt.getBBox(),xe=ne.width,he=ne.height,Ne=0,He=0,Dr=0;a==="vertical"?(He=s[1],Dr=s[0]+xe/2,s[0]=Dr+Pt.height+n,Ne=Pt.maxX+He+xe/2):(He=s[0]+xe/2,Dr=s[1],s[0]=He+Pt.width+r,Ne=Pt.maxY+Dr+he/2),s[0]>l.max&&(l.max=s[0]),Ne>p&&(p=Ne),ft.setMatrix([1,0,0,0,1,0,He,Dr,1])});var g=l.max-l.min,x={min:0,max:-1/0},N=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?N.maxX+r:N.maxY+n,c.get("children").forEach(function(ft,Mt){Mt===0&&(x.min=s[0]);var Rt=ft.get("children")[0],Pt=ft.getCanvasBBox(),ne=Rt.getBBox(),xe=ne.width,he=ne.height,Ne=0,He=0;a==="vertical"?(Ne=s[1],He=s[0],s[0]=He+Pt.height+n,ft.setMatrix([1,0,0,0,1,0,0,He+he/2,1])):(Ne=s[0],He=s[1],s[0]=Ne+Pt.width+r,ft.setMatrix([1,0,0,0,1,0,Ne+xe/2,0,1])),s[0]>x.max&&(x.max=s[0])});var F=x.max-x.min;if(o&&o!==""&&o!=="left"){var j=g-F,$=o==="center"?Math.abs(j)/2:Math.abs(j),nt=j<0?f:c;nt.get("children").forEach(function(ft){var Mt=ft.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Mt[7]+=$:Mt[6]+=$,ft.setMatrix(Mt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,v.uniqueId)(),type:n.type||"circle",style:wo({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:wo({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,v.uniqueId)(),type:s,size:f,style:wo({lineWidth:(0,v.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:wo({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,v.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,v.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,v.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,v.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return wo(wo({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(tu),Ww=Yw,Vw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ru=function(){return Ru=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ru.apply(this,arguments)},Og=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&od()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var Dg="canvas-annotation",Hw=function(i){Vw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Ru(Ru({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",p=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),g="<p class='g6-annotation-close'>x</p>",x=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(x,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(g,`
        </div>
        `).concat(p,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new lc({container:n,width:s.right-s.left,height:s.bottom-s.top});Wa(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,v.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var p,g=((p=l==null?void 0:l.getModel)===null||p===void 0?void 0:p.call(l))||{},x=g.label,N=g.id;return x||N||"-"}),t.get("getContent")||t.set("getContent",function(l){var p,g;if(!l)return"-";var x=((p=l.getModel)===null||p===void 0?void 0:p.call(l))||{},N=x.label,F=x.id,j=(g=l.getType)===null||g===void 0?void 0:g.call(l),$=j?"".concat(j,": "):"";return"".concat($).concat(N||F||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,p=u-s,g=r.position,x=g===void 0?"top":g,N=r.offsetX,F=N===void 0?0:N,j=r.offsetY,$=j===void 0?0:j,nt=Og(r,["position","offsetX","offsetY"]),ft=r.height,Mt=ft===void 0?"fit-content":ft,Rt=r.width,Pt=Rt===void 0?n.getWidth():Rt;Mt==="100%"&&(Mt=l),Pt==="100%"&&(Pt=p);var ne="unset",xe="unset",he={};switch(x){case"right":ne="".concat(l,"px"),he={top:0,right:0},he.right+=s+F,he.top+=f+$;break;case"bottom":xe="".concat(p,"px"),he={bottom:0,left:0},he.left+=s+F,he.bottom+=f+$;break;case"top":xe="".concat(p,"px");case"left":ne="".concat(l,"px");default:he={top:0,left:0},he.left+=s+F,he.top+=f+$;break}Object.keys(he).forEach(function(He){he[He]="".concat(he[He],"px")});var Ne=ao("<div class='".concat(r.className," g6-annotation-container'></div>"));return Wa(Ne,Ru(Ru({position:"absolute",display:x==="top"||x==="bottom"?"inline-flex":"unset",width:(0,v.isNumber)(Pt)?"".concat(Pt,"px"):Pt,height:(0,v.isNumber)(Mt)?"".concat(Mt,"px"):Mt,maxHeight:ne,maxWidth:xe,overflow:"scroll"},he),nt)),a.appendChild(Ne),Ne.addEventListener("scroll",function(He){t.updateLinks()}),Ne}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),p=l.x,g=l.y;Object.values(n).forEach(function(x){var N=x.card;if(N){var F=N.style,j=Rl(F.left),$=Rl(F.top),nt=N.getBoundingClientRect(),ft=nt.width,Mt=nt.height,Rt=j,Pt=$;j+ft>p-f&&(Rt=p-f-ft),j<0&&(Rt=0),$+Mt>g-c&&(Pt=g-c-Mt),$<0&&(Pt=0),Wa(N,{left:"".concat(Rt,"px"),top:"".concat(Pt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),p=l.minHeight,g=l.minWidth,x=l.width,N=l.height,F=l.collapsed,j=F===void 0?!1:F,$=l.x,nt=l.y,ft=l.title,Mt=l.content,Rt=l.maxTitleLength,Pt=l.defaultBegin,ne=Og(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),xe=o.get("linkGroup"),he=this.get("rows")||[[]],Ne=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),He=Ne?Dg:t.getID(),Dr=s[He]||{},$r=Dr.card,zr=Dr.link,_r=Dr.x,pn=Dr.y,hn=Dr.title,Cr=Dr.content,Yr=this.get("getTitle"),an=this.get("getContent"),on=this.get("getContentPlaceholder")||function(){return""},Sn=this.get("getTitlePlaceHolder")||function(){return""},On=on(t),ca=Sn(t),Aa=ao(this.getDOMContent(Ru({itemId:He,collapsed:j,title:((a=hn||ft||(Yr==null?void 0:Yr(t)))===null||a===void 0?void 0:a.substr(0,Rt))||ca,content:Cr||Mt||(an==null?void 0:an(t))||On},ne))),pi=(0,v.isNumber)(p)?"".concat(p,"px"):p;Wa(Aa,{minHeight:j?"unset":pi,minWidth:(0,v.isNumber)(g)?"".concat(g,"px"):g,height:N,width:x});var ai=!!$r;ai?(zr==null||zr.remove(!0),f.replaceChild(Aa,$r)):f.appendChild(Aa);var gi;if(!c){if(gi=f.getBoundingClientRect()||{},$!==void 0&&nt!==void 0)_r=$,pn=nt;else if(!ai&&!Ne){var xi=gi.top,Ji=Pt||{},Fi=Ji.left,Bu=Ji.right,is=Bu===void 0?16:Bu,Fu=Ji.top,os=Fu===void 0?8:Fu,ss=Ji.bottom,gu=is,Ls=os;isNaN(Fi)||(gu=f.scrollWidth-Fi),isNaN(ss)||(Ls=f.scrollHeight-ss);var Hs=(0,v.isNumber)(g)?g:100;_r=f.scrollWidth-Aa.scrollWidth-(he.length-1)*Hs-gu;var Va=he[he.length-1],li=(Va[Va.length-1]||{}).bbox;pn=(li==null?void 0:li.bottom)-xi||Ls}Wa(Aa,{position:"absolute",left:"".concat(_r,"px"),top:"".concat(pn,"px"),cusor:c?"unset":"move"})}this.bindListener(Aa,He);var Ua=Aa.getBoundingClientRect();if(!Ne){var hi=uv(t,Ua,u,this.get("canvas")),Ni=this.get("linkStyle");zr=xe.addShape("path",{attrs:Ru({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:hi},Ni)})}if(s[He]=Ru(Ru({},s[He]||{}),{id:He,collapsed:j,card:Aa,link:zr,x:_r,y:pn,cardBBox:Ua,content:Cr||Mt,title:hn||ft,contentPlaceholder:On,titlePlaceholder:ca,isCanvas:Ne}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Kn=!isNaN($)&&!isNaN(nt);if(!ai&&!Ne&&!Kn){var $a=gi.bottom,Ja=$a===void 0?0:$a,xi=gi.top;he[he.length-1].push({id:He,bbox:Ua}),Ua.top>Ja-xi-Ua.height-16&&he.push([]),this.set("rows",he)}}this.updateCardSize(He);var ki=this.get("onAnnotationChange");ki==null||ki(s[He],ai?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Rl(o.paddingLeft)+Rl(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":Wa(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Wa(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Ru(Ru({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Wa(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var p=n.get("itemHighlightState");c.setItemState(l,p,!0)}var g=f[r].link;if(g){var x=n.get("linkHighlightStyle")||{};g.attr(x)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var p=n.get("itemHighlightState");c.setItemState(l,p,!1)}var g=f[r].link;if(g){var x=n.get("linkHighlightStyle")||{};Object.keys(x).forEach(function(F){g.attr(F,void 0),g.attr(F,void 0)});var N=n.get("linkStyle");g.attr(N)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var p=u.target,g=p.className;if(!(g!=="g6-annotation-title"&&g!=="g6-annotation-content")){var x=g==="g6-annotation-title"?p.getBoundingClientRect():p.parentNode.getBoundingClientRect(),N=x.width,F=x.height,j=getComputedStyle(p),$=g==="g6-annotation-title"?"input":"textarea",nt=ao("<".concat($,' class="').concat(g,'-input" type="textarea" style="width:').concat(N,"px; height: ").concat(F,'px; min-width: 16px;"/>')),ft=ao('<div class="'.concat(g,'-input-wrapper" style="width: ').concat(N,"px; height: ").concat(F,"px; min-width: 16px; margin-right: ").concat(j.marginRight,'" />'));ft.appendChild(nt),p.parentNode.replaceChild(ft,p);var Mt=f[r],Rt=Mt.contentPlaceholder,Pt=Mt.titlePlaceholder,ne=Mt.content,xe=Mt.title,he=ne;g==="g6-annotation-title"?(nt.name="title",nt.maxLength=l,he=xe):nt.name="content",he?(nt.innerHTML=p.innerHTML,nt.value=p.innerHTML):nt.placeholder=g==="g6-annotation-title"?Pt:Rt,nt.focus(),nt.addEventListener("blur",function(Ne){nt.value&&(p.innerHTML=nt.value,Mt[nt.name||"title"]=nt.value),ft.parentNode.replaceChild(p,ft),n.updateCardSize(r);var He=n.get("onAnnotationChange");He==null||He(Mt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Rl(c.left),top:Rl(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,p=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!p)){var g=p.x,x=p.y,N=p.left,F=p.top,j=p.card,$=c-g,nt=l-x;N+=$,F+=nt;var ft=n.get("graph"),Mt=ft.getPointByCanvas(0,0),Rt=ft.getPointByCanvas(ft.getWidth(),ft.getHeight()),Pt=ft.getClientByPoint(Mt.x,Mt.y),ne=Pt.x,xe=Pt.y,he=ft.getClientByPoint(Rt.x,Rt.y),Ne=he.x,He=he.y,Dr=j.getBoundingClientRect(),$r=Dr.right-Dr.left,zr=Dr.bottom-Dr.top;(N>Ne-ne-$r&&$>0||N<0&&$<0)&&(N-=$),(F>He-xe-zr&&nt>0||F<0&&nt<0)&&(F-=nt),Wa(j,{left:"".concat(N,"px"),top:"".concat(F,"px"),visibility:"hidden"}),g=c,x=l;var _r=(f[r]||{}).link;if(_r){var pn=ft.findById(r);_r.attr("path",uv(pn,Dr,ft,n.get("canvas")))}n.set("dragging",{x:g,y:x,left:N,top:F,card:j})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var p=l.left,g=l.top,x=l.card;c[r].x=p,c[r].y=g,Wa(x,{visibility:"visible"}),n.set("dragging",!1);var N=n.get("rows");N==null||N.forEach(function(j){for(var $=j.length-1;$>=0;$--)j[$].id===r&&j.splice($,1)});var F=n.get("onAnnotationChange");F==null||F(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Rl(s.marginLeft),f=o.getBoundingClientRect().width;Wa(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=uv(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,p=u.y,g=u.id,x=u.collapsed,N=u.card;if(!(N&&N.style.display==="none"&&!t)){var F=n.findById(g)||n.get("canvas");s.push({id:g,x:l,y:p,collapsed:x,title:f||(a==null?void 0:a(F)),content:c||(o==null?void 0:o(F)),visible:N&&N.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,p=a.visible,g=n.findById(o);if(!g&&o===Dg&&(g=n.get("canvas")),!g){var x=r.get("cardInfoMap")||{};x[o]=a,r.set("cardInfoMap",x);return}r.toggleAnnotation(g,{x:s,y:u,title:f,content:c,collapsed:l}),p||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(tu),jw=Hw,Zw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var p=t[l],g=c.x-p.x,x=c.y-p.y,N=g*g+x*x;o>N&&(o=N,r=c,n=p,a=[f,l])})});var s=20,u=Is.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},uv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,p=u.maxY,g=e.getModel(),x=g.x,N=g.y;f+=x,c+=N,l+=x,p+=N,o={left:{x:f,y:(c+p)/2},right:{x:l,y:(c+p)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:p}}}Object.keys(o).forEach(function(xe){var he=o[xe],Ne=he.x,He=he.y,Dr=r.getClientByPoint(Ne,He);o[xe]=n.getPointByClient(Dr.x,Dr.y)});var F=t.top,j=F===void 0?0:F,$=t.left,nt=$===void 0?0:$,ft=t.right,Mt=ft===void 0?0:ft,Rt=t.bottom,Pt=Rt===void 0?0:Rt,ne={left:n.getPointByClient(nt,(j+Pt)/2),right:n.getPointByClient(Mt,(j+Pt)/2),top:n.getPointByClient((nt+Mt)/2,j),bottom:n.getPointByClient((nt+Mt)/2,Pt)};return Zw(o,ne)},Rl=function(e){return Number(e.replace(/\s+|px/gi,""))||0},qw={PluginBase:tu,Menu:sb,Grid:nb,Minimap:vb,Bundling:mb,ToolBar:_b,Tooltip:Tb,Fisheye:wb,TimeBar:Cw,ImageMinimap:Nw,EdgeFilterLens:Pw,SnapLine:zw,Legend:Ww,Annotation:jw},$w=qw,as=$w;cc("circle",{options:{size:vn.defaultNode.size,style:{x:0,y:0,stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,v.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,p=o.text;if(l){var g="".concat(this.type,"-icon");p?t.shapeMap[g]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:g,name:g,draggable:!0}):t.shapeMap[g]=t.addShape("image",{attrs:(0,y.pi)({x:-f/2,y:-c/2},o),className:g,name:g,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y._T)(n,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0]/2;if(o){var x="link-point-left";t.shapeMap[x]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:-g,y:0,r:f/2||c||5}),className:x,name:x,isAnchorPoint:!0})}if(s){var N="link-point-right";t.shapeMap[N]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:g,y:0,r:f/2||c||5}),className:N,name:N,isAnchorPoint:!0})}if(a){var F="link-point-top";t.shapeMap[F]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:-g,r:f/2||c||5}),className:F,name:F,isAnchorPoint:!0})}if(u){var j="link-point-bottom";t.shapeMap[j]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:g,r:f/2||c||5}),className:j,name:j,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.pi)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,y.pi)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("rect",{options:{size:[100,30],style:{radius:0,stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y._T)(n,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0],x=p[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:-g/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:g/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:-x/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:x/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,v.mix)({},a,s.attr(),u);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),cc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y._T)(n,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0]/2,x=p[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:-g,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:g,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:-x,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:x,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,y.pi)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("diamond",{options:{size:[80,80],style:{stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y._T)(n,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0],x=p[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:-g/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:g/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:-x/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:x/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,y.pi)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("triangle",{options:{size:40,direction:"up",style:{stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,p=a.show,g=a.offset,x=a.text;if(p)if(x)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var N=-c/2,F=-l/2;(u==="up"||u==="down")&&(F+=g),(u==="left"||u==="right")&&(N+=g),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.pi)({x:N,y:F},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,p=a.size,g=a.r,x=(0,y._T)(a,["top","left","right","bottom","size","r"]),N=this.getSize(e),F=N[0];if(f){var j=null,$=F*Math.sin(1/3*Math.PI),nt=F*Math.sin(1/3*Math.PI);s==="up"?j=[-nt,$]:s==="down"?j=[-nt,-$]:s==="left"&&(j=[-nt,nt-$]),j&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},x),{x:j[0],y:j[1],r:p/2||g||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var ft=null,$=F*Math.sin(1/3*Math.PI),nt=F*Math.sin(1/3*Math.PI);s==="up"?ft=[nt,$]:s==="down"?ft=[nt,-$]:s==="right"&&(ft=[nt,nt-$]),ft&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},x),{x:ft[0],y:ft[1],r:p/2||g||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Mt=null,$=F*Math.sin(1/3*Math.PI),nt=F*Math.sin(1/3*Math.PI);s==="up"?Mt=[nt-$,-$]:s==="left"?Mt=[nt,-$]:s==="right"&&(Mt=[-nt,-$]),Mt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},x),{x:Mt[0],y:Mt[1],r:p/2||g||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Rt=null,$=F*Math.sin(1/3*Math.PI),nt=F*Math.sin(1/3*Math.PI);s==="down"?Rt=[-nt+$,$]:s==="left"?Rt=[nt,$]:s==="right"&&(Rt=[-nt,$]),Rt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},x),{x:Rt[0],y:Rt[1],r:p/2||g||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,y.pi)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(_r){return _r.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(_r){return _r.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(_r){return _r.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(_r){return _r.get("className")==="link-point-bottom"}),l=n,p=s||u||f||c;p&&(l=p.attr());var g=(0,v.mix)({},l,e.linkPoints),x=g.fill,N=g.stroke,F=g.lineWidth,j=g.size/2;j||(j=g.r);var $=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},nt=$.left,ft=$.right,Mt=$.top,Rt=$.bottom,Pt=this.getSize(e),ne=Pt[0],xe={r:j,fill:x,stroke:N,lineWidth:F},he=null,Ne=ne*Math.sin(1/3*Math.PI),He=ne*Math.sin(1/3*Math.PI);o==="up"?he=[-He,Ne]:o==="down"?he=[-He,-Ne]:o==="left"&&(he=[-He,He-Ne]),he&&(s?!nt&&nt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,y.pi)((0,y.pi)({},xe),{x:he[0],y:he[1]})):nt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},xe),{x:he[0],y:he[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Dr=null;o==="up"?Dr=[He,Ne]:o==="down"?Dr=[He,-Ne]:o==="right"&&(Dr=[He,He-Ne]),Dr&&(u?!ft&&ft!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,y.pi)((0,y.pi)({},xe),{x:Dr[0],y:Dr[1]})):ft&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},xe),{x:Dr[0],y:Dr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var $r=null;o==="up"?$r=[He-Ne,-Ne]:o==="left"?$r=[He,-Ne]:o==="right"&&($r=[-He,-Ne]),$r&&(f?!Mt&&Mt!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,y.pi)((0,y.pi)({},xe),{x:$r[0],y:$r[1]})):Mt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},xe),{x:$r[0],y:$r[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var zr=null;o==="down"?zr=[-He+Ne,Ne]:o==="left"?zr=[He,Ne]:o==="right"&&(zr=[-He,Ne]),zr&&(c?!Rt&&Rt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,y.pi)((0,y.pi)({},xe),{x:zr[0],y:zr[1]})):Rt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},xe),{x:zr[0],y:zr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),cc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:vn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:vn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:vn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,y._T)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,y.pi)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,p=n.text,g=(0,y._T)(n,["width","height","x","y","offset","text"]);p?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},g),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,y.pi)((0,y.pi)({},g),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,p=n.text,g=(0,y._T)(n,["width","height","x","y","offset","text"]);p?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},g),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,y.pi)((0,y.pi)({},g),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,y._T)(n,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0],x=p[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:-g/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:g/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:-x/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},l),{x:0,y:x/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],p=null,g=s.show,x=s.width,N=-l/2+a.offset;g&&(N=-l/2+x+a.offset);var F=a.style,j=f.style,$=f.paddingTop;return(0,v.isString)(e.description)?(p=t.addShape("text",{attrs:(0,y.pi)((0,y.pi)({},F),{x:N,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=p,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,y.pi)((0,y.pi)({},j),{x:N,y:17+($||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(p=t.addShape("text",{attrs:(0,y.pi)((0,y.pi)({},F),{x:N,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=p),p},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],p=c[1],g=t.get("keyShape");g.attr((0,y.pi)((0,y.pi)({},a),{x:-l/2,y:-p/2,width:l,height:p}));var x=t.getContainer(),N=x.shapeMap["rect-logo-icon"]||x.find(function(Aa){return Aa.get("className")==="rect-logo-icon"}),F=N?N.attr():{},j=(0,v.mix)({},F,e.logoIcon),$=j.width;$===void 0&&($=this.options.logoIcon.width);var nt=e.logoIcon?e.logoIcon.show:void 0,ft=s.offset,Mt=-l/2+$+ft;!nt&&nt!==void 0&&(Mt=-l/2+ft);var Rt=x.shapeMap["node-label"]||x.find(function(Aa){return Aa.get("className")==="node-label"}),Pt=x.shapeMap["rect-description"]||x.find(function(Aa){return Aa.get("className")==="rect-description"});if(e.label)if(!Rt)x.shapeMap["node-label"]=x.addShape("text",{attrs:(0,y.pi)((0,y.pi)({},s.style),{x:Mt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var ne=e.labelCfg?e.labelCfg.style:{},xe=(0,v.mix)({},Rt.attr(),ne);e.label&&(xe.text=e.label),xe.x=Mt,(0,v.isString)(e.description)&&(xe.y=-5),Pt&&(Pt.resetMatrix(),Pt.attr({x:Mt})),Rt.resetMatrix(),Rt.attr(xe)}if((0,v.isString)(e.description)){var he=f.paddingTop;if(!Pt)x.shapeMap["rect-description"]=x.addShape("text",{attrs:(0,y.pi)((0,y.pi)({},f.style),{x:Mt,y:17+(he||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var ne=e.descriptionCfg?e.descriptionCfg.style:{},Ne=(0,v.mix)({},Pt.attr(),ne);(0,v.isString)(e.description)&&(Ne.text=e.description),Ne.x=Mt,Pt.resetMatrix(),Pt.attr((0,y.pi)((0,y.pi)({},Ne),{y:17+(he||0)}))}}var He=x.shapeMap["pre-rect"]||x.find(function(Aa){return Aa.get("className")==="pre-rect"});if(He&&!He.destroyed){var Dr=(0,v.mix)({},He.attr(),e.preRect);He.attr((0,y.pi)((0,y.pi)({},Dr),{x:-l/2,y:-p/2,height:p}))}if(N&&!N.destroyed)if(!nt&&nt!==void 0)N.remove(),delete x.shapeMap["pre-rect"];else{var $r=j.width,zr=j.height,_r=j.x,pn=j.y,hn=j.offset,Cr=(0,y._T)(j,["width","height","x","y","offset"]);N.attr((0,y.pi)((0,y.pi)({},Cr),{x:_r||-l/2+$r+hn,y:pn||-zr/2,width:$r,height:zr}))}else nt&&this.drawLogoIcon(e,x);var Yr=x.shapeMap["rect-state-icon"]||x.find(function(Aa){return Aa.get("className")==="rect-state-icon"}),an=Yr?Yr.attr():{},on=(0,v.mix)({},an,e.stateIcon);if(Yr){!on.show&&on.show!==void 0&&(Yr.remove(),delete x.shapeMap["rect-state-icon"]);var Sn=on.width,zr=on.height,_r=on.x,pn=on.y,On=on.offset,ca=(0,y._T)(on,["width","height","x","y","offset"]);Yr.attr((0,y.pi)((0,y.pi)({},ca),{x:_r||l/2-Sn+On,y:pn||-zr/2,width:Sn,height:zr}))}else on.show&&this.drawStateIcon(e,x);this.updateLinkPoints(e,x)},getOptions:function(e,t){return t==="move"?e:(0,v.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),cc("star",{options:{size:60,style:{stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,p=(0,y._T)(n,["top","left","right","leftBottom","rightBottom","size","r"]),g=this.getSize(e),x=g[0];if(s){var N=Math.cos(.1*Math.PI)*x,F=Math.sin((18+72*0)/180*Math.PI)*x;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},p),{x:N,y:-F,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var N=Math.cos(.5*Math.PI)*x,F=Math.sin((18+72*1)/180*Math.PI)*x;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},p),{x:N,y:-F,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var N=Math.cos(.9*Math.PI)*x,F=Math.sin((18+72*2)/180*Math.PI)*x;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},p),{x:N,y:-F,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var N=Math.cos(1.3*Math.PI)*x,F=Math.sin((18+72*3)/180*Math.PI)*x;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},p),{x:N,y:-F,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var N=Math.cos(1.7*Math.PI)*x,F=Math.sin((18+72*4)/180*Math.PI)*x;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},p),{x:N,y:-F,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Is.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,y.pi)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ne){return Ne.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ne){return Ne.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ne){return Ne.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Ne){return Ne.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Ne){return Ne.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,v.mix)({},f,e.linkPoints),p=l.fill,g=l.stroke,x=l.lineWidth,N=l.size/2;N||(N=l.r);var F=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},j=F.left,$=F.right,nt=F.top,ft=F.leftBottom,Mt=F.rightBottom,Rt=this.getSize(e),Pt=Rt[0],ne={r:N,fill:p,stroke:g,lineWidth:x},xe=Math.cos((18+72*0)/180*Math.PI)*Pt,he=Math.sin((18+72*0)/180*Math.PI)*Pt;a?!$&&$!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he})):$&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),xe=Math.cos((18+72*1)/180*Math.PI)*Pt,he=Math.sin((18+72*1)/180*Math.PI)*Pt,o?!nt&&nt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he})):nt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),xe=Math.cos((18+72*2)/180*Math.PI)*Pt,he=Math.sin((18+72*2)/180*Math.PI)*Pt,n?!j&&j!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he})):j&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),xe=Math.cos((18+72*3)/180*Math.PI)*Pt,he=Math.sin((18+72*3)/180*Math.PI)*Pt,s?!ft&&ft!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he})):ft&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),xe=Math.cos((18+72*4)/180*Math.PI)*Pt,he=Math.sin((18+72*4)/180*Math.PI)*Pt,u?!Mt&&Mt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he})):Mt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.pi)((0,y.pi)({},ne),{x:xe,y:-he}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Pg=Is.defaultSubjectColors,Bh="fan-shape-";cc("donut",{options:{size:vn.defaultNode.size,style:{x:0,y:0,stroke:vn.defaultNode.style.stroke,fill:vn.defaultNode.style.fill,lineWidth:vn.defaultNode.style.lineWidth},labelCfg:{style:{fill:vn.nodeLabel.style.fill,fontSize:vn.nodeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:vn.defaultNode.linkPoints.size,lineWidth:vn.defaultNode.linkPoints.lineWidth,fill:vn.defaultNode.linkPoints.fill,stroke:vn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.pi)({},vn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,v.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.pi)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Kw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.pi)({},r)),Qw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var Kw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=Rg(a,s),c=f.configs,l=f.totalValue;if(l){var p=Bg(r),g=p.lineWidth,x=p.arcR,N=[x,0],F=0;if(u===1){fv(t,{arcR:x,arcBegin:N,beginAngle:F,config:c[0],fanIndex:0,lineWidth:g,totalValue:l,drawWhole:!0});return}for(var j=0;j<c.length;j++){var $=fv(t,{arcR:x,arcBegin:N,beginAngle:F,config:c[j],fanIndex:j,lineWidth:g,totalValue:l});if($.shouldEnd)return;N=$.arcBegin,F=$.beginAngle}}}},fv=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,p=t.updateShape,g=p===void 0?void 0:p,x=o.value/f;if(x<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var N,F,j;if(l||x>.999)N=[r,1e-4],j=1;else{var $=x*Math.PI*2;F=a+$,N=[r*Math.cos(F),-r*Math.sin(F)],j=$>Math.PI?1:0}var nt={path:[["M",n[0],n[1]],["A",r,r,0,j,0,N[0],N[1]]],stroke:o.color||(g==null?void 0:g.attr("stroke"))||Pg[s%Pg.length],lineWidth:u};return g?g.attr(nt):e.shapeMap["".concat(Bh).concat(s)]=e.addShape("path",{attrs:nt,name:"".concat(Bh).concat(s),draggable:!0}),{beginAngle:F,arcBegin:N,shape:e.shapeMap["".concat(Bh).concat(s)],shouldEnd:l||x>.999}},Qw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=Rg(n,o),c=f.configs,l=f.totalValue;if(l)for(var p=Bg(r),g=p.lineWidth,x=p.arcR,N=[x,0],F=0,j=0;j<c.length;j++){var $="".concat(Bh).concat(j),nt=fv(u,{arcR:x,arcBegin:N,beginAngle:F,config:c[j],fanIndex:j,lineWidth:g,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[$]});if(nt.shape&&(s[$]=!0),nt.shouldEnd)break;N=nt.arcBegin,F=nt.beginAngle}}var ft=Object.keys(u.shapeMap).filter(function(Mt){return Mt.includes(Bh)});ft.forEach(function(Mt){s[Mt]||(u.shapeMap[Mt].remove(!0),delete u.shapeMap[Mt])})},Rg=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},Bg=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},vd=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},Jw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},RS=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},cv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},Fg=function(e){return cv(e)},BS=function(e,t){return[e,{x:e.x,y:t.y},t]},pd=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},tE=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},lv=function(e,t,r){var n=tE(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},Gg=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},hv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},gd=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},eE=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},rE=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},nE=function(e,t){return eE(e,t.x).concat(rE(e,t.y))},Fh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},aE=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},zg=function(e,t,r,n,a){return Fh(e,t)+Fh(e,r)+aE(e,[t,r,n,a])},iE=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},FS=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},yd=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,p=n.y-t.y,g=a*u-o*s,x=f*p-c*l,N=a*c-o*f,F=s*p-u*l;return g*x<=0&&N*F<=0},dv=function(e,t,r){if(r.width||r.height){var n=hv(r),a=n[0],o=n[1],s=n[2],u=n[3];return yd(e,t,a,o)||yd(e,t,a,u)||yd(e,t,o,s)||yd(e,t,s,u)}return!1},oE=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(dv(o,t,r)||dv(o,t,n))return;a.push(o)}}),cv(a)},sE=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},p={},g={};p[t.id]=0,g[t.id]=zg(t,r,t);var x=new Yg;x.add({id:t.id,value:g[t.id]});var N={};e.forEach(function(Mt){N[Mt.id]=Mt});for(var F;Object.keys(c).length;){var j=x.minId(!1);if(j)F=c[j];else break;if(F===r){var $=[];return iE($,N,l,r.id),$}delete c[F.id],x.remove(F.id),f.push(F);var nt=oE(e,F,n,a),ft=function(Rt){Rt.forEach(function(Pt){if(f.indexOf(Pt)===-1){var ne=Pt.id;c[ne]||(c[ne]=Pt);var xe=g[F.id]+Fh(F,Pt);if(p[ne]&&xe>=p[ne]){x.add({id:ne,value:g[ne]});return}l[ne]=F.id,p[ne]=xe,g[ne]=p[ne]+zg(Pt,r,t,o,s),x.add({id:ne,value:g[ne]})}})};ft(nt)}return[t,r]},uE=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},fE=function(e,t,r,n){var a=Fh(e,t),o=Fh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},Ug=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(uE(a,s,u)){var f=fE(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},Xg=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=vd(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=vd(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=vd(t);else if(n.getType()==="combo"){var p=n.getKeyShape().getBBox();if(p){var g=n.getModel(),x=g.x,N=g.y;s={x,y:N,width:p.width,height:p.height,minX:p.minX+x,maxX:p.maxX+x,minY:p.minY+N,maxY:p.maxY+N},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=vd(t)}else s=n&&n.getBBox();var F=pd(o,a),j=pd(s,a),$=lv(F,e,t),nt=lv(j,t,e),ft=Jw([$,nt]),Mt=Gg(F,ft),Rt=Gg(j,ft),Pt=[];Pt=Pt.concat(hv(Mt)).concat(hv(Rt));var ne={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[ft,Mt,Rt].forEach(function(he){Pt=Pt.concat(nE(he,ne).filter(function(Ne){return gd(Ne,F)&&gd(Ne,j)}))}),[{x:$.x,y:nt.y},{x:nt.x,y:$.y}].forEach(function(he){gd(he,F)&&gd(he,j)&&Pt.push(he)}),Pt.unshift($),Pt.push(nt),Pt=cv(Pt);var xe=sE(Pt,$,nt,o,s,e,t);return xe.unshift(e),xe.push(t),Fg(xe)},cE=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},Yg=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),lE=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},hE=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},dE=function(e,t){return[e,t]},vE=function(e,t,r,n,a){return Fg(Xg(e,t,r,n,a.offset))},pE={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:lE,fallbackRoute:vE},GS={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:hE,fallbackRoute:dE},gc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},gE=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=pd(a.getBBox(),r),s=gc(o.minX,t);s<=gc(o.maxX,t);s+=1)for(var u=gc(o.minY,t);u<=gc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},vv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},Wg=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},Vg=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},Hg=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=pd(f,u);for(var p in l)l[p]=gc(l[p],a.gridSize);if(c){for(var g=0,x=s;g<x.length;g++)for(var N=x[g],F=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],p=0;p<4;p++){var j=F[p],$=Is.getLineIntersect(e,{x:e.x+N.stepX*l.width,y:e.y+N.stepY*l.height},j[0],j[1]);$&&!dv(e,$,f)&&($.id="".concat($.x,"|||").concat($.y),o.push($))}return o}var nt=lv(l,e,n);return nt.id="".concat(nt.x,"|||").concat(nt.y),[nt]},pv=function(e,t,r,n){var a=vv(e,t),o=r[e.id];if(!o){var s=vv(n,e);return Wg(s,a)}var u=vv({x:o.x,y:o.y},e);return Wg(u,a)},yE=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,p=e.y,g={x:l,y:p,id:c};pv(g,o,t,r)&&(f={x:o.x===n.x?n.x:g.x*s,y:o.y===n.y?n.y:g.y*s},u.unshift(f));for(var x=t[c];x&&x.id!==c;){var N={x:l,y:p,id:c},F={x:x.x,y:x.y,id:x.id},j=pv(F,N,t,r);j&&(f={x:F.x===N.x?f.x:F.x*s,y:F.y===N.y?f.y:F.y*s},u.unshift(f)),c=F.id,l=F.x,p=F.y,x=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=p===r.y?a.y:f.y,u.unshift(a),u},mE=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,v.deepMix)(pE,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=gE(o.obstacles.concat([r,n]),u,o.offset),c={x:gc(e.x,u),y:gc(e.y,u)},l={x:gc(t.x,u),y:gc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var p=Hg(c,e,r,l,o),g=Hg(l,t,n,c,o);p.forEach(function(Cr){delete f[Cr.id]}),g.forEach(function(Cr){delete f[Cr.id]});for(var x={},N={},F={},j={},$={},nt=new Yg,ft=0;ft<p.length;ft++){var Mt=p[ft];x[Mt.id]=Mt,j[Mt.id]=0,$[Mt.id]=Vg(Mt,g,o.distFunc),nt.add({id:Mt.id,value:$[Mt.id]})}var Rt=o.maximumLoops,Pt,ne,xe,he,Ne,He,Dr=1/0,$r={};for(g.forEach(function(Cr){$r["".concat(Cr.x,"|||").concat(Cr.y)]=!0}),Object.keys(x).forEach(function(Cr){var Yr=x[Cr].id;$[Yr]<=Dr&&(Dr=$[Yr],Pt=x[Yr])});Object.keys(x).length>0&&Rt>0;){var zr=nt.minId((Rt+1)%30===0);if(zr)Pt=x[zr];else break;if($r["".concat(Pt.x,"|||").concat(Pt.y)])return yE(Pt,F,c,t,e,l,u);delete x[Pt.id],nt.remove(Pt.id),N[Pt.id]=!0;for(var ft=0;ft<o.directions.length;ft++){ne=o.directions[ft];var _r="".concat(Math.round(Pt.x)+ne.stepX,"|||").concat(Math.round(Pt.y)+ne.stepY);if(xe={x:Pt.x+ne.stepX,y:Pt.y+ne.stepY,id:_r},!N[_r]&&(He=pv(Pt,xe,F,c),!(He>o.maxAllowedDirectionChange)&&!f[_r])){x[_r]||(x[_r]=xe);var pn=s[He];he=o.distFunc(Pt,xe)+(isNaN(pn)?u:pn),Ne=j[Pt.id]+he;var hn=j[_r];hn&&Ne>=hn||(F[_r]=Pt,j[_r]=Ne,$[_r]=Ne+Vg(xe,g,o.distFunc),nt.add({id:_r,value:$[_r]}))}}Rt-=1}return o.fallbackRoute(e,t,r,n,o)};Rv("polyline",{options:{color:vn.defaultEdge.color,size:vn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:vn.defaultEdge.style.stroke,lineAppendWidth:vn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:vn.edgeLabel.style.fill,fontSize:vn.edgeLabel.style.fontSize,fontFamily:vn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.pi)({},vn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,v.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,p=this.options.routeCfg,g=(0,v.mix)({},p,e.routeCfg);g.offset=n.offset;var x=this.getPath(u,f,c,l,g,!s);((0,v.isArray)(x)&&x.length<=1||(0,v.isString)(x)&&x.indexOf("L")===-1)&&(x="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(x="M0 0, L0 0");var N=(0,v.mix)({},vn.defaultEdge.style,n,{lineWidth:e.size,path:x});return N},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(ft){return ft.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),p=(0,v.mix)({},n,l,e.style),g=e.sourceNode,x=e.targetNode,N=p.radius,F=this.options.routeCfg,j=(0,v.mix)({},F,e.routeCfg);j.offset=p.offset;var $=this.getPath(c,g,x,N,j,!f);((0,v.isArray)($)&&$.length<=1||(0,v.isString)($)&&$.indexOf("L")===-1)&&($="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&($="M0 0, L0 0"),l.endArrow&&p.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&p.startArrow===!1&&(e.style.startArrow={path:""});var nt=(0,v.mix)(n,a.attr(),{lineWidth:o,path:$},e.style);a&&a.attr(nt)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return Ug(e,n);var c=[];return(0,v.each)(e,function(x,N){N===0?c.push(["M",x.x,x.y]):c.push(["L",x.x,x.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?Xg(e[e.length-1],e[0],r,t,s):mE(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var p=Ug(l,n);return p}l=cE(l);var g=Is.pointsToPolygon(l);return g}},"single-edge");var jg=dc.cloneEvent,Zg=dc.isNaN,qg=Math.abs,bE=10,xE=["shift","ctrl","alt","control"],wE={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(Zg(r)||Zg(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(nt){nt.set("ori-visibility",nt.get("ori-visibility")||nt.get("visible")),nt.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var p=f[c].getContainer(),g=p.get("children"),x=0,N=g;x<N.length;x++){var F=N[x],j=F.get("isKeyShape");j||(F.set("ori-visibility",F.get("ori-visibility")||F.get("visible")),F.hide())}}if(typeof window!="undefined"){var $=this;this.handleDOMContextMenu=function(nt){return $.onMouseUp(nt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=jg(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(qg(this.origin.x-e.clientX)+qg(this.origin.y-e.clientY)<bE)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Pt){return Pt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var p=f[c].get("group").get("children");p&&p.forEach(function(Pt){var ne=Pt.get("ori-visibility");Pt.set("ori-visibility",void 0),ne&&Pt.show()})}if(a>u)for(var g=n.getNodes(),x=0,N=g.length;x<N;x++)for(var F=g[x].getContainer(),j=F.get("children"),$=0,nt=j;$<nt.length;$++){var ft=nt[$],Mt=ft.get("isKeyShape");if(!Mt){var Rt=ft.get("ori-visibility");ft.set("ori-visibility",void 0),Rt&&ft.show()}}}if(!this.dragging){this.origin=null;return}e=jg(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(xE.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,v.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,v.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},EE={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,y.pi)((0,y.pi)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,y.pi)((0,y.pi)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(g){var x=g.get("id");return c===x});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(g){var x=g.hasLocked();x||t.targets.push(g)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var p=[];this.targets.forEach(function(g){var x=g.getModel(),N=x.x,F=x.y,j=x.id;p.push({x:N,y:F,id:j})}),this.set("beforeDragNodes",p)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(g){var x=g.getEdges();x.forEach(function(N){N.isVisible()&&(t.hidenEdge[N.getID()]=!0,N.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,v.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,v.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var p=a.x-n.x+r[l].x,g=a.y-n.y+r[l].y,x={x:p,y:g};o?t.updateItem(f,x,!1):f.updatePosition(x)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var p=e.x-this.origin.x+this.originPoint.minX,g=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:p,y:g})}else{var r=t.get("group"),n=(0,v.deepMix)({},Nl.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,y.pi)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,p=f.maxX,g=f.maxY;c<r&&(r=c),l<a&&(a=l),p>n&&(n=p),g>o&&(o=g)}var x=Math.floor(r),N=Math.floor(a),F=Math.ceil(n)-Math.floor(r),j=Math.ceil(o)-Math.floor(a);return{x,y:N,width:F,height:j,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},md=null,SE={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,r=this.shouldClearStatusOnSecond;r&&(md=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,v.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){var n=e.shouldClearStatusOnSecond,a=t.getModel().id;if(md===a&&n){e.throttleClearActiveState(i,e),md=null;return}for(var o=e.activeState,s=e.inactiveState,u=r.getNodes(),f=r.getCombos(),c=r.getEdges(),l=r.get("vedges"),p=u.length,g=f.length,x=c.length,N=l.length,F=e.inactiveItems||{},j=e.activeItems||{},$=0;$<p;$++){var nt=u[$],ft=nt.getID(),Mt=nt.hasState("selected");e.resetSelected&&Mt&&r.setItemState(nt,"selected",!1),j[ft]&&(r.setItemState(nt,o,!1),delete j[ft]),s&&!F[ft]&&(r.setItemState(nt,s,!0),F[ft]=nt)}for(var $=0;$<g;$++){var Rt=f[$],Pt=Rt.getID(),Mt=Rt.hasState("selected");e.resetSelected&&Mt&&r.setItemState(Rt,"selected",!1),j[Pt]&&(r.setItemState(Rt,o,!1),delete j[Pt]),s&&!F[Pt]&&(r.setItemState(Rt,s,!0),F[Pt]=Rt)}for(var $=0;$<x;$++){var ne=c[$],xe=ne.getID();j[xe]&&(r.setItemState(ne,o,!1),delete j[xe]),s&&!F[xe]&&(r.setItemState(ne,s,!0),F[xe]=ne)}for(var $=0;$<N;$++){var he=l[$],Ne=he.getID();j[Ne]&&(r.setItemState(he,o,!1),delete j[Ne]),s&&!F[Ne]&&(r.setItemState(he,s,!0),F[Ne]=he)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete F[t.getID()]),j[t.getID()]||(r.setItemState(t,o,!0),j[t.getID()]=t);for(var He=t.getEdges(),Dr=He.length,$=0;$<Dr;$++){var ne=He[$],xe=ne.getID(),$r=void 0;ne.getSource()===t?$r=ne.getTarget():$r=ne.getSource();var zr=$r.getID();s&&F[zr]&&(r.setItemState($r,s,!1),delete F[zr]),j[zr]||(r.setItemState($r,o,!0),j[zr]=$r),F[xe]&&(r.setItemState(ne,s,!1),delete F[xe]),j[xe]||(r.setItemState(ne,o,!0),j[xe]=ne),ne.toFront()}}e.activeItems=j,e.inactiveItems=F,n&&(md=t.getModel().id),r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,v.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},bd=Math.min,$g=Math.max,Kg=Math.abs,Qg="shift",ME=["drag","shift","ctrl","alt","control"],_E={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Qg,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return ME.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Qg,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush,n=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!n||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=bd(f.x,c.x),p=$g(f.x,c.x),g=bd(f.y,c.y),x=$g(f.y,c.y),N=[],F=[];n.getNodes().forEach(function(nt){if(nt.isVisible()&&s(nt,l,p,g,x)&&o(nt,"select",t)){N.push(nt);var ft=nt.getModel();F.push(ft.id),n.setItemState(nt,u,!0)}});var j=[];this.includeEdges&&N.forEach(function(nt){var ft=nt.getOutEdges();ft.forEach(function(Mt){if(Mt.isVisible()){var Rt=Mt.getModel(),Pt=Rt.source,ne=Rt.target;F.includes(Pt)&&F.includes(ne)&&o(Mt,"select",t)&&(j.push(Mt),n.setItemState(Mt,t.selectedState,!0))}})});var $=[];this.includeCombos&&n.getCombos().forEach(function(nt){if(nt.isVisible()&&s(nt,l,p,g,x)&&o(nt,"select",t)){$.push(nt);var ft=nt.getModel();F.push(ft.id),n.setItemState(nt,u,!0)}}),this.selectedEdges=j,this.selectedNodes=N,this.selectedCombos=$,this.onSelect&&this.onSelect(N,j,$),n.emit("nodeselectchange",{selectedItems:{nodes:N,edges:j,combos:$},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:Kg(e.canvasX-t.x),height:Kg(e.canvasY-t.y),x:bd(e.canvasX,t.x),y:bd(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Jg="shift",CE=["shift","ctrl","alt","control"],AE={getDefaultCfg:function(){return{multiple:!0,trigger:Jg,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return CE.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Jg,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,v.each)(c,function(N){N!==r&&a.setItemState(N,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var p=a.findAllByState("node",t.selectedState),g=a.findAllByState("edge",t.selectedState),x=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:p,edges:g,combos:x},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var p=a.findAllByState("node",t.selectedState),g=a.findAllByState("edge",t.selectedState),x=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:p,edges:g,combos:x},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var p=a.findAllByState("node",t.selectedState),g=a.findAllByState("edge",t.selectedState),x=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:p,edges:g,combos:x},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,v.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,v.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,v.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},TE=zt,xd=.05,IE={getDefaultCfg:function(){return this.isFireFox=kp()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(N,F){return Math.hypot(F.x-N.x,F.y-N.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),p=this.graph.get("canvas"),g=p.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:g.x,y:g.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-xd*u:c=1/(1-xd*u):e.wheelDelta<0?c=1-xd*u:c=1/(1-xd*u),l=f*c;var p=this.get("minZoom")||n.get("minZoom"),g=this.get("maxZoom")||n.get("maxZoom");l>g?l=g:l<p&&(l=p);var x=this.get("enableOptimize");if(x){var N=this.get("optimizeZoom"),F=this.get("optimized"),j=n.getNodes(),$=n.getEdges(),nt=j.length,ft=$.length;if(!F){for(var Mt=0;Mt<nt;Mt++){var Rt=j[Mt];if(!Rt.destroyed)for(var Pt=Rt.get("group").get("children"),ne=Pt.length,xe=0;xe<ne;xe++){var he=Pt[xe];!he.destoryed&&!he.get("isKeyShape")&&(he.set("ori-visibility",he.get("ori-visibility")||he.get("visible")),he.hide())}}for(var Ne=0;Ne<ft;Ne++)for(var He=$[Ne],Pt=He.get("group").get("children"),ne=Pt.length,xe=0;xe<ne;xe++){var he=Pt[xe];he.set("ori-visibility",he.get("ori-visibility")||he.get("visible")),he.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Dr=setTimeout(function(){var Va=n.getZoom(),li=t.get("optimized");if(li){t.set("optimized",!1);for(var Ua=0;Ua<nt;Ua++){var hi=j[Ua],Ni=hi.get("group").get("children"),Kn=Ni.length;if(Va<N){var $a=hi.getKeyShape(),Ja=$a.get("ori-visibility");$a.set("ori-visibility",void 0),Ja&&$a.show()}else for(var ki=0;ki<Kn;ki++){var ti=Ni[ki],Ja=ti.get("ori-visibility");ti.set("ori-visibility",void 0),!ti.get("visible")&&Ja&&Ja&&ti.show()}}for(var ci=0;ci<ft;ci++){var po=$[ci],Ni=po.get("group").get("children"),Kn=Ni.length;if(Va<N){var $a=po.getKeyShape(),Ja=$a.get("ori-visibility");$a.set("ori-visibility",void 0),Ja&&$a.show()}else for(var ki=0;ki<Kn;ki++){var ti=Ni[ki];if(!ti.get("visible")){var Ja=ti.get("ori-visibility");ti.set("ori-visibility",void 0),Ja&&ti.show()}}}}},100);this.set("timeout",Dr)}if(f<=1){var $r=void 0,zr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){$r=n.findAllByState("node",a.fixState),zr=n.findAllByState("edge",a.fixState);for(var _r=f/l,pn=$r.length,hn=0;hn<pn;hn++){var Rt=$r[hn],Cr=Rt.getContainer(),Yr=Rt.getModel(),an=Rt.getOriginStyle(),on=Rt.getStateStyle(a.fixState),Sn=Rt.get("shapeFactory").getShape(Yr.type).getStateStyle(a.fixState,Rt)[a.fixState];if(a.fixAll){if(l<=1){var On=(0,v.clone)(Cr.getMatrix());On||(On=[1,0,0,0,1,0,0,0,1]);var ca=Rt.getModel(),Aa=ca.x,pi=ca.y;On=TE(On,[["t",-Aa,-pi],["s",_r,_r],["t",Aa,pi]]),Cr.setMatrix(On)}}else for(var Pt=Cr.get("children"),ne=Pt.length,xe=0;xe<ne;xe++){var he=Pt[xe],ai=void 0,gi=void 0;if(a.fixLabel){var xi=he.get("type");if(xi==="text"){ai=he.attr("fontSize")||12;var Ji=on[he.get("name")],Fi=Sn[he.get("name")],Bu=Ji?Ji.fontSize:12,is=Fi?Fi.fontSize:12,Fu=Bu||is||12;if(l<=1&&he.attr("fontSize",Fu/l),gi)break}}if(a.fixLineWidth&&he.get("isKeyShape")){gi=he.attr("lineWidth")||0;var os=on.lineWidth||Sn.lineWidth||an.lineWidth||0;if(l<=1&&he.attr("lineWidth",os/l),ai)break}}}for(var ss=zr.length,gu=0;gu<ss;gu++)for(var He=zr[gu],Cr=He.getContainer(),Pt=Cr.get("children"),Yr=He.getModel(),on=He.getStateStyle(a.fixState),Sn=He.get("shapeFactory").getShape(Yr.type).getStateStyle(a.fixState,He)[a.fixState],ne=Pt.length,xe=0;xe<ne;xe++){var he=Pt[xe],ai=void 0,gi=void 0;if(a.fixLabel||a.fixAll){var xi=he.get("type");if(xi==="text"){ai=he.attr("fontSize")||12;var Ji=on[he.get("name")],Fi=Sn[he.get("name")],Bu=Ji?Ji.fontSize:12,is=Fi?Fi.fontSize:12,Fu=Bu||is||12;if(l<=1&&he.attr("fontSize",Fu/l),gi)break}}if((a.fixLineWidth||a.fixAll)&&he.get("isKeyShape")){gi=he.attr("lineWidth")||0;var os=on.lineWidth||Sn.lineWidth||1;if(l<=1&&he.attr("lineWidth",os/l),ai)break}}}}var Ls=this.get("animate"),Hs=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},Ls,Hs),n.emit("wheelzoom",e)}}},t0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Wa(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Wa(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Wa(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,p=o.getBoundingClientRect();c>n/2?c-=p.width:c+=this.offset,l>a/2?l-=p.height:l+=this.offset;var g="".concat(c,"px"),x="".concat(l,"px");Wa(this.container,{left:g,top:x,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=ao('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Wa(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},LE=(0,y.pi)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},t0),NE=(0,y.pi)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},t0),e0="click",kE=["click","dblclick"],OE={getDefaultCfg:function(){return{trigger:e0,onChange:function(){}}},getEvents:function(){var e,t;return kE.includes(this.trigger)?t=this.trigger:(t=e0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},DE=dc.calculationItemsBBox,PE=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,v.each)(r,function(n){i(n,t)})}},RE={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,p=c.y,g=c.id;u.push({x:l,y:p,id:g})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],PE(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(p){var g=p.getModel();return a.parentId,g.id!==a.id&&!t.currentItemChildCombos.includes(g.id)});l.map(function(p){var g=p.getBBox(),x=g.centerX,N=g.centerY,F=g.width,j=u-x,$=f-N,nt=2*Math.sqrt(j*j+$*$);c+F-nt>.8*c?r.setItemState(p,t.activeState,!0):r.setItemState(p,t.activeState,!1)})}(0,v.each)(this.targets,function(p){t.updateCombo(p,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,v.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,p=f.id;s.after.combos.push({x:c,y:l,id:p}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,v.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,v.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var p=e.x-this.origin.x+this.originPoint.minX,g=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:p,y:g})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=DE(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,y.pi)((0,y.pi)({},Nl.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,y.pi)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},r0="dblclick",BE=["click","dblclick"],FE={getDefaultCfg:function(){return{trigger:r0,relayout:!0}},getEvents:function(){var e,t;return BE.includes(this.trigger)?t=this.trigger:(t=r0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},GE=dc.isPolygonsIntersect,zE=dc.pathToPoints,n0="shift",UE=["drag","shift","ctrl","alt","control"],XE=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=zE(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return GE(t,r)},YE={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:n0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return UE.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=n0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&XE(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(p){if(p.isVisible()){var g=p.getModel(),x=g.source,N=g.target;u.includes(x)&&u.includes(N)&&n(p,"select",e)&&(f.push(p),r.setItemState(p,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,y.pi)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},a0="click",WE=["click","drag"],i0=void 0,VE=["shift","ctrl","control","alt","meta",void 0],HE={getDefaultCfg:function(){return{trigger:a0,key:i0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;WE.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=a0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&VE.indexOf(e.key.toLowerCase())===-1&&(e.trigger=i0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,v.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,y.pi)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,y.pi)((0,y.pi)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,v.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,y.pi)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},o0="ctrl",jE=["shift","ctrl","alt","control"],ZE="1",qE={getDefaultCfg:function(){return{trigger:o0,combinedKey:ZE,functionName:"fitView",functionParams:[]}},getEvents:function(){return jE.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=o0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},$E=["shift","ctrl","alt","control","meta"],KE={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||$E.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Yr){return e["".concat(Yr,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),p=this.graph.get("height"),g=this.graph.get("canvas").getCanvasBBox(),x=this.scalableRange,N=this.scalableRange;x<1&&x>-1&&(x=l*x,N=p*N);var F=g.minX,j=g.maxX,$=g.minY,nt=g.maxY;f>0?j<-x?f=0:j-f<-x&&(f=j+x):f<0&&(F>l+x?f=0:F-f>l+x&&(f=F-(l+x))),c>0?nt<-N?c=0:nt-c<-N&&(c=nt+N):c<0&&($>p+N?c=0:$-c>p+N&&(c=$-(p+N))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var ft=this.get("enableOptimize");if(ft){var Mt=this.get("optimizeZoom"),Rt=this.get("optimized"),Pt=r.getNodes(),ne=r.getEdges(),xe=Pt.length,he=ne.length;if(!Rt){for(var Ne=0;Ne<xe;Ne++){var He=Pt[Ne];if(!He.destroyed)for(var Dr=He.get("group").get("children"),$r=Dr.length,zr=0;zr<$r;zr++){var _r=Dr[zr];!_r.destoryed&&!_r.get("isKeyShape")&&(_r.set("ori-visibility",_r.get("ori-visibility")||_r.get("visible")),_r.hide())}}for(var pn=0;pn<he;pn++)for(var hn=ne[pn],Dr=hn.get("group").get("children"),$r=Dr.length,zr=0;zr<$r;zr++){var _r=Dr[zr];_r.set("ori-visibility",_r.get("ori-visibility")||_r.get("visible")),_r.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Cr=setTimeout(function(){var Yr=r.getZoom(),an=t.get("optimized");if(an){t.set("optimized",!1);for(var on=0;on<xe;on++){var Sn=Pt[on],On=Sn.get("group").get("children"),ca=On.length;if(Yr<Mt){var Aa=Sn.getKeyShape(),pi=Aa.get("ori-visibility");pi&&Aa.show()}else for(var ai=0;ai<ca;ai++){var gi=On[ai],pi=gi.get("ori-visibility");!gi.get("visible")&&pi&&pi&&gi.show()}}for(var xi=0;xi<he;xi++){var Ji=ne[xi],On=Ji.get("group").get("children"),ca=On.length;if(Yr<Mt){var Aa=Ji.getKeyShape(),pi=Aa.get("ori-visibility");pi&&Aa.show()}else for(var ai=0;ai<ca;ai++){var gi=On[ai];if(!gi.get("visible")){var pi=gi.get("ori-visibility");pi&&gi.show()}}}}},100);this.set("timeout",Cr)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,v.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,v.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},QE={"drag-canvas":wE,"zoom-canvas":IE,"drag-node":EE,"activate-relations":SE,"brush-select":_E,"click-select":AE,"lasso-select":YE,tooltip:LE,"edge-tooltip":NE,"collapse-expand":OE,"drag-combo":RE,"collapse-expand-combo":FE,"create-edge":HE,"shortcuts-call":qE,"scroll-canvas":KE};(0,v.each)(QE,function(i,e){Bv(e,i)});var JE=(0,y.pi)((0,y.pi)({},wt),H0),zS=as.Grid,US=as.Minimap,XS=as.Bundling,YS=as.Menu,tS=as.Fisheye,WS=as.ToolBar,VS=as.Tooltip,eS=as.TimeBar,rS=as.ImageMinimap,nS=as.EdgeFilterLens,aS=as.SnapLine,HS=as.Legend,iS=as.Annotation,s0={version:Nl.version,Graph:Fp,TreeGraph:J1,Util:dc,Layout:Qa.Layouts,TreeLayout:R1,registerLayout:B1,Global:Nl,registerBehavior:Bv,registerCombo:V0,registerEdge:Rv,registerNode:cc,Minimap:as.Minimap,Grid:as.Grid,Bundling:as.Bundling,Menu:as.Menu,ToolBar:as.ToolBar,Tooltip:as.Tooltip,Legend:as.Legend,TimeBar:eS,SnapLine:aS,Fisheye:tS,ImageMinimap:rS,EdgeFilterLens:nS,Annotation:iS,Algorithm:JE,Arrow:Nv,Marker:kv,Shape:qc};s0.version="4.8.23";var oS=s0,jS="4.8.23"},199905:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{Graph:function(){return W},GraphWithEvent:function(){return re},algorithm:function(){return wt},comparision:function(){return tt},essence:function(){return st},generate:function(){return Q}});var wt={};ut.r(wt),ut.d(wt,{components:function(){return pe},dfs:function(){return Zt},dijkstra:function(){return Ln},dijkstraAll:function(){return Ra},findCycles:function(){return ya},floydWarshall:function(){return jr},isAcyclic:function(){return Ve},postorder:function(){return er},preorder:function(){return Pr},prim:function(){return Ot},tarjan:function(){return Ba},topsort:function(){return ka}});var st={};ut.r(st),ut.d(st,{hasSelfLoop:function(){return vr},isGraph:function(){return nn},isNullGraph:function(){return We},isSimpleGraph:function(){return kn}});var tt={};ut.r(tt),ut.d(tt,{containAllSameEdges:function(){return Et},containAllSameNodes:function(){return V},containSameEdges:function(){return yt},containSameNodes:function(){return ht},getSameEdges:function(){return E},getSameNodes:function(){return O},isGraphComplement:function(){return Nr},isGraphContainsAnother:function(){return Dt},isGraphOptionSame:function(){return w},isGraphSame:function(){return Gt}});var Q={};ut.r(Q),ut.d(Q,{getGraphComplement:function(){return Fr}});var J;(function(ee){ee.DEFAULT_EDGE_NAME="\0",ee.GRAPH_NODE="\0",ee.EDGE_KEY_DELIM=""})(J||(J={}));function X(ee,Lt){var ue=ee.get(Lt)||0;ee.set(Lt,ue+1)}function T(ee,Lt){var ue=ee.get(Lt);ue!==void 0&&(ue=ue-1,ue>0?ee.set(Lt,ue):ee.delete(Lt))}function M(ee,Lt,ue,Ee){var me=String(Lt),Ie=String(ue);if(!ee&&me>Ie){var rr=me;me=Ie,Ie=rr}return me+J.EDGE_KEY_DELIM+Ie+J.EDGE_KEY_DELIM+(Ee===void 0?J.DEFAULT_EDGE_NAME:Ee)}function C(ee,Lt,ue,Ee){var me=String(Lt),Ie=String(ue),rr={v:Lt,w:ue};if(!ee&&me>Ie){var ir=rr.v;rr.v=rr.w,rr.w=ir}return Ee!==void 0&&(rr.name=Ee),rr}function _(ee,Lt){return M(ee,Lt.v,Lt.w,Lt.name)}function b(ee){return typeof ee=="function"}var L=function(Lt){return Lt.nodes().map(function(ue){var Ee=Lt.node(ue),me=Lt.parent(ue),Ie={id:ue,value:Ee,parent:me};return Ie.value===void 0&&delete Ie.value,Ie.parent===void 0&&delete Ie.parent,Ie})},S=function(Lt){return Lt.edges().map(function(ue){var Ee=Lt.edge(ue),me={v:ue.v,w:ue.w,value:Ee,name:ue.name};return me.name===void 0&&delete me.name,me.value===void 0&&delete me.value,me})},I=function(Lt){var ue={options:{directed:Lt.isDirected(),multigraph:Lt.isMultigraph(),compound:Lt.isCompound()},nodes:L(Lt),edges:S(Lt),value:Lt.graph()};return ue.value===void 0&&delete ue.value,ue},D=function(Lt){var ue=new W(Lt.options);return Lt.value!==void 0&&ue.setGraph(Lt.value),Lt.nodes.forEach(function(Ee){ue.setNode(Ee.id,Ee.value),Ee.parent&&ue.setParent(Ee.id,Ee.parent)}),Lt.edges.forEach(function(Ee){ue.setEdge(Ee.v,Ee.w,Ee.value,Ee.name)}),ue};function P(ee,Lt){var ue=Object.keys(ee);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(ee);Lt&&(Ee=Ee.filter(function(me){return Object.getOwnPropertyDescriptor(ee,me).enumerable})),ue.push.apply(ue,Ee)}return ue}function y(ee){for(var Lt=1;Lt<arguments.length;Lt++){var ue=arguments[Lt]!=null?arguments[Lt]:{};Lt%2?P(Object(ue),!0).forEach(function(Ee){v(ee,Ee,ue[Ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(ue)):P(Object(ue)).forEach(function(Ee){Object.defineProperty(ee,Ee,Object.getOwnPropertyDescriptor(ue,Ee))})}return ee}function v(ee,Lt,ue){return Lt in ee?Object.defineProperty(ee,Lt,{value:ue,enumerable:!0,configurable:!0,writable:!0}):ee[Lt]=ue,ee}function K(ee,Lt){if(!(ee instanceof Lt))throw new TypeError("Cannot call a class as a function")}function R(ee,Lt){for(var ue=0;ue<Lt.length;ue++){var Ee=Lt[ue];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ee,Ee.key,Ee)}}function B(ee,Lt,ue){return Lt&&R(ee.prototype,Lt),ue&&R(ee,ue),Object.defineProperty(ee,"prototype",{writable:!1}),ee}var Y={compound:!1,multigraph:!1,directed:!0},W=function(){function ee(){var Lt=this,ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K(this,ee),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=J.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Lt.directed},this.isMultigraph=function(){return Lt.multigraph},this.isCompound=function(){return Lt.compound},this.setGraph=function(me){return Lt.label=me,Lt},this.graph=function(){return Lt.label},this.setDefaultNodeLabel=function(me){return b(me)?Lt.defaultNodeLabelFn=me:Lt.defaultNodeLabelFn=function(){return me},Lt},this.nodeCount=function(){return Lt.nodeCountNum},this.node=function(me){return Lt.nodesLabelMap.get(me)},this.nodes=function(){return Array.from(Lt.nodesLabelMap.keys())},this.sources=function(){return Lt.nodes().filter(function(me){var Ie;return!(!((Ie=Lt.inEdgesMap.get(me))===null||Ie===void 0)&&Ie.size)})},this.sinks=function(){return Lt.nodes().filter(function(me){var Ie;return!(!((Ie=Lt.outEdgesMap.get(me))===null||Ie===void 0)&&Ie.size)})},this.setNodes=function(me,Ie){return me.map(function(rr){return Lt.setNode(rr,Ie)}),Lt},this.hasNode=function(me){return Lt.nodesLabelMap.has(me)},this.checkCompound=function(){if(!Lt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(me){if(Lt.isCompound()){var Ie,rr=(Ie=Lt.parentMap)===null||Ie===void 0?void 0:Ie.get(me);if(rr!==Lt.GRAPH_NODE)return rr}},this.removeFromParentsChildList=function(me){var Ie=Lt.parentMap.get(me);Lt.childrenMap.get(Ie).delete(me)},this.setParent=function(me,Ie){var rr,ir;Lt.checkCompound();for(var Zr=Ie===void 0?Lt.GRAPH_NODE:Ie,En=Lt.parent(Zr);En;){if(me===En)throw new Error("Setting "+Ie+" as parent of "+me+" would create a cycle");En=Lt.parent(En)}Ie&&Lt.setNode(Ie),Lt.setNode(me),Lt.removeFromParentsChildList(me),(rr=Lt.parentMap)===null||rr===void 0||rr.set(me,Zr);var ln=Lt.childrenMap.get(Zr);return ln.set(me,!0),(ir=Lt.childrenMap)===null||ir===void 0||ir.set(Zr,ln),Lt},this.children=function(me){var Ie=me===void 0?Lt.GRAPH_NODE:me;if(Lt.isCompound()){var rr,ir=(rr=Lt.childrenMap)===null||rr===void 0?void 0:rr.get(Ie);return ir?Array.from(ir.keys()):void 0}if(Ie===Lt.GRAPH_NODE)return Lt.nodes();if(me&&Lt.hasNode(me))return[]},this.predecessors=function(me){var Ie=Lt.predecessorsMap.get(me);return Ie?Array.from(Ie.keys()):void 0},this.successors=function(me){var Ie=Lt.successorsMap.get(me);return Ie?Array.from(Ie.keys()):void 0},this.neighbors=function(me){var Ie;if(Lt.hasNode(me))return Array.from(new Set((Ie=Lt.predecessors(me))===null||Ie===void 0?void 0:Ie.concat(Lt.successors(me))))},this.isLeaf=function(me){var Ie;if(Lt.isDirected()){var rr;return!(!((rr=Lt.successors(me))===null||rr===void 0)&&rr.length)}return!(!((Ie=Lt.neighbors(me))===null||Ie===void 0)&&Ie.length)},this.filterNodes=function(me){var Ie=Lt.directed,rr=Lt.multigraph,ir=Lt.compound,Zr=new ee({directed:Ie,multigraph:rr,compound:ir});if(Zr.setGraph(Lt.graph()),Lt.nodes().forEach(function(ln){me(ln)&&Zr.setNode(ln,Lt.node(ln))}),Lt.edges().forEach(function(ln){Zr.hasNode(ln.v)&&Zr.hasNode(ln.w)&&Zr.setEdgeObj(ln,Lt.edge(ln))}),ir){var En=function(zn){for(var Gn=Lt.parent(zn);Gn!==void 0&&!Zr.hasNode(Gn);)Gn=Lt.parent(Gn);return Gn};Zr.nodes().forEach(function(ln){Zr.setParent(ln,En(ln))})}return Zr},this.setDefaultEdgeLabel=function(me){return b(me)?Lt.defaultEdgeLabelFn=me:Lt.defaultEdgeLabelFn=function(){return me},Lt},this.edgeCount=function(){return Lt.edgeCountNum},this.setEdgeObj=function(me,Ie){return Lt.setEdge(me.v,me.w,Ie,me.name)},this.setPath=function(me,Ie){return me.reduce(function(rr,ir){return Lt.setEdge(rr,ir,Ie),ir}),Lt},this.edgeFromArgs=function(me,Ie,rr){return Lt.edge({v:me,w:Ie,name:rr})},this.edge=function(me){return Lt.edgesLabelsMap.get(_(Lt.isDirected(),me))},this.hasEdge=function(me,Ie,rr){return Lt.edgesLabelsMap.has(_(Lt.isDirected(),{v:me,w:Ie,name:rr}))},this.removeEdgeObj=function(me){var Ie=me.v,rr=me.w,ir=me.name;return Lt.removeEdge(Ie,rr,ir)},this.edges=function(){return Array.from(Lt.edgesMap.values())},this.inEdges=function(me,Ie){var rr=Lt.inEdgesMap.get(me);if(rr)return Array.from(rr.values()).filter(function(ir){return!Ie||ir.v===Ie})},this.outEdges=function(me,Ie){var rr=Lt.outEdgesMap.get(me);if(rr)return Array.from(rr.values()).filter(function(ir){return!Ie||ir.w===Ie})},this.nodeEdges=function(me,Ie){var rr;if(Lt.hasNode(me))return(rr=Lt.inEdges(me,Ie))===null||rr===void 0?void 0:rr.concat(Lt.outEdges(me,Ie))},this.toJSON=function(){return I(Lt)},this.nodeInDegree=function(me){var Ie=Lt.inEdgesMap.get(me);return Ie?Ie.size:0},this.nodeOutDegree=function(me){var Ie=Lt.outEdgesMap.get(me);return Ie?Ie.size:0},this.nodeDegree=function(me){return Lt.nodeInDegree(me)+Lt.nodeOutDegree(me)},this.source=function(me){return me.v},this.target=function(me){return me.w};var Ee=y(y({},Y),ue);this.compound=Ee.compound,this.directed=Ee.directed,this.multigraph=Ee.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return B(ee,[{key:"setNode",value:function(ue,Ee){var me=this.nodesLabelMap,Ie=this.defaultNodeLabelFn,rr=this.isCompound,ir=this.parentMap,Zr=this.childrenMap,En=this.inEdgesMap,ln=this.outEdgesMap,zn=this.predecessorsMap,Gn=this.successorsMap;if(me.has(ue))return Ee!==void 0&&me.set(ue,Ee),this;if(me.set(ue,Ee||Ie(ue)),rr()){var la;ir==null||ir.set(ue,this.GRAPH_NODE),Zr==null||Zr.set(ue,new Map),Zr!=null&&Zr.has(this.GRAPH_NODE)||Zr==null||Zr.set(this.GRAPH_NODE,new Map),Zr==null||(la=Zr.get(this.GRAPH_NODE))===null||la===void 0||la.set(ue,!0)}return[En,ln,zn,Gn].forEach(function(Ha){return Ha.set(ue,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ue){var Ee=this;if(this.hasNode(ue)){var me=function(Oa){Ee.removeEdge(Oa.v,Oa.w,Oa.name)},Ie=this.inEdgesMap,rr=this.outEdgesMap,ir=this.predecessorsMap,Zr=this.successorsMap,En=this.nodesLabelMap;if(this.isCompound()){var ln,zn,Gn;this.removeFromParentsChildList(ue),(ln=this.parentMap)===null||ln===void 0||ln.delete(ue),(zn=this.children(ue))===null||zn===void 0||zn.forEach(function(qa){return Ee.setParent(qa)}),(Gn=this.childrenMap)===null||Gn===void 0||Gn.delete(ue)}var la=Ie.get(ue),Ha=rr.get(ue);Array.from(la.values()).forEach(function(qa){return me(qa)}),Array.from(Ha.values()).forEach(function(qa){return me(qa)}),En.delete(ue),Ie.delete(ue),rr.delete(ue),ir.delete(ue),Zr.delete(ue),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ue,Ee,me,Ie){var rr,ir,Zr=C(this.isDirected(),ue,Ee,Ie),En=_(this.isDirected(),Zr),ln=Zr.v,zn=Zr.w;if(this.edgesLabelsMap.has(En))return this.edgesLabelsMap.set(En,me),this;if(Ie!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(ln),this.setNode(zn),this.edgesLabelsMap.set(En,me||this.defaultEdgeLabelFn(ln,zn,Ie)),Object.freeze(Zr),this.edgesMap.set(En,Zr);var Gn=this.predecessorsMap.get(zn),la=this.successorsMap.get(ln);return X(Gn,ln),X(la,zn),(rr=this.inEdgesMap.get(zn))===null||rr===void 0||rr.set(En,Zr),(ir=this.outEdgesMap.get(ln))===null||ir===void 0||ir.set(En,Zr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ue,Ee,me){var Ie=M(this.isDirected(),ue,Ee,me),rr=this.edgesMap.get(Ie);if(rr){var ir=C(this.isDirected(),ue,Ee,me),Zr=ir.v,En=ir.w;this.edgesLabelsMap.delete(Ie),this.edgesMap.delete(Ie);var ln=this.predecessorsMap.get(En),zn=this.successorsMap.get(Zr);T(ln,Zr),T(zn,En),this.inEdgesMap.get(En).delete(Ie),this.outEdgesMap.get(Zr).delete(Ie),this.edgeCountNum-=1}return this}}]),ee}();W.fromJSON=D;function q(ee){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Lt){return typeof Lt}:function(Lt){return Lt&&typeof Symbol=="function"&&Lt.constructor===Symbol&&Lt!==Symbol.prototype?"symbol":typeof Lt},q(ee)}function H(ee,Lt){if(!(ee instanceof Lt))throw new TypeError("Cannot call a class as a function")}function et(ee,Lt){for(var ue=0;ue<Lt.length;ue++){var Ee=Lt[ue];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ee,Ee.key,Ee)}}function ct(ee,Lt,ue){return Lt&&et(ee.prototype,Lt),ue&&et(ee,ue),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function at(){return typeof Reflect!="undefined"&&Reflect.get?at=Reflect.get:at=function(Lt,ue,Ee){var me=St(Lt,ue);if(me){var Ie=Object.getOwnPropertyDescriptor(me,ue);return Ie.get?Ie.get.call(arguments.length<3?Lt:Ee):Ie.value}},at.apply(this,arguments)}function St(ee,Lt){for(;!Object.prototype.hasOwnProperty.call(ee,Lt)&&(ee=Vt(ee),ee!==null););return ee}function bt(ee,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(Lt&&Lt.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),Lt&&zt(ee,Lt)}function zt(ee,Lt){return zt=Object.setPrototypeOf||function(Ee,me){return Ee.__proto__=me,Ee},zt(ee,Lt)}function kt(ee){var Lt=gt();return function(){var Ee=Vt(ee),me;if(Lt){var Ie=Vt(this).constructor;me=Reflect.construct(Ee,arguments,Ie)}else me=Ee.apply(this,arguments);return Kt(this,me)}}function Kt(ee,Lt){if(Lt&&(q(Lt)==="object"||typeof Lt=="function"))return Lt;if(Lt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(ee)}function it(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function gt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}function Vt(ee){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},Vt(ee)}var re=function(ee){bt(ue,ee);var Lt=kt(ue);function ue(){var Ee;H(this,ue);for(var me=arguments.length,Ie=new Array(me),rr=0;rr<me;rr++)Ie[rr]=arguments[rr];return Ee=Lt.call.apply(Lt,[this].concat(Ie)),Ee.eventPool={},Ee}return ct(ue,[{key:"appendEvent",value:function(me,Ie){this.eventPool[me]||(this.eventPool[me]=[]),this.eventPool[me].push(Ie)}},{key:"removeEvent",value:function(me,Ie){if(this.eventPool[me]){var rr=this.eventPool[me].indexOf(Ie);rr>-1&&this.eventPool[me].splice(rr,1)}}},{key:"emitEvent",value:function(me){for(var Ie=arguments.length,rr=new Array(Ie>1?Ie-1:0),ir=1;ir<Ie;ir++)rr[ir-1]=arguments[ir];this.eventPool[me]&&this.eventPool[me].forEach(function(Zr){Zr.apply(void 0,rr)})}},{key:"setNode",value:function(me,Ie){return at(Vt(ue.prototype),"setNode",this).call(this,me,Ie),this.emitEvent("nodeAdd",me,Ie),this}},{key:"removeNode",value:function(me){return at(Vt(ue.prototype),"removeNode",this).call(this,me),this.emitEvent("nodeRemove",me),this}},{key:"setEdge",value:function(me,Ie,rr,ir){return at(Vt(ue.prototype),"setEdge",this).call(this,me,Ie,rr,ir),this.emitEvent("edgeAdd",me,Ie,rr,ir),this}},{key:"removeEdge",value:function(me,Ie,rr){return at(Vt(ue.prototype),"removeEdge",this).call(this,me,Ie,rr),this.emitEvent("edgeRemove",me,Ie,rr),this}}]),ue}(W);function It(ee,Lt){for(var ue=0;ue<Lt.length;ue++){var Ee=Lt[ue];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ee,Ee.key,Ee)}}function Wt(ee,Lt,ue){return Lt&&It(ee.prototype,Lt),ue&&It(ee,ue),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function $t(ee,Lt){if(!(ee instanceof Lt))throw new TypeError("Cannot call a class as a function")}var ae=Wt(function ee(){var Lt=this;$t(this,ee),this.arr=[],this.keyIndice=new Map,this.size=function(){return Lt.arr.length},this.keys=function(){return Lt.arr.map(function(ue){return ue.key})},this.has=function(ue){return Lt.keyIndice.has(ue)},this.priority=function(ue){var Ee=Lt.keyIndice.get(ue);if(Ee!==void 0)return Lt.arr[Ee].priority},this.swap=function(ue,Ee){var me=Lt.arr,Ie=Lt.keyIndice,rr=[me[ue],me[Ee]],ir=rr[0],Zr=rr[1];me[ue]=Zr,me[Ee]=ir,Ie.set(ir.key,Ee),Ie.set(Zr.key,ue)},this.innerDecrease=function(ue){for(var Ee=Lt.arr,me=Ee[ue].priority,Ie,rr=ue;rr!==0;){var ir;if(Ie=rr>>1,((ir=Ee[Ie])===null||ir===void 0?void 0:ir.priority)<me)break;Lt.swap(rr,Ie),rr=Ie}},this.heapify=function(ue){var Ee=Lt.arr,me=ue<<1,Ie=me+1,rr=ue;me<Ee.length&&(rr=Ee[me].priority<Ee[rr].priority?me:rr,Ie<Ee.length&&(rr=Ee[Ie].priority<Ee[rr].priority?Ie:rr),rr!==ue&&(Lt.swap(ue,rr),Lt.heapify(rr)))},this.min=function(){if(Lt.size()===0)throw new Error("Queue underflow");return Lt.arr[0].key},this.add=function(ue,Ee){var me=Lt.keyIndice,Ie=Lt.arr;if(!me.has(ue)){var rr=Ie.length;return me.set(ue,rr),Ie.push({key:ue,priority:Ee}),Lt.innerDecrease(rr),!0}return!1},this.removeMin=function(){Lt.swap(0,Lt.arr.length-1);var ue=Lt.arr.pop();return Lt.keyIndice.delete(ue.key),Lt.heapify(0),ue.key},this.decrease=function(ue,Ee){if(!Lt.has(ue))throw new Error("There's no key named ".concat(ue));var me=Lt.keyIndice.get(ue);if(Ee>Lt.arr[me].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ue," Old: + ").concat(Lt.arr[me].priority," New: ").concat(Ee));Lt.arr[me].priority=Ee,Lt.innerDecrease(me)}}),Bt=function(Lt,ue){var Ee=new W,me=new Map,Ie=new ae,rr;function ir(ln){var zn=ln.v===rr?ln.w:ln.v,Gn=Ie.priority(zn);if(Gn!==void 0){var la=ue(ln);la<Gn&&(me.set(zn,rr),Ie.decrease(zn,la))}}if(Lt.nodeCount()===0)return Ee;Lt.nodes().forEach(function(ln){Ie.add(ln,Number.POSITIVE_INFINITY),Ee.setNode(ln)}),Ie.decrease(Lt.nodes()[0],0);for(var Zr=!1;Ie.size()>0;){var En;if(rr=Ie.removeMin(),me.has(rr))Ee.setEdge(rr,me.get(rr));else{if(Zr)throw new Error("Input graph is not connected: "+Lt.graph());Zr=!0}(En=Lt.nodeEdges(rr))===null||En===void 0||En.forEach(ir)}return Ee},Ot=Bt,Ht=function(Lt){var ue=new Set,Ee=[],me=Lt.nodes();return me.forEach(function(Ie){for(var rr=[],ir=[Ie];ir.length>0;){var Zr=ir.pop();if(!ue.has(Zr)){var En,ln;ue.add(Zr),rr.push(Zr),(En=Lt.successors(Zr))===null||En===void 0||En.forEach(function(zn){return ir.push(zn)}),(ln=Lt.predecessors(Zr))===null||ln===void 0||ln.forEach(function(zn){return ir.push(zn)})}}rr.length&&Ee.push(rr)}),Ee},pe=Ht,ve=function ee(Lt,ue,Ee,me,Ie,rr){me.includes(ue)||(me.push(ue),Ee||rr.push(ue),Ie(ue).forEach(function(ir){return ee(Lt,ir,Ee,me,Ie,rr)}),Ee&&rr.push(ue))},Tt=function(Lt,ue,Ee){var me=Array.isArray(ue)?ue:[ue],Ie=function(En){return Lt.isDirected()?Lt.successors(En):Lt.neighbors(En)},rr=[],ir=[];return me.forEach(function(Zr){if(Lt.hasNode(Zr))ve(Lt,Zr,Ee==="post",ir,Ie,rr);else throw new Error("Graph does not have node: "+Zr)}),rr},Zt=Tt;function Ce(ee,Lt){return fr(ee)||$e(ee,Lt)||se(ee,Lt)||Ut()}function Ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(ee,Lt){if(ee){if(typeof ee=="string")return _e(ee,Lt);var ue=Object.prototype.toString.call(ee).slice(8,-1);if(ue==="Object"&&ee.constructor&&(ue=ee.constructor.name),ue==="Map"||ue==="Set")return Array.from(ee);if(ue==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ue))return _e(ee,Lt)}}function _e(ee,Lt){(Lt==null||Lt>ee.length)&&(Lt=ee.length);for(var ue=0,Ee=new Array(Lt);ue<Lt;ue++)Ee[ue]=ee[ue];return Ee}function $e(ee,Lt){var ue=ee==null?null:typeof Symbol!="undefined"&&ee[Symbol.iterator]||ee["@@iterator"];if(ue!=null){var Ee=[],me=!0,Ie=!1,rr,ir;try{for(ue=ue.call(ee);!(me=(rr=ue.next()).done)&&(Ee.push(rr.value),!(Lt&&Ee.length===Lt));me=!0);}catch(Zr){Ie=!0,ir=Zr}finally{try{!me&&ue.return!=null&&ue.return()}finally{if(Ie)throw ir}}return Ee}}function fr(ee){if(Array.isArray(ee))return ee}var gr=function(){return 1},Yt=function(Lt,ue,Ee,me){return Mr(Lt,ue,Ee||gr,me||function(Ie){return Lt.outEdges(Ie)})},Mr=function(Lt,ue,Ee,me){var Ie=new Map,rr=new ae,ir,Zr,En=function(Gn){var la=Gn.v!==ir?Gn.v:Gn.w,Ha=Ie.get(la),qa=Ee(Gn),Oa=Zr.distance+qa;if(qa<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Gn+" Weight: "+qa);Oa<Ha.distance&&(Ha.distance=Oa,Ha.predecessor=ir,rr.decrease(la,Oa))};for(Lt.nodes().forEach(function(zn){var Gn=zn===ue?0:Number.POSITIVE_INFINITY;Ie.set(zn,{distance:Gn}),rr.add(zn,Gn)});rr.size()>0&&(ir=rr.removeMin(),Zr=Ie.get(ir),!(Zr&&Zr.distance===Number.POSITIVE_INFINITY));)me(ir).forEach(En);var ln={};return Array.from(Ie.entries()).forEach(function(zn){var Gn=Ce(zn,2),la=Gn[0],Ha=Gn[1];return ln[String(la)]=Ha,ln}),ln},Ln=Yt,Yn=function(Lt,ue,Ee){var me={};return Lt.nodes().forEach(function(Ie){return me[String(Ie)]=Ln(Lt,Ie,ue,Ee),me}),me},Ra=Yn,ba=function(Lt){var ue=0,Ee=[],me=new Map,Ie=[];function rr(ir){var Zr,En={onStack:!0,lowlink:ue,index:ue};if(me.set(ir,En),ue+=1,Ee.push(ir),(Zr=Lt.successors(ir))===null||Zr===void 0||Zr.forEach(function(la){var Ha;if(me.has(la)){if(!((Ha=me.get(la))===null||Ha===void 0)&&Ha.onStack){var Oa=me.get(la);En.lowlink=Math.min(En.lowlink,Oa.index)}}else{rr(la);var qa=me.get(la);En.lowlink=Math.min(En.lowlink,qa.lowlink)}}),En.lowlink===En.index){var ln=[],zn;do{zn=Ee.pop();var Gn=me.get(zn);Gn.onStack=!1,ln.push(zn)}while(ir!==zn);Ie.push(ln)}}return Lt.nodes().forEach(function(ir){me.has(ir)||rr(ir)}),Ie},Ba=ba,xa=function(Lt){return Ba(Lt).filter(function(ue){return ue.length>1||ue.length===1&&Lt.hasEdge(ue[0],ue[0])})},ya=xa;function Na(ee){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Lt){return typeof Lt}:function(Lt){return Lt&&typeof Symbol=="function"&&Lt.constructor===Symbol&&Lt!==Symbol.prototype?"symbol":typeof Lt},Na(ee)}function Ta(ee,Lt){for(var ue=0;ue<Lt.length;ue++){var Ee=Lt[ue];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ee,Ee.key,Ee)}}function hr(ee,Lt,ue){return Lt&&Ta(ee.prototype,Lt),ue&&Ta(ee,ue),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function Br(ee,Lt){if(!(ee instanceof Lt))throw new TypeError("Cannot call a class as a function")}function cn(ee,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(Lt&&Lt.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),Lt&&An(ee,Lt)}function Cn(ee){var Lt=Fa();return function(){var Ee=ua(ee),me;if(Lt){var Ie=ua(this).constructor;me=Reflect.construct(Ee,arguments,Ie)}else me=Ee.apply(this,arguments);return Qn(this,me)}}function Qn(ee,Lt){if(Lt&&(Na(Lt)==="object"||typeof Lt=="function"))return Lt;if(Lt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bn(ee)}function Bn(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function ta(ee){var Lt=typeof Map=="function"?new Map:void 0;return ta=function(Ee){if(Ee===null||!wa(Ee))return Ee;if(typeof Ee!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Lt!="undefined"){if(Lt.has(Ee))return Lt.get(Ee);Lt.set(Ee,me)}function me(){return sa(Ee,arguments,ua(this).constructor)}return me.prototype=Object.create(Ee.prototype,{constructor:{value:me,enumerable:!1,writable:!0,configurable:!0}}),An(me,Ee)},ta(ee)}function sa(ee,Lt,ue){return Fa()?sa=Reflect.construct:sa=function(me,Ie,rr){var ir=[null];ir.push.apply(ir,Ie);var Zr=Function.bind.apply(me,ir),En=new Zr;return rr&&An(En,rr.prototype),En},sa.apply(null,arguments)}function Fa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}function wa(ee){return Function.toString.call(ee).indexOf("[native code]")!==-1}function An(ee,Lt){return An=Object.setPrototypeOf||function(Ee,me){return Ee.__proto__=me,Ee},An(ee,Lt)}function ua(ee){return ua=Object.setPrototypeOf?Object.getPrototypeOf:function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},ua(ee)}var ra=function(ee){cn(ue,ee);var Lt=Cn(ue);function ue(){return Br(this,ue),Lt.apply(this,arguments)}return hr(ue)}(ta(Error));function Fn(ee){var Lt=new Set,ue=new Set,Ee=[];function me(Ie){if(ue.has(Ie))throw new ra;if(!Lt.has(Ie)){var rr;ue.add(Ie),Lt.add(Ie),(rr=ee.predecessors(Ie))===null||rr===void 0||rr.forEach(me),ue.delete(Ie),Ee.push(Ie)}}if(ee.sinks().forEach(me),Lt.size!==ee.nodeCount())throw new ra;return Ee}var ka=Fn,U=function(Lt){try{ka(Lt)}catch(ue){if(ue instanceof ra)return!1;throw ue}return!0},Ve=U,we=function(Lt,ue){return Zt(Lt,ue,"post")},er=we,Je=function(Lt,ue){return Zt(Lt,ue,"pre")},Pr=Je,Or=function(){return 1};function rn(ee,Lt,ue){return fn(ee,Lt||Or,ue||function(Ee){return ee.outEdges(Ee)})}function fn(ee,Lt,ue){var Ee={},me=ee.nodes();return me.forEach(function(Ie){var rr=String(Ie);Ee[rr]={},Ee[rr][rr]={distance:0},me.forEach(function(ir){Ie!==ir&&(Ee[rr][String(ir)]={distance:Number.POSITIVE_INFINITY})}),ue(Ie).forEach(function(ir){var Zr=ir.v===Ie?ir.w:ir.v,En=Lt(ir);Ee[rr][String(Zr)]={distance:En,predecessor:Ie}})}),me.forEach(function(Ie){var rr=String(Ie),ir=Ee[rr];me.forEach(function(Zr){var En=String(Zr),ln=Ee[En];me.forEach(function(zn){var Gn=String(zn),la=ln[rr],Ha=ir[Gn],qa=ln[Gn],Oa=la.distance+Ha.distance;Oa<qa.distance&&(qa.distance=Oa,qa.predecessor=Ha.predecessor)})})}),Ee}var jr=rn,ht=function(Lt,ue){for(var Ee=Lt.nodes(),me=0;me<Ee.length;me++){var Ie=Ee[me];if(ue.hasNode(Ie))return!0}return!1},yt=function(Lt,ue){for(var Ee=Lt.edges(),me=0;me<Ee.length;me++){var Ie=Ee[me];if(ue.hasEdge(Ie.v,Ie.w,Ie.name))return!0}return!1},O=function(Lt,ue){var Ee=Lt.nodes(),me=Ee.filter(function(Ie){return ue.hasNode(Ie)});return me},E=function(Lt,ue){var Ee=Lt.edges(),me=Ee.filter(function(Ie){return ue.hasEdge(Ie.v,Ie.w,Ie.name)});return me},w=function(Lt,ue){return Lt.isCompound()===ue.isCompound()&&Lt.isDirected()===ue.isDirected()&&Lt.isMultigraph()===ue.isMultigraph()},V=function(Lt,ue){var Ee=O(Lt,ue);return Ee.length===Lt.nodes().length},Et=function(Lt,ue){var Ee=E(Lt,ue);return Ee.length===Lt.edges().length},Gt=function(Lt,ue){return w(Lt,ue)&&Lt.nodeCount()===ue.nodeCount()&&V(Lt,ue)&&Lt.edgeCount()===ue.edgeCount()&&Et(Lt,ue)},Dt=function(Lt,ue){return V(Lt,ue)&&Et(Lt,ue)};function ie(ee,Lt){return pr(ee)||Ur(ee,Lt)||Te(ee,Lt)||Ge()}function Ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Te(ee,Lt){if(ee){if(typeof ee=="string")return ar(ee,Lt);var ue=Object.prototype.toString.call(ee).slice(8,-1);if(ue==="Object"&&ee.constructor&&(ue=ee.constructor.name),ue==="Map"||ue==="Set")return Array.from(ee);if(ue==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ue))return ar(ee,Lt)}}function ar(ee,Lt){(Lt==null||Lt>ee.length)&&(Lt=ee.length);for(var ue=0,Ee=new Array(Lt);ue<Lt;ue++)Ee[ue]=ee[ue];return Ee}function Ur(ee,Lt){var ue=ee==null?null:typeof Symbol!="undefined"&&ee[Symbol.iterator]||ee["@@iterator"];if(ue!=null){var Ee=[],me=!0,Ie=!1,rr,ir;try{for(ue=ue.call(ee);!(me=(rr=ue.next()).done)&&(Ee.push(rr.value),!(Lt&&Ee.length===Lt));me=!0);}catch(Zr){Ie=!0,ir=Zr}finally{try{!me&&ue.return!=null&&ue.return()}finally{if(Ie)throw ir}}return Ee}}function pr(ee){if(Array.isArray(ee))return ee}function nn(ee){return ee instanceof W}function kn(ee){if(ee.isMultigraph())return!1;for(var Lt=ee.edges(),ue=new Map,Ee=0;Ee<Lt.length;Ee++){var me=Lt[Ee];if(me.v===me.w)return!1;var Ie=[me.v,me.w].sort(),rr=ie(Ie,2),ir=rr[0],Zr=rr[1],En="".concat(ir,"-").concat(Zr);if(ue.has(En))return!1;ue.set(En,!0)}return!0}function We(ee){return ee.nodes().length===0}function vr(ee){for(var Lt=ee.edges(),ue=0;ue<Lt.length;ue++){var Ee=Lt[ue];if(Ee.v===Ee.w)return!0}return!1}var Nr=function(Lt,ue){if(!kn(Lt)||!kn(ue)||!V(Lt,ue)||yt(Lt,ue))return!1;var Ee=Lt.nodeCount();return Lt.edgeCount()+ue.edgeCount()===Ee*(Ee-1)/2},Fr=function(Lt){if(!kn(Lt))return null;for(var ue=Lt.nodeCount(),Ee=new W({compound:Lt.isCompound(),directed:Lt.isDirected(),multigraph:Lt.isMultigraph()}),me=Lt.nodes(),Ie=0;Ie<ue;Ie++){var rr=me[Ie];Ee.setNode(rr,Lt.node(rr));for(var ir=Ie+1;ir<ue;ir++){var Zr=me[ir];Lt.hasEdge(rr,Zr)||Ee.setEdge(rr,Zr)}}return Ee}},981746:function(Sr){(function(ut,wt){Sr.exports=wt()})(typeof self!="undefined"?self:this,function(){return function(G){var ut={};function wt(st){if(ut[st])return ut[st].exports;var tt=ut[st]={i:st,l:!1,exports:{}};return G[st].call(tt.exports,tt,tt.exports,wt),tt.l=!0,tt.exports}return wt.m=G,wt.c=ut,wt.d=function(st,tt,Q){wt.o(st,tt)||Object.defineProperty(st,tt,{configurable:!1,enumerable:!0,get:Q})},wt.n=function(st){var tt=st&&st.__esModule?function(){return st.default}:function(){return st};return wt.d(tt,"a",tt),tt},wt.o=function(st,tt){return Object.prototype.hasOwnProperty.call(st,tt)},wt.p="",wt(wt.s=5)}([function(G,ut){function wt(st,tt,Q,J){return J===void 0&&(J="height"),Q==="center"?(st[J]+tt[J])/2:st.height}G.exports={assign:Object.assign,getHeight:wt}},function(G,ut,wt){var st=wt(3),tt=function(){function Q(X,T){T===void 0&&(T={});var M=this;M.options=T,M.rootNode=st(X,T)}var J=Q.prototype;return J.execute=function(){throw new Error("please override this method")},Q}();G.exports=tt},function(G,ut,wt){var st=wt(4),tt=["LR","RL","TB","BT","H","V"],Q=["LR","RL","H"],J=function(M){return Q.indexOf(M)>-1},X=tt[0];G.exports=function(T,M,C){var _=M.direction||X;if(M.isHorizontal=J(_),_&&tt.indexOf(_)===-1)throw new TypeError("Invalid direction: "+_);if(_===tt[0])C(T,M);else if(_===tt[1])C(T,M),T.right2left();else if(_===tt[2])C(T,M);else if(_===tt[3])C(T,M),T.bottom2top();else if(_===tt[4]||_===tt[5]){var b=st(T,M),L=b.left,S=b.right;C(L,M),C(S,M),M.isHorizontal?L.right2left():L.bottom2top(),S.translate(L.x-S.x,L.y-S.y),T.x=L.x,T.y=S.y;var I=T.getBoundingBox();M.isHorizontal?I.top<0&&T.translate(0,-I.top):I.left<0&&T.translate(-I.left,0)}var D=M.fixedRoot;return D===void 0&&(D=!0),D&&T.translate(-(T.x+T.width/2+T.hgap),-(T.y+T.height/2+T.vgap)),T}},function(G,ut,wt){var st=wt(0),tt=18,Q=tt*2,J=tt,X={getId:function(_){return _.id||_.name},getPreH:function(_){return _.preH||0},getPreV:function(_){return _.preV||0},getHGap:function(_){return _.hgap||J},getVGap:function(_){return _.vgap||J},getChildren:function(_){return _.children},getHeight:function(_){return _.height||Q},getWidth:function(_){var b=_.label||" ";return _.width||b.split("").length*tt}};function T(C,_){var b=this;if(b.vgap=b.hgap=0,C instanceof T)return C;b.data=C;var L=_.getHGap(C),S=_.getVGap(C);return b.preH=_.getPreH(C),b.preV=_.getPreV(C),b.width=_.getWidth(C),b.height=_.getHeight(C),b.width+=b.preH,b.height+=b.preV,b.id=_.getId(C),b.x=b.y=0,b.depth=0,b.children||(b.children=[]),b.addGap(L,S),b}st.assign(T.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(_,b){var L=this;L.hgap+=_,L.vgap+=b,L.width+=2*_,L.height+=2*b},eachNode:function(_){for(var b=this,L=[b],S;S=L.shift();)_(S),L=S.children.concat(L)},DFTraverse:function(_){this.eachNode(_)},BFTraverse:function(_){for(var b=this,L=[b],S;S=L.shift();)_(S),L=L.concat(S.children)},getBoundingBox:function(){var _={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(b){_.left=Math.min(_.left,b.x),_.top=Math.min(_.top,b.y),_.width=Math.max(_.width,b.x+b.width),_.height=Math.max(_.height,b.y+b.height)}),_},translate:function(_,b){_===void 0&&(_=0),b===void 0&&(b=0),this.eachNode(function(L){L.x+=_,L.y+=b,L.x+=L.preH,L.y+=L.preV})},right2left:function(){var _=this,b=_.getBoundingBox();_.eachNode(function(L){L.x=L.x-(L.x-b.left)*2-L.width}),_.translate(b.width,0)},bottom2top:function(){var _=this,b=_.getBoundingBox();_.eachNode(function(L){L.y=L.y-(L.y-b.top)*2-L.height}),_.translate(0,b.height)}});function M(C,_,b){_===void 0&&(_={}),_=st.assign({},X,_);var L=new T(C,_),S=[L],I;if(!b&&!C.collapsed){for(;I=S.shift();)if(!I.data.collapsed){var D=_.getChildren(I.data),P=D?D.length:0;if(I.children=new Array(P),D&&P)for(var y=0;y<P;y++){var v=new T(D[y],_);I.children[y]=v,S.push(v),v.parent=I,v.depth=I.depth+1}}}return L}G.exports=M},function(G,ut,wt){var st=wt(3);G.exports=function(tt,Q){for(var J=st(tt.data,Q,!0),X=st(tt.data,Q,!0),T=tt.children.length,M=Math.round(T/2),C=Q.getSide||function(S,I){return I<M?"right":"left"},_=0;_<T;_++){var b=tt.children[_],L=C(b,_);L==="right"?X.children.push(b):J.children.push(b)}return J.eachNode(function(S){S.isRoot()||(S.side="left")}),X.eachNode(function(S){S.isRoot()||(S.side="right")}),{left:J,right:X}}},function(G,ut,wt){var st={compactBox:wt(6),dendrogram:wt(8),indented:wt(10),mindmap:wt(12)};G.exports=st},function(G,ut,wt){function st(b,L){b.prototype=Object.create(L.prototype),b.prototype.constructor=b,tt(b,L)}function tt(b,L){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,D){return I.__proto__=D,I},tt(b,L)}var Q=wt(1),J=wt(7),X=wt(2),T=wt(0),M=function(b){function L(){return b.apply(this,arguments)||this}st(L,b);var S=L.prototype;return S.execute=function(){var D=this;return X(D.rootNode,D.options,J)},L}(Q),C={};function _(b,L){return L=T.assign({},C,L),new M(b,L).execute()}G.exports=_},function(G,ut){function wt(T,M,C,_){_===void 0&&(_=[]);var b=this;b.w=T||0,b.h=M||0,b.y=C||0,b.x=0,b.c=_||[],b.cs=_.length,b.prelim=0,b.mod=0,b.shift=0,b.change=0,b.tl=null,b.tr=null,b.el=null,b.er=null,b.msel=0,b.mser=0}wt.fromNode=function(T,M){if(!T)return null;var C=[];return T.children.forEach(function(_){C.push(wt.fromNode(_,M))}),M?new wt(T.height,T.width,T.x,C):new wt(T.width,T.height,T.y,C)};function st(T,M,C){C?T.y+=M:T.x+=M,T.children.forEach(function(_){st(_,M,C)})}function tt(T,M){var C=M?T.y:T.x;return T.children.forEach(function(_){C=Math.min(tt(_,M),C)}),C}function Q(T,M){var C=tt(T,M);st(T,-C,M)}function J(T,M,C){C?M.y=T.x:M.x=T.x,T.c.forEach(function(_,b){J(_,M.children[b],C)})}function X(T,M,C){C===void 0&&(C=0),M?(T.x=C,C+=T.width):(T.y=C,C+=T.height),T.children.forEach(function(_){X(_,M,C)})}G.exports=function(T,M){M===void 0&&(M={});var C=M.isHorizontal;function _(H){if(H.cs===0){b(H);return}_(H.c[0]);for(var et=W(P(H.c[0].el),0,null),ct=1;ct<H.cs;++ct){_(H.c[ct]);var at=P(H.c[ct].er);L(H,ct,et),et=W(at,ct,et)}K(H),b(H)}function b(H){H.cs===0?(H.el=H,H.er=H,H.msel=H.mser=0):(H.el=H.c[0].el,H.msel=H.c[0].msel,H.er=H.c[H.cs-1].er,H.mser=H.c[H.cs-1].mser)}function L(H,et,ct){for(var at=H.c[et-1],St=at.mod,bt=H.c[et],zt=bt.mod;at!==null&&bt!==null;){P(at)>ct.low&&(ct=ct.nxt);var kt=St+at.prelim+at.w-(zt+bt.prelim);kt>0&&(zt+=kt,S(H,et,ct.index,kt));var Kt=P(at),it=P(bt);Kt<=it&&(at=D(at),at!==null&&(St+=at.mod)),Kt>=it&&(bt=I(bt),bt!==null&&(zt+=bt.mod))}!at&&bt?y(H,et,bt,zt):at&&!bt&&v(H,et,at,St)}function S(H,et,ct,at){H.c[et].mod+=at,H.c[et].msel+=at,H.c[et].mser+=at,B(H,et,ct,at)}function I(H){return H.cs===0?H.tl:H.c[0]}function D(H){return H.cs===0?H.tr:H.c[H.cs-1]}function P(H){return H.y+H.h}function y(H,et,ct,at){var St=H.c[0].el;St.tl=ct;var bt=at-ct.mod-H.c[0].msel;St.mod+=bt,St.prelim-=bt,H.c[0].el=H.c[et].el,H.c[0].msel=H.c[et].msel}function v(H,et,ct,at){var St=H.c[et].er;St.tr=ct;var bt=at-ct.mod-H.c[et].mser;St.mod+=bt,St.prelim-=bt,H.c[et].er=H.c[et-1].er,H.c[et].mser=H.c[et-1].mser}function K(H){H.prelim=(H.c[0].prelim+H.c[0].mod+H.c[H.cs-1].mod+H.c[H.cs-1].prelim+H.c[H.cs-1].w)/2-H.w/2}function R(H,et){et+=H.mod,H.x=H.prelim+et,Y(H);for(var ct=0;ct<H.cs;ct++)R(H.c[ct],et)}function B(H,et,ct,at){if(ct!==et-1){var St=et-ct;H.c[ct+1].shift+=at/St,H.c[et].shift-=at/St,H.c[et].change-=at-at/St}}function Y(H){for(var et=0,ct=0,at=0;at<H.cs;at++)et+=H.c[at].shift,ct+=et+H.c[at].change,H.c[at].mod+=ct}function W(H,et,ct){for(;ct!==null&&H>=ct.low;)ct=ct.nxt;return{low:H,index:et,nxt:ct}}X(T,C);var q=wt.fromNode(T,C);return _(q),R(q,0),J(q,T,C),Q(T,C),T}},function(G,ut,wt){function st(b,L){b.prototype=Object.create(L.prototype),b.prototype.constructor=b,tt(b,L)}function tt(b,L){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,D){return I.__proto__=D,I},tt(b,L)}var Q=wt(1),J=wt(9),X=wt(2),T=wt(0),M=function(b){function L(){return b.apply(this,arguments)||this}st(L,b);var S=L.prototype;return S.execute=function(){var D=this;return D.rootNode.width=0,X(D.rootNode,D.options,J)},L}(Q),C={};function _(b,L){return L=T.assign({},C,L),new M(b,L).execute()}G.exports=_},function(G,ut,wt){var st=wt(0);function tt(X,T){X===void 0&&(X=0),T===void 0&&(T=[]);var M=this;M.x=M.y=0,M.leftChild=M.rightChild=null,M.height=0,M.children=T}var Q={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function J(X,T,M){M?(T.x=X.x,T.y=X.y):(T.x=X.y,T.y=X.x),X.children.forEach(function(C,_){J(C,T.children[_],M)})}G.exports=function(X,T){T===void 0&&(T={}),T=st.assign({},Q,T);var M=0;function C(I){if(!I)return null;I.width=0,I.depth&&I.depth>M&&(M=I.depth);var D=I.children,P=D.length,y=new tt(I.height,[]);return D.forEach(function(v,K){var R=C(v);y.children.push(R),K===0&&(y.leftChild=R),K===P-1&&(y.rightChild=R)}),y.originNode=I,y.isLeaf=I.isLeaf(),y}function _(I){if(I.isLeaf||I.children.length===0)I.drawingDepth=M;else{var D=I.children.map(function(y){return _(y)}),P=Math.min.apply(null,D);I.drawingDepth=P-1}return I.drawingDepth}var b;function L(I){I.x=I.drawingDepth*T.rankSep,I.isLeaf?(I.y=0,b&&(I.y=b.y+b.height+T.nodeSep,I.originNode.parent!==b.originNode.parent&&(I.y+=T.subTreeSep)),b=I):(I.children.forEach(function(D){L(D)}),I.y=(I.leftChild.y+I.rightChild.y)/2)}var S=C(X);return _(S),L(S),J(S,X,T.isHorizontal),X}},function(G,ut,wt){function st(S,I){S.prototype=Object.create(I.prototype),S.prototype.constructor=S,tt(S,I)}function tt(S,I){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,y){return P.__proto__=y,P},tt(S,I)}var Q=wt(1),J=wt(11),X=wt(4),T=wt(0),M=["LR","RL","H"],C=M[0],_=function(S){function I(){return S.apply(this,arguments)||this}st(I,S);var D=I.prototype;return D.execute=function(){var y=this,v=y.options,K=y.rootNode;v.isHorizontal=!0;var R=v.indent,B=R===void 0?20:R,Y=v.dropCap,W=Y===void 0?!0:Y,q=v.direction,H=q===void 0?C:q,et=v.align;if(H&&M.indexOf(H)===-1)throw new TypeError("Invalid direction: "+H);if(H===M[0])J(K,B,W,et);else if(H===M[1])J(K,B,W,et),K.right2left();else if(H===M[2]){var ct=X(K,v),at=ct.left,St=ct.right;J(at,B,W,et),at.right2left(),J(St,B,W,et);var bt=at.getBoundingBox();St.translate(bt.width,0),K.x=St.x-K.width/2}return K},I}(Q),b={};function L(S,I){return I=T.assign({},b,I),new _(S,I).execute()}G.exports=L},function(G,ut,wt){var st=wt(0);function tt(Q,J,X,T,M){var C=typeof X=="function"?X(Q):X*Q.depth;if(!T)try{if(Q.id===Q.parent.children[0].id){Q.x+=C,Q.y=J?J.y:0;return}}catch(L){}if(Q.x+=C,J){if(Q.y=J.y+st.getHeight(J,Q,M),J.parent&&Q.parent.id!==J.parent.id){var _=J.parent,b=_.y+st.getHeight(_,Q,M);Q.y=b>Q.y?b:Q.y}}else Q.y=0}G.exports=function(Q,J,X,T){var M=null;Q.eachNode(function(C){tt(C,M,J,X,T),M=C})}},function(G,ut,wt){function st(b,L){b.prototype=Object.create(L.prototype),b.prototype.constructor=b,tt(b,L)}function tt(b,L){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,D){return I.__proto__=D,I},tt(b,L)}var Q=wt(1),J=wt(13),X=wt(2),T=wt(0),M=function(b){function L(){return b.apply(this,arguments)||this}st(L,b);var S=L.prototype;return S.execute=function(){var D=this;return X(D.rootNode,D.options,J)},L}(Q),C={};function _(b,L){return L=T.assign({},C,L),new M(b,L).execute()}G.exports=_},function(G,ut,wt){var st=wt(0);function tt(X,T){var M=0;return X.children.length?X.children.forEach(function(C){M+=tt(C,T)}):M=X.height,X._subTreeSep=T.getSubTreeSep(X.data),X.totalHeight=Math.max(X.height,M)+2*X._subTreeSep,X.totalHeight}function Q(X){var T=X.children,M=T.length;if(M){T.forEach(function(I){Q(I)});var C=T[0],_=T[M-1],b=_.y-C.y+_.height,L=0;if(T.forEach(function(I){L+=I.totalHeight}),b>X.height)X.y=C.y+b/2-X.height/2;else if(T.length!==1||X.height>L){var S=X.y+(X.height-b)/2-C.y;T.forEach(function(I){I.translate(0,S)})}else X.y=(C.y+C.height/2+_.y+_.height/2)/2-X.height/2}}var J={getSubTreeSep:function(){return 0}};G.exports=function(X,T){T===void 0&&(T={}),T=st.assign({},J,T),X.parent={x:0,width:0,height:0,y:0},X.BFTraverse(function(M){M.x=M.parent.x+M.parent.width}),X.parent=null,tt(X,T),X.startY=0,X.y=X.totalHeight/2-X.height/2,X.eachNode(function(M){var C=M.children,_=C.length;if(_){var b=C[0];if(b.startY=M.startY+M._subTreeSep,_===1)b.y=M.y+M.height/2-b.height/2;else{b.y=b.startY+b.totalHeight/2-b.height/2;for(var L=1;L<_;L++){var S=C[L];S.startY=C[L-1].startY+C[L-1].totalHeight,S.y=S.startY+S.totalHeight/2-S.height/2}}}}),Q(X)}}])})},483360:function(Sr,G,ut){"use strict";var wt=this&&this.__createBinding||(Object.create?function(Q,J,X,T){T===void 0&&(T=X);var M=Object.getOwnPropertyDescriptor(J,X);(!M||("get"in M?!J.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return J[X]}}),Object.defineProperty(Q,T,M)}:function(Q,J,X,T){T===void 0&&(T=X),Q[T]=J[X]}),st=this&&this.__exportStar||function(Q,J){for(var X in Q)X!=="default"&&!Object.prototype.hasOwnProperty.call(J,X)&&wt(J,Q,X)};Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var tt=ut(695326);Object.defineProperty(G,"registerLayout",{enumerable:!0,get:function(){return tt.registerLayout}}),Object.defineProperty(G,"unRegisterLayout",{enumerable:!0,get:function(){return tt.unRegisterLayout}}),Object.defineProperty(G,"getLayoutByName",{enumerable:!0,get:function(){return tt.getLayoutByName}}),st(ut(702584),G)},762329:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Base=void 0;var ut=function(){function wt(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return wt.prototype.layout=function(st){return this.init(st),this.execute(!0)},wt.prototype.init=function(st){this.nodes=st.nodes||[],this.edges=st.edges||[],this.combos=st.combos||[],this.comboEdges=st.comboEdges||[],this.hiddenNodes=st.hiddenNodes||[],this.hiddenEdges=st.hiddenEdges||[],this.hiddenCombos=st.hiddenCombos||[],this.vedges=st.vedges||[]},wt.prototype.execute=function(st){},wt.prototype.executeWithWorker=function(){},wt.prototype.getDefaultCfg=function(){return{}},wt.prototype.updateCfg=function(st){st&&Object.assign(this,st)},wt.prototype.getType=function(){return"base"},wt.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},wt}();G.Base=ut},964885:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var M=function(C,_){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,L){b.__proto__=L}||function(b,L){for(var S in L)Object.prototype.hasOwnProperty.call(L,S)&&(b[S]=L[S])},M(C,_)};return function(C,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");M(C,_);function b(){this.constructor=C}C.prototype=_===null?Object.create(_):(b.prototype=_.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.CircularLayout=void 0;var st=ut(762329),tt=ut(449784);function Q(M,C,_,b){M.forEach(function(L,S){M[S].children=[],M[S].parent=[]}),b?C.forEach(function(L){var S=(0,tt.getEdgeTerminal)(L,"source"),I=(0,tt.getEdgeTerminal)(L,"target"),D=0;S&&(D=_[S]);var P=0;I&&(P=_[I]);var y=M[D].children,v=M[P].parent;y.push(M[P].id),v.push(M[D].id)}):C.forEach(function(L){var S=(0,tt.getEdgeTerminal)(L,"source"),I=(0,tt.getEdgeTerminal)(L,"target"),D=0;S&&(D=_[S]);var P=0;I&&(P=_[I]);var y=M[D].children,v=M[P].children;y.push(M[P].id),v.push(M[D].id)})}function J(M,C,_){for(var b=_.length,L=0;L<b;L++){var S=(0,tt.getEdgeTerminal)(_[L],"source"),I=(0,tt.getEdgeTerminal)(_[L],"target");if(M.id===S&&C.id===I||C.id===S&&M.id===I)return!0}return!1}function X(M,C){var _=M.degree,b=C.degree;return _<b?-1:_>b?1:0}var T=function(M){wt(C,M);function C(_){var b=M.call(this)||this;return b.radius=null,b.nodeSize=void 0,b.startRadius=null,b.endRadius=null,b.startAngle=0,b.endAngle=2*Math.PI,b.clockwise=!0,b.divisions=1,b.ordering=null,b.angleRatio=1,b.nodes=[],b.edges=[],b.nodeMap={},b.degrees=[],b.width=300,b.height=300,b.updateCfg(_),b}return C.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},C.prototype.execute=function(){var _,b=this,L=b.nodes,S=b.edges,I=L.length;if(I===0){b.onLayoutEnd&&b.onLayoutEnd();return}!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight),b.center||(b.center=[b.width/2,b.height/2]);var D=b.center;if(I===1){L[0].x=D[0],L[0].y=D[1],b.onLayoutEnd&&b.onLayoutEnd();return}var P=b.radius,y=b.startRadius,v=b.endRadius,K=b.divisions,R=b.startAngle,B=b.endAngle,Y=b.angleRatio,W=b.ordering,q=b.clockwise,H=b.nodeSpacing,et=b.nodeSize,ct=(B-R)/I,at={};L.forEach(function($t,ae){at[$t.id]=ae}),b.nodeMap=at;var St=(0,tt.getDegree)(L.length,at,S);if(b.degrees=St,H){var bt=(0,tt.getFuncByUnknownType)(10,H),zt=(0,tt.getFuncByUnknownType)(10,et),kt=-1/0;L.forEach(function($t){var ae=zt($t);kt<ae&&(kt=ae)});var Kt=0;L.forEach(function($t,ae){ae===0?Kt+=kt||10:Kt+=(bt($t)||0)+(kt||10)}),P=Kt/(2*Math.PI)}else!P&&!y&&!v?P=b.height>b.width?b.width/2:b.height/2:!y&&v?y=v:y&&!v&&(v=y);var it=ct*Y,gt=[];W==="topology"?gt=b.topologyOrdering():W==="topology-directed"?gt=b.topologyOrdering(!0):W==="degree"?gt=b.degreeOrdering():gt=L;for(var Vt=Math.ceil(I/K),re=0;re<I;++re){var It=P;!It&&y!==null&&v!==null&&(It=y+re*(v-y)/(I-1)),It||(It=10+re*100/(I-1));var Wt=R+re%Vt*it+2*Math.PI/K*Math.floor(re/Vt);q||(Wt=B-re%Vt*it-2*Math.PI/K*Math.floor(re/Vt)),gt[re].x=D[0]+Math.cos(Wt)*It,gt[re].y=D[1]+Math.sin(Wt)*It,gt[re].weight=St[re].all}return(_=b.onLayoutEnd)===null||_===void 0||_.call(b),{nodes:gt,edges:this.edges}},C.prototype.topologyOrdering=function(_){_===void 0&&(_=!1);var b=this,L=b.degrees,S=b.edges,I=b.nodes,D=(0,tt.clone)(I),P=b.nodeMap,y=[D[0]],v=[I[0]],K=[],R=I.length;K[0]=!0,Q(D,S,P,_);var B=0;return D.forEach(function(Y,W){if(W!==0)if((W===R-1||L[W].all!==L[W+1].all||J(y[B],Y,S))&&!K[W])y.push(Y),v.push(I[P[Y.id]]),K[W]=!0,B++;else{for(var q=y[B].children,H=!1,et=0;et<q.length;et++){var ct=P[q[et]];if(L[ct].all===L[W].all&&!K[ct]){y.push(D[ct]),v.push(I[P[D[ct].id]]),K[ct]=!0,H=!0;break}}for(var at=0;!H&&(K[at]||(y.push(D[at]),v.push(I[P[D[at].id]]),K[at]=!0,H=!0),at++,at!==R););}}),v},C.prototype.degreeOrdering=function(){var _=this,b=_.nodes,L=[],S=_.degrees;return b.forEach(function(I,D){I.degree=S[D].all,L.push(I)}),L.sort(X),L},C.prototype.getType=function(){return"circular"},C}(st.Base);G.CircularLayout=T},263861:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var M=function(C,_){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,L){b.__proto__=L}||function(b,L){for(var S in L)Object.prototype.hasOwnProperty.call(L,S)&&(b[S]=L[S])},M(C,_)};return function(C,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");M(C,_);function b(){this.constructor=C}C.prototype=_===null?Object.create(_):(b.prototype=_.prototype,new b)}}(),st=this&&this.__assign||function(){return st=Object.assign||function(M){for(var C,_=1,b=arguments.length;_<b;_++){C=arguments[_];for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(M[L]=C[L])}return M},st.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.ComboCombinedLayout=void 0;var tt=ut(416470),Q=ut(762329),J=ut(449784),X=ut(702584),T=function(M){wt(C,M);function C(_){var b=M.call(this)||this;return b.center=[0,0],b.nodes=[],b.edges=[],b.combos=[],b.comboEdges=[],b.comboPadding=10,b.comboTrees=[],b.updateCfg(_),b}return C.prototype.getDefaultCfg=function(){return{}},C.prototype.execute=function(){var _=this,b=_.nodes,L=_.center;if(!b||b.length===0){_.onLayoutEnd&&_.onLayoutEnd();return}if(b.length===1){b[0].x=L[0],b[0].y=L[1],_.onLayoutEnd&&_.onLayoutEnd();return}_.initVals(),_.run(),_.onLayoutEnd&&_.onLayoutEnd()},C.prototype.run=function(){var _,b=this,L=b.nodes,S=b.edges,I=b.combos,D=b.comboEdges,P=b.center,y={};L.forEach(function(kt){y[kt.id]=kt});var v={};I.forEach(function(kt){v[kt.id]=kt});var K=b.getInnerGraphs(y),R=[],B=[],Y={},W=!0;this.comboTrees.forEach(function(kt){var Kt=K[kt.id];if(Kt){var it=st(st({},kt),{x:Kt.x||v[kt.id].x,y:Kt.y||v[kt.id].y,fx:Kt.fx||v[kt.id].fx,fy:Kt.fy||v[kt.id].fy,mass:Kt.mass||v[kt.id].mass,size:Kt.size});B.push(it),!isNaN(it.x)&&it.x!==0&&!isNaN(it.y)&&it.y!==0?W=!1:(it.x=Math.random()*100,it.y=Math.random()*100),R.push(kt.id),(0,J.traverseTreeUp)(kt,function(gt){return gt.id!==kt.id&&(Y[gt.id]=kt.id),!0})}}),L.forEach(function(kt){if(!(kt.comboId&&v[kt.comboId])){var Kt=st({},kt);B.push(Kt),!isNaN(Kt.x)&&Kt.x!==0&&!isNaN(Kt.y)&&Kt.y!==0?W=!1:(Kt.x=Math.random()*100,Kt.y=Math.random()*100),R.push(kt.id)}});var q=[];if(S.concat(D).forEach(function(kt){var Kt=Y[kt.source]||kt.source,it=Y[kt.target]||kt.target;Kt!==it&&R.includes(Kt)&&R.includes(it)&&q.push({source:Kt,target:it})}),B!=null&&B.length){if(B.length===1)B[0].x=P[0],B[0].y=P[1];else{var H={nodes:B,edges:q},et=this.outerLayout||new X.GForceLayout({gravity:1,factor:4,linkDistance:function(kt,Kt,it){var gt,Vt,re=((((gt=Kt.size)===null||gt===void 0?void 0:gt[0])||30)+(((Vt=it.size)===null||Vt===void 0?void 0:Vt[0])||30))/2;return Math.min(re*1.5,700)}}),ct=(_=et.getType)===null||_===void 0?void 0:_.call(et);if(et.updateCfg({center:P,kg:5,preventOverlap:!0,animate:!1}),W&&tt.FORCE_LAYOUT_TYPE_MAP[ct]){var at=B.length<100?new X.MDSLayout:new X.GridLayout;at.layout(H)}et.layout(H)}B.forEach(function(kt){var Kt=K[kt.id];if(!Kt){var it=y[kt.id];it&&(it.x=kt.x,it.y=kt.y);return}Kt.visited=!0,Kt.x=kt.x,Kt.y=kt.y,Kt.nodes.forEach(function(gt){gt.x+=kt.x,gt.y+=kt.y})})}for(var St=Object.keys(K),bt=function(kt){var Kt=St[kt],it=K[Kt];if(!it)return"continue";it.nodes.forEach(function(gt){it.visited||(gt.x+=it.x||0,gt.y+=it.y||0),y[gt.id]&&(y[gt.id].x=gt.x,y[gt.id].y=gt.y)}),v[Kt]&&(v[Kt].x=it.x,v[Kt].y=it.y)},zt=St.length-1;zt>=0;zt--)bt(zt);return{nodes:L,edges:S,combos:I,comboEdges:D}},C.prototype.getInnerGraphs=function(_){var b=this,L=b.comboTrees,S=b.nodeSize,I=b.edges,D=b.comboPadding,P=b.spacing,y={},v=this.innerLayout||new X.ConcentricLayout({type:"concentric",sortBy:"id"});return v.center=[0,0],v.preventOverlap=!0,v.nodeSpacing=P,(L||[]).forEach(function(K){(0,J.traverseTreeUp)(K,function(R){var B,Y=(D==null?void 0:D(R))||10;if((0,J.isArray)(Y)&&(Y=Math.max.apply(Math,Y)),!((B=R.children)===null||B===void 0)&&B.length){var q=R.children.map(function(Vt){if(Vt.itemType==="combo")return y[Vt.id];var re=_[Vt.id]||{};return st(st({},re),Vt)}),H=q.map(function(Vt){return Vt.id}),et={nodes:q,edges:I.filter(function(Vt){return H.includes(Vt.source)&&H.includes(Vt.target)})},ct=1/0;q.forEach(function(Vt){var re;Vt.size||(Vt.size=((re=y[Vt.id])===null||re===void 0?void 0:re.size)||(S==null?void 0:S(Vt))||[30,30]),(0,J.isNumber)(Vt.size)&&(Vt.size=[Vt.size,Vt.size]),ct>Vt.size[0]&&(ct=Vt.size[0]),ct>Vt.size[1]&&(ct=Vt.size[1])}),v.layout(et);var at=(0,J.getLayoutBBox)(q),St=at.minX,bt=at.minY,zt=at.maxX,kt=at.maxY,Kt={x:(zt+St)/2,y:(kt+bt)/2};et.nodes.forEach(function(Vt){Vt.x-=Kt.x,Vt.y-=Kt.y});var it=Math.max(zt-St,ct)+Y*2,gt=Math.max(kt-bt,ct)+Y*2;y[R.id]={id:R.id,nodes:q,size:[it,gt]}}else if(R.itemType==="combo"){var W=Y?[Y*2,Y*2]:[30,30];y[R.id]={id:R.id,nodes:[],size:W}}return!0})}),y},C.prototype.initVals=function(){var _=this,b=_.nodeSize,L=_.spacing,S,I;if((0,J.isNumber)(L)?I=function(){return L}:(0,J.isFunction)(L)?I=L:I=function(){return 0},this.spacing=I,!b)S=function(R){var B=I(R);if(R.size){if((0,J.isArray)(R.size)){var Y=R.size[0]>R.size[1]?R.size[0]:R.size[1];return(Y+B)/2}if((0,J.isObject)(R.size)){var Y=R.size.width>R.size.height?R.size.width:R.size.height;return(Y+B)/2}return(R.size+B)/2}return 10+B/2};else if((0,J.isFunction)(b))S=function(R){var B=b(R),Y=I(R);if((0,J.isArray)(R.size)){var W=R.size[0]>R.size[1]?R.size[0]:R.size[1];return(W+Y)/2}return((B||10)+Y)/2};else if((0,J.isArray)(b)){var D=b[0]>b[1]?b[0]:b[1],P=D/2;S=function(R){return P+I(R)/2}}else{var y=b/2;S=function(R){return y+I(R)/2}}this.nodeSize=S;var v=_.comboPadding,K;(0,J.isNumber)(v)?K=function(){return v}:(0,J.isArray)(v)?K=function(){return Math.max.apply(null,v)}:(0,J.isFunction)(v)?K=v:K=function(){return 0},this.comboPadding=K},C.prototype.getType=function(){return"comboCombined"},C}(Q.Base);G.ComboCombinedLayout=T},366590:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var J=function(X,T){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,C){M.__proto__=C}||function(M,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(M[_]=C[_])},J(X,T)};return function(X,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");J(X,T);function M(){this.constructor=X}X.prototype=T===null?Object.create(T):(M.prototype=T.prototype,new M)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ComboForceLayout=void 0;var st=ut(762329),tt=ut(449784),Q=function(J){wt(X,J);function X(T){var M=J.call(this)||this;return M.center=[0,0],M.maxIteration=100,M.gravity=10,M.comboGravity=10,M.linkDistance=10,M.alpha=1,M.alphaMin=.001,M.alphaDecay=1-Math.pow(M.alphaMin,1/300),M.alphaTarget=0,M.velocityDecay=.6,M.edgeStrength=.6,M.nodeStrength=30,M.preventOverlap=!1,M.preventNodeOverlap=!1,M.preventComboOverlap=!1,M.collideStrength=void 0,M.nodeCollideStrength=.5,M.comboCollideStrength=.5,M.comboSpacing=20,M.comboPadding=10,M.optimizeRangeFactor=1,M.onTick=function(){},M.onLayoutEnd=function(){},M.depthAttractiveForceScale=1,M.depthRepulsiveForceScale=2,M.nodes=[],M.edges=[],M.combos=[],M.comboTrees=[],M.width=300,M.height=300,M.bias=[],M.nodeMap={},M.oriComboMap={},M.indexMap={},M.comboMap={},M.previousLayouted=!1,M.updateCfg(T),M}return X.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},X.prototype.execute=function(){var T=this,M=T.nodes,C=T.center;if(T.comboTree={id:"comboTreeRoot",depth:-1,children:T.comboTrees},!M||M.length===0){T.onLayoutEnd&&T.onLayoutEnd();return}if(M.length===1){M[0].x=C[0],M[0].y=C[1],T.onLayoutEnd&&T.onLayoutEnd();return}T.initVals(),T.run(),T.onLayoutEnd&&T.onLayoutEnd()},X.prototype.run=function(){var T=this,M=T.nodes,C=T.previousLayouted?T.maxIteration/5:T.maxIteration;!T.width&&typeof window!="undefined"&&(T.width=window.innerWidth),!T.height&&typeof window!="undefined"&&(T.height=window.innerHeight);var _=T.center,b=T.velocityDecay,L=T.comboMap;T.previousLayouted||T.initPos(L);for(var S=function(y){var v=[];M.forEach(function(K,R){v[R]={x:0,y:0}}),T.applyCalculate(v),T.applyComboCenterForce(v),M.forEach(function(K,R){!(0,tt.isNumber)(K.x)||!(0,tt.isNumber)(K.y)||(K.x+=v[R].x*b,K.y+=v[R].y*b)}),T.alpha+=(T.alphaTarget-T.alpha)*T.alphaDecay,T.onTick()},I=0;I<C;I++)S(I);var D=[0,0];M.forEach(function(y){!(0,tt.isNumber)(y.x)||!(0,tt.isNumber)(y.y)||(D[0]+=y.x,D[1]+=y.y)}),D[0]/=M.length,D[1]/=M.length;var P=[_[0]-D[0],_[1]-D[1]];M.forEach(function(y,v){!(0,tt.isNumber)(y.x)||!(0,tt.isNumber)(y.y)||(y.x+=P[0],y.y+=P[1])}),T.combos.forEach(function(y){var v=L[y.id];v&&v.empty&&(y.x=v.cx||y.x,y.y=v.cy||y.y)}),T.previousLayouted=!0},X.prototype.initVals=function(){var T=this,M=T.edges,C=T.nodes,_=T.combos,b={},L={},S={};C.forEach(function(It,Wt){L[It.id]=It,S[It.id]=Wt}),T.nodeMap=L,T.indexMap=S;var I={};_.forEach(function(It){I[It.id]=It}),T.oriComboMap=I,T.comboMap=T.getComboMap();var D=T.preventOverlap;T.preventComboOverlap=T.preventComboOverlap||D,T.preventNodeOverlap=T.preventNodeOverlap||D;var P=T.collideStrength;P&&(T.comboCollideStrength=P,T.nodeCollideStrength=P),T.comboCollideStrength=T.comboCollideStrength?T.comboCollideStrength:0,T.nodeCollideStrength=T.nodeCollideStrength?T.nodeCollideStrength:0;for(var y=0;y<M.length;++y){var v=(0,tt.getEdgeTerminal)(M[y],"source"),K=(0,tt.getEdgeTerminal)(M[y],"target");b[v]?b[v]++:b[v]=1,b[K]?b[K]++:b[K]=1}for(var R=[],y=0;y<M.length;++y){var v=(0,tt.getEdgeTerminal)(M[y],"source"),K=(0,tt.getEdgeTerminal)(M[y],"target");R[y]=b[v]/(b[v]+b[K])}this.bias=R;var B=T.nodeSize,Y=T.nodeSpacing,W,q;if((0,tt.isNumber)(Y)?q=function(){return Y}:(0,tt.isFunction)(Y)?q=Y:q=function(){return 0},this.nodeSpacing=q,!B)W=function(It){if(It.size){if((0,tt.isArray)(It.size)){var Wt=It.size[0]>It.size[1]?It.size[0]:It.size[1];return Wt/2}if((0,tt.isObject)(It.size)){var Wt=It.size.width>It.size.height?It.size.width:It.size.height;return Wt/2}return It.size/2}return 10};else if((0,tt.isFunction)(B))W=function(It){return B(It)};else if((0,tt.isArray)(B)){var H=B[0]>B[1]?B[0]:B[1],et=H/2;W=function(It){return et}}else{var ct=B/2;W=function(It){return ct}}this.nodeSize=W;var at=T.comboSpacing,St;(0,tt.isNumber)(at)?St=function(){return at}:(0,tt.isFunction)(at)?St=at:St=function(){return 0},this.comboSpacing=St;var bt=T.comboPadding,zt;(0,tt.isNumber)(bt)?zt=function(){return bt}:(0,tt.isArray)(bt)?zt=function(){return Math.max.apply(null,bt)}:(0,tt.isFunction)(bt)?zt=bt:zt=function(){return 0},this.comboPadding=zt;var kt=this.linkDistance,Kt;kt||(kt=10),(0,tt.isNumber)(kt)?Kt=function(It){return kt}:Kt=kt,this.linkDistance=Kt;var it=this.edgeStrength,gt;it||(it=1),(0,tt.isNumber)(it)?gt=function(It){return it}:gt=it,this.edgeStrength=gt;var Vt=this.nodeStrength,re;Vt||(Vt=30),(0,tt.isNumber)(Vt)?re=function(It){return Vt}:re=Vt,this.nodeStrength=re},X.prototype.initPos=function(T){var M=this,C=M.nodes;C.forEach(function(_,b){var L=_.comboId,S=T[L];L&&S?(_.x=S.cx+100/(b+1),_.y=S.cy+100/(b+1)):(_.x=100/(b+1),_.y=100/(b+1))})},X.prototype.getComboMap=function(){var T=this,M=T.nodeMap,C=T.comboTrees,_=T.oriComboMap,b={};return(C||[]).forEach(function(L){var S=[];(0,tt.traverseTreeUp)(L,function(I){if(I.itemType==="node"||!_[I.id])return!0;if(b[I.id]===void 0){var D={id:I.id,name:I.id,cx:0,cy:0,count:0,depth:T.oriComboMap[I.id].depth||0,children:[]};b[I.id]=D}var P=I.children;P&&P.forEach(function(K){if(!b[K.id]&&!M[K.id])return!0;S.push(K)});var y=b[I.id];if(y.cx=0,y.cy=0,S.length===0){y.empty=!0;var v=_[I.id];y.cx=v.x,y.cy=v.y}return S.forEach(function(K){if(y.count++,K.itemType!=="node"){var R=b[K.id];(0,tt.isNumber)(R.cx)&&(y.cx+=R.cx),(0,tt.isNumber)(R.cy)&&(y.cy+=R.cy);return}var B=M[K.id];B&&((0,tt.isNumber)(B.x)&&(y.cx+=B.x),(0,tt.isNumber)(B.y)&&(y.cy+=B.y))}),y.cx/=y.count||1,y.cy/=y.count||1,y.children=S,!0})}),b},X.prototype.applyComboCenterForce=function(T){var M=this,C=M.gravity,_=M.comboGravity||C,b=this.alpha,L=M.comboTrees,S=M.indexMap,I=M.nodeMap,D=M.comboMap;(L||[]).forEach(function(P){(0,tt.traverseTreeUp)(P,function(y){if(y.itemType==="node")return!0;var v=D[y.id];if(!v)return!0;var K=D[y.id],R=(K.depth+1)/10*.5,B=K.cx,Y=K.cy;return K.cx=0,K.cy=0,K.children.forEach(function(W){if(W.itemType!=="node"){var q=D[W.id];q&&(0,tt.isNumber)(q.cx)&&(K.cx+=q.cx),q&&(0,tt.isNumber)(q.cy)&&(K.cy+=q.cy);return}var H=I[W.id],et=H.x-B||.005,ct=H.y-Y||.005,at=Math.sqrt(et*et+ct*ct),St=S[H.id],bt=_*b/at*R;T[St].x-=et*bt,T[St].y-=ct*bt,(0,tt.isNumber)(H.x)&&(K.cx+=H.x),(0,tt.isNumber)(H.y)&&(K.cy+=H.y)}),K.cx/=K.count||1,K.cy/=K.count||1,!0})})},X.prototype.applyCalculate=function(T){var M=this,C=M.comboMap,_=M.nodes,b={};_.forEach(function(S,I){_.forEach(function(D,P){if(!(I<P)){var y=S.x-D.x||.005,v=S.y-D.y||.005,K=y*y+v*v,R=Math.sqrt(K);K<1&&(K=R),b["".concat(S.id,"-").concat(D.id)]={vx:y,vy:v,vl2:K,vl:R},b["".concat(D.id,"-").concat(S.id)]={vl2:K,vl:R,vx:-y,vy:-v}}})}),M.updateComboSizes(C),M.calRepulsive(T,b),M.calAttractive(T,b);var L=M.preventComboOverlap;L&&M.comboNonOverlapping(T,C)},X.prototype.updateComboSizes=function(T){var M=this,C=M.comboTrees,_=M.nodeMap,b=M.nodeSize,L=M.comboSpacing,S=M.comboPadding;(C||[]).forEach(function(I){var D=[];(0,tt.traverseTreeUp)(I,function(P){if(P.itemType==="node")return!0;var y=T[P.id];if(!y)return!1;var v=P.children;v&&v.forEach(function(B){!T[B.id]&&!_[B.id]||D.push(B)}),y.minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0,D.forEach(function(B){if(B.itemType!=="node")return!0;var Y=_[B.id];if(!Y)return!0;var W=b(Y),q=Y.x-W,H=Y.y-W,et=Y.x+W,ct=Y.y+W;y.minX>q&&(y.minX=q),y.minY>H&&(y.minY=H),y.maxX<et&&(y.maxX=et),y.maxY<ct&&(y.maxY=ct)});var K=M.oriComboMap[P.id].size||10;(0,tt.isArray)(K)&&(K=K[0]);var R=Math.max(y.maxX-y.minX,y.maxY-y.minY,K);return y.r=R/2+L(y)/2+S(y),!0})})},X.prototype.comboNonOverlapping=function(T,M){var C=this,_=C.comboTree,b=C.comboCollideStrength,L=C.indexMap,S=C.nodeMap;(0,tt.traverseTreeUp)(_,function(I){if(!M[I.id]&&!S[I.id]&&I.id!=="comboTreeRoot")return!1;var D=I.children;return D&&D.length>1&&D.forEach(function(P,y){if(P.itemType==="node")return!1;var v=M[P.id];v&&D.forEach(function(K,R){if(y<=R||K.itemType==="node")return!1;var B=M[K.id];if(!B)return!1;var Y=v.cx-B.cx||.005,W=v.cy-B.cy||.005,q=Y*Y+W*W,H=v.r||1,et=B.r||1,ct=H+et,at=et*et,St=H*H;if(q<ct*ct){var bt=P.children;if(!bt||bt.length===0)return!1;var zt=K.children;if(!zt||zt.length===0)return!1;var kt=Math.sqrt(q),Kt=(ct-kt)/kt*b,it=Y*Kt,gt=W*Kt,Vt=at/(St+at),re=1-Vt;bt.forEach(function(It){if(It.itemType!=="node")return!1;if(S[It.id]){var Wt=L[It.id];zt.forEach(function($t){if($t.itemType!=="node"||!S[$t.id])return!1;var ae=L[$t.id];T[Wt].x+=it*Vt,T[Wt].y+=gt*Vt,T[ae].x-=it*re,T[ae].y-=gt*re})}})}})}),!0})},X.prototype.calRepulsive=function(T,M){var C=this,_=C.nodes,b=C.width*C.optimizeRangeFactor,L=C.nodeStrength,S=C.alpha,I=C.nodeCollideStrength,D=C.preventNodeOverlap,P=C.nodeSize,y=C.nodeSpacing,v=C.depthRepulsiveForceScale,K=C.center;_.forEach(function(R,B){if(!(!R.x||!R.y)){if(K){var Y=C.gravity,W=R.x-K[0]||.005,q=R.y-K[1]||.005,H=Math.sqrt(W*W+q*q);T[B].x-=W*Y*S/H,T[B].y-=q*Y*S/H}_.forEach(function(et,ct){if(B!==ct&&!(!et.x||!et.y)){var at=M["".concat(R.id,"-").concat(et.id)],St=at.vl2,bt=at.vl;if(!(bt>b)){var zt=M["".concat(R.id,"-").concat(et.id)],kt=zt.vx,Kt=zt.vy,it=Math.log(Math.abs(et.depth-R.depth)/10)+1||1;it=it<1?1:it,et.comboId!==R.comboId&&(it+=1);var gt=it?Math.pow(v,it):1,Vt=L(et)*S/St*gt;if(T[B].x+=kt*Vt,T[B].y+=Kt*Vt,B<ct&&D){var re=P(R)+y(R)||1,It=P(et)+y(et)||1,Wt=re+It;if(St<Wt*Wt){var $t=(Wt-bt)/bt*I,ae=It*It,Bt=ae/(re*re+ae),Ot=kt*$t,Ht=Kt*$t;T[B].x+=Ot*Bt,T[B].y+=Ht*Bt,Bt=1-Bt,T[ct].x-=Ot*Bt,T[ct].y-=Ht*Bt}}}}})}})},X.prototype.calAttractive=function(T,M){var C=this,_=C.edges,b=C.linkDistance,L=C.alpha,S=C.edgeStrength,I=C.bias,D=C.depthAttractiveForceScale;_.forEach(function(P,y){var v=(0,tt.getEdgeTerminal)(P,"source"),K=(0,tt.getEdgeTerminal)(P,"target");if(!(!v||!K||v===K)){var R=C.indexMap[v],B=C.indexMap[K],Y=C.nodeMap[v],W=C.nodeMap[K];if(!(!Y||!W)){var q=Y.depth===W.depth?0:Math.log(Math.abs(Y.depth-W.depth)/10);Y.comboId===W.comboId&&(q=q/2);var H=q?Math.pow(D,q):1;if(Y.comboId!==W.comboId&&H===1?H=D/2:Y.comboId===W.comboId&&(H=2),!(!(0,tt.isNumber)(W.x)||!(0,tt.isNumber)(Y.x)||!(0,tt.isNumber)(W.y)||!(0,tt.isNumber)(Y.y))){var et=M["".concat(K,"-").concat(v)],ct=et.vl,at=et.vx,St=et.vy,bt=(ct-b(P))/ct*L*S(P)*H,zt=at*bt,kt=St*bt,Kt=I[y];T[B].x-=zt*Kt,T[B].y-=kt*Kt,T[R].x+=zt*(1-Kt),T[R].y+=kt*(1-Kt)}}}})},X.prototype.getType=function(){return"comboForce"},X}(st.Base);G.ComboForceLayout=Q},843281:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var J=function(X,T){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,C){M.__proto__=C}||function(M,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(M[_]=C[_])},J(X,T)};return function(X,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");J(X,T);function M(){this.constructor=X}X.prototype=T===null?Object.create(T):(M.prototype=T.prototype,new M)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ConcentricLayout=void 0;var st=ut(449784),tt=ut(762329),Q=function(J){wt(X,J);function X(T){var M=J.call(this)||this;return M.nodeSize=30,M.minNodeSpacing=10,M.nodeSpacing=10,M.preventOverlap=!1,M.equidistant=!1,M.startAngle=3/2*Math.PI,M.clockwise=!0,M.sortBy="degree",M.nodes=[],M.edges=[],M.width=300,M.height=300,M.onLayoutEnd=function(){},M.updateCfg(T),M}return X.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},X.prototype.execute=function(){var T,M,C=this,_=C.nodes,b=C.edges,L=_.length;if(L===0){(T=C.onLayoutEnd)===null||T===void 0||T.call(C);return}!C.width&&typeof window!="undefined"&&(C.width=window.innerWidth),!C.height&&typeof window!="undefined"&&(C.height=window.innerHeight),C.center||(C.center=[C.width/2,C.height/2]);var S=C.center;if(L===1){_[0].x=S[0],_[0].y=S[1],(M=C.onLayoutEnd)===null||M===void 0||M.call(C);return}var I=C.nodeSize,D=C.nodeSpacing,P=[],y,v=0;(0,st.isArray)(I)?y=Math.max(I[0],I[1]):y=I,(0,st.isArray)(D)?v=Math.max(D[0],D[1]):(0,st.isNumber)(D)&&(v=D),_.forEach(function(it){P.push(it);var gt=y;(0,st.isArray)(it.size)?gt=Math.max(it.size[0],it.size[1]):(0,st.isNumber)(it.size)?gt=it.size:(0,st.isObject)(it.size)&&(gt=Math.max(it.size.width,it.size.height)),y=Math.max(y,gt),(0,st.isFunction)(D)&&(v=Math.max(D(it),v))}),C.clockwise=C.counterclockwise!==void 0?!C.counterclockwise:C.clockwise;var K={},R={};if(P.forEach(function(it,gt){K[it.id]=it,R[it.id]=gt}),(C.sortBy==="degree"||!(0,st.isString)(C.sortBy)||P[0][C.sortBy]===void 0)&&(C.sortBy="degree",!(0,st.isNumber)(_[0].degree))){var B=(0,st.getDegree)(_.length,R,b);P.forEach(function(it,gt){it.degree=B[gt].all})}P.sort(function(it,gt){return gt[C.sortBy]-it[C.sortBy]}),C.maxValueNode=P[0],C.maxLevelDiff=C.maxLevelDiff||C.maxValueNode[C.sortBy]/4;var Y=[[]],W=Y[0];P.forEach(function(it){if(W.length>0){var gt=Math.abs(W[0][C.sortBy]-it[C.sortBy]);C.maxLevelDiff&&gt>=C.maxLevelDiff&&(W=[],Y.push(W))}W.push(it)});var q=y+(v||C.minNodeSpacing);if(!C.preventOverlap){var H=Y.length>0&&Y[0].length>1,et=Math.min(C.width,C.height)/2-q,ct=et/(Y.length+(H?1:0));q=Math.min(q,ct)}var at=0;if(Y.forEach(function(it){var gt=C.sweep;gt===void 0&&(gt=2*Math.PI-2*Math.PI/it.length);var Vt=it.dTheta=gt/Math.max(1,it.length-1);if(it.length>1&&C.preventOverlap){var re=Math.cos(Vt)-Math.cos(0),It=Math.sin(Vt)-Math.sin(0),Wt=Math.sqrt(q*q/(re*re+It*It));at=Math.max(Wt,at)}it.r=at,at+=q}),C.equidistant){for(var St=0,bt=0,zt=0;zt<Y.length;zt++){var kt=Y[zt],Kt=kt.r-bt;St=Math.max(St,Kt)}bt=0,Y.forEach(function(it,gt){gt===0&&(bt=it.r),it.r=bt,bt+=St})}return Y.forEach(function(it){var gt=it.dTheta,Vt=it.r;it.forEach(function(re,It){var Wt=C.startAngle+(C.clockwise?1:-1)*gt*It;re.x=S[0]+Vt*Math.cos(Wt),re.y=S[1]+Vt*Math.sin(Wt)})}),C.onLayoutEnd&&C.onLayoutEnd(),{nodes:_,edges:b}},X.prototype.getType=function(){return"concentric"},X}(tt.Base);G.ConcentricLayout=Q},416470:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.FORCE_LAYOUT_TYPE_MAP=G.LAYOUT_MESSAGE=void 0,G.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},G.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var C=function(_,b){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,S){L.__proto__=S}||function(L,S){for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(L[I]=S[I])},C(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");C(_,b);function L(){this.constructor=_}_.prototype=b===null?Object.create(b):(L.prototype=b.prototype,new L)}}(),st=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreLayout=void 0;var tt=st(ut(441106)),Q=ut(449784),J=ut(762329),X=ut(627652),T=function(C){wt(_,C);function _(b){var L=C.call(this)||this;return L.rankdir="TB",L.nodesep=50,L.ranksep=50,L.controlPoints=!1,L.sortByCombo=!1,L.edgeLabelSpace=!0,L.radial=!1,L.nodes=[],L.edges=[],L.onLayoutEnd=function(){},L.layoutNode=function(S){var I=L,D=I.nodes,P=D.find(function(v){return v.id===S});if(P){var y=P.layout!==!1;return y}return!0},L.updateCfg(b),L}return _.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},_.prototype.execute=function(){var b=this,L,S,I,D,P=this,y=P.nodes,v=P.nodeSize,K=P.rankdir,R=P.combos,B=P.begin,Y=P.radial,W=P.comboEdges,q=W===void 0?[]:W,H=P.vedges,et=H===void 0?[]:H;if(y){var ct=P.edges||[],at=new X.Graph({multigraph:!0,compound:!0});P.nodeMap={};var St={};y.forEach(function(hr){P.nodeMap[hr.id]=hr,hr.comboId&&(St[hr.comboId]=St[hr.comboId]||[],St[hr.comboId].push(hr.id))});var bt=[],zt={};!((L=P.nodeOrder)===null||L===void 0)&&L.length?(P.nodeOrder.forEach(function(hr){zt[hr]=!0,bt.push(P.nodeMap[hr])}),y.forEach(function(hr){zt[hr.id]||bt.push(hr)})):bt=y;var kt;v?(0,Q.isArray)(v)?kt=function(){return v}:kt=function(){return[v,v]}:kt=function(hr){return hr.size?(0,Q.isArray)(hr.size)?hr.size:(0,Q.isObject)(hr.size)?[hr.size.width||40,hr.size.height||40]:[hr.size,hr.size]:[40,40]};var Kt=(0,Q.getFunc)(P.ranksep,50,P.ranksepFunc),it=(0,Q.getFunc)(P.nodesep,50,P.nodesepFunc),gt=it,Vt=Kt;(K==="LR"||K==="RL")&&(gt=Kt,Vt=it),at.setDefaultEdgeLabel(function(){return{}}),at.setGraph(P);var re={};this.sortByCombo&&R&&R.forEach(function(hr){if(re[hr.id]=hr,hr.collapsed){var Br=kt(hr),cn=Vt(hr),Cn=gt(hr),Qn=Br[0]+2*Cn,Bn=Br[1]+2*cn;at.setNode(hr.id,{width:Qn,height:Bn})}hr.parentId&&(re[hr.parentId]||at.setNode(hr.parentId,{}),at.setParent(hr.id,hr.parentId))}),bt.filter(function(hr){return hr.layout!==!1}).forEach(function(hr){var Br=kt(hr),cn=Vt(hr),Cn=gt(hr),Qn=Br[0]+2*Cn,Bn=Br[1]+2*cn,ta=hr.layer;(0,Q.isNumber)(ta)?at.setNode(hr.id,{width:Qn,height:Bn,layer:ta}):at.setNode(hr.id,{width:Qn,height:Bn}),b.sortByCombo&&hr.comboId&&(re[hr.comboId]||(re[hr.comboId]={id:hr.comboId},at.setNode(hr.comboId,{})),at.setParent(hr.id,hr.comboId))}),ct.forEach(function(hr){var Br=(0,Q.getEdgeTerminal)(hr,"source"),cn=(0,Q.getEdgeTerminal)(hr,"target");b.layoutNode(Br)&&b.layoutNode(cn)&&at.setEdge(Br,cn,{weight:hr.weight||1})}),(S=q==null?void 0:q.concat(et||[]))===null||S===void 0||S.forEach(function(hr){var Br,cn,Cn=hr.source,Qn=hr.target,Bn=!((Br=re[Cn])===null||Br===void 0)&&Br.collapsed?[Cn]:St[Cn]||[Cn],ta=!((cn=re[Qn])===null||cn===void 0)&&cn.collapsed?[Qn]:St[Qn]||[Qn];Bn.forEach(function(sa){ta.forEach(function(Fa){at.setEdge(sa,Fa,{weight:hr.weight||1})})})});var It=void 0;!((I=P.preset)===null||I===void 0)&&I.nodes&&(It=new X.Graph({multigraph:!0,compound:!0}),P.preset.nodes.forEach(function(hr){It==null||It.setNode(hr.id,hr)})),tt.default.layout(at,{prevGraph:It,edgeLabelSpace:P.edgeLabelSpace,keepNodeOrder:!!P.nodeOrder,nodeOrder:P.nodeOrder});var Wt=[0,0];if(B){var $t=1/0,ae=1/0;at.nodes().forEach(function(hr){var Br=at.node(hr);$t>Br.x&&($t=Br.x),ae>Br.y&&(ae=Br.y)}),at.edges().forEach(function(hr){var Br,cn=at.edge(hr);(Br=cn.points)===null||Br===void 0||Br.forEach(function(Cn){$t>Cn.x&&($t=Cn.x),ae>Cn.y&&(ae=Cn.y)})}),Wt[0]=B[0]-$t,Wt[1]=B[1]-ae}var Bt=K==="LR"||K==="RL";if(Y){var Ot=this,Ht=Ot.focusNode,pe=Ot.ranksep,ve=Ot.getRadialPos,Tt=(0,Q.isString)(Ht)?Ht:Ht==null?void 0:Ht.id,Zt=Tt?(D=at.node(Tt))===null||D===void 0?void 0:D._rank:0,Ce=[],Ut=Bt?"y":"x",se=Bt?"height":"width",_e=1/0,$e=-1/0;at.nodes().forEach(function(hr){var Br=at.node(hr);if(P.nodeMap[hr]){var cn=it(P.nodeMap[hr]);if(Zt===0)Ce[Br._rank]||(Ce[Br._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ce[Br._rank].nodes.push(hr),Ce[Br._rank].totalWidth+=cn*2+Br[se],Ce[Br._rank].maxSize<Math.max(Br.width,Br.height)&&(Ce[Br._rank].maxSize=Math.max(Br.width,Br.height));else{var Cn=Br._rank-Zt;if(Cn===0)Ce[Cn]||(Ce[Cn]={nodes:[],totalWidth:0,maxSize:-1/0}),Ce[Cn].nodes.push(hr),Ce[Cn].totalWidth+=cn*2+Br[se],Ce[Cn].maxSize<Math.max(Br.width,Br.height)&&(Ce[Cn].maxSize=Math.max(Br.width,Br.height));else{var Qn=Math.abs(Cn);Ce[Qn]||(Ce[Qn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ce[Qn].totalWidth+=cn*2+Br[se],Ce[Qn].maxSize<Math.max(Br.width,Br.height)&&(Ce[Qn].maxSize=Math.max(Br.width,Br.height)),Cn<0?Ce[Qn].left.push(hr):Ce[Qn].right.push(hr)}}var Bn=Br[Ut]-Br[se]/2-cn,ta=Br[Ut]+Br[se]/2+cn;Bn<_e&&(_e=Bn),ta>$e&&($e=ta)}});var fr=pe||50,gr={},Yt=($e-_e)/.9,Mr=[(_e+$e-Yt)*.5,(_e+$e+Yt)*.5],Ln=function(hr,Br,cn,Cn){cn===void 0&&(cn=-1/0),Cn===void 0&&(Cn=[0,1]);var Qn=cn;return hr.forEach(function(Bn){var ta=at.node(Bn);gr[Bn]=Br;var sa=ve(ta[Ut],Mr,Yt,Br,Cn),Fa=sa.x,wa=sa.y;if(P.nodeMap[Bn]){P.nodeMap[Bn].x=Fa+Wt[0],P.nodeMap[Bn].y=wa+Wt[1],P.nodeMap[Bn]._order=ta._order;var An=Kt(P.nodeMap[Bn]);Qn<An&&(Qn=An)}}),Qn},Yn=!0,Ra=0;Ce.forEach(function(hr){var Br,cn,Cn,Qn,Bn,ta,sa;if(!(!(!((Br=hr==null?void 0:hr.nodes)===null||Br===void 0)&&Br.length)&&!(!((cn=hr==null?void 0:hr.left)===null||cn===void 0)&&cn.length)&&!(!((Cn=hr==null?void 0:hr.right)===null||Cn===void 0)&&Cn.length))){if(Yn&&hr.nodes.length===1){var Fa=hr.nodes[0];if(!P.nodeMap[Fa])return;P.nodeMap[Fa].x=Wt[0],P.nodeMap[Fa].y=Wt[1],gr[hr.nodes[0]]=0,fr=Kt(P.nodeMap[Fa]),Yn=!1;return}fr=Math.max(fr,hr.totalWidth/(2*Math.PI));var wa=-1/0;if(Zt===0||!((Qn=hr.nodes)===null||Qn===void 0)&&Qn.length)wa=Ln(hr.nodes,fr,wa,[0,1]);else{var An=((Bn=hr.left)===null||Bn===void 0?void 0:Bn.length)/(((ta=hr.left)===null||ta===void 0?void 0:ta.length)+((sa=hr.right)===null||sa===void 0?void 0:sa.length));wa=Ln(hr.left,fr,wa,[0,An]),wa=Ln(hr.right,fr,wa,[An+.05,1])}fr+=wa,Yn=!1,Ra-hr.maxSize}}),at.edges().forEach(function(hr){var Br,cn,Cn,Qn=at.edge(hr),Bn=ct.findIndex(function(Fn){var ka=(0,Q.getEdgeTerminal)(Fn,"source"),U=(0,Q.getEdgeTerminal)(Fn,"target");return ka===hr.v&&U===hr.w});if(!(Bn<=-1)&&P.edgeLabelSpace&&P.controlPoints&&ct[Bn].type!=="loop"){var ta=Ut==="x"?"y":"x",sa=(Br=Qn==null?void 0:Qn.points)===null||Br===void 0?void 0:Br.slice(1,Qn.points.length-1),Fa=[],wa=(cn=at.node(hr.v))===null||cn===void 0?void 0:cn[ta],An=wa-((Cn=at.node(hr.w))===null||Cn===void 0?void 0:Cn[ta]),ua=gr[hr.v],ra=ua-gr[hr.w];sa==null||sa.forEach(function(Fn){var ka=(Fn[ta]-wa)/An*ra+ua,U=ve(Fn[Ut],Mr,Yt,ka);Fa.push({x:U.x+Wt[0],y:U.y+Wt[1]})}),ct[Bn].controlPoints=Fa}})}else{var ba=new Set,Ba=K==="BT"||K==="RL",xa=Ba?function(hr,Br){return Br-hr}:function(hr,Br){return hr-Br};at.nodes().forEach(function(hr){var Br=at.node(hr);if(Br){var cn=b.nodeMap[hr];cn||(cn=R==null?void 0:R.find(function(Cn){return Cn.id===hr})),cn&&(cn.x=Br.x+Wt[0],cn.y=Br.y+Wt[1],cn._order=Br._order,ba.add(Bt?cn.x:cn.y))}});var ya=Array.from(ba).sort(xa),Na=Bt?function(hr,Br){return hr.x!==Br.x}:function(hr,Br){return hr.y!==Br.y},Ta=Bt?function(hr,Br,cn){var Cn=Math.max(Br.y,cn.y),Qn=Math.min(Br.y,cn.y);return hr.filter(function(Bn){return Bn.y<=Cn&&Bn.y>=Qn})}:function(hr,Br,cn){var Cn=Math.max(Br.x,cn.x),Qn=Math.min(Br.x,cn.x);return hr.filter(function(Bn){return Bn.x<=Cn&&Bn.x>=Qn})};at.edges().forEach(function(hr){var Br,cn=at.edge(hr),Cn=ct.findIndex(function(ta){var sa=(0,Q.getEdgeTerminal)(ta,"source"),Fa=(0,Q.getEdgeTerminal)(ta,"target");return sa===hr.v&&Fa===hr.w});if(!(Cn<=-1)&&P.edgeLabelSpace&&P.controlPoints&&ct[Cn].type!=="loop"){(Br=cn==null?void 0:cn.points)===null||Br===void 0||Br.forEach(function(ta){ta.x+=Wt[0],ta.y+=Wt[1]});var Qn=P.nodeMap[hr.v],Bn=P.nodeMap[hr.w];ct[Cn].controlPoints=M(cn==null?void 0:cn.points,Qn,Bn,ya,Bt,Na,Ta)}})}return P.onLayoutEnd&&P.onLayoutEnd(),{nodes:y,edges:ct}}},_.prototype.getRadialPos=function(b,L,S,I,D){D===void 0&&(D=[0,1]);var P=(b-L[0])/S;P=P*(D[1]-D[0])+D[0];var y=P*2*Math.PI;return{x:Math.cos(y)*I,y:Math.sin(y)*I}},_.prototype.getType=function(){return"dagre"},_}(J.Base);G.DagreLayout=T;var M=function(C,_,b,L,S,I,D){var P=(C==null?void 0:C.slice(1,C.length-1))||[];if(_&&b){var y=_.x,v=_.y,K=b.x,R=b.y;if(S&&(y=_.y,v=_.x,K=b.y,R=b.x),R!==v&&y!==K){var B=L.indexOf(v),Y=L[B+1];if(Y){var W=P[0],q=S?{x:(v+Y)/2,y:(W==null?void 0:W.y)||K}:{x:(W==null?void 0:W.x)||K,y:(v+Y)/2};(!W||I(W,q))&&P.unshift(q)}var H=L.indexOf(R),et=Math.abs(H-B);if(et===1)P=D(P,_,b),P.length||P.push(S?{x:(v+R)/2,y}:{x:y,y:(v+R)/2});else if(et>1){var ct=L[H-1];if(ct){var at=P[P.length-1],St=S?{x:(R+ct)/2,y:(at==null?void 0:at.y)||K}:{x:(at==null?void 0:at.x)||y,y:(R+ct)/2};(!at||I(at,St))&&P.push(St)}}}}return P}},627652:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var Q=function(J,X){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,M){T.__proto__=M}||function(T,M){for(var C in M)Object.prototype.hasOwnProperty.call(M,C)&&(T[C]=M[C])},Q(J,X)};return function(J,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");Q(J,X);function T(){this.constructor=J}J.prototype=X===null?Object.create(X):(T.prototype=X.prototype,new T)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.Graph=void 0;var st=ut(199905),tt=function(Q){wt(J,Q);function J(){return Q!==null&&Q.apply(this,arguments)||this}return J}(st.Graph);G.Graph=tt},441106:function(Sr,G,ut){"use strict";var wt=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(G,"__esModule",{value:!0});var st=wt(ut(265236)),tt=ut(269209);G.default={layout:st.default,util:{time:tt.time,notime:tt.notime}}},178029:function(Sr,G,ut){"use strict";var wt=this&&this.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(G,"__esModule",{value:!0});var st=wt(ut(40773)),tt=function(X){var T=function(C){return function(_){var b;return((b=C.edge(_))===null||b===void 0?void 0:b.weight)||1}},M=X.graph().acyclicer==="greedy"?(0,st.default)(X,T(X)):Q(X);M==null||M.forEach(function(C){var _=X.edge(C);X.removeEdgeObj(C),_.forwardName=C.name,_.reversed=!0,X.setEdge(C.w,C.v,_,"rev-".concat(Math.random()))})},Q=function(X){var T=[],M={},C={},_=function(b){var L;C[b]||(C[b]=!0,M[b]=!0,(L=X.outEdges(b))===null||L===void 0||L.forEach(function(S){M[S.w]?T.push(S):_(S.w)}),delete M[b])};return X.nodes().forEach(_),T},J=function(X){X.edges().forEach(function(T){var M=X.edge(T);if(M.reversed){X.removeEdgeObj(T);var C=M.forwardName;delete M.reversed,delete M.forwardName,X.setEdge(T.w,T.v,M,C)}})};G.default={run:tt,undo:J}},111500:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(269209),st=function(Q){var J,X=function(T){var M=Q.children(T),C=Q.node(T);if(M!=null&&M.length&&M.forEach(function(L){return X(L)}),C.hasOwnProperty("minRank")){C.borderLeft=[],C.borderRight=[];for(var _=C.minRank,b=C.maxRank+1;_<b;_+=1)tt(Q,"borderLeft","_bl",T,C,_),tt(Q,"borderRight","_br",T,C,_)}};(J=Q.children())===null||J===void 0||J.forEach(function(T){return X(T)})},tt=function(Q,J,X,T,M,C){var _={rank:C,borderType:J,width:0,height:0},b=M[J][C-1],L=(0,wt.addDummyNode)(Q,"border",_,X);M[J][C]=L,Q.setParent(L,T),b&&Q.setEdge(b,L,{weight:1})};G.default=st},335279:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(M){var C,_=(C=M.graph().rankdir)===null||C===void 0?void 0:C.toLowerCase();(_==="lr"||_==="rl")&&st(M)},wt=function(M){var C,_=(C=M.graph().rankdir)===null||C===void 0?void 0:C.toLowerCase();(_==="bt"||_==="rl")&&Q(M),(_==="lr"||_==="rl")&&(X(M),st(M))},st=function(M){M.nodes().forEach(function(C){tt(M.node(C))}),M.edges().forEach(function(C){tt(M.edge(C))})},tt=function(M){var C=M.width;M.width=M.height,M.height=C},Q=function(M){M.nodes().forEach(function(C){J(M.node(C))}),M.edges().forEach(function(C){var _,b=M.edge(C);(_=b.points)===null||_===void 0||_.forEach(function(L){return J(L)}),b.hasOwnProperty("y")&&J(b)})},J=function(M){M!=null&&M.y&&(M.y=-M.y)},X=function(M){M.nodes().forEach(function(C){T(M.node(C))}),M.edges().forEach(function(C){var _,b=M.edge(C);(_=b.points)===null||_===void 0||_.forEach(function(L){return T(L)}),b.hasOwnProperty("x")&&T(b)})},T=function(M){var C=M.x;M.x=M.y,M.y=C};G.default={adjust:ut,undo:wt}},455532:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(tt,Q){if(tt!=="next"&&tt!=="prev")return Q},wt=function(tt){tt.prev.next=tt.next,tt.next.prev=tt.prev,delete tt.next,delete tt.prev},st=function(){function tt(){var Q={};Q.prev=Q,Q.next=Q.prev,this.shortcut=Q}return tt.prototype.dequeue=function(){var Q=this.shortcut,J=Q.prev;if(J&&J!==Q)return wt(J),J},tt.prototype.enqueue=function(Q){var J=this.shortcut;Q.prev&&Q.next&&wt(Q),Q.next=J.next,J.next.prev=Q,J.next=Q,Q.prev=J},tt.prototype.toString=function(){for(var Q=[],J=this.shortcut,X=J.prev;X!==J;)Q.push(JSON.stringify(X,ut)),X=X==null?void 0:X.prev;return"[".concat(Q.join(", "),"]")},tt}();G.default=st},40773:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var S=function(I,D){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,y){P.__proto__=y}||function(P,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(P[v]=y[v])},S(I,D)};return function(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");S(I,D);function P(){this.constructor=I}I.prototype=D===null?Object.create(D):(P.prototype=D.prototype,new P)}}(),st=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0});var tt=st(ut(455532)),Q=ut(199905),J=function(S){wt(I,S);function I(){return S!==null&&S.apply(this,arguments)||this}return I}(tt.default),X=function(S){wt(I,S);function I(){return S!==null&&S.apply(this,arguments)||this}return I}(Q.Graph),T=function(){return 1},M=function(S,I){var D;if(S.nodeCount()<=1)return[];var P=b(S,I||T),y=C(P.graph,P.buckets,P.zeroIdx);return(D=y.map(function(v){return S.outEdges(v.v,v.w)}))===null||D===void 0?void 0:D.flat()},C=function(S,I,D){for(var P=[],y=I[I.length-1],v=I[0],K;S.nodeCount();){for(;K=v.dequeue();)_(S,I,D,K);for(;K=y.dequeue();)_(S,I,D,K);if(S.nodeCount()){for(var R=I.length-2;R>0;--R)if(K=I[R].dequeue(),K){P=P.concat(_(S,I,D,K,!0));break}}}return P},_=function(S,I,D,P,y){var v,K,R=[];return(v=S.inEdges(P.v))===null||v===void 0||v.forEach(function(B){var Y=S.edge(B),W=S.node(B.v);y&&R.push({v:B.v,w:B.w,in:0,out:0}),W.out===void 0&&(W.out=0),W.out-=Y,L(I,D,W)}),(K=S.outEdges(P.v))===null||K===void 0||K.forEach(function(B){var Y=S.edge(B),W=B.w,q=S.node(W);q.in===void 0&&(q.in=0),q.in-=Y,L(I,D,q)}),S.removeNode(P.v),y?R:void 0},b=function(S,I){var D=new X,P=0,y=0;S.nodes().forEach(function(Y){D.setNode(Y,{v:Y,in:0,out:0})}),S.edges().forEach(function(Y){var W=D.edge(Y)||0,q=(I==null?void 0:I(Y))||1,H=W+q;D.setEdge(Y.v,Y.w,H),y=Math.max(y,D.node(Y.v).out+=q),P=Math.max(P,D.node(Y.w).in+=q)});for(var v=[],K=y+P+3,R=0;R<K;R++)v.push(new J);var B=P+1;return D.nodes().forEach(function(Y){L(v,B,D.node(Y))}),{buckets:v,zeroIdx:B,graph:D}},L=function(S,I,D){D.out?D.in?S[D.out-D.in+I].enqueue(D):S[S.length-1].enqueue(D):S[0].enqueue(D)};G.default=M},265236:function(Sr,G,ut){"use strict";var wt=this&&this.__assign||function(){return wt=Object.assign||function(Bt){for(var Ot,Ht=1,pe=arguments.length;Ht<pe;Ht++){Ot=arguments[Ht];for(var ve in Ot)Object.prototype.hasOwnProperty.call(Ot,ve)&&(Bt[ve]=Ot[ve])}return Bt},wt.apply(this,arguments)},st=this&&this.__importDefault||function(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}};Object.defineProperty(G,"__esModule",{value:!0});var tt=st(ut(178029)),Q=st(ut(546171)),J=st(ut(576827)),X=ut(269209),T=st(ut(933562)),M=st(ut(59596)),C=st(ut(111500)),_=st(ut(335279)),b=st(ut(819597)),L=st(ut(100095)),S=st(ut(724956)),I=ut(627652),D=function(Bt,Ot){var Ht=Ot&&Ot.debugTiming?X.time:X.notime;Ht("layout",function(){Ot&&!Ot.keepNodeOrder&&Ot.prevGraph&&Ht("  inheritOrder",function(){y(Bt,Ot.prevGraph)});var pe=Ht("  buildLayoutGraph",function(){return ct(Bt)});Ot&&Ot.edgeLabelSpace===!1||Ht("  makeSpaceForEdgeLabels",function(){at(pe)});try{Ht("  runLayout",function(){P(pe,Ht,Ot)})}catch(ve){if(ve.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,ve);return}throw ve}Ht("  updateInputGraph",function(){v(Bt,pe)})})},P=function(Bt,Ot,Ht){Ot("    removeSelfEdges",function(){re(Bt)}),Ot("    acyclic",function(){tt.default.run(Bt)}),Ot("    nestingGraph.run",function(){M.default.run(Bt)}),Ot("    rank",function(){(0,J.default)((0,X.asNonCompoundGraph)(Bt))}),Ot("    injectEdgeLabelProxies",function(){St(Bt)}),Ot("    removeEmptyRanks",function(){(0,X.removeEmptyRanks)(Bt)}),Ot("    nestingGraph.cleanup",function(){M.default.cleanup(Bt)}),Ot("    normalizeRanks",function(){(0,X.normalizeRanks)(Bt)}),Ot("    assignRankMinMax",function(){bt(Bt)}),Ot("    removeEdgeLabelProxies",function(){zt(Bt)}),Ot("    normalize.run",function(){Q.default.run(Bt)}),Ot("    parentDummyChains",function(){(0,T.default)(Bt)}),Ot("    addBorderSegments",function(){(0,C.default)(Bt)}),Ht&&Ht.keepNodeOrder&&Ot("    initDataOrder",function(){(0,S.default)(Bt,Ht.nodeOrder)}),Ot("    order",function(){(0,b.default)(Bt,Ht==null?void 0:Ht.keepNodeOrder)}),Ot("    insertSelfEdges",function(){It(Bt)}),Ot("    adjustCoordinateSystem",function(){_.default.adjust(Bt)}),Ot("    position",function(){(0,L.default)(Bt)}),Ot("    positionSelfEdges",function(){Wt(Bt)}),Ot("    removeBorderNodes",function(){Vt(Bt)}),Ot("    normalize.undo",function(){Q.default.undo(Bt)}),Ot("    fixupEdgeLabelCoords",function(){it(Bt)}),Ot("    undoCoordinateSystem",function(){_.default.undo(Bt)}),Ot("    translateGraph",function(){kt(Bt)}),Ot("    assignNodeIntersects",function(){Kt(Bt)}),Ot("    reversePoints",function(){gt(Bt)}),Ot("    acyclic.undo",function(){tt.default.undo(Bt)})},y=function(Bt,Ot){Bt.nodes().forEach(function(Ht){var pe=Bt.node(Ht),ve=Ot.node(Ht);ve!==void 0?(pe.fixorder=ve._order,delete ve._order):delete pe.fixorder})},v=function(Bt,Ot){Bt.nodes().forEach(function(Ht){var pe,ve=Bt.node(Ht);if(ve){var Tt=Ot.node(Ht);ve.x=Tt.x,ve.y=Tt.y,ve._order=Tt.order,ve._rank=Tt.rank,!((pe=Ot.children(Ht))===null||pe===void 0)&&pe.length&&(ve.width=Tt.width,ve.height=Tt.height)}}),Bt.edges().forEach(function(Ht){var pe=Bt.edge(Ht),ve=Ot.edge(Ht);pe.points=ve?ve.points:[],ve&&ve.hasOwnProperty("x")&&(pe.x=ve.x,pe.y=ve.y)}),Bt.graph().width=Ot.graph().width,Bt.graph().height=Ot.graph().height},K=["nodesep","edgesep","ranksep","marginx","marginy"],R={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},B=["acyclicer","ranker","rankdir","align"],Y=["width","height","layer","fixorder"],W={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],H={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},et=["labelpos"],ct=function(Bt){var Ot=new I.Graph({multigraph:!0,compound:!0}),Ht=ae(Bt.graph()),pe={};return B==null||B.forEach(function(ve){Ht[ve]!==void 0&&(pe[ve]=Ht[ve])}),Ot.setGraph(Object.assign({},R,$t(Ht,K),pe)),Bt.nodes().forEach(function(ve){var Tt=ae(Bt.node(ve)),Zt=wt(wt({},W),Tt),Ce=$t(Zt,Y);Ot.setNode(ve,Ce),Ot.setParent(ve,Bt.parent(ve))}),Bt.edges().forEach(function(ve){var Tt=ae(Bt.edge(ve)),Zt={};et==null||et.forEach(function(Ce){Tt[Ce]!==void 0&&(Zt[Ce]=Tt[Ce])}),Ot.setEdgeObj(ve,Object.assign({},H,$t(Tt,q),Zt))}),Ot},at=function(Bt){var Ot=Bt.graph();Ot.ranksep||(Ot.ranksep=0),Ot.ranksep/=2,Bt.nodes().forEach(function(Ht){var pe=Bt.node(Ht);isNaN(pe.layer)||pe.layer||(pe.layer=0)}),Bt.edges().forEach(function(Ht){var pe,ve=Bt.edge(Ht);ve.minlen*=2,((pe=ve.labelpos)===null||pe===void 0?void 0:pe.toLowerCase())!=="c"&&(Ot.rankdir==="TB"||Ot.rankdir==="BT"?ve.width+=ve.labeloffset:ve.height+=ve.labeloffset)})},St=function(Bt){Bt.edges().forEach(function(Ot){var Ht=Bt.edge(Ot);if(Ht.width&&Ht.height){var pe=Bt.node(Ot.v),ve=Bt.node(Ot.w),Tt={e:Ot,rank:(ve.rank-pe.rank)/2+pe.rank};(0,X.addDummyNode)(Bt,"edge-proxy",Tt,"_ep")}})},bt=function(Bt){var Ot=0;Bt.nodes().forEach(function(Ht){var pe,ve,Tt=Bt.node(Ht);Tt.borderTop&&(Tt.minRank=(pe=Bt.node(Tt.borderTop))===null||pe===void 0?void 0:pe.rank,Tt.maxRank=(ve=Bt.node(Tt.borderBottom))===null||ve===void 0?void 0:ve.rank,Ot=Math.max(Ot,Tt.maxRank||-1/0))}),Bt.graph().maxRank=Ot},zt=function(Bt){Bt.nodes().forEach(function(Ot){var Ht=Bt.node(Ot);Ht.dummy==="edge-proxy"&&(Bt.edge(Ht.e).labelRank=Ht.rank,Bt.removeNode(Ot))})},kt=function(Bt){var Ot,Ht=0,pe,ve=0,Tt=Bt.graph(),Zt=Tt.marginx||0,Ce=Tt.marginy||0,Ut=function(se){if(se){var _e=se.x,$e=se.y,fr=se.width,gr=se.height;!isNaN(_e)&&!isNaN(fr)&&(Ot===void 0&&(Ot=_e-fr/2),Ot=Math.min(Ot,_e-fr/2),Ht=Math.max(Ht,_e+fr/2)),!isNaN($e)&&!isNaN(gr)&&(pe===void 0&&(pe=$e-gr/2),pe=Math.min(pe,$e-gr/2),ve=Math.max(ve,$e+gr/2))}};Bt.nodes().forEach(function(se){Ut(Bt.node(se))}),Bt.edges().forEach(function(se){var _e=Bt.edge(se);_e!=null&&_e.hasOwnProperty("x")&&Ut(_e)}),Ot-=Zt,pe-=Ce,Bt.nodes().forEach(function(se){var _e=Bt.node(se);_e&&(_e.x-=Ot,_e.y-=pe)}),Bt.edges().forEach(function(se){var _e,$e=Bt.edge(se);(_e=$e.points)===null||_e===void 0||_e.forEach(function(fr){fr.x-=Ot,fr.y-=pe}),$e.hasOwnProperty("x")&&($e.x-=Ot),$e.hasOwnProperty("y")&&($e.y-=pe)}),Tt.width=Ht-Ot+Zt,Tt.height=ve-pe+Ce},Kt=function(Bt){Bt.edges().forEach(function(Ot){var Ht=Bt.edge(Ot),pe=Bt.node(Ot.v),ve=Bt.node(Ot.w),Tt,Zt;Ht.points?(Tt=Ht.points[0],Zt=Ht.points[Ht.points.length-1]):(Ht.points=[],Tt=ve,Zt=pe),Ht.points.unshift((0,X.intersectRect)(pe,Tt)),Ht.points.push((0,X.intersectRect)(ve,Zt))})},it=function(Bt){Bt.edges().forEach(function(Ot){var Ht=Bt.edge(Ot);if(Ht!=null&&Ht.hasOwnProperty("x"))switch((Ht.labelpos==="l"||Ht.labelpos==="r")&&(Ht.width-=Ht.labeloffset),Ht.labelpos){case"l":Ht.x-=Ht.width/2+Ht.labeloffset;break;case"r":Ht.x+=Ht.width/2+Ht.labeloffset;break}})},gt=function(Bt){Bt.edges().forEach(function(Ot){var Ht,pe=Bt.edge(Ot);pe.reversed&&((Ht=pe.points)===null||Ht===void 0||Ht.reverse())})},Vt=function(Bt){Bt.nodes().forEach(function(Ot){var Ht,pe,ve;if(!((Ht=Bt.children(Ot))===null||Ht===void 0)&&Ht.length){var Tt=Bt.node(Ot),Zt=Bt.node(Tt.borderTop),Ce=Bt.node(Tt.borderBottom),Ut=Bt.node(Tt.borderLeft[((pe=Tt.borderLeft)===null||pe===void 0?void 0:pe.length)-1]),se=Bt.node(Tt.borderRight[((ve=Tt.borderRight)===null||ve===void 0?void 0:ve.length)-1]);Tt.width=Math.abs((se==null?void 0:se.x)-(Ut==null?void 0:Ut.x))||10,Tt.height=Math.abs((Ce==null?void 0:Ce.y)-(Zt==null?void 0:Zt.y))||10,Tt.x=((Ut==null?void 0:Ut.x)||0)+Tt.width/2,Tt.y=((Zt==null?void 0:Zt.y)||0)+Tt.height/2}}),Bt.nodes().forEach(function(Ot){var Ht;((Ht=Bt.node(Ot))===null||Ht===void 0?void 0:Ht.dummy)==="border"&&Bt.removeNode(Ot)})},re=function(Bt){Bt.edges().forEach(function(Ot){if(Ot.v===Ot.w){var Ht=Bt.node(Ot.v);Ht.selfEdges||(Ht.selfEdges=[]),Ht.selfEdges.push({e:Ot,label:Bt.edge(Ot)}),Bt.removeEdgeObj(Ot)}})},It=function(Bt){var Ot=(0,X.buildLayerMatrix)(Bt);Ot==null||Ot.forEach(function(Ht){var pe=0;Ht==null||Ht.forEach(function(ve,Tt){var Zt,Ce=Bt.node(ve);Ce.order=Tt+pe,(Zt=Ce.selfEdges)===null||Zt===void 0||Zt.forEach(function(Ut){(0,X.addDummyNode)(Bt,"selfedge",{width:Ut.label.width,height:Ut.label.height,rank:Ce.rank,order:Tt+ ++pe,e:Ut.e,label:Ut.label},"_se")}),delete Ce.selfEdges})})},Wt=function(Bt){Bt.nodes().forEach(function(Ot){var Ht=Bt.node(Ot);if(Ht.dummy==="selfedge"){var pe=Bt.node(Ht.e.v),ve=pe.x+pe.width/2,Tt=pe.y,Zt=Ht.x-ve,Ce=pe.height/2;Bt.setEdgeObj(Ht.e,Ht.label),Bt.removeNode(Ot),Ht.label.points=[{x:ve+2*Zt/3,y:Tt-Ce},{x:ve+5*Zt/6,y:Tt-Ce},{y:Tt,x:ve+Zt},{x:ve+5*Zt/6,y:Tt+Ce},{x:ve+2*Zt/3,y:Tt+Ce}],Ht.label.x=Ht.x,Ht.label.y=Ht.y}})},$t=function(Bt,Ot){var Ht={};return Ot==null||Ot.forEach(function(pe){Bt[pe]!==void 0&&(Ht[pe]=+Bt[pe])}),Ht},ae=function(Bt){Bt===void 0&&(Bt={});var Ot={};return Object.keys(Bt).forEach(function(Ht){Ot[Ht.toLowerCase()]=Bt[Ht]}),Ot};G.default=D},59596:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(269209),st=function(T){var M,C=(0,wt.addDummyNode)(T,"root",{},"_root"),_=Q(T),b=Math.max.apply(Math,Object.values(_));Math.abs(b)===1/0&&(b=1);var L=b-1,S=2*L+1;T.graph().nestingRoot=C,T.edges().forEach(function(D){T.edge(D).minlen*=S});var I=J(T)+1;(M=T.children())===null||M===void 0||M.forEach(function(D){tt(T,C,S,I,L,_,D)}),T.graph().nodeRankFactor=S},tt=function(T,M,C,_,b,L,S){var I=T.children(S);if(!(I!=null&&I.length)){S!==M&&T.setEdge(M,S,{weight:0,minlen:C});return}var D=(0,wt.addBorderNode)(T,"_bt"),P=(0,wt.addBorderNode)(T,"_bb"),y=T.node(S);T.setParent(D,S),y.borderTop=D,T.setParent(P,S),y.borderBottom=P,I==null||I.forEach(function(v){tt(T,M,C,_,b,L,v);var K=T.node(v),R=K.borderTop?K.borderTop:v,B=K.borderBottom?K.borderBottom:v,Y=K.borderTop?_:2*_,W=R!==B?1:b-L[S]+1;T.setEdge(D,R,{minlen:W,weight:Y,nestingEdge:!0}),T.setEdge(B,P,{minlen:W,weight:Y,nestingEdge:!0})}),T.parent(S)||T.setEdge(M,D,{weight:0,minlen:b+L[S]})},Q=function(T){var M,C={},_=function(b,L){var S=T.children(b);S==null||S.forEach(function(I){return _(I,L+1)}),C[b]=L};return(M=T.children())===null||M===void 0||M.forEach(function(b){return _(b,1)}),C},J=function(T){var M=0;return T.edges().forEach(function(C){M+=T.edge(C).weight}),M},X=function(T){var M=T.graph();M.nestingRoot&&T.removeNode(M.nestingRoot),delete M.nestingRoot,T.edges().forEach(function(C){var _=T.edge(C);_.nestingEdge&&T.removeEdgeObj(C)})};G.default={run:st,cleanup:X}},546171:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(269209),st=function(J){J.graph().dummyChains=[],J.edges().forEach(function(X){return tt(J,X)})},tt=function(J,X){var T=X.v,M=J.node(T).rank,C=X.w,_=J.node(C).rank,b=X.name,L=J.edge(X),S=L.labelRank;if(_!==M+1){J.removeEdgeObj(X);var I=J.graph(),D,P,y;for(y=0,++M;M<_;++y,++M)L.points=[],P={edgeLabel:L,width:0,height:0,edgeObj:X,rank:M},D=(0,wt.addDummyNode)(J,"edge",P,"_d"),M===S&&(P.width=L.width,P.height=L.height,P.dummy="edge-label",P.labelpos=L.labelpos),J.setEdge(T,D,{weight:L.weight},b),y===0&&(I.dummyChains||(I.dummyChains=[]),I.dummyChains.push(D)),T=D;J.setEdge(T,C,{weight:L.weight},b)}},Q=function(J){var X;(X=J.graph().dummyChains)===null||X===void 0||X.forEach(function(T){var M=J.node(T),C=M.edgeLabel,_;M.edgeObj&&J.setEdgeObj(M.edgeObj,C);for(var b=T;M.dummy;)_=J.successors(b)[0],J.removeNode(b),C.points.push({x:M.x,y:M.y}),M.dummy==="edge-label"&&(C.x=M.x,C.y=M.y,C.width=M.width,C.height=M.height),b=_,M=J.node(b)})};G.default={run:st,undo:Q}},680314:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(wt,st,tt){var Q={},J;tt==null||tt.forEach(function(X){for(var T=wt.parent(X),M,C;T;){if(M=wt.parent(T),M?(C=Q[M],Q[M]=T):(C=J,J=T),C&&C!==T){st.setEdge(C,T);return}T=M}})};G.default=ut},989921:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(wt,st){return st.map(function(tt){var Q=wt.inEdges(tt);if(!(Q!=null&&Q.length))return{v:tt};{var J={sum:0,weight:0};return Q==null||Q.forEach(function(X){var T=wt.edge(X),M=wt.node(X.v);J.sum+=T.weight*M.order,J.weight+=T.weight}),{v:tt,barycenter:J.sum/J.weight,weight:J.weight}}})};G.default=ut},277006:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(627652),st=function(Q,J,X){var T=tt(Q),M=new wt.Graph({compound:!0}).setGraph({root:T}).setDefaultNodeLabel(function(C){return Q.node(C)});return Q.nodes().forEach(function(C){var _,b=Q.node(C),L=Q.parent(C);(b.rank===J||b.minRank<=J&&J<=b.maxRank)&&(M.setNode(C),M.setParent(C,L||T),(_=Q[X](C))===null||_===void 0||_.forEach(function(S){var I=S.v===C?S.w:S.v,D=M.edgeFromArgs(I,C),P=D!==void 0?D.weight:0;M.setEdge(I,C,{weight:Q.edge(S).weight+P})}),b.hasOwnProperty("minRank")&&M.setNode(C,{borderLeft:b.borderLeft[J],borderRight:b.borderRight[J]}))}),M},tt=function(Q){for(var J;Q.hasNode(J="_root".concat(Math.random())););return J};G.default=st},632957:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(269209),st=function(Q,J,X){for(var T=(0,wt.zipObject)(X,X.map(function(I,D){return D})),M=J.map(function(I){var D,P=(D=Q.outEdges(I))===null||D===void 0?void 0:D.map(function(y){return{pos:T[y.w]||0,weight:Q.edge(y).weight}});return P==null?void 0:P.sort(function(y,v){return y.pos-v.pos})}),C=M.flat().filter(function(I){return I!==void 0}),_=1;_<X.length;)_<<=1;var b=2*_-1;_-=1;var L=Array(b).fill(0,0,b),S=0;return C==null||C.forEach(function(I){if(I){var D=I.pos+_;L[D]+=I.weight;for(var P=0;D>0;)D%2&&(P+=L[D+1]),D=D-1>>1,L[D]+=I.weight;S+=I.weight*P}}),S},tt=function(Q,J){for(var X=0,T=1;T<(J==null?void 0:J.length);T+=1)X+=st(Q,J[T-1],J[T]);return X};G.default=tt},819597:function(Sr,G,ut){"use strict";var wt=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(G,"__esModule",{value:!0});var st=wt(ut(115697)),tt=wt(ut(632957)),Q=wt(ut(277006)),J=wt(ut(680314)),X=wt(ut(99455)),T=ut(449784),M=ut(627652),C=ut(269209),_=function(I,D){for(var P=(0,C.maxRank)(I),y=[],v=[],K=1;K<P+1;K++)y.push(K);for(var K=P-1;K>-1;K--)v.push(K);var R=b(I,y,"inEdges"),B=b(I,v,"outEdges"),Y=(0,st.default)(I);S(I,Y);for(var W=Number.POSITIVE_INFINITY,q,K=0,H=0;H<4;++K,++H){L(K%2?R:B,K%4>=2,!1,D),Y=(0,C.buildLayerMatrix)(I);var et=(0,tt.default)(I,Y);et<W&&(H=0,q=(0,T.clone)(Y),W=et)}Y=(0,st.default)(I),S(I,Y);for(var K=0,H=0;H<4;++K,++H){L(K%2?R:B,K%4>=2,!0,D),Y=(0,C.buildLayerMatrix)(I);var et=(0,tt.default)(I,Y);et<W&&(H=0,q=(0,T.clone)(Y),W=et)}S(I,q)},b=function(I,D,P){return D.map(function(y){return(0,Q.default)(I,y,P)})},L=function(I,D,P,y){var v=new M.Graph;I==null||I.forEach(function(K){for(var R,B=K.graph().root,Y=(0,X.default)(K,B,v,D,P,y),W=0;W<((R=Y.vs)===null||R===void 0?void 0:R.length);W++){var q=K.node(Y.vs[W]);q&&(q.order=W)}(0,J.default)(K,v,Y.vs)})},S=function(I,D){D==null||D.forEach(function(P){P==null||P.forEach(function(y,v){I.node(y).order=v})})};G.default=_},724956:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(wt,st){for(var tt=wt.nodes().filter(function(M){var C;return!(!((C=wt.children(M))===null||C===void 0)&&C.length)}),Q=tt.map(function(M){return wt.node(M).rank}),J=Math.max.apply(Math,Q),X=[],T=0;T<J+1;T++)X[T]=[];st==null||st.forEach(function(M){var C=wt.node(M);!C||C!=null&&C.dummy||isNaN(C.rank)||(C.fixorder=X[C.rank].length,X[C.rank].push(M))})};G.default=ut},115697:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(211707),st=function(tt){for(var Q={},J=tt.nodes().filter(function(I){var D;return!(!((D=tt.children(I))===null||D===void 0)&&D.length)}),X=J.map(function(I){return tt.node(I).rank}),T=(0,wt.max)(X),M=[],C=0;C<T+1;C++)M.push([]);var _=function(I){var D;if(!Q.hasOwnProperty(I)){Q[I]=!0;var P=tt.node(I);isNaN(P.rank)||M[P.rank].push(I),(D=tt.successors(I))===null||D===void 0||D.forEach(function(y){return _(y)})}},b=J.sort(function(I,D){return tt.node(I).rank-tt.node(D).rank}),L=b.filter(function(I){return tt.node(I).fixorder!==void 0}),S=L.sort(function(I,D){return tt.node(I).fixorder-tt.node(D).fixorder});return S==null||S.forEach(function(I){isNaN(tt.node(I).rank)||M[tt.node(I).rank].push(I),Q[I]=!0}),b==null||b.forEach(_),M};G.default=st},707043:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(tt,Q){var J,X,T,M={};tt==null||tt.forEach(function(_,b){M[_.v]={i:b,indegree:0,in:[],out:[],vs:[_.v]};var L=M[_.v];_.barycenter!==void 0&&(L.barycenter=_.barycenter,L.weight=_.weight)}),(J=Q.edges())===null||J===void 0||J.forEach(function(_){var b=M[_.v],L=M[_.w];b!==void 0&&L!==void 0&&(L.indegree++,b.out.push(M[_.w]))});var C=(T=(X=Object.values(M)).filter)===null||T===void 0?void 0:T.call(X,function(_){return!_.indegree});return wt(C)},wt=function(tt){for(var Q,J,X=[],T=function(L){return function(S){S.merged||(S.barycenter===void 0||L.barycenter===void 0||S.barycenter>=L.barycenter)&&st(L,S)}},M=function(L){return function(S){S.in.push(L),--S.indegree===0&&tt.push(S)}},C=function(){var L=tt.pop();X.push(L),(Q=L.in.reverse())===null||Q===void 0||Q.forEach(function(S){return T(L)(S)}),(J=L.out)===null||J===void 0||J.forEach(function(S){return M(L)(S)})};tt!=null&&tt.length;)C();var _=X.filter(function(L){return!L.merged}),b=["vs","i","barycenter","weight"];return _.map(function(L){var S={};return b==null||b.forEach(function(I){L[I]!==void 0&&(S[I]=L[I])}),S})},st=function(tt,Q){var J,X=0,T=0;tt.weight&&(X+=tt.barycenter*tt.weight,T+=tt.weight),Q.weight&&(X+=Q.barycenter*Q.weight,T+=Q.weight),tt.vs=(J=Q.vs)===null||J===void 0?void 0:J.concat(tt.vs),tt.barycenter=X/T,tt.weight=T,tt.i=Math.min(Q.i,tt.i),Q.merged=!0};G.default=ut},99455:function(Sr,G,ut){"use strict";var wt=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(G,"__esModule",{value:!0});var st=wt(ut(989921)),tt=wt(ut(707043)),Q=wt(ut(421498)),J=function(M,C,_,b,L,S){var I,D,P,y,v=M.children(C),K=M.node(C),R=K?K.borderLeft:void 0,B=K?K.borderRight:void 0,Y={};R&&(v=v==null?void 0:v.filter(function(at){return at!==R&&at!==B}));var W=(0,st.default)(M,v||[]);W==null||W.forEach(function(at){var St;if(!((St=M.children(at.v))===null||St===void 0)&&St.length){var bt=J(M,at.v,_,b,S);Y[at.v]=bt,bt.hasOwnProperty("barycenter")&&T(at,bt)}});var q=(0,tt.default)(W,_);X(q,Y),(I=q.filter(function(at){return at.vs.length>0}))===null||I===void 0||I.forEach(function(at){var St=M.node(at.vs[0]);St&&(at.fixorder=St.fixorder,at.order=St.order)});var H=(0,Q.default)(q,b,L,S);if(R&&(H.vs=[R,H.vs,B].flat(),!((D=M.predecessors(R))===null||D===void 0)&&D.length)){var et=M.node(((P=M.predecessors(R))===null||P===void 0?void 0:P[0])||""),ct=M.node(((y=M.predecessors(B))===null||y===void 0?void 0:y[0])||"");H.hasOwnProperty("barycenter")||(H.barycenter=0,H.weight=0),H.barycenter=(H.barycenter*H.weight+et.order+ct.order)/(H.weight+2),H.weight+=2}return H},X=function(M,C){M==null||M.forEach(function(_){var b,L=(b=_.vs)===null||b===void 0?void 0:b.map(function(S){return C[S]?C[S].vs:S});_.vs=L.flat()})},T=function(M,C){M.barycenter!==void 0?(M.barycenter=(M.barycenter*M.weight+C.barycenter*C.weight)/(M.weight+C.weight),M.weight+=C.weight):(M.barycenter=C.barycenter,M.weight=C.weight)};G.default=J},421498:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(269209),st=function(J,X,T,M){var C=(0,wt.partition)(J,function(y){var v=y.hasOwnProperty("fixorder")&&!isNaN(y.fixorder);return M?!v&&y.hasOwnProperty("barycenter"):v||y.hasOwnProperty("barycenter")}),_=C.lhs,b=C.rhs.sort(function(y,v){return-y.i- -v.i}),L=[],S=0,I=0,D=0;_==null||_.sort(Q(!!X,!!T)),D=tt(L,b,D),_==null||_.forEach(function(y){var v;D+=(v=y.vs)===null||v===void 0?void 0:v.length,L.push(y.vs),S+=y.barycenter*y.weight,I+=y.weight,D=tt(L,b,D)});var P={vs:L.flat()};return I&&(P.barycenter=S/I,P.weight=I),P},tt=function(J,X,T){for(var M=T,C;X.length&&(C=X[X.length-1]).i<=M;)X.pop(),J==null||J.push(C.vs),M++;return M},Q=function(J,X){return function(T,M){if(T.fixorder!==void 0&&M.fixorder!==void 0)return T.fixorder-M.fixorder;if(T.barycenter<M.barycenter)return-1;if(T.barycenter>M.barycenter)return 1;if(X&&T.order!==void 0&&M.order!==void 0){if(T.order<M.order)return-1;if(T.order>M.order)return 1}return J?M.i-T.i:T.i-M.i}};G.default=st},933562:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(tt){var Q,J={},X=0,T=function(M){var C,_=X;(C=tt.children(M))===null||C===void 0||C.forEach(T),J[M]={low:_,lim:X++}};return(Q=tt.children())===null||Q===void 0||Q.forEach(T),J},wt=function(tt,Q,J,X){var T=[],M=[],C=Math.min(Q[J].low,Q[X].low),_=Math.max(Q[J].lim,Q[X].lim),b,L;b=J;do b=tt.parent(b),T.push(b);while(b&&(Q[b].low>C||_>Q[b].lim));for(L=b,b=X;b&&b!==L;)M.push(b),b=tt.parent(b);return{lca:L,path:T.concat(M.reverse())}},st=function(tt){var Q,J=ut(tt);(Q=tt.graph().dummyChains)===null||Q===void 0||Q.forEach(function(X){var T,M,C=X,_=tt.node(C),b=_.edgeObj;if(b)for(var L=wt(tt,J,b.v,b.w),S=L.path,I=L.lca,D=0,P=S[D],y=!0;C!==b.w;){if(_=tt.node(C),y){for(;P!==I&&((T=tt.node(P))===null||T===void 0?void 0:T.maxRank)<_.rank;)D++,P=S[D];P===I&&(y=!1)}if(!y){for(;D<S.length-1&&((M=tt.node(S[D+1]))===null||M===void 0?void 0:M.minRank)<=_.rank;)D++;P=S[D]}tt.setParent(C,P),C=tt.successors(C)[0]}})};G.default=st},371963:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var R=function(B,Y){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,q){W.__proto__=q}||function(W,q){for(var H in q)Object.prototype.hasOwnProperty.call(q,H)&&(W[H]=q[H])},R(B,Y)};return function(B,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");R(B,Y);function W(){this.constructor=B}B.prototype=Y===null?Object.create(Y):(W.prototype=Y.prototype,new W)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.width=G.sep=G.positionX=G.balance=G.alignCoordinates=G.findSmallestWidthAlignment=G.buildBlockGraph=G.horizontalCompaction=G.verticalAlignment=G.hasConflict=G.addConflict=G.findOtherInnerSegmentNode=G.findType2Conflicts=G.findType1Conflicts=void 0;var st=ut(199905),tt=ut(211707),Q=ut(269209),J=function(R){wt(B,R);function B(){return R!==null&&R.apply(this,arguments)||this}return B}(st.Graph),X=function(R,B){var Y={},W=function(q,H){var et=0,ct=0,at=q.length,St=H==null?void 0:H[(H==null?void 0:H.length)-1];return H==null||H.forEach(function(bt,zt){var kt,Kt=(0,G.findOtherInnerSegmentNode)(R,bt),it=Kt?R.node(Kt).order:at;(Kt||bt===St)&&((kt=H.slice(ct,zt+1))===null||kt===void 0||kt.forEach(function(gt){var Vt;(Vt=R.predecessors(gt))===null||Vt===void 0||Vt.forEach(function(re){var It,Wt=R.node(re),$t=Wt.order;($t<et||it<$t)&&!(Wt.dummy&&(!((It=R.node(gt))===null||It===void 0)&&It.dummy))&&(0,G.addConflict)(Y,re,gt)})}),ct=zt+1,et=it)}),H};return B!=null&&B.length&&B.reduce(W),Y};G.findType1Conflicts=X;var T=function(R,B){var Y={};function W(ct,at,St,bt,zt){for(var kt,Kt,it,gt=at;gt<St;gt++)it=ct[gt],!((kt=R.node(it))===null||kt===void 0)&&kt.dummy&&((Kt=R.predecessors(it))===null||Kt===void 0||Kt.forEach(function(Vt){var re=R.node(Vt);re.dummy&&(re.order<bt||re.order>zt)&&(0,G.addConflict)(Y,Vt,it)}))}function q(ct){return JSON.stringify(ct.slice(1))}function H(ct,at){var St=q(ct);at.get(St)||(W.apply(void 0,ct),at.set(St,!0))}var et=function(ct,at){var St=-1,bt,zt=0,kt=new Map;return at==null||at.forEach(function(Kt,it){var gt;if(((gt=R.node(Kt))===null||gt===void 0?void 0:gt.dummy)==="border"){var Vt=R.predecessors(Kt)||[];Vt.length&&(bt=R.node(Vt[0]).order,H([at,zt,it,St,bt],kt),zt=it,St=bt)}H([at,zt,at.length,bt,ct.length],kt)}),at};return B!=null&&B.length&&B.reduce(et),Y};G.findType2Conflicts=T;var M=function(R,B){var Y,W;if(!((Y=R.node(B))===null||Y===void 0)&&Y.dummy)return(W=R.predecessors(B))===null||W===void 0?void 0:W.find(function(q){return R.node(q).dummy})};G.findOtherInnerSegmentNode=M;var C=function(R,B,Y){var W=B,q=Y;if(W>q){var H=W;W=q,q=H}var et=R[W];et||(R[W]=et={}),et[q]=!0};G.addConflict=C;var _=function(R,B,Y){var W=B,q=Y;if(W>q){var H=B;W=q,q=H}return!!R[W]};G.hasConflict=_;var b=function(R,B,Y,W){var q={},H={},et={};return B==null||B.forEach(function(ct){ct==null||ct.forEach(function(at,St){q[at]=at,H[at]=at,et[at]=St})}),B==null||B.forEach(function(ct){var at=-1;ct==null||ct.forEach(function(St){var bt=W(St);if(bt.length){bt=bt.sort(function(gt,Vt){return et[gt]-et[Vt]});for(var zt=(bt.length-1)/2,kt=Math.floor(zt),Kt=Math.ceil(zt);kt<=Kt;++kt){var it=bt[kt];H[St]===St&&at<et[it]&&!(0,G.hasConflict)(Y,St,it)&&(H[it]=St,H[St]=q[St]=q[it],at=et[it])}}})}),{root:q,align:H}};G.verticalAlignment=b;var L=function(R,B,Y,W,q){var H,et={},ct=(0,G.buildBlockGraph)(R,B,Y,q),at=q?"borderLeft":"borderRight",St=function(kt,Kt){for(var it=ct.nodes(),gt=it.pop(),Vt={};gt;)Vt[gt]?kt(gt):(Vt[gt]=!0,it.push(gt),it=it.concat(Kt(gt))),gt=it.pop()},bt=function(kt){et[kt]=(ct.inEdges(kt)||[]).reduce(function(Kt,it){return Math.max(Kt,(et[it.v]||0)+ct.edge(it))},0)},zt=function(kt){var Kt=(ct.outEdges(kt)||[]).reduce(function(gt,Vt){return Math.min(gt,(et[Vt.w]||0)-ct.edge(Vt))},Number.POSITIVE_INFINITY),it=R.node(kt);Kt!==Number.POSITIVE_INFINITY&&it.borderType!==at&&(et[kt]=Math.max(et[kt],Kt))};return St(bt,ct.predecessors.bind(ct)),St(zt,ct.successors.bind(ct)),(H=Object.values(W))===null||H===void 0||H.forEach(function(kt){et[kt]=et[Y[kt]]}),et};G.horizontalCompaction=L;var S=function(R,B,Y,W){var q=new J,H=R.graph(),et=(0,G.sep)(H.nodesep,H.edgesep,W);return B==null||B.forEach(function(ct){var at;ct==null||ct.forEach(function(St){var bt=Y[St];if(q.setNode(bt),at){var zt=Y[at],kt=q.edgeFromArgs(zt,bt);q.setEdge(zt,bt,Math.max(et(R,St,at),kt||0))}at=St})}),q};G.buildBlockGraph=S;var I=function(R,B){return(0,Q.minBy)(Object.values(B),function(Y){var W,q=Number.NEGATIVE_INFINITY,H=Number.POSITIVE_INFINITY;return(W=Object.keys(Y))===null||W===void 0||W.forEach(function(et){var ct=Y[et],at=(0,G.width)(R,et)/2;q=Math.max(ct+at,q),H=Math.min(ct-at,H)}),q-H})};G.findSmallestWidthAlignment=I;function D(R,B){var Y=Object.values(B),W=(0,tt.min)(Y),q=(0,tt.max)(Y);["u","d"].forEach(function(H){["l","r"].forEach(function(et){var ct=H+et,at=R[ct],St;if(at!==B){var bt=Object.values(at);St=et==="l"?W-(0,tt.min)(bt):q-(0,tt.max)(bt),St&&(R[ct]={},Object.keys(at).forEach(function(zt){R[ct][zt]=at[zt]+St}))}})})}G.alignCoordinates=D;var P=function(R,B){var Y={};return Object.keys(R.ul).forEach(function(W){if(B)Y[W]=R[B.toLowerCase()][W];else{var q=Object.values(R).map(function(H){return H[W]});Y[W]=(q[0]+q[1])/2}}),Y};G.balance=P;var y=function(R){var B=(0,Q.buildLayerMatrix)(R),Y=Object.assign((0,G.findType1Conflicts)(R,B),(0,G.findType2Conflicts)(R,B)),W={},q;["u","d"].forEach(function(et){q=et==="u"?B:Object.values(B).reverse(),["l","r"].forEach(function(ct){ct==="r"&&(q=q.map(function(zt){return Object.values(zt).reverse()}));var at=(et==="u"?R.predecessors:R.successors).bind(R),St=(0,G.verticalAlignment)(R,q,Y,at),bt=(0,G.horizontalCompaction)(R,q,St.root,St.align,ct==="r");ct==="r"&&Object.keys(bt).forEach(function(zt){bt[zt]=-bt[zt]}),W[et+ct]=bt})});var H=(0,G.findSmallestWidthAlignment)(R,W);return D(W,H),(0,G.balance)(W,R.graph().align)};G.positionX=y;var v=function(R,B,Y){return function(W,q,H){var et=W.node(q),ct=W.node(H),at=0,St;if(at+=et.width/2,et.hasOwnProperty("labelpos"))switch((et.labelpos||"").toLowerCase()){case"l":St=-et.width/2;break;case"r":St=et.width/2;break}if(St&&(at+=Y?St:-St),St=0,at+=(et.dummy?B:R)/2,at+=(ct.dummy?B:R)/2,at+=ct.width/2,ct.labelpos)switch((ct.labelpos||"").toLowerCase()){case"l":St=ct.width/2;break;case"r":St=-ct.width/2;break}return St&&(at+=Y?St:-St),St=0,at}};G.sep=v;var K=function(R,B){return R.node(B).width||0};G.width=K},100095:function(Sr,G,ut){"use strict";var wt=this&&this.__spreadArray||function(T,M,C){if(C||arguments.length===2)for(var _=0,b=M.length,L;_<b;_++)(L||!(_ in M))&&(L||(L=Array.prototype.slice.call(M,0,_)),L[_]=M[_]);return T.concat(L||Array.prototype.slice.call(M))};Object.defineProperty(G,"__esModule",{value:!0});var st=ut(269209),tt=ut(371963),Q=function(T){var M=(0,st.buildLayerMatrix)(T),C=T.graph().ranksep,_=0;M==null||M.forEach(function(b){var L=b.map(function(I){return T.node(I).height}),S=Math.max.apply(Math,wt(wt([],L,!1),[0],!1));b==null||b.forEach(function(I){T.node(I).y=_+S/2}),_+=S+C})},J=function(T){var M=(0,st.buildLayerMatrix)(T),C=Object.assign((0,tt.findType1Conflicts)(T,M),(0,tt.findType2Conflicts)(T,M)),_={},b=[];["u","d"].forEach(function(S){b=S==="u"?M:Object.values(M).reverse(),["l","r"].forEach(function(I){I==="r"&&(b=b.map(function(v){return Object.values(v).reverse()}));var D=(S==="u"?T.predecessors:T.successors).bind(T),P=(0,tt.verticalAlignment)(T,b,C,D),y=(0,tt.horizontalCompaction)(T,b,P.root,P.align,I==="r");I==="r"&&Object.keys(y).forEach(function(v){return y[v]=-y[v]}),_[S+I]=y})});var L=(0,tt.findSmallestWidthAlignment)(T,_);return L&&(0,tt.alignCoordinates)(_,L),(0,tt.balance)(_,T.graph().align)},X=function(T){var M,C=(0,st.asNonCompoundGraph)(T);Q(C);var _=J(C);(M=Object.keys(_))===null||M===void 0||M.forEach(function(b){C.node(b).x=_[b]})};G.default=X},813614:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.feasibleTreeWithLayer=G.feasibleTree=void 0;var wt=ut(337323),st=ut(269209),tt=ut(627652),Q=function(_){var b=new tt.Graph({directed:!1}),L=_.nodes()[0],S=_.nodeCount();b.setNode(L,{});for(var I,D;J(b,_)<S;)I=M(b,_),D=b.hasNode(I.v)?(0,wt.slack)(_,I):-(0,wt.slack)(_,I),C(b,_,D);return b};G.feasibleTree=Q;var J=function(_,b){var L=function(S){b.nodeEdges(S).forEach(function(I){var D=I.v,P=S===D?I.w:D;!_.hasNode(P)&&!(0,wt.slack)(b,I)&&(_.setNode(P,{}),_.setEdge(S,P,{}),L(P))})};return _.nodes().forEach(L),_.nodeCount()},X=function(_){var b=new tt.Graph({directed:!1}),L=_.nodes()[0],S=_.nodes().filter(function(P){return!!_.node(P)}).length;b.setNode(L,{});for(var I,D;T(b,_)<S;)I=M(b,_),D=b.hasNode(I.v)?(0,wt.slack)(_,I):-(0,wt.slack)(_,I),C(b,_,D);return b};G.feasibleTreeWithLayer=X;var T=function(_,b){var L=function(S){var I;(I=b.nodeEdges(S))===null||I===void 0||I.forEach(function(D){var P=D.v,y=S===P?D.w:P;!_.hasNode(y)&&(b.node(y).layer!==void 0||!(0,wt.slack)(b,D))&&(_.setNode(y,{}),_.setEdge(S,y,{}),L(y))})};return _.nodes().forEach(L),_.nodeCount()},M=function(_,b){return(0,st.minBy)(b.edges(),function(L){return _.hasNode(L.v)!==_.hasNode(L.w)?(0,wt.slack)(b,L):1/0})},C=function(_,b,L){_.nodes().forEach(function(S){b.node(S).rank||(b.node(S).rank=0),b.node(S).rank+=L})};G.default={feasibleTree:Q,feasibleTreeWithLayer:X}},576827:function(Sr,G,ut){"use strict";var wt=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(G,"__esModule",{value:!0});var st=ut(337323),tt=ut(813614),Q=wt(ut(432253)),J=function(C){switch(C.graph().ranker){case"network-simplex":M(C);break;case"tight-tree":T(C);break;case"longest-path":X(C);break;default:T(C)}},X=st.longestPath,T=function(C){(0,st.longestPathWithLayer)(C),(0,tt.feasibleTreeWithLayer)(C)},M=function(C){(0,Q.default)(C)};G.default=J},432253:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.exchangeEdges=G.enterEdge=G.leaveEdge=G.initLowLimValues=G.calcCutValue=G.initCutValues=void 0;var wt=ut(813614),st=ut(337323),tt=ut(269209),Q=ut(199905),J=Q.algorithm.preorder,X=Q.algorithm.postorder,T=function(K){var R=(0,tt.simplify)(K);(0,st.longestPath)(R);var B=(0,wt.feasibleTree)(R);(0,G.initLowLimValues)(B),(0,G.initCutValues)(B,R);for(var Y,W;Y=(0,G.leaveEdge)(B);)W=(0,G.enterEdge)(B,R,Y),(0,G.exchangeEdges)(B,R,Y,W)},M=function(K,R){var B=X(K,K.nodes());B=B==null?void 0:B.slice(0,(B==null?void 0:B.length)-1),B==null||B.forEach(function(Y){C(K,R,Y)})};G.initCutValues=M;var C=function(K,R,B){var Y=K.node(B),W=Y.parent;K.edgeFromArgs(B,W).cutvalue=(0,G.calcCutValue)(K,R,B)},_=function(K,R,B){var Y,W=K.node(B),q=W.parent,H=!0,et=R.edgeFromArgs(B,q),ct=0;return et||(H=!1,et=R.edgeFromArgs(q,B)),ct=et.weight,(Y=R.nodeEdges(B))===null||Y===void 0||Y.forEach(function(at){var St=at.v===B,bt=St?at.w:at.v;if(bt!==q){var zt=St===H,kt=R.edge(at).weight;if(ct+=zt?kt:-kt,y(K,B,bt)){var Kt=K.edgeFromArgs(B,bt).cutvalue;ct+=zt?-Kt:Kt}}}),ct};G.calcCutValue=_;var b=function(K,R){R===void 0&&(R=K.nodes()[0]),L(K,{},1,R)};G.initLowLimValues=b;var L=function(K,R,B,Y,W){var q,H=B,et=B,ct=K.node(Y);return R[Y]=!0,(q=K.neighbors(Y))===null||q===void 0||q.forEach(function(at){R[at]||(et=L(K,R,et,at,Y))}),ct.low=H,ct.lim=et++,W?ct.parent=W:delete ct.parent,et},S=function(K){return K.edges().find(function(R){return K.edge(R).cutvalue<0})};G.leaveEdge=S;var I=function(K,R,B){var Y=B.v,W=B.w;R.hasEdge(Y,W)||(Y=B.w,W=B.v);var q=K.node(Y),H=K.node(W),et=q,ct=!1;q.lim>H.lim&&(et=H,ct=!0);var at=R.edges().filter(function(St){return ct===v(K,K.node(St.v),et)&&ct!==v(K,K.node(St.w),et)});return(0,tt.minBy)(at,function(St){return(0,st.slack)(R,St)})};G.enterEdge=I;var D=function(K,R,B,Y){var W=B.v,q=B.w;K.removeEdge(W,q),K.setEdge(Y.v,Y.w,{}),(0,G.initLowLimValues)(K),(0,G.initCutValues)(K,R),P(K,R)};G.exchangeEdges=D;var P=function(K,R){var B=K.nodes().find(function(W){var q;return!(!((q=R.node(W))===null||q===void 0)&&q.parent)}),Y=J(K,B);Y=Y==null?void 0:Y.slice(1),Y==null||Y.forEach(function(W){var q=K.node(W).parent,H=R.edgeFromArgs(W,q),et=!1;H||(H=R.edgeFromArgs(q,W),et=!0),R.node(W).rank=R.node(q).rank+(et?H.minlen:-H.minlen)})},y=function(K,R,B){return K.hasEdge(R,B)},v=function(K,R,B){return B.low<=R.lim&&R.lim<=B.lim};G.default=T},337323:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slack=G.longestPathWithLayer=G.longestPath=void 0;var ut=function(tt){var Q,J={},X=function(T){var M,C=tt.node(T);if(!C)return 0;if(J[T])return C.rank;J[T]=!0;var _;return(M=tt.outEdges(T))===null||M===void 0||M.forEach(function(b){var L=X(b.w),S=tt.edge(b).minlen,I=L-S;I&&(_===void 0||I<_)&&(_=I)}),_||(_=0),C.rank=_,_};(Q=tt.sources())===null||Q===void 0||Q.forEach(function(T){return X(T)})};G.longestPath=ut;var wt=function(tt){var Q,J={},X,T=function(_){var b,L=tt.node(_);if(!L)return 0;if(J[_])return L.rank;J[_]=!0;var S;return(b=tt.outEdges(_))===null||b===void 0||b.forEach(function(I){var D=T(I.w),P=tt.edge(I).minlen,y=D-P;y&&(S===void 0||y<S)&&(S=y)}),S||(S=0),(X===void 0||S<X)&&(X=S),L.rank=S,S};(Q=tt.sources())===null||Q===void 0||Q.forEach(function(_){tt.node(_)&&T(_)}),X===void 0&&(X=0);var M={},C=function(_,b){var L,S=tt.node(_),I=isNaN(S.layer)?b:S.layer;(S.rank===void 0||S.rank<I)&&(S.rank=I),!M[_]&&(M[_]=!0,(L=tt.outEdges(_))===null||L===void 0||L.map(function(D){C(D.w,I+tt.edge(D).minlen)}))};tt.nodes().forEach(function(_){var b=tt.node(_);b&&(isNaN(b.layer)?b.rank-=X:C(_,b.layer))})};G.longestPathWithLayer=wt;var st=function(tt,Q){return tt.node(Q.w).rank-tt.node(Q.v).rank-tt.edge(Q).minlen};G.slack=st,G.default={longestPath:ut,longestPathWithLayer:wt,slack:st}},269209:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.minBy=G.notime=G.time=G.partition=G.maxRank=G.addBorderNode=G.removeEmptyRanks=G.normalizeRanks=G.buildLayerMatrix=G.intersectRect=G.predecessorWeights=G.successorWeights=G.zipObject=G.asNonCompoundGraph=G.simplify=G.addDummyNode=void 0;var wt=ut(449784),st=ut(627652),tt=function(R,B){return Number(R)-Number(B)},Q=function(R,B,Y,W){var q;do q="".concat(W).concat(Math.random());while(R.hasNode(q));return Y.dummy=B,R.setNode(q,Y),q};G.addDummyNode=Q;var J=function(R){var B=new st.Graph().setGraph(R.graph());return R.nodes().forEach(function(Y){B.setNode(Y,R.node(Y))}),R.edges().forEach(function(Y){var W=B.edgeFromArgs(Y.v,Y.w)||{weight:0,minlen:1},q=R.edge(Y);B.setEdge(Y.v,Y.w,{weight:W.weight+q.weight,minlen:Math.max(W.minlen,q.minlen)})}),B};G.simplify=J;var X=function(R){var B=new st.Graph({multigraph:R.isMultigraph()}).setGraph(R.graph());return R.nodes().forEach(function(Y){var W;!((W=R.children(Y))===null||W===void 0)&&W.length||B.setNode(Y,R.node(Y))}),R.edges().forEach(function(Y){B.setEdgeObj(Y,R.edge(Y))}),B};G.asNonCompoundGraph=X;var T=function(R,B){return R==null?void 0:R.reduce(function(Y,W,q){return Y[W]=B[q],Y},{})};G.zipObject=T;var M=function(R){var B={};return R.nodes().forEach(function(Y){var W,q={};(W=R.outEdges(Y))===null||W===void 0||W.forEach(function(H){var et;q[H.w]=(q[H.w]||0)+(((et=R.edge(H))===null||et===void 0?void 0:et.weight)||0)}),B[Y]=q}),B};G.successorWeights=M;var C=function(R){var B=R.nodes(),Y=B.map(function(W){var q,H={};return(q=R.inEdges(W))===null||q===void 0||q.forEach(function(et){H[et.v]=(H[et.v]||0)+R.edge(et).weight}),H});return(0,G.zipObject)(B,Y)};G.predecessorWeights=C;var _=function(R,B){var Y=Number(R.x),W=Number(R.y),q=Number(B.x)-Y,H=Number(B.y)-W,et=Number(R.width)/2,ct=Number(R.height)/2;if(!q&&!H)return{x:0,y:0};var at,St;return Math.abs(H)*et>Math.abs(q)*ct?(H<0&&(ct=-ct),at=ct*q/H,St=ct):(q<0&&(et=-et),at=et,St=et*H/q),{x:Y+at,y:W+St}};G.intersectRect=_;var b=function(R){for(var B=[],Y=(0,G.maxRank)(R)+1,W=0;W<Y;W++)B.push([]);R.nodes().forEach(function(q){var H=R.node(q);if(H){var et=H.rank;et!==void 0&&B[et]&&B[et].push(q)}});for(var W=0;W<Y;W++)B[W]=B[W].sort(function(H,et){var ct,at;return tt((ct=R.node(H))===null||ct===void 0?void 0:ct.order,(at=R.node(et))===null||at===void 0?void 0:at.order)});return B};G.buildLayerMatrix=b;var L=function(R){var B=R.nodes().filter(function(W){var q;return((q=R.node(W))===null||q===void 0?void 0:q.rank)!==void 0}).map(function(W){return R.node(W).rank}),Y=Math.min.apply(Math,B);R.nodes().forEach(function(W){var q=R.node(W);q.hasOwnProperty("rank")&&Y!==1/0&&(q.rank-=Y)})};G.normalizeRanks=L;var S=function(R){var B=R.nodes(),Y=B.filter(function(St){var bt;return((bt=R.node(St))===null||bt===void 0?void 0:bt.rank)!==void 0}).map(function(St){return R.node(St).rank}),W=Math.min.apply(Math,Y),q=[];B.forEach(function(St){var bt,zt=(((bt=R.node(St))===null||bt===void 0?void 0:bt.rank)||0)-W;q[zt]||(q[zt]=[]),q[zt].push(St)});for(var H=0,et=R.graph().nodeRankFactor||0,ct=0;ct<q.length;ct++){var at=q[ct];at===void 0?ct%et!==0&&(H-=1):H&&(at==null||at.forEach(function(St){var bt=R.node(St);bt&&(bt.rank=bt.rank||0,bt.rank+=H)}))}};G.removeEmptyRanks=S;var I=function(R,B,Y,W){var q={width:0,height:0};return(0,wt.isNumber)(Y)&&(0,wt.isNumber)(W)&&(q.rank=Y,q.order=W),(0,G.addDummyNode)(R,"border",q,B)};G.addBorderNode=I;var D=function(R){var B;return R.nodes().forEach(function(Y){var W,q=(W=R.node(Y))===null||W===void 0?void 0:W.rank;q!==void 0&&(B===void 0||q>B)&&(B=q)}),B||(B=0),B};G.maxRank=D;var P=function(R,B){var Y={lhs:[],rhs:[]};return R==null||R.forEach(function(W){B(W)?Y.lhs.push(W):Y.rhs.push(W)}),Y};G.partition=P;var y=function(R,B){var Y=Date.now();try{return B()}finally{console.log("".concat(R," time: ").concat(Date.now()-Y,"ms"))}};G.time=y;var v=function(R,B){return B()};G.notime=v;var K=function(R,B){return R.reduce(function(Y,W){var q=B(Y),H=B(W);return q>H?W:Y})};G.minBy=K},177057:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var M=function(C,_){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,L){b.__proto__=L}||function(b,L){for(var S in L)Object.prototype.hasOwnProperty.call(L,S)&&(b[S]=L[S])},M(C,_)};return function(C,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");M(C,_);function b(){this.constructor=C}C.prototype=_===null?Object.create(_):(b.prototype=_.prototype,new b)}}(),st=this&&this.__assign||function(){return st=Object.assign||function(M){for(var C,_=1,b=arguments.length;_<b;_++){C=arguments[_];for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(M[L]=C[L])}return M},st.apply(this,arguments)},tt=this&&this.__spreadArray||function(M,C,_){if(_||arguments.length===2)for(var b=0,L=C.length,S;b<L;b++)(S||!(b in C))&&(S||(S=Array.prototype.slice.call(C,0,b)),S[b]=C[b]);return M.concat(S||Array.prototype.slice.call(C))};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreCompoundLayout=void 0;var Q=ut(762329),J=ut(631969),X=ut(449784),T=function(M){wt(C,M);function C(_){var b=M.call(this)||this;return b.rankdir="TB",b.nodesep=50,b.edgesep=5,b.ranksep=50,b.controlPoints=!0,b.anchorPoint=!0,b.nodes=[],b.edges=[],b.combos=[],b.onLayoutEnd=function(){},b.updateCfg(_),b}return C.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},C.prototype.init=function(_){var b=_.hiddenNodes||[],L=_.hiddenEdges||[],S=_.hiddenCombos||[];this.nodes=this.getDataByOrder((_.nodes||[]).concat(b)),this.edges=this.getDataByOrder((_.edges||[]).concat(L)),this.combos=(_.combos||[]).concat(S.map(function(I){return st(st({},I),{collapsed:!0})}))},C.prototype.execute=function(){var _=this,b=_.nodes,L=_.edges;if(b){var S=_.getLayoutConfig(),I=S.graphDef,D=S.graphOption,P=S.graphSettings,y=(0,J.buildGraph)(I,D,P),v=(0,J.flatGraph)(y,!0);return this.updatePosition(v),_.onLayoutEnd&&_.onLayoutEnd(),{nodes:b,edges:L}}},C.prototype.getNodePath=function(_){var b=this,L=b.nodes,S=b.combos,I=L.find(function(P){return P.id===_}),D=function(P,y){y===void 0&&(y=[]);var v=S.find(function(K){return K.id===P});return v?(y.unshift(P),v.parentId?D(v.parentId,y):y):y};return I&&I.comboId?D(I.comboId,[_]):[_]},C.prototype.getLayoutConfig=function(){var _,b,L,S=this,I=S.nodes,D=S.edges,P=S.combos,y=S.nodeSize,v=S.rankdir,K=S.align,R=S.edgesep,B=S.nodesep,Y=S.ranksep,W=S.settings,q=(P||[]).reduce(function($t,ae){var Bt=I.filter(function(Ht){return Ht.comboId===ae.id}).map(function(Ht){return Ht.id}),Ot=(P||[]).filter(function(Ht){return Ht.parentId===ae.id}).map(function(Ht){return Ht.id});return(Bt.length||Ot.length)&&($t[ae.id]=tt(tt([],Bt,!0),Ot,!0)),$t},{}),H;y?(0,X.isArray)(y)?H=function(){return y}:H=function(){return[y,y]}:H=function($t){return $t&&$t.size?(0,X.isArray)($t.size)?$t.size:(0,X.isObject)($t.size)?[$t.size.width||40,$t.size.height||40]:[$t.size,$t.size]:[40,40]};var et=function($t){return $t&&$t.size?(0,X.isArray)($t.size)?$t.size:[$t.size,$t.size]:[80,40]},ct=et(P==null?void 0:P[0]),at=ct[0],St=ct[1],bt=(b=(_=S.graphSettings)===null||_===void 0?void 0:_.subScene)===null||b===void 0?void 0:b.meta,zt=((L=P.find(function($t){return!$t.collapsed}))===null||L===void 0?void 0:L.padding)||[20,20,20,20],kt=zt[0],Kt=zt[1],it=zt[2],gt=zt[3],Vt={compound:q,nodes:tt([],(I||[]).map(function($t){var ae=H($t),Bt=ae[0],Ot=ae[1];return st(st({},$t),{width:Bt,height:Ot})}),!0),edges:tt([],(D||[]).map(function($t){return st(st({},$t),{v:$t.source,w:$t.target})}),!0)},re={expanded:(P||[]).filter(function($t){return!$t.collapsed}).map(function($t){return $t.id})},It={graph:{meta:{align:K,rankDir:v,nodeSep:B,edgeSep:R,rankSep:Y}},subScene:{meta:{paddingTop:kt||(bt==null?void 0:bt.paddingTop)||20,paddingRight:Kt||(bt==null?void 0:bt.paddingRight)||20,paddingBottom:it||(bt==null?void 0:bt.paddingBottom)||20,paddingLeft:gt||(bt==null?void 0:bt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:at,height:St}}},Wt=(0,J.mergeConfig)(W,st({},(0,J.mergeConfig)(It,J.LAYOUT_CONFIG)));return S.graphSettings=Wt,{graphDef:Vt,graphOption:re,graphSettings:Wt}},C.prototype.updatePosition=function(_){var b=_.nodes,L=_.edges;this.updateNodePosition(b,L),this.updateEdgePosition(b,L)},C.prototype.getBegin=function(_,b){var L=this,S=L.begin,I=[0,0];if(S){var D=1/0,P=1/0;_.forEach(function(y){D>y.x&&(D=y.x),P>y.y&&(P=y.y)}),b.forEach(function(y){y.points.forEach(function(v){D>v.x&&(D=v.x),P>v.y&&(P=v.y)})}),I[0]=S[0]-D,I[1]=S[1]-P}return I},C.prototype.updateNodePosition=function(_,b){var L=this,S=L.combos,I=L.nodes,D=L.edges,P=L.anchorPoint,y=L.graphSettings,v=this.getBegin(_,b);_.forEach(function(K){var R,B=K.x,Y=K.y,W=K.id,q=K.type,H=K.coreBox;if(q===J.HierarchyNodeType.META&&W!==J.ROOT_NAME){var et=S.findIndex(function(zt){return zt.id===W}),ct=(R=y==null?void 0:y.subScene)===null||R===void 0?void 0:R.meta;S[et].offsetX=B+v[0],S[et].offsetY=Y+v[1],S[et].fixSize=[H.width,H.height],S[et].fixCollapseSize=[H.width,H.height],K.expanded?S[et].padding=[ct==null?void 0:ct.paddingTop,ct==null?void 0:ct.paddingRight,ct==null?void 0:ct.paddingBottom,ct==null?void 0:ct.paddingLeft]:S[et].padding=[0,0,0,0]}else if(q===J.HierarchyNodeType.OP){var et=I.findIndex(function(kt){return kt.id===W});if(I[et].x=B+v[0],I[et].y=Y+v[1],P){var at=[],St=b.filter(function(kt){return kt.v===W}),bt=b.filter(function(kt){return kt.w===W});St.length>0&&St.forEach(function(kt){var Kt=kt.points[0],it=(Kt.x-B)/K.width+.5,gt=(Kt.y-Y)/K.height+.5;at.push([it,gt]),kt.baseEdgeList.forEach(function(Vt){var re=D.find(function(It){return It.source===Vt.v&&It.target===Vt.w});re&&(re.sourceAnchor=at.length-1)})}),bt.length>0&&bt.forEach(function(kt){var Kt=kt.points[kt.points.length-1],it=(Kt.x-B)/K.width+.5,gt=(Kt.y-Y)/K.height+.5;at.push([it,gt]),kt.baseEdgeList.forEach(function(Vt){var re=D.find(function(It){return It.source===Vt.v&&It.target===Vt.w});re&&(re.targetAnchor=at.length-1)})}),I[et].anchorPoints=at.length>0?at:I[et].anchorPoints||[]}}})},C.prototype.updateEdgePosition=function(_,b){var L=this,S=L.combos,I=L.edges,D=L.controlPoints,P=this.getBegin(_,b);D&&(S.forEach(function(y){y.inEdges=[],y.outEdges=[]}),I.forEach(function(y){var v,K,R,B,Y=_.find(function(zt){return zt.id===y.source}),W=_.find(function(zt){return zt.id===y.target}),q=[],H=[];if(Y&&W)H=(0,J.getEdges)(Y==null?void 0:Y.id,W==null?void 0:W.id,_);else if(!Y||!W){var et=L.getNodePath(y.source),ct=L.getNodePath(y.target),at=et.reverse().slice(Y?0:1).find(function(zt){return _.find(function(kt){return kt.id===zt})}),St=ct.reverse().slice(W?0:1).find(function(zt){return _.find(function(kt){return kt.id===zt})});Y=_.find(function(zt){return zt.id===at}),W=_.find(function(zt){return zt.id===St}),H=(0,J.getEdges)(Y==null?void 0:Y.id,W==null?void 0:W.id,_,{v:y.source,w:y.target})}if(q=H.reduce(function(zt,kt){return tt(tt([],zt,!0),kt.points.map(function(Kt){return st(st({},Kt),{x:Kt.x+P[0],y:Kt.y+P[1]})}),!0)},[]),q=q.slice(1,-1),y.controlPoints=q,(W==null?void 0:W.type)===J.NodeType.META){var bt=S.findIndex(function(zt){return zt.id===(W==null?void 0:W.id)});if(!S[bt]||!((v=S[bt].inEdges)===null||v===void 0)&&v.some(function(zt){return zt.source===Y.id&&zt.target===W.id}))return;(K=S[bt].inEdges)===null||K===void 0||K.push({source:Y.id,target:W.id,controlPoints:q})}if((Y==null?void 0:Y.type)===J.NodeType.META){var bt=S.findIndex(function(kt){return kt.id===(Y==null?void 0:Y.id)});if(!S[bt]||!((R=S[bt].outEdges)===null||R===void 0)&&R.some(function(kt){return kt.source===Y.id&&kt.target===W.id}))return;(B=S[bt].outEdges)===null||B===void 0||B.push({source:Y.id,target:W.id,controlPoints:q})}}))},C.prototype.getType=function(){return"dagreCompound"},C.prototype.getDataByOrder=function(_){return _.every(function(b){return b.layoutOrder!==void 0})||_.forEach(function(b,L){b.layoutOrder=L}),_.sort(function(b,L){return b.layoutOrder-L.layoutOrder})},C}(Q.Base);G.DagreCompoundLayout=T},934015:function(Sr,G,ut){"use strict";var wt=this&&this.__assign||function(){return wt=Object.assign||function(b){for(var L,S=1,I=arguments.length;S<I;S++){L=arguments[S];for(var D in L)Object.prototype.hasOwnProperty.call(L,D)&&(b[D]=L[D])}return b},wt.apply(this,arguments)},st=this&&this.__createBinding||(Object.create?function(b,L,S,I){I===void 0&&(I=S);var D=Object.getOwnPropertyDescriptor(L,S);(!D||("get"in D?!L.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return L[S]}}),Object.defineProperty(b,I,D)}:function(b,L,S,I){I===void 0&&(I=S),b[I]=L[S]}),tt=this&&this.__setModuleDefault||(Object.create?function(b,L){Object.defineProperty(b,"default",{enumerable:!0,value:L})}:function(b,L){b.default=L}),Q=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var L={};if(b!=null)for(var S in b)S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)&&st(L,b,S);return tt(L,b),L},J=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(G,"__esModule",{value:!0});var X=Q(ut(451103)),T=J(ut(788221)),M=J(ut(87064)),C=ut(920171);function _(b,L){var S=b.nodes,I=b.edges,D=L.width,P=L.height;if(!(S!=null&&S.length))return Promise.resolve();var y=[];S.forEach(function(H){var et=I.filter(function(at){return at.source===H.id||at.target===H.id});if(et.length>1){var ct=wt({},H);delete ct.size,y.push(ct)}});var v=[];I.forEach(function(H){var et=y.find(function(at){return at.id===H.source}),ct=y.find(function(at){return at.id===H.target});et&&ct&&v.push(H)});var K=new C.DagreLayout({type:"dagre",ranksep:L.nodeMinGap,nodesep:L.nodeMinGap}),R=K.layout({nodes:y,edges:v}).nodes;S.forEach(function(H){var et=(R||[]).find(function(ct){return ct.id===H.id});H.x=(et==null?void 0:et.x)||D/2,H.y=(et==null?void 0:et.y)||P/2});var B=JSON.parse(JSON.stringify(S)),Y=JSON.parse(JSON.stringify(I)),W=X.forceSimulation().nodes(B).force("link",X.forceLink(Y).id(function(H){return H.id}).distance(function(H){var et=v.find(function(ct){return ct.source===H.source&&ct.target===H.target});return et?30:20})).force("charge",X.forceManyBody()).force("center",X.forceCenter(D/2,P/2)).force("x",X.forceX(D/2)).force("y",X.forceY(P/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),q=new Promise(function(H){W.on("end",function(){S.forEach(function(kt){var Kt=B.find(function(it){return it.id===kt.id});Kt&&(kt.x=Kt.x,kt.y=Kt.y)});var et=Math.min.apply(Math,S.map(function(kt){return kt.x})),ct=Math.max.apply(Math,S.map(function(kt){return kt.x})),at=Math.min.apply(Math,S.map(function(kt){return kt.y})),St=Math.max.apply(Math,S.map(function(kt){return kt.y})),bt=D/(ct-et),zt=P/(St-at);S.forEach(function(kt){kt.x!==void 0&&bt<1&&(kt.x=(kt.x-et)*bt),kt.y!==void 0&&zt<1&&(kt.y=(kt.y-at)*zt)}),S.forEach(function(kt){kt.sizeTemp=kt.size,kt.size=[10,10]}),(0,M.default)(S,I),S.forEach(function(kt){kt.size=kt.sizeTemp||[],delete kt.sizeTemp}),(0,T.default)({nodes:S,edges:I},L),H()})});return q}G.default=_},788221:function(Sr,G,ut){"use strict";var wt=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(G,"__esModule",{value:!0});var st=wt(ut(28611));function tt(Q,J){if(!Q.nodes||Q.nodes.length===0)return Q;var X=J.width,T=J.height,M=J.nodeMinGap,C=1e4,_=1e4;Q.nodes.forEach(function(Y){var W=Y.size[0]||50,q=Y.size[1]||50;C=Math.min(W,C),_=Math.min(q,_)});var b=new st.default;b.init(X,T,{CELL_H:_,CELL_W:C}),Q.nodes.forEach(function(Y){var W=b.occupyNearest(Y);W&&(W.node={id:Y.id,size:Y.size},Y.x=W.x,Y.y=W.y,Y.dx=W.dx,Y.dy=W.dy)});for(var L=0;L<Q.nodes.length;L++){var S=Q.nodes[L],I=b.findGridByNodeId(S.id);if(!I)throw new Error("can not find node cell");var D=I.column,P=I.row;if(S.size[0]+M>C){for(var y=Math.ceil((S.size[0]+M)/C)-1,v=y,K=0;K<y;K++){var R=b.additionColumn.indexOf(D+K+1)>-1;if(R&&!b.cells[D+K+1][P].node)v--;else break}b.insertColumn(D,v)}if(S.size[1]+M>_){for(var y=Math.ceil((S.size[1]+M)/_)-1,v=y,K=0;K<y;K++){var R=b.additionRow.indexOf(P+K+1)>-1;if(R&&!b.cells[D][P+K+1].node)v--;else break}b.insertRow(P,v)}}for(var L=0;L<b.columnNum;L++)for(var B=function(W){var q=b.cells[L][W];if(q.node){var H=Q.nodes.find(function(et){var ct;return et.id===((ct=q==null?void 0:q.node)===null||ct===void 0?void 0:ct.id)});H&&(H.x=q.x+H.size[0]/2,H.y=q.y+H.size[1]/2)}},K=0;K<b.rowNum;K++)B(K)}G.default=tt},28611:function(Sr,G){"use strict";var ut=this&&this.__assign||function(){return ut=Object.assign||function(st){for(var tt,Q=1,J=arguments.length;Q<J;Q++){tt=arguments[Q];for(var X in tt)Object.prototype.hasOwnProperty.call(tt,X)&&(st[X]=tt[X])}return st},ut.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0});var wt=function(){function st(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return st.prototype.init=function(tt,Q,J){this.cells=[],this.CELL_W=J.CELL_W||st.DEFAULT_CELL_W,this.CELL_H=J.CELL_H||st.DEFAULT_CELL_H,this.columnNum=Math.ceil(tt/this.CELL_W),this.rowNum=Math.ceil(Q/this.CELL_H),st.MIN_DIST=Math.pow(tt,2)+Math.pow(Q,2);for(var X=0;X<this.columnNum;X++){for(var T=[],M=0;M<this.rowNum;M++){var C={dx:X,dy:M,x:X*this.CELL_W,y:M*this.CELL_H,occupied:!1};T.push(C)}this.cells.push(T)}},st.prototype.findGridByNodeId=function(tt){for(var Q,J,X=0;X<this.columnNum;X++)for(var T=0;T<this.rowNum;T++)if(this.cells[X][T].node&&((J=(Q=this.cells[X][T])===null||Q===void 0?void 0:Q.node)===null||J===void 0?void 0:J.id)===tt)return{column:X,row:T};return null},st.prototype.sqdist=function(tt,Q){return Math.pow(tt.x-Q.x,2)+Math.pow(tt.y-Q.y,2)},st.prototype.occupyNearest=function(tt){for(var Q=st.MIN_DIST,J,X=null,T=0;T<this.columnNum;T++)for(var M=0;M<this.rowNum;M++)!this.cells[T][M].occupied&&(J=this.sqdist(tt,this.cells[T][M]))<Q&&(Q=J,X=this.cells[T][M]);return X&&(X.occupied=!0),X},st.prototype.insertColumn=function(tt,Q){if(!(Q<=0)){for(var J=0;J<Q;J++){this.cells[J+this.columnNum]=[];for(var X=0;X<this.rowNum;X++)this.cells[J+this.columnNum][X]={dx:J,dy:X,x:J*this.CELL_W,y:X*this.CELL_H,occupied:!1,node:null}}for(var J=this.columnNum-1;J>tt;J--)for(var X=0;X<this.rowNum;X++)this.cells[J+Q][X]=ut(ut({},this.cells[J][X]),{x:(J+Q)*this.CELL_W,y:X*this.CELL_H}),this.cells[J][X]={x:J*this.CELL_W,y:X*this.CELL_H,occupied:!0,node:null};for(var X=0;X<this.additionColumn.length;X++)this.additionColumn[X]>=tt&&(this.additionColumn[X]+=Q);for(var J=0;J<Q;J++)this.additionColumn.push(tt+J+1);this.columnNum+=Q}},st.prototype.insertRow=function(tt,Q){if(!(Q<=0)){for(var J=0;J<Q;J++)for(var X=0;X<this.columnNum;X++)this.cells[X][J+this.rowNum]={dx:X,dy:J,x:X*this.CELL_W,y:J*this.CELL_H,occupied:!1,node:null};for(var X=0;X<this.columnNum;X++)for(var J=this.rowNum-1;J>tt;J--)this.cells[X][J+Q]=ut(ut({},this.cells[X][J]),{dx:X,dy:J+Q,x:X*this.CELL_W,y:(J+Q)*this.CELL_H}),this.cells[X][J]={dx:X,dy:J,x:X*this.CELL_W,y:J*this.CELL_H,occupied:!1,node:null};for(var J=0;J<this.additionRow.length;J++)this.additionRow[J]>=tt&&(this.additionRow[J]+=Q);for(var X=0;X<Q;X++)this.additionRow.push(tt+X+1);this.rowNum+=Q}},st.prototype.getNodes=function(){for(var tt=[],Q=0;Q<this.columnNum;Q++)for(var J=0;J<this.rowNum;J++)this.cells[Q][J].node&&tt.push(this.cells[Q][J]);return tt},st.MIN_DIST=50,st.DEFAULT_CELL_W=80,st.DEFAULT_CELL_H=80,st}();G.default=wt},290441:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var X=function(T,M){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(C[b]=_[b])},X(T,M)};return function(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");X(T,M);function C(){this.constructor=T}T.prototype=M===null?Object.create(M):(C.prototype=M.prototype,new C)}}(),st=this&&this.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=void 0;var tt=ut(762329),Q=st(ut(934015)),J=function(X){wt(T,X);function T(M){var C=X.call(this)||this;return C.width=300,C.height=300,C.nodeMinGap=50,C.onLayoutEnd=function(){},M&&C.updateCfg(M),C}return T.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},T.prototype.execute=function(){var M=this,C=M.nodes,_=M.edges;return C==null||C.forEach(function(b){b.size||(b.size=[50,50])}),(0,Q.default)({nodes:C,edges:_},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){M.onLayoutEnd&&M.onLayoutEnd()})},T.prototype.getType=function(){return"er"},T}(tt.Base);G.ERLayout=J},87064:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=1200,wt=800,st=1e7,tt=10,Q=3.141592653589793,J=1.5707963267948966,X=Q*.375,T=Q*.625,M=new Map,C=10,_=10,b=.8,L=.1,S=.5;function I(B,Y,W){var q=B.x-B.size[0]/2,H=B.y-B.size[1]/2,et=B.x+B.size[0]/2,ct=B.y+B.size[1]/2,at=Y.x-Y.size[0]/2,St=Y.y-Y.size[1]/2,bt=Y.x+Y.size[0]/2,zt=Y.y+Y.size[1]/2,kt=B.x,Kt=B.y,it=Y.x,gt=Y.y,Vt=it-kt,re=Math.atan2(Vt,gt-Kt),It=0,Wt=0,$t=0,ae=0;re>J?(Wt=H-zt,It=at-et,$t=parseFloat(Wt?(Wt/Math.cos(re)).toFixed(2):It.toFixed(2)),ae=parseFloat(It?(It/Math.sin(re)).toFixed(2):Wt.toFixed(2))):0<re&&re<=J?(Wt=St-ct,It=at-et,Wt>It?$t=ae=parseFloat(Wt?(Wt/Math.cos(re)).toFixed(2):It.toFixed(2)):$t=ae=parseFloat(It?(It/Math.sin(re)).toFixed(2):Wt.toFixed(2))):re<-J?(Wt=H-zt,It=-(bt-q),Wt>It?$t=ae=parseFloat(Wt?(Wt/Math.cos(re)).toFixed(2):It.toFixed(2)):$t=ae=parseFloat(It?(It/Math.sin(re)).toFixed(2):Wt.toFixed(2))):(Wt=St-ct,Math.abs(Vt)>(et-q)/2?It=q-bt:It=Vt,Wt>It?$t=ae=parseFloat(Wt?(Wt/Math.cos(re)).toFixed(2):It.toFixed(2)):$t=ae=parseFloat(It&&re!==0?(It/Math.sin(re)).toFixed(2):Wt.toFixed(2)));var Bt=parseFloat(re.toFixed(2)),Ot=W;return W&&(Ot=X<Bt&&Bt<T),{distance:Math.abs($t<ae?$t:ae),isHoriz:Ot}}function D(B,Y){var W=M.get(B.id)||[],q=W.find(function($e){return $e.source===Y.id||$e.target===Y.id}),H=B.size[0]*B.size[1],et=Y.size[0]*Y.size[1],ct=H>et?Y:B,at=H>et?B:Y,St=ct.x-ct.size[0]/2,bt=ct.y-ct.size[1]/2,zt=ct.x+ct.size[0]/2,kt=ct.y+ct.size[1]/2,Kt=at.x-at.size[0]/2,it=at.y-at.size[1]/2,gt=at.x+at.size[0]/2,Vt=at.y+at.size[1]/2,re=ct.x,It=ct.y,Wt=at.x,$t=at.y,ae=zt>=Kt&&gt>=St&&kt>=it&&Vt>=bt,Bt=0,Ot=0;if(ae){Ot=Math.sqrt(Math.pow(Wt-re,2)+Math.pow($t-It,2));var Ht=St>Kt?St:Kt,pe=bt>it?bt:it,ve=zt<gt?zt:gt,Tt=kt<Vt?kt:Vt,Zt=ve-Ht,Ce=Tt-pe,Ut=Zt*Ce;Ot===0&&(Ot=1e-7),Bt=tt*1/Ot*100+Ut,Bt*=st}else{var se=!1,_e=I(ct,at,se);Ot=_e.distance,se=_e.isHoriz,Ot<=tt?Ot!==0?q?Bt+=tt+st*1/Ot:Bt+=tt+st*tt/Ot:Bt+=st:(Bt+=Ot,q&&(Bt+=Ot*Ot))}return Bt}function P(B){for(var Y=0,W=0;W<B.length;W++){var q=B[W];(q.x<0||q.y<0||q.x>ut||q.y>wt)&&(Y+=1e12);for(var H=W+1;H<B.length;H++)Y+=D(q,B[H])}return Y}function y(B,Y,W,q){var H=new Map;W.forEach(function(re,It){H.set(re.id,re)});var et=q.filter(function(re){return re.source===B.id||re.target===B.id})||[],ct=[];et.forEach(function(re){var It=re.source===B.id?re.target:re.source,Wt=H.get(It);Wt&&ct.push(Wt)});for(var at=!0,St=0;St<ct.length;St++){var bt=ct[St],zt=Math.atan((B.y-bt.y)/(bt.x-B.y))*180,kt=Math.atan((Y.y-bt.y)/(bt.x-Y.y))*180,Kt=zt<30||zt>150,it=kt<30||kt>150,gt=zt>70&&zt<110,Vt=kt>70&&kt<110;if(Kt&&!it||zt*kt<0){at=!1;break}else if(gt&&!Vt||zt*kt<0){at=!1;break}else if((bt.x-B.x)*(bt.x-Y.x)<0){at=!1;break}else if((bt.y-B.y)*(bt.y-Y.y)<0){at=!1;break}}return at}function v(B,Y){for(var W=!1,q=1,H=C*q,et=_*q,ct=[H,-H,0,0],at=[0,0,et,-et],St=0;St<B.length;++St)for(var bt=B[St],zt=K(bt,B),kt=0;kt<ct.length;kt++){var Kt=y(bt,{x:bt.x+ct[kt],y:bt.y+at[kt]},B,Y);if(Kt){bt.x+=ct[kt],bt.y+=at[kt];var it=K(bt,B),gt=Math.random();it<zt||gt<b&&gt>L?(zt=it,W=!0):(bt.x-=ct[kt],bt.y-=at[kt])}}return b>L&&(b*=S),W?P(B):0}function K(B,Y){var W=0;(B.x<0||B.y<0||B.x+B.size[0]+20>ut||B.y+B.size[1]+20>wt)&&(W+=1e12);for(var q=0;q<Y.length;++q)B.id!==Y[q].id&&(W+=D(B,Y[q]));return W}function R(B,Y){if(B.length===0)return{nodes:B,edges:Y};B.forEach(function(bt){var zt=Y.filter(function(kt){return kt.source===bt.id||kt.target===bt.id});M.set(bt,zt)}),B.sort(function(bt,zt){var kt,Kt;return((kt=M.get(bt.id))===null||kt===void 0?void 0:kt.length)-((Kt=M.get(zt.id))===null||Kt===void 0?void 0:Kt.length)});for(var W=P(B),q=20,H=1,et=0,ct=50,at=0;q>0&&(at++,!(at>=ct));){var St=v(B,Y);St!==0&&(et=St),H=et-W,W=et,H===0?--q:q=20}return B.forEach(function(bt){bt.x=bt.x-bt.size[0]/2,bt.y=bt.y-bt.size[1]/2}),{nodes:B,edges:Y}}G.default=R},589806:function(Sr,G,ut){"use strict";var wt=this&&this.__createBinding||(Object.create?function(T,M,C,_){_===void 0&&(_=C);var b=Object.getOwnPropertyDescriptor(M,C);(!b||("get"in b?!M.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return M[C]}}),Object.defineProperty(T,_,b)}:function(T,M,C,_){_===void 0&&(_=C),T[_]=M[C]}),st=this&&this.__setModuleDefault||(Object.create?function(T,M){Object.defineProperty(T,"default",{enumerable:!0,value:M})}:function(T,M){T.default=M}),tt=this&&this.__importStar||function(T){if(T&&T.__esModule)return T;var M={};if(T!=null)for(var C in T)C!=="default"&&Object.prototype.hasOwnProperty.call(T,C)&&wt(M,T,C);return st(M,T),M};Object.defineProperty(G,"__esModule",{value:!0});var Q=tt(ut(451103)),J=ut(449784);function X(){function T(Tt){return function(){return Tt}}var M=function(Tt){return Tt.cluster},C=T(1),_=T(-1),b=T(100),L=T(.1),S=[0,0],I=[],D={},P=[],y=100,v=100,K={none:{x:0,y:0}},R=[],B,Y="force",W=!0,q=.1;function H(Tt){if(!W)return H;B.tick(),zt();for(var Zt=0,Ce=I.length,Ut=void 0,se=Tt*q;Zt<Ce;++Zt)Ut=I[Zt],Ut.vx+=(K[M(Ut)].x-Ut.x)*se,Ut.vy+=(K[M(Ut)].y-Ut.y)*se}function et(){I&&ct()}function ct(){if(!(!I||!I.length)){if(M(I[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Tt=at();B=Q.forceSimulation(Tt.nodes).force("x",Q.forceX(y).strength(.1)).force("y",Q.forceY(v).strength(.1)).force("collide",Q.forceCollide(function(Zt){return Zt.r}).iterations(4)).force("charge",Q.forceManyBody().strength(_)).force("links",Q.forceLink(Tt.nodes.length?Tt.links:[]).distance(b).strength(L)),R=B.nodes(),zt()}}function at(){var Tt=[],Zt=[],Ce={},Ut=[],se={},_e=[];return se=St(I),_e=bt(P),Ut=Object.keys(se),Ut.forEach(function($e,fr){var gr=se[$e];Tt.push({id:$e,size:gr.count,r:Math.sqrt(gr.sumforceNodeSize/Math.PI)}),Ce[$e]=fr}),_e.forEach(function($e){var fr=(0,J.getEdgeTerminal)($e,"source"),gr=(0,J.getEdgeTerminal)($e,"target"),Yt=Ce[fr],Mr=Ce[gr];Yt!==void 0&&Mr!==void 0&&Zt.push({source:Yt,target:Mr,count:$e.count})}),{nodes:Tt,links:Zt}}function St(Tt){var Zt={};return Tt.forEach(function(Ce){var Ut=M(Ce);Zt[Ut]||(Zt[Ut]={count:0,sumforceNodeSize:0})}),Tt.forEach(function(Ce){var Ut=M(Ce),se=C(Ce),_e=Zt[Ut];_e.count=_e.count+1,_e.sumforceNodeSize=_e.sumforceNodeSize+Math.PI*(se*se)*1.3,Zt[Ut]=_e}),Zt}function bt(Tt){var Zt={},Ce=[];Tt.forEach(function(se){var _e=kt(se),$e=0;Zt[_e]!==void 0&&($e=Zt[_e]),$e+=1,Zt[_e]=$e});var Ut=Object.entries(Zt);return Ut.forEach(function(se){var _e=se[0],$e=se[1],fr=_e.split("~")[0],gr=_e.split("~")[1];fr!==void 0&&gr!==void 0&&Ce.push({source:fr,target:gr,count:$e})}),Ce}function zt(){return K={none:{x:0,y:0}},R.forEach(function(Tt){K[Tt.id]={x:Tt.x-S[0],y:Tt.y-S[1]}}),K}function kt(Tt){var Zt=(0,J.getEdgeTerminal)(Tt,"source"),Ce=(0,J.getEdgeTerminal)(Tt,"target"),Ut=M(D[Zt]),se=M(D[Ce]);return Ut<=se?"".concat(Ut,"~").concat(se):"".concat(se,"~").concat(Ut)}function Kt(Tt){D={},Tt.forEach(function(Zt){D[Zt.id]=Zt})}function it(Tt){return arguments.length?(Y=Tt,et(),H):Y}function gt(Tt){return arguments.length?typeof Tt=="string"?(M=function(Zt){return Zt[Tt]},H):(M=Tt,H):M}function Vt(Tt){return arguments.length?(W=Tt,H):W}function re(Tt){return arguments.length?(q=Tt,H):q}function It(Tt){return arguments.length?(y=Tt,H):y}function Wt(Tt){return arguments.length?(v=Tt,H):v}function $t(Tt){return arguments.length?(Kt(Tt||[]),I=Tt||[],H):I}function ae(Tt){return arguments.length?(P=Tt||[],et(),H):P}function Bt(Tt){return arguments.length?(typeof Tt=="function"?C=Tt:C=T(+Tt),et(),H):C}function Ot(Tt){return arguments.length?(typeof Tt=="function"?_=Tt:_=T(+Tt),et(),H):_}function Ht(Tt){return arguments.length?(typeof Tt=="function"?b=Tt:b=T(+Tt),et(),H):b}function pe(Tt){return arguments.length?(typeof Tt=="function"?L=Tt:L=T(+Tt),et(),H):L}function ve(Tt){return arguments.length?(S=Tt,H):S}return H.initialize=function(Tt){I=Tt,et()},H.template=it,H.groupBy=gt,H.enableGrouping=Vt,H.strength=re,H.centerX=It,H.centerY=Wt,H.nodes=$t,H.links=ae,H.forceNodeSize=Bt,H.nodeSize=H.forceNodeSize,H.forceCharge=Ot,H.forceLinkDistance=Ht,H.forceLinkStrength=pe,H.offset=ve,H.getFocis=zt,H}G.default=X},508810:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var I=function(D,P){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var K in v)Object.prototype.hasOwnProperty.call(v,K)&&(y[K]=v[K])},I(D,P)};return function(D,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");I(D,P);function y(){this.constructor=D}D.prototype=P===null?Object.create(P):(y.prototype=P.prototype,new y)}}(),st=this&&this.__createBinding||(Object.create?function(I,D,P,y){y===void 0&&(y=P);var v=Object.getOwnPropertyDescriptor(D,P);(!v||("get"in v?!D.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return D[P]}}),Object.defineProperty(I,y,v)}:function(I,D,P,y){y===void 0&&(y=P),I[y]=D[P]}),tt=this&&this.__setModuleDefault||(Object.create?function(I,D){Object.defineProperty(I,"default",{enumerable:!0,value:D})}:function(I,D){I.default=D}),Q=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var D={};if(I!=null)for(var P in I)P!=="default"&&Object.prototype.hasOwnProperty.call(I,P)&&st(D,I,P);return tt(D,I),D},J=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceLayout=void 0;var X=Q(ut(451103)),T=J(ut(589806)),M=ut(449784),C=ut(762329),_=ut(416470),b=function(I){wt(D,I);function D(P){var y=I.call(this)||this;return y.center=[0,0],y.nodeStrength=null,y.edgeStrength=null,y.preventOverlap=!1,y.clusterNodeStrength=null,y.clusterEdgeStrength=null,y.clusterEdgeDistance=null,y.clusterNodeSize=null,y.clusterFociStrength=null,y.linkDistance=50,y.alphaDecay=.028,y.alphaMin=.001,y.alpha=.3,y.collideStrength=1,y.workerEnabled=!1,y.tick=function(){},y.onLayoutEnd=function(){},y.ticking=void 0,P&&y.updateCfg(P),y}return D.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},D.prototype.init=function(P){var y=this;y.nodes=P.nodes||[];var v=P.edges||[];y.edges=v.map(function(K){var R={},B=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(K).forEach(function(Y){B.indexOf(Y)>-1||(R[Y]=K[Y])}),R}),y.ticking=!1},D.prototype.execute=function(P){var y=this,v=y.nodes,K=y.edges;if(!y.ticking){var R=y.forceSimulation,B=y.alphaMin,Y=y.alphaDecay,W=y.alpha;if(R){if(P){if(y.clustering&&y.clusterForce&&(y.clusterForce.nodes(v),y.clusterForce.links(K)),R.nodes(v),K&&y.edgeForce)y.edgeForce.links(K);else if(K&&!y.edgeForce){var et=X.forceLink().id(function(bt){return bt.id}).links(K);y.edgeStrength&&et.strength(y.edgeStrength),y.linkDistance&&et.distance(y.linkDistance),y.edgeForce=et,R.force("link",et)}}y.preventOverlap&&y.overlapProcess(R),R.alpha(W).restart(),this.ticking=!0}else try{var q=X.forceManyBody();if(y.nodeStrength&&q.strength(y.nodeStrength),R=X.forceSimulation().nodes(v),y.clustering){var H=(0,T.default)();H.centerX(y.center[0]).centerY(y.center[1]).template("force").strength(y.clusterFociStrength),K&&H.links(K),v&&H.nodes(v),H.forceLinkDistance(y.clusterEdgeDistance).forceLinkStrength(y.clusterEdgeStrength).forceCharge(y.clusterNodeStrength).forceNodeSize(y.clusterNodeSize),y.clusterForce=H,R.force("group",H)}if(R.force("center",X.forceCenter(y.center[0],y.center[1])).force("charge",q).alpha(W).alphaDecay(Y).alphaMin(B),y.preventOverlap&&y.overlapProcess(R),K){var et=X.forceLink().id(function(St){return St.id}).links(K);y.edgeStrength&&et.strength(y.edgeStrength),y.linkDistance&&et.distance(y.linkDistance),y.edgeForce=et,R.force("link",et)}if(y.workerEnabled&&!S()&&(y.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!y.workerEnabled)R.on("tick",function(){y.tick()}).on("end",function(){y.ticking=!1,y.onLayoutEnd&&y.onLayoutEnd()}),y.ticking=!0;else{R.stop();for(var ct=L(R),at=1;at<=ct;at++)R.tick(),postMessage({nodes:v,currentTick:at,totalTicks:ct,type:_.LAYOUT_MESSAGE.TICK},void 0);y.ticking=!1}y.forceSimulation=R,y.ticking=!0}catch(St){y.ticking=!1,console.warn(St)}}},D.prototype.overlapProcess=function(P){var y=this,v=y.nodeSize,K=y.nodeSpacing,R,B,Y=y.collideStrength;if((0,M.isNumber)(K)?B=function(){return K}:(0,M.isFunction)(K)?B=K:B=function(){return 0},!v)R=function(et){if(et.size){if((0,M.isArray)(et.size)){var ct=et.size[0]>et.size[1]?et.size[0]:et.size[1];return ct/2+B(et)}if((0,M.isObject)(et.size)){var ct=et.size.width>et.size.height?et.size.width:et.size.height;return ct/2+B(et)}return et.size/2+B(et)}return 10+B(et)};else if((0,M.isFunction)(v))R=function(et){var ct=v(et);return ct+B(et)};else if((0,M.isArray)(v)){var W=v[0]>v[1]?v[0]:v[1],q=W/2;R=function(et){return q+B(et)}}else if((0,M.isNumber)(v)){var H=v/2;R=function(et){return H+B(et)}}else R=function(){return 10};P.force("collisionForce",X.forceCollide(R).strength(Y))},D.prototype.updateCfg=function(P){var y=this;y.ticking&&(y.forceSimulation.stop(),y.ticking=!1),y.forceSimulation=null,Object.assign(y,P)},D.prototype.destroy=function(){var P=this;P.ticking&&(P.forceSimulation.stop(),P.ticking=!1),P.nodes=null,P.edges=null,P.destroyed=!0},D}(C.Base);G.ForceLayout=b;function L(I){var D=I.alphaMin(),P=I.alphaTarget(),y=I.alpha(),v=Math.log((D-P)/(y-P))/Math.log(1-I.alphaDecay()),K=Math.ceil(v);return K}function S(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(Sr,G,ut){"use strict";var wt=this&&this.__createBinding||(Object.create?function(tt,Q,J,X){X===void 0&&(X=J);var T=Object.getOwnPropertyDescriptor(Q,J);(!T||("get"in T?!Q.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return Q[J]}}),Object.defineProperty(tt,X,T)}:function(tt,Q,J,X){X===void 0&&(X=J),tt[X]=Q[J]}),st=this&&this.__exportStar||function(tt,Q){for(var J in tt)J!=="default"&&!Object.prototype.hasOwnProperty.call(Q,J)&&wt(Q,tt,J)};Object.defineProperty(G,"__esModule",{value:!0}),st(ut(508810),G)},191019:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.forceNBody=void 0;var wt=ut(971829),st=.81,tt=.1;function Q(M,C,_,b,L){var S=_/b,I=M.map(function(P,y){var v=C[P.id],K=v.data,R=v.x,B=v.y,Y=v.size,W=K.layout.force.nodeStrength;return{x:R,y:B,size:Y,index:y,vx:0,vy:0,weight:S*W}}),D=(0,wt.quadtree)(I,function(P){return P.x},function(P){return P.y}).visitAfter(J);return I.forEach(function(P){T(P,D)}),I.map(function(P,y){var v=C[M[y].id],K=v.data.layout.force.mass,R=K===void 0?1:K;L[2*y]=P.vx/R,L[2*y+1]=P.vy/R}),L}G.forceNBody=Q;function J(M){var C=0,_=0,b=0;if(M.length){for(var L=0;L<4;L++){var S=M[L];S&&S.weight&&(C+=S.weight,_+=S.x*S.weight,b+=S.y*S.weight)}M.x=_/C,M.y=b/C,M.weight=C}else{var S=M;M.x=S.data.x,M.y=S.data.y,M.weight=S.data.weight}}var X=function(M,C,_,b,L,S){var I=S.x-M.x||tt,D=S.y-M.y||tt,P=b-C,y=I*I+D*D,v=Math.sqrt(y)*y;if(P*P*st<y){var K=M.weight/v;return S.vx+=I*K,S.vy+=D*K,!0}if(M.length)return!1;if(M.data!==S){var K=M.data.weight/v;S.vx+=I*K,S.vy+=D*K}};function T(M,C){C.visit(function(_,b,L,S,I){return X(_,b,L,S,I,M)})}},306740:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var M=function(C,_){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,L){b.__proto__=L}||function(b,L){for(var S in L)Object.prototype.hasOwnProperty.call(L,S)&&(b[S]=L[S])},M(C,_)};return function(C,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");M(C,_);function b(){this.constructor=C}C.prototype=_===null?Object.create(_):(b.prototype=_.prototype,new b)}}(),st=this&&this.__assign||function(){return st=Object.assign||function(M){for(var C,_=1,b=arguments.length;_<b;_++){C=arguments[_];for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(M[L]=C[L])}return M},st.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.Force2Layout=void 0;var tt=ut(762329),Q=ut(449784),J=ut(191019),X=function(M,C){var _;return M?(0,Q.isNumber)(M)?_=function(b){return M}:_=M:_=function(b){return C||1},_},T=function(M){wt(C,M);function C(_){var b=M.call(this)||this;b.maxIteration=1e3,b.workerEnabled=!1,b.edgeStrength=200,b.nodeStrength=1e3,b.coulombDisScale=.005,b.damping=.9,b.maxSpeed=500,b.minMovement=.4,b.interval=.02,b.factor=1,b.linkDistance=200,b.gravity=0,b.clusterNodeStrength=20,b.preventOverlap=!0,b.distanceThresholdMode="mean",b.tick=function(){},b.nodes=[],b.edges=[],b.width=300,b.height=300,b.nodeMap={},b.nodeIdxMap={},b.judgingDistance=0,b.centripetalOptions={leaf:2,single:2,others:1,center:function(S){return{x:b.width/2,y:b.height/2}}};var L=_.getMass;return b.propsGetMass=L,b.updateCfg(_),b}return C.prototype.getCentripetalOptions=function(){var _=this,b=_.leafCluster,L=_.clustering,S=_.nodeClusterBy,I=_.nodes,D=_.nodeMap,P=_.clusterNodeStrength,y=function(ct){return typeof P=="function"?P(ct):P},v={},K;if(b){K=this.getSameTypeLeafMap()||{};var R=Array.from(new Set(I==null?void 0:I.map(function(ct){return ct[S]})))||[];v={single:100,leaf:function(ct,at,St){var bt=K[ct.id]||{},zt=bt.relativeLeafNodes,kt=bt.sameTypeLeafNodes;return(kt==null?void 0:kt.length)===(zt==null?void 0:zt.length)||(R==null?void 0:R.length)===1?1:y(ct)},others:1,center:function(ct,at,St){var bt,zt=(((bt=ct.data)===null||bt===void 0?void 0:bt.layout)||{}).degree;if(!zt)return{x:100,y:100};var kt;if(zt===1){var Kt=(K[ct.id]||{}).sameTypeLeafNodes,it=Kt===void 0?[]:Kt;it.length===1?kt=void 0:it.length>1&&(kt=(0,Q.getAvgNodePosition)(it))}else kt=void 0;return{x:kt==null?void 0:kt.x,y:kt==null?void 0:kt.y}}}}if(L){K||(K=this.getSameTypeLeafMap());var B=Array.from(new Set(I.map(function(ct,at){return ct[S]}))).filter(function(ct){return ct!==void 0}),Y={};B.forEach(function(ct){var at=I.filter(function(St){return St[S]===ct}).map(function(St){return D[St.id]});Y[ct]=(0,Q.getAvgNodePosition)(at)}),v={single:function(ct){return y(ct)},leaf:function(ct){return y(ct)},others:function(ct){return y(ct)},center:function(ct,at,St){var bt=Y[ct[S]];return{x:bt==null?void 0:bt.x,y:bt==null?void 0:bt.y}}}}this.centripetalOptions=st(st({},this.centripetalOptions),v);var W=this.centripetalOptions,q=W.leaf,H=W.single,et=W.others;q&&typeof q!="function"&&(this.centripetalOptions.leaf=function(){return q}),H&&typeof H!="function"&&(this.centripetalOptions.single=function(){return H}),et&&typeof et!="function"&&(this.centripetalOptions.others=function(){return et})},C.prototype.updateCfg=function(_){_&&Object.assign(this,_)},C.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},C.prototype.execute=function(){var _=this;_.stop();var b=_.nodes,L=_.edges,S=_.defSpringLen;if(_.judgingDistance=0,!b||b.length===0){_.onLayoutEnd([]);return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var I=_.center;if(b.length===1){b[0].x=I[0],b[0].y=I[1],_.onLayoutEnd([st({},b[0])]);return}_.degreesMap=(0,Q.getDegreeMap)(b,L),_.propsGetMass?_.getMass=_.propsGetMass:_.getMass=function(B){var Y=1;(0,Q.isNumber)(B.mass)&&(Y=B.mass);var W=_.degreesMap[B.id].all;return!W||W<5?Y:W*5*Y};var D=_.nodeSize,P;if(_.preventOverlap){var y=_.nodeSpacing,v;(0,Q.isNumber)(y)?v=function(){return y}:(0,Q.isFunction)(y)?v=y:v=function(){return 0},D?(0,Q.isArray)(D)?P=function(B){return Math.max(D[0],D[1])+v(B)}:P=function(B){return D+v(B)}:P=function(B){return B.size?(0,Q.isArray)(B.size)?Math.max(B.size[0],B.size[1])+v(B):(0,Q.isObject)(B.size)?Math.max(B.size.width,B.size.height)+v(B):B.size+v(B):10+v(B)}}_.nodeSize=P,_.linkDistance=X(_.linkDistance,1),_.nodeStrength=X(_.nodeStrength,1),_.edgeStrength=X(_.edgeStrength,1);var K={},R={};b.forEach(function(B,Y){(0,Q.isNumber)(B.x)||(B.x=Math.random()*_.width),(0,Q.isNumber)(B.y)||(B.y=Math.random()*_.height);var W=_.degreesMap[B.id];K[B.id]=st(st({},B),{data:st(st({},B.data),{size:_.nodeSize(B)||30,layout:{inDegree:W.in,outDegree:W.out,degree:W.all,tDegree:W.in,sDegree:W.out,force:{mass:_.getMass(B),nodeStrength:_.nodeStrength(B,L)}}})}),R[B.id]=Y}),_.nodeMap=K,_.nodeIdxMap=R,_.edgeInfos=[],L==null||L.forEach(function(B){var Y=K[B.source],W=K[B.target];!Y||!W?elf.edgeInfos.push({}):_.edgeInfos.push({edgeStrength:_.edgeStrength(B),linkDistance:S?S(st(st({},B),{source:Y,target:W}),Y,W):_.linkDistance(B,Y,W)||1+(D(Y)+D(Y)||0)/2})}),this.getCentripetalOptions(),_.onLayoutEnd=_.onLayoutEnd||function(){},_.run()},C.prototype.run=function(){var _=this,b=_.maxIteration,L=_.nodes,S=_.edges,I=_.workerEnabled,D=_.minMovement,P=_.animate,y=_.nodeMap,v=_.height;if(_.currentMinY=0,_.currentMaxY=v,!!L){var K=[];if(L.forEach(function(et,ct){K[2*ct]=0,K[2*ct+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var R={};S.forEach(function(et){var ct=et.source,at=et.target;R[ct]=R[ct]||[],R[ct].push(et),R[at]=R[at]||[],R[at].push(et)}),this.relatedEdges=R}var B=b,Y=!P;if(I||Y){for(var W=0,q=0;(_.judgingDistance>D||q<1)&&q<B;q++)W=q,_.runOneStep(q,K);_.onLayoutEnd(Object.values(y))}else{if(typeof window=="undefined")return;var H=0;this.timeInterval=window.setInterval(function(){L&&(_.runOneStep(H,K),H++,(H>=B||_.judgingDistance<D)&&(_.onLayoutEnd(Object.values(y)),window.clearInterval(_.timeInterval)))},0)}}},C.prototype.runOneStep=function(_,b){var L,S=this,I=S.nodes,D=S.edges,P=S.nodeMap,y=S.monitor,v=[];if(I!=null&&I.length){S.calRepulsive(v),D&&S.calAttractive(v),S.calGravity(v),S.attractToSide(v);var K=S.interval;if(S.updateVelocity(v,b,K),S.updatePosition(b,K),(L=S.tick)===null||L===void 0||L.call(S),y){var R=this.calTotalEnergy(v);y({energy:R,nodes:I,edges:D,iterations:_})}}},C.prototype.calTotalEnergy=function(_){var b=this,L=b.nodes,S=b.nodeMap;if(!(L!=null&&L.length))return 0;var I=0;return L.forEach(function(D,P){var y=_[2*P],v=_[2*P+1],K=y*y+v*v,R=S[D.id].data.layout.force.mass,B=R===void 0?1:R;I+=B*K*.5}),I},C.prototype.calRepulsive=function(_){var b=this,L=b.nodes,S=b.nodeMap,I=b.factor,D=b.coulombDisScale,P=b.nodeSize;(0,J.forceNBody)(L,S,I,D*D,_)},C.prototype.calAttractive=function(_){var b=this,L=b.edges,S=b.nodeMap,I=b.nodeIdxMap,D=b.edgeInfos,P=b.nodeSize;L.forEach(function(y,v){var K=(0,Q.getEdgeTerminal)(y,"source"),R=(0,Q.getEdgeTerminal)(y,"target"),B=S[K],Y=S[R];if(!(!B||!Y)){var W=Y.x-B.x,q=Y.y-B.y;!W&&!q&&(W=Math.random()*.01,q=Math.random()*.01);var H=Math.sqrt(W*W+q*q),et=W/H,ct=q/H,at=D[v]||{},St=at.linkDistance,bt=St===void 0?200:St,zt=at.edgeStrength,kt=zt===void 0?200:zt,Kt=bt-H,it=Kt*kt,gt=B.data.layout.force.mass||1,Vt=Y.data.layout.force.mass||1,re=1/gt,It=1/Vt,Wt=et*it,$t=ct*it,ae=2*I[K],Bt=2*I[R];_[ae]-=Wt*re,_[ae+1]-=$t*re,_[Bt]+=Wt*It,_[Bt+1]+=$t*It}})},C.prototype.calGravity=function(_){var b,L=this,S=L.nodes,I=L.edges,D=I===void 0?[]:I,P=L.nodeMap,y=L.width,v=L.height,K=L.center,R=L.gravity,B=L.degreesMap,Y=L.centripetalOptions;if(S)for(var W=S.length,q=0;q<W;q++){var H=2*q,et=P[S[q].id],ct=et.data.layout.force.mass,at=ct===void 0?1:ct,St=0,bt=0,zt=R,kt=B[et.id],Kt=kt.in,it=kt.out,gt=kt.all,Vt=(b=L.getCenter)===null||b===void 0?void 0:b.call(L,et,gt);if(Vt){var re=Vt[0],It=Vt[1],Wt=Vt[2];St=et.x-re,bt=et.y-It,zt=Wt}else St=et.x-K[0],bt=et.y-K[1];if(zt&&(_[H]-=zt*St/at,_[H+1]-=zt*bt/at),Y){var $t=Y.leaf,ae=Y.single,Bt=Y.others,Ot=Y.center,Ht=(Ot==null?void 0:Ot(et,S,D,y,v))||{x:0,y:0,centerStrength:0},pe=Ht.x,ve=Ht.y,Tt=Ht.centerStrength;if(!(0,Q.isNumber)(pe)||!(0,Q.isNumber)(ve))continue;var Zt=(et.x-pe)/at,Ce=(et.y-ve)/at;if(Tt&&(_[H]-=Tt*Zt,_[H+1]-=Tt*Ce),gt===0){var Ut=ae(et);if(!Ut)continue;_[H]-=Ut*Zt,_[H+1]-=Ut*Ce;continue}if(Kt===0||it===0){var se=$t(et,S,D);if(!se)continue;_[H]-=se*Zt,_[H+1]-=se*Ce;continue}var _e=Bt(et);if(!_e)continue;_[H]-=_e*Zt,_[H+1]-=_e*Ce}}},C.prototype.attractToSide=function(_){var b=this,L=b.defSideCoe,S=b.height,I=b.nodes,D=b.relatedEdges,P=b.currentMinY,y=P===void 0?0:P,v=b.currentMaxY,K=v===void 0?this.height:v;!L||typeof L!="function"||!(I!=null&&I.length)||I.forEach(function(R,B){var Y=L(R,D[R.id]||[]);if(Y!==0){var W=Y<0?y:K,q=Math.abs(Y);_[2*B+1]-=q*(R.y-W)}})},C.prototype.updateVelocity=function(_,b,L){var S=this,I=S.nodes,D=S.damping,P=S.maxSpeed;I!=null&&I.length&&I.forEach(function(y,v){var K=(b[2*v]+_[2*v]*L)*D||.01,R=(b[2*v+1]+_[2*v+1]*L)*D||.01,B=Math.sqrt(K*K+R*R);if(B>P){var Y=P/B;K=Y*K,R=Y*R}b[2*v]=K,b[2*v+1]=R})},C.prototype.updatePosition=function(_,b){var L=this,S=L.nodes,I=L.distanceThresholdMode,D=L.nodeMap;if(!(S!=null&&S.length)){this.judgingDistance=0;return}var P=0;I==="max"?L.judgingDistance=-1/0:I==="min"&&(L.judgingDistance=1/0);var y=1/0,v=-1/0;S.forEach(function(K,R){var B=D[K.id];if((0,Q.isNumber)(K.fx)&&(0,Q.isNumber)(K.fy)){K.x=K.fx,K.y=K.fy,B.x=K.x,B.y=K.y;return}var Y=_[2*R]*b,W=_[2*R+1]*b;K.x+=Y,K.y+=W,B.x=K.x,B.y=K.y,K.y<y&&(y=K.y),K.y>v&&(v=K.y);var q=Math.sqrt(Y*Y+W*W);switch(I){case"max":L.judgingDistance<q&&(L.judgingDistance=q);break;case"min":L.judgingDistance>q&&(L.judgingDistance=q);break;default:P=P+q;break}}),this.currentMinY=y,this.currentMaxY=v,(!I||I==="mean")&&(L.judgingDistance=P/S.length)},C.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},C.prototype.destroy=function(){var _=this;_.stop(),_.tick=null,_.nodes=null,_.edges=null,_.destroyed=!0},C.prototype.getType=function(){return"force2"},C.prototype.getSameTypeLeafMap=function(){var _=this,b=_.nodeClusterBy,L=_.nodes,S=_.edges,I=_.nodeMap,D=_.degreesMap;if(L!=null&&L.length){var P={};return L.forEach(function(y,v){var K=D[y.id].all;K===1&&(P[y.id]=(0,Q.getCoreNodeAndRelativeLeafNodes)("leaf",y,S,b,D,I))}),P}},C}(tt.Base);G.Force2Layout=T},19712:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(){function wt(st){this.id=st.id||0,this.rx=st.rx,this.ry=st.ry,this.fx=0,this.fy=0,this.mass=st.mass,this.degree=st.degree,this.g=st.g||0}return wt.prototype.distanceTo=function(st){var tt=this.rx-st.rx,Q=this.ry-st.ry;return Math.hypot(tt,Q)},wt.prototype.setPos=function(st,tt){this.rx=st,this.ry=tt},wt.prototype.resetForce=function(){this.fx=0,this.fy=0},wt.prototype.addForce=function(st){var tt=st.rx-this.rx,Q=st.ry-this.ry,J=Math.hypot(tt,Q);J=J<1e-4?1e-4:J;var X=this.g*(this.degree+1)*(st.degree+1)/J;this.fx+=X*tt/J,this.fy+=X*Q/J},wt.prototype.in=function(st){return st.contains(this.rx,this.ry)},wt.prototype.add=function(st){var tt=this.mass+st.mass,Q=(this.rx*this.mass+st.rx*st.mass)/tt,J=(this.ry*this.mass+st.ry*st.mass)/tt,X=this.degree+st.degree,T={rx:Q,ry:J,mass:tt,degree:X};return new wt(T)},wt}();G.default=ut},148564:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var C=function(_,b){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,S){L.__proto__=S}||function(L,S){for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(L[I]=S[I])},C(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");C(_,b);function L(){this.constructor=_}_.prototype=b===null?Object.create(b):(L.prototype=b.prototype,new L)}}(),st=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceAtlas2Layout=void 0;var tt=ut(762329),Q=ut(449784),J=st(ut(19712)),X=st(ut(851638)),T=st(ut(762732)),M=function(C){wt(_,C);function _(b){var L=C.call(this)||this;return L.center=[0,0],L.width=300,L.height=300,L.nodes=[],L.edges=[],L.kr=5,L.kg=1,L.mode="normal",L.preventOverlap=!1,L.dissuadeHubs=!1,L.barnesHut=void 0,L.maxIteration=0,L.ks=.1,L.ksmax=10,L.tao=.1,L.onLayoutEnd=function(){},L.prune=void 0,L.updateCfg(b),L}return _.prototype.getDefaultCfg=function(){return{}},_.prototype.execute=function(){var b=this,L=b.nodes,S=b.onLayoutEnd,I=b.prune,D=b.maxIteration;!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight);for(var P=[],y=L.length,v=0;v<y;v+=1){var K=L[v],R=10,B=10;(0,Q.isNumber)(K.size)&&(R=K.size,B=K.size),(0,Q.isArray)(K.size)?(isNaN(K.size[0])||(R=K.size[0]),isNaN(K.size[1])||(B=K.size[1])):(0,Q.isObject)(K.size)&&(R=K.size.width,B=K.size.height),b.getWidth&&!isNaN(b.getWidth(K))&&(B=b.getWidth(K)),b.getHeight&&!isNaN(b.getHeight(K))&&(R=b.getHeight(K));var Y=Math.max(R,B);P.push(Y)}b.barnesHut===void 0&&y>250&&(b.barnesHut=!0),b.prune===void 0&&y>100&&(b.prune=!0),this.maxIteration===0&&!b.prune?(D=250,y<=200&&y>100?D=1e3:y>200&&(D=1200),this.maxIteration=D):this.maxIteration===0&&I&&(D=100,y<=200&&y>100?D=500:y>200&&(D=950),this.maxIteration=D),b.kr||(b.kr=50,y>100&&y<=500?b.kr=20:y>500&&(b.kr=1)),b.kg||(b.kg=20,y>100&&y<=500?b.kg=10:y>500&&(b.kg=1)),this.nodes=b.updateNodesByForces(P),S()},_.prototype.updateNodesByForces=function(b){for(var L=this,S=L.edges,I=L.maxIteration,D=L.nodes,P=S.filter(function(kt){var Kt=(0,Q.getEdgeTerminal)(kt,"source"),it=(0,Q.getEdgeTerminal)(kt,"target");return Kt!==it}),y=D.length,v=P.length,K=[],R={},B={},Y=[],W=0;W<y;W+=1)R[D[W].id]=W,K[W]=0,(D[W].x===void 0||isNaN(D[W].x))&&(D[W].x=Math.random()*1e3),(D[W].y===void 0||isNaN(D[W].y))&&(D[W].y=Math.random()*1e3),Y.push({x:D[W].x,y:D[W].y});for(var W=0;W<v;W+=1){for(var q=void 0,H=void 0,et=0,ct=0,at=0;at<y;at+=1){var St=(0,Q.getEdgeTerminal)(P[W],"source"),bt=(0,Q.getEdgeTerminal)(P[W],"target");D[at].id===St?(q=D[at],et=at):D[at].id===bt&&(H=D[at],ct=at),B[W]={sourceIdx:et,targetIdx:ct}}q&&(K[R[q.id]]+=1),H&&(K[R[H.id]]+=1)}var zt=I;if(D=this.iterate(zt,R,B,v,K,b),L.prune){for(var at=0;at<v;at+=1)K[B[at].sourceIdx]<=1?(D[B[at].sourceIdx].x=D[B[at].targetIdx].x,D[B[at].sourceIdx].y=D[B[at].targetIdx].y):K[B[at].targetIdx]<=1&&(D[B[at].targetIdx].x=D[B[at].sourceIdx].x,D[B[at].targetIdx].y=D[B[at].sourceIdx].y);L.prune=!1,L.barnesHut=!1,zt=100,D=this.iterate(zt,R,B,v,K,b)}return D},_.prototype.iterate=function(b,L,S,I,D,P){for(var y=this,v=y.nodes,K=y.kr,R=y.preventOverlap,B=y.barnesHut,Y=v.length,W=0,q=100,H=b,et=50,ct=[],at=[],St=[],bt=0;bt<Y;bt+=1)if(ct[2*bt]=0,ct[2*bt+1]=0,B){var zt={id:bt,rx:v[bt].x,ry:v[bt].y,mass:1,g:K,degree:D[bt]};St[bt]=new J.default(zt)}for(;H>0;){for(var bt=0;bt<Y;bt+=1)at[2*bt]=ct[2*bt],at[2*bt+1]=ct[2*bt+1],ct[2*bt]=0,ct[2*bt+1]=0;ct=this.getAttrForces(H,et,I,L,S,D,P,ct),B&&(R&&H>et||!R)?ct=this.getOptRepGraForces(ct,St,D):ct=this.getRepGraForces(H,et,ct,q,P,D);var kt=this.updatePos(ct,at,W,D);v=kt.nodes,W=kt.sg,H--,y.tick&&y.tick()}return v},_.prototype.getAttrForces=function(b,L,S,I,D,P,y,v){for(var K=this,R=K.nodes,B=K.preventOverlap,Y=K.dissuadeHubs,W=K.mode,q=K.prune,H=0;H<S;H+=1){var et=R[D[H].sourceIdx],ct=D[H].sourceIdx,at=R[D[H].targetIdx],St=D[H].targetIdx;if(!(q&&(P[ct]<=1||P[St]<=1))){var bt=[at.x-et.x,at.y-et.y],zt=Math.hypot(bt[0],bt[1]);zt=zt<1e-4?1e-4:zt,bt[0]=bt[0]/zt,bt[1]=bt[1]/zt,B&&b<L&&(zt=zt-y[ct]-y[St]);var kt=zt,Kt=kt;W==="linlog"&&(kt=Math.log(1+zt),Kt=kt),Y&&(kt=zt/P[ct],Kt=zt/P[St]),B&&b<L&&zt<=0?(kt=0,Kt=0):B&&b<L&&zt>0&&(kt=zt,Kt=zt),v[2*I[et.id]]+=kt*bt[0],v[2*I[at.id]]-=Kt*bt[0],v[2*I[et.id]+1]+=kt*bt[1],v[2*I[at.id]+1]-=Kt*bt[1]}}return v},_.prototype.getRepGraForces=function(b,L,S,I,D,P){for(var y=this,v=y.nodes,K=y.preventOverlap,R=y.kr,B=y.kg,Y=y.center,W=y.prune,q=v.length,H=0;H<q;H+=1){for(var et=H+1;et<q;et+=1)if(!(W&&(P[H]<=1||P[et]<=1))){var ct=[v[et].x-v[H].x,v[et].y-v[H].y],at=Math.hypot(ct[0],ct[1]);at=at<1e-4?1e-4:at,ct[0]=ct[0]/at,ct[1]=ct[1]/at,K&&b<L&&(at=at-D[H]-D[et]);var St=R*(P[H]+1)*(P[et]+1)/at;K&&b<L&&at<0?St=I*(P[H]+1)*(P[et]+1):K&&b<L&&at===0?St=0:K&&b<L&&at>0&&(St=R*(P[H]+1)*(P[et]+1)/at),S[2*H]-=St*ct[0],S[2*et]+=St*ct[0],S[2*H+1]-=St*ct[1],S[2*et+1]+=St*ct[1]}var bt=[v[H].x-Y[0],v[H].y-Y[1]],zt=Math.hypot(bt[0],bt[1]);bt[0]=bt[0]/zt,bt[1]=bt[1]/zt;var kt=B*(P[H]+1);S[2*H]-=kt*bt[0],S[2*H+1]-=kt*bt[1]}return S},_.prototype.getOptRepGraForces=function(b,L,S){for(var I=this,D=I.nodes,P=I.kg,y=I.center,v=I.prune,K=D.length,R=9e10,B=-9e10,Y=9e10,W=-9e10,q=0;q<K;q+=1)v&&S[q]<=1||(L[q].setPos(D[q].x,D[q].y),D[q].x>=B&&(B=D[q].x),D[q].x<=R&&(R=D[q].x),D[q].y>=W&&(W=D[q].y),D[q].y<=Y&&(Y=D[q].y));for(var H=Math.max(B-R,W-Y),et={xmid:(B+R)/2,ymid:(W+Y)/2,length:H,massCenter:y,mass:K},ct=new X.default(et),at=new T.default(ct),q=0;q<K;q+=1)v&&S[q]<=1||L[q].in(ct)&&at.insert(L[q]);for(var q=0;q<K;q+=1)if(!(v&&S[q]<=1)){L[q].resetForce(),at.updateForce(L[q]),b[2*q]-=L[q].fx,b[2*q+1]-=L[q].fy;var St=[D[q].x-y[0],D[q].y-y[1]],bt=Math.hypot(St[0],St[1]);bt=bt<1e-4?1e-4:bt,St[0]=St[0]/bt,St[1]=St[1]/bt;var zt=P*(S[q]+1);b[2*q]-=zt*St[0],b[2*q+1]-=zt*St[1]}return b},_.prototype.updatePos=function(b,L,S,I){for(var D=this,P=D.nodes,y=D.ks,v=D.tao,K=D.prune,R=D.ksmax,B=P.length,Y=[],W=[],q=0,H=0,et=0;et<B;et+=1)if(!(K&&I[et]<=1)){var ct=[b[2*et]-L[2*et],b[2*et+1]-L[2*et+1]],at=Math.hypot(ct[0],ct[1]),St=[b[2*et]+L[2*et],b[2*et+1]+L[2*et+1]],bt=Math.hypot(St[0],St[1]);Y[et]=at,W[et]=bt/2,q+=(I[et]+1)*Y[et],H+=(I[et]+1)*W[et]}var zt=S;S=v*H/q,zt!==0&&(S=S>1.5*zt?1.5*zt:S);for(var et=0;et<B;et+=1)if(!(K&&I[et]<=1)&&!((0,Q.isNumber)(P[et].fx)&&(0,Q.isNumber)(P[et].fy))){var kt=y*S/(1+S*Math.sqrt(Y[et])),Kt=Math.hypot(b[2*et],b[2*et+1]);Kt=Kt<1e-4?1e-4:Kt;var it=R/Kt;kt=kt>it?it:kt;var gt=kt*b[2*et],Vt=kt*b[2*et+1];P[et].x+=gt,P[et].y+=Vt}return{nodes:P,sg:S}},_}(tt.Base);G.ForceAtlas2Layout=M},851638:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(){function wt(st){this.xmid=st.xmid,this.ymid=st.ymid,this.length=st.length,this.massCenter=st.massCenter||[0,0],this.mass=st.mass||1}return wt.prototype.getLength=function(){return this.length},wt.prototype.contains=function(st,tt){var Q=this.length/2;return st<=this.xmid+Q&&st>=this.xmid-Q&&tt<=this.ymid+Q&&tt>=this.ymid-Q},wt.prototype.NW=function(){var st=this.xmid-this.length/4,tt=this.ymid+this.length/4,Q=this.length/2,J={xmid:st,ymid:tt,length:Q},X=new wt(J);return X},wt.prototype.NE=function(){var st=this.xmid+this.length/4,tt=this.ymid+this.length/4,Q=this.length/2,J={xmid:st,ymid:tt,length:Q},X=new wt(J);return X},wt.prototype.SW=function(){var st=this.xmid-this.length/4,tt=this.ymid-this.length/4,Q=this.length/2,J={xmid:st,ymid:tt,length:Q},X=new wt(J);return X},wt.prototype.SE=function(){var st=this.xmid+this.length/4,tt=this.ymid-this.length/4,Q=this.length/2,J={xmid:st,ymid:tt,length:Q},X=new wt(J);return X},wt}();G.default=ut},762732:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=function(){function wt(st){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,st!=null&&(this.quad=st)}return wt.prototype.insert=function(st){if(this.body==null){this.body=st;return}this._isExternal()?(this.quad&&(this.NW=new wt(this.quad.NW()),this.NE=new wt(this.quad.NE()),this.SW=new wt(this.quad.SW()),this.SE=new wt(this.quad.SE())),this._putBody(this.body),this._putBody(st),this.body=this.body.add(st)):(this.body=this.body.add(st),this._putBody(st))},wt.prototype._putBody=function(st){this.quad&&(st.in(this.quad.NW())&&this.NW?this.NW.insert(st):st.in(this.quad.NE())&&this.NE?this.NE.insert(st):st.in(this.quad.SW())&&this.SW?this.SW.insert(st):st.in(this.quad.SE())&&this.SE&&this.SE.insert(st))},wt.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},wt.prototype.updateForce=function(st){if(!(this.body==null||st===this.body))if(this._isExternal())st.addForce(this.body);else{var tt=this.quad?this.quad.getLength():0,Q=this.body.distanceTo(st);tt/Q<this.theta?st.addForce(this.body):(this.NW&&this.NW.updateForce(st),this.NE&&this.NE.updateForce(st),this.SW&&this.SW.updateForce(st),this.SE&&this.SE.updateForce(st))}},wt}();G.default=ut},880374:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var X=function(T,M){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(C[b]=_[b])},X(T,M)};return function(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");X(T,M);function C(){this.constructor=T}T.prototype=M===null?Object.create(M):(C.prototype=M.prototype,new C)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanLayout=void 0;var st=ut(762329),tt=ut(449784),Q=800,J=function(X){wt(T,X);function T(M){var C=X.call(this)||this;return C.maxIteration=1e3,C.workerEnabled=!1,C.gravity=10,C.speed=5,C.clustering=!1,C.clusterGravity=10,C.nodes=[],C.edges=[],C.width=300,C.height=300,C.nodeMap={},C.nodeIdxMap={},C.onLayoutEnd=function(){},C.tick=function(){},C.animate=!0,C.updateCfg(M),C}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},T.prototype.execute=function(){var M=this,C,_,b=this,L=b.nodes;if(b.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(b.timeInterval),!L||L.length===0){(C=b.onLayoutEnd)===null||C===void 0||C.call(b);return}!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight),b.center||(b.center=[b.width/2,b.height/2]);var S=b.center;if(L.length===1){L[0].x=S[0],L[0].y=S[1],(_=b.onLayoutEnd)===null||_===void 0||_.call(b);return}var I={},D={};return L.forEach(function(P,y){(0,tt.isNumber)(P.x)||(P.x=Math.random()*M.width),(0,tt.isNumber)(P.y)||(P.y=Math.random()*M.height),I[P.id]=P,D[P.id]=y}),b.nodeMap=I,b.nodeIdxMap=D,b.run()},T.prototype.run=function(){var M,C=this,_=C.nodes;if(_){var b=C.edges,L=C.maxIteration,S=C.workerEnabled,I=C.clustering,D=C.animate,P={};if(I&&_.forEach(function(K){P[K.cluster]===void 0&&(P[K.cluster]={name:K.cluster,cx:0,cy:0,count:0})}),S||!D){for(var y=0;y<L;y++)C.runOneStep(P);(M=C.onLayoutEnd)===null||M===void 0||M.call(C)}else{if(typeof window=="undefined")return;var v=0;this.timeInterval=window.setInterval(function(){var K;C.runOneStep(P),v++,v>=L&&((K=C.onLayoutEnd)===null||K===void 0||K.call(C),window.clearInterval(C.timeInterval))},0)}return{nodes:_,edges:b}}},T.prototype.runOneStep=function(M){var C,_=this,b=_.nodes;if(b){var L=_.edges,S=_.center,I=_.gravity,D=_.speed,P=_.clustering,y=_.height*_.width,v=Math.sqrt(y)/10,K=y/(b.length+1),R=Math.sqrt(K),B=[];if(b.forEach(function(q,H){B[H]={x:0,y:0}}),_.applyCalculate(b,L,B,R,K),P){for(var Y in M)M[Y].cx=0,M[Y].cy=0,M[Y].count=0;b.forEach(function(q){var H=M[q.cluster];(0,tt.isNumber)(q.x)&&(H.cx+=q.x),(0,tt.isNumber)(q.y)&&(H.cy+=q.y),H.count++});for(var Y in M)M[Y].cx/=M[Y].count,M[Y].cy/=M[Y].count;var W=_.clusterGravity||I;b.forEach(function(q,H){if(!(!(0,tt.isNumber)(q.x)||!(0,tt.isNumber)(q.y))){var et=M[q.cluster],ct=Math.sqrt((q.x-et.cx)*(q.x-et.cx)+(q.y-et.cy)*(q.y-et.cy)),at=R*W;B[H].x-=at*(q.x-et.cx)/ct,B[H].y-=at*(q.y-et.cy)/ct}})}b.forEach(function(q,H){if(!(!(0,tt.isNumber)(q.x)||!(0,tt.isNumber)(q.y))){var et=.01*R*I;B[H].x-=et*(q.x-S[0]),B[H].y-=et*(q.y-S[1])}}),b.forEach(function(q,H){if((0,tt.isNumber)(q.fx)&&(0,tt.isNumber)(q.fy)){q.x=q.fx,q.y=q.fy;return}if(!(!(0,tt.isNumber)(q.x)||!(0,tt.isNumber)(q.y))){var et=Math.sqrt(B[H].x*B[H].x+B[H].y*B[H].y);if(et>0){var ct=Math.min(v*(D/Q),et);q.x+=B[H].x/et*ct,q.y+=B[H].y/et*ct}}}),(C=_.tick)===null||C===void 0||C.call(_)}},T.prototype.applyCalculate=function(M,C,_,b,L){var S=this;S.calRepulsive(M,_,L),C&&S.calAttractive(C,_,b)},T.prototype.calRepulsive=function(M,C,_){M.forEach(function(b,L){C[L]={x:0,y:0},M.forEach(function(S,I){if(L!==I&&!(!(0,tt.isNumber)(b.x)||!(0,tt.isNumber)(S.x)||!(0,tt.isNumber)(b.y)||!(0,tt.isNumber)(S.y))){var D=b.x-S.x,P=b.y-S.y,y=D*D+P*P;if(y===0){y=1;var v=L>I?1:-1;D=.01*v,P=.01*v}var K=_/y;C[L].x+=D*K,C[L].y+=P*K}})})},T.prototype.calAttractive=function(M,C,_){var b=this;M.forEach(function(L){var S=(0,tt.getEdgeTerminal)(L,"source"),I=(0,tt.getEdgeTerminal)(L,"target");if(!(!S||!I)){var D=b.nodeIdxMap[S],P=b.nodeIdxMap[I];if(D!==P){var y=b.nodeMap[S],v=b.nodeMap[I];if(!(!(0,tt.isNumber)(v.x)||!(0,tt.isNumber)(y.x)||!(0,tt.isNumber)(v.y)||!(0,tt.isNumber)(y.y))){var K=v.x-y.x,R=v.y-y.y,B=Math.sqrt(K*K+R*R),Y=B*B/_;C[P].x-=K/B*Y,C[P].y-=R/B*Y,C[D].x+=K/B*Y,C[D].y+=R/B*Y}}}})},T.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},T.prototype.destroy=function(){var M=this;M.stop(),M.tick=null,M.nodes=null,M.edges=null,M.destroyed=!0},T.prototype.getType=function(){return"fruchterman"},T}(st.Base);G.FruchtermanLayout=J},113653:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var X=function(T,M){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(C[b]=_[b])},X(T,M)};return function(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");X(T,M);function C(){this.constructor=T}T.prototype=M===null?Object.create(M):(C.prototype=M.prototype,new C)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GForceLayout=void 0;var st=ut(762329),tt=ut(449784),Q=function(X,T){var M;return X?(0,tt.isNumber)(X)?M=function(C){return X}:M=X:M=function(C){return T||1},M},J=function(X){wt(T,X);function T(M){var C=X.call(this)||this;return C.maxIteration=500,C.workerEnabled=!1,C.edgeStrength=200,C.nodeStrength=1e3,C.coulombDisScale=.005,C.damping=.9,C.maxSpeed=1e3,C.minMovement=.5,C.interval=.02,C.factor=1,C.linkDistance=1,C.gravity=10,C.preventOverlap=!0,C.collideStrength=1,C.tick=function(){},C.nodes=[],C.edges=[],C.width=300,C.height=300,C.nodeMap={},C.nodeIdxMap={},C.animate=!0,C.updateCfg(M),C}return T.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},T.prototype.execute=function(){var M,C,_=this,b=_.nodes;if(_.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(_.timeInterval),!b||b.length===0){(M=_.onLayoutEnd)===null||M===void 0||M.call(_);return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var L=_.center;if(b.length===1){b[0].x=L[0],b[0].y=L[1],(C=_.onLayoutEnd)===null||C===void 0||C.call(_);return}var S={},I={};b.forEach(function(R,B){(0,tt.isNumber)(R.x)||(R.x=Math.random()*_.width),(0,tt.isNumber)(R.y)||(R.y=Math.random()*_.height),S[R.id]=R,I[R.id]=B}),_.nodeMap=S,_.nodeIdxMap=I,_.linkDistance=Q(_.linkDistance,1),_.nodeStrength=Q(_.nodeStrength,1),_.edgeStrength=Q(_.edgeStrength,1);var D=_.nodeSize,P;if(_.preventOverlap){var y=_.nodeSpacing,v;(0,tt.isNumber)(y)?v=function(){return y}:(0,tt.isFunction)(y)?v=y:v=function(){return 0},D?(0,tt.isArray)(D)?P=function(R){return Math.max(D[0],D[1])+v(R)}:P=function(R){return D+v(R)}:P=function(R){return R.size?(0,tt.isArray)(R.size)?Math.max(R.size[0],R.size[1])+v(R):(0,tt.isObject)(R.size)?Math.max(R.size.width,R.size.height)+v(R):R.size+v(R):10+v(R)}}_.nodeSize=P;var K=_.edges;_.degrees=(0,tt.getDegree)(b.length,_.nodeIdxMap,K),_.getMass||(_.getMass=function(R){var B=R.mass||_.degrees[_.nodeIdxMap[R.id]].all||1;return B}),_.run()},T.prototype.run=function(){var M,C=this,_=C.maxIteration,b=C.nodes,L=C.workerEnabled,S=C.minMovement,I=C.animate;if(b)if(L||!I){for(var D=0;D<_;D++){var P=C.runOneStep(D);if(C.reachMoveThreshold(b,P,S))break}(M=C.onLayoutEnd)===null||M===void 0||M.call(C)}else{if(typeof window=="undefined")return;var y=0;this.timeInterval=window.setInterval(function(){var v,K;if(b){var R=C.runOneStep(y)||[];C.reachMoveThreshold(b,R,S)&&((v=C.onLayoutEnd)===null||v===void 0||v.call(C),window.clearInterval(C.timeInterval)),y++,y>=_&&((K=C.onLayoutEnd)===null||K===void 0||K.call(C),window.clearInterval(C.timeInterval))}},0)}},T.prototype.reachMoveThreshold=function(M,C,_){var b=0;return M.forEach(function(L,S){var I=L.x-C[S].x,D=L.y-C[S].y;b+=Math.sqrt(I*I+D*D)}),b/=M.length,b<_},T.prototype.runOneStep=function(M){var C,_=this,b=_.nodes,L=_.edges,S=[],I=[];if(b){b.forEach(function(y,v){S[2*v]=0,S[2*v+1]=0,I[2*v]=0,I[2*v+1]=0}),_.calRepulsive(S,b),L&&_.calAttractive(S,L),_.calGravity(S,b);var D=Math.max(.02,_.interval-M*.002);_.updateVelocity(S,I,D,b);var P=[];return b.forEach(function(y){P.push({x:y.x,y:y.y})}),_.updatePosition(I,D,b),(C=_.tick)===null||C===void 0||C.call(_),P}},T.prototype.calRepulsive=function(M,C){var _=this,b=_.getMass,L=_.factor,S=_.coulombDisScale,I=_.preventOverlap,D=_.collideStrength,P=D===void 0?1:D,y=_.nodeStrength,v=_.nodeSize;C.forEach(function(K,R){var B=b?b(K):1;C.forEach(function(Y,W){if(!(R>=W)){var q=K.x-Y.x,H=K.y-Y.y;q===0&&H===0&&(q=Math.random()*.01,H=Math.random()*.01);var et=q*q+H*H,ct=Math.sqrt(et),at=(ct+.1)*S,St=q/ct,bt=H/ct,zt=(y(K)+y(Y))*.5*L/(at*at),kt=b?b(Y):1;if(M[2*R]+=St*zt,M[2*R+1]+=bt*zt,M[2*W]-=St*zt,M[2*W+1]-=bt*zt,I&&(v(K)+v(Y))/2>ct){var Kt=P*(y(K)+y(Y))*.5/et;M[2*R]+=St*Kt/B,M[2*R+1]+=bt*Kt/B,M[2*W]-=St*Kt/kt,M[2*W+1]-=bt*Kt/kt}}})})},T.prototype.calAttractive=function(M,C){var _=this,b=_.nodeMap,L=_.nodeIdxMap,S=_.linkDistance,I=_.edgeStrength,D=_.nodeSize,P=_.getMass;C.forEach(function(y,v){var K=(0,tt.getEdgeTerminal)(y,"source"),R=(0,tt.getEdgeTerminal)(y,"target"),B=b[K],Y=b[R],W=Y.x-B.x,q=Y.y-B.y;W===0&&q===0&&(W=Math.random()*.01,q=Math.random()*.01);var H=Math.sqrt(W*W+q*q),et=W/H,ct=q/H,at=S(y,B,Y)||1+(D(B)+D(Y)||0)/2,St=at-H,bt=St*I(y),zt=L[K],kt=L[R],Kt=P?P(B):1,it=P?P(Y):1;M[2*zt]-=et*bt/Kt,M[2*zt+1]-=ct*bt/Kt,M[2*kt]+=et*bt/it,M[2*kt+1]+=ct*bt/it})},T.prototype.calGravity=function(M,C){for(var _=this,b=_.center,L=_.gravity,S=_.degrees,I=C.length,D=0;D<I;D++){var P=C[D],y=P.x-b[0],v=P.y-b[1],K=L;if(_.getCenter){var R=_.getCenter(P,S[D].all);R&&(0,tt.isNumber)(R[0])&&(0,tt.isNumber)(R[1])&&(0,tt.isNumber)(R[2])&&(y=P.x-R[0],v=P.y-R[1],K=R[2])}K&&(M[2*D]-=K*y,M[2*D+1]-=K*v)}},T.prototype.updateVelocity=function(M,C,_,b){var L=this,S=_*L.damping;b.forEach(function(I,D){var P=M[2*D]*S||.01,y=M[2*D+1]*S||.01,v=Math.sqrt(P*P+y*y);if(v>L.maxSpeed){var K=L.maxSpeed/v;P=K*P,y=K*y}C[2*D]=P,C[2*D+1]=y})},T.prototype.updatePosition=function(M,C,_){_.forEach(function(b,L){if((0,tt.isNumber)(b.fx)&&(0,tt.isNumber)(b.fy)){b.x=b.fx,b.y=b.fy;return}var S=M[2*L]*C,I=M[2*L+1]*C;b.x+=S,b.y+=I})},T.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},T.prototype.destroy=function(){var M=this;M.stop(),M.tick=null,M.nodes=null,M.edges=null,M.destroyed=!0},T.prototype.getType=function(){return"gForce"},T}(st.Base);G.GForceLayout=J},687745:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var b=function(L,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&(I[P]=D[P])},b(L,S)};return function(L,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(L,S);function I(){this.constructor=L}L.prototype=S===null?Object.create(S):(I.prototype=S.prototype,new I)}}(),st=this&&this.__awaiter||function(b,L,S,I){function D(P){return P instanceof S?P:new S(function(y){y(P)})}return new(S||(S=Promise))(function(P,y){function v(B){try{R(I.next(B))}catch(Y){y(Y)}}function K(B){try{R(I.throw(B))}catch(Y){y(Y)}}function R(B){B.done?P(B.value):D(B.value).then(v,K)}R((I=I.apply(b,L||[])).next())})},tt=this&&this.__generator||function(b,L){var S={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},I,D,P,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(R){return function(B){return K([R,B])}}function K(R){if(I)throw new TypeError("Generator is already executing.");for(;y&&(y=0,R[0]&&(S=0)),S;)try{if(I=1,D&&(P=R[0]&2?D.return:R[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,R[1])).done)return P;switch(D=0,P&&(R=[R[0]&2,P.value]),R[0]){case 0:case 1:P=R;break;case 4:return S.label++,{value:R[1],done:!1};case 5:S.label++,D=R[1],R=[0];continue;case 7:R=S.ops.pop(),S.trys.pop();continue;default:if(P=S.trys,!(P=P.length>0&&P[P.length-1])&&(R[0]===6||R[0]===2)){S=0;continue}if(R[0]===3&&(!P||R[1]>P[0]&&R[1]<P[3])){S.label=R[1];break}if(R[0]===6&&S.label<P[1]){S.label=P[1],P=R;break}if(P&&S.label<P[2]){S.label=P[2],S.ops.push(R);break}P[2]&&S.ops.pop(),S.trys.pop();continue}R=L.call(b,S)}catch(B){R=[6,B],D=0}finally{I=P=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanGPULayout=void 0;var Q=ut(762329),J=ut(449784),X=ut(901029),T=ut(248835),M=ut(108574),C=ut(416470),_=function(b){wt(L,b);function L(S){var I=b.call(this)||this;return I.maxIteration=1e3,I.gravity=10,I.speed=1,I.clustering=!1,I.clusterField="cluster",I.clusterGravity=10,I.workerEnabled=!1,I.nodes=[],I.edges=[],I.width=300,I.height=300,I.nodeMap={},I.nodeIdxMap={},I.updateCfg(S),I}return L.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},L.prototype.execute=function(){return st(this,void 0,void 0,function(){var S,I,D,P,y,v=this;return tt(this,function(K){switch(K.label){case 0:return S=this,I=S.nodes,!I||I.length===0?(S.onLayoutEnd&&S.onLayoutEnd(),[2]):(!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]),D=S.center,I.length===1?(I[0].x=D[0],I[0].y=D[1],S.onLayoutEnd&&S.onLayoutEnd(),[2]):(P={},y={},I.forEach(function(R,B){(0,J.isNumber)(R.x)||(R.x=Math.random()*v.width),(0,J.isNumber)(R.y)||(R.y=Math.random()*v.height),P[R.id]=R,y[R.id]=B}),S.nodeMap=P,S.nodeIdxMap=y,[4,S.run()]));case 1:return K.sent(),[2]}})})},L.prototype.executeWithWorker=function(S,I){return st(this,void 0,void 0,function(){var D,P,y,v,K,R=this;return tt(this,function(B){switch(B.label){case 0:return D=this,P=D.nodes,y=D.center,!P||P.length===0?[2]:P.length===1?(P[0].x=y[0],P[0].y=y[1],[2]):(v={},K={},P.forEach(function(Y,W){(0,J.isNumber)(Y.x)||(Y.x=Math.random()*R.width),(0,J.isNumber)(Y.y)||(Y.y=Math.random()*R.height),v[Y.id]=Y,K[Y.id]=W}),D.nodeMap=v,D.nodeIdxMap=K,[4,D.run(S,I)]);case 1:return B.sent(),[2]}})})},L.prototype.run=function(S,I){return st(this,void 0,void 0,function(){var D,P,y,v,K,R,B,Y,W,q,H,et,ct,at,St,bt,zt,kt,Kt,it,gt,Vt,re,It,Wt,$t,ae=this;return tt(this,function(Bt){switch(Bt.label){case 0:for(D=this,P=D.nodes,y=D.edges,v=D.maxIteration,K=D.center,R=D.height*D.width,B=Math.sqrt(R)/10,Y=R/(P.length+1),W=Math.sqrt(Y),q=D.speed,H=D.clustering,et=(0,T.attributesToTextureData)([D.clusterField],P),ct=et.array,at=et.count,P.forEach(function(Ot,Ht){var pe=0,ve=0;(0,J.isNumber)(Ot.fx)&&(0,J.isNumber)(Ot.fy)&&(pe=Ot.fx||.001,ve=Ot.fy||.001),ct[4*Ht+1]=pe,ct[4*Ht+2]=ve}),St=P.length,bt=(0,T.buildTextureData)(P,y),zt=bt.maxEdgePerVetex,kt=bt.array,Kt=D.workerEnabled,Kt?it=X.World.create({canvas:S,engineOptions:{supportCompute:!0}}):it=X.World.create({engineOptions:{supportCompute:!0}}),gt=D.onLayoutEnd,Vt=[],re=0;re<at;re++)Vt.push(0,0,0,0);return It=it.createKernel(M.fruchtermanBundle).setDispatch([St,1,1]).setBinding({u_Data:kt,u_K:W,u_K2:Y,u_Gravity:D.gravity,u_ClusterGravity:D.clusterGravity||D.gravity||1,u_Speed:q,u_MaxDisplace:B,u_Clustering:H?1:0,u_Center:K,u_AttributeArray:ct,u_ClusterCenters:Vt,MAX_EDGE_PER_VERTEX:zt,VERTEX_COUNT:St}),H&&(Wt=it.createKernel(M.clusterBundle).setDispatch([at,1,1]).setBinding({u_Data:kt,u_NodeAttributes:ct,u_ClusterCenters:Vt,VERTEX_COUNT:St,CLUSTER_COUNT:at})),$t=function(){return st(ae,void 0,void 0,function(){var Ot,Ht;return tt(this,function(pe){switch(pe.label){case 0:Ot=0,pe.label=1;case 1:return Ot<v?[4,It.execute()]:[3,6];case 2:return pe.sent(),H?(Wt.setBinding({u_Data:It}),[4,Wt.execute()]):[3,4];case 3:pe.sent(),It.setBinding({u_ClusterCenters:Wt}),pe.label=4;case 4:It.setBinding({u_MaxDisplace:B*=.99}),pe.label=5;case 5:return Ot++,[3,1];case 6:return[4,It.getOutput()];case 7:return Ht=pe.sent(),S?I.postMessage({type:C.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Ht}):P.forEach(function(ve,Tt){var Zt=Ht[4*Tt],Ce=Ht[4*Tt+1];ve.x=Zt,ve.y=Ce}),gt&&gt(),[2]}})})},[4,$t()];case 1:return Bt.sent(),[2]}})})},L.prototype.getType=function(){return"fruchterman-gpu"},L}(Q.Base);G.FruchtermanGPULayout=_},108574:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.clusterBundle=G.clusterCode=G.fruchtermanBundle=G.fruchtermanCode=void 0,G.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,G.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,G.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var L=function(S,I){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var y in P)Object.prototype.hasOwnProperty.call(P,y)&&(D[y]=P[y])},L(S,I)};return function(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");L(S,I);function D(){this.constructor=S}S.prototype=I===null?Object.create(I):(D.prototype=I.prototype,new D)}}(),st=this&&this.__awaiter||function(L,S,I,D){function P(y){return y instanceof I?y:new I(function(v){v(y)})}return new(I||(I=Promise))(function(y,v){function K(Y){try{B(D.next(Y))}catch(W){v(W)}}function R(Y){try{B(D.throw(Y))}catch(W){v(W)}}function B(Y){Y.done?y(Y.value):P(Y.value).then(K,R)}B((D=D.apply(L,S||[])).next())})},tt=this&&this.__generator||function(L,S){var I={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},D,P,y,v;return v={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function K(B){return function(Y){return R([B,Y])}}function R(B){if(D)throw new TypeError("Generator is already executing.");for(;v&&(v=0,B[0]&&(I=0)),I;)try{if(D=1,P&&(y=B[0]&2?P.return:B[0]?P.throw||((y=P.return)&&y.call(P),0):P.next)&&!(y=y.call(P,B[1])).done)return y;switch(P=0,y&&(B=[B[0]&2,y.value]),B[0]){case 0:case 1:y=B;break;case 4:return I.label++,{value:B[1],done:!1};case 5:I.label++,P=B[1],B=[0];continue;case 7:B=I.ops.pop(),I.trys.pop();continue;default:if(y=I.trys,!(y=y.length>0&&y[y.length-1])&&(B[0]===6||B[0]===2)){I=0;continue}if(B[0]===3&&(!y||B[1]>y[0]&&B[1]<y[3])){I.label=B[1];break}if(B[0]===6&&I.label<y[1]){I.label=y[1],y=B;break}if(y&&I.label<y[2]){I.label=y[2],I.ops.push(B);break}y[2]&&I.ops.pop(),I.trys.pop();continue}B=S.call(L,I)}catch(Y){B=[6,Y],P=0}finally{D=y=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.GForceGPULayout=void 0;var Q=ut(762329),J=ut(449784),X=ut(901029),T=ut(248835),M=ut(280628),C=ut(549762),_=ut(416470),b=function(L){wt(S,L);function S(I){var D=L.call(this)||this;return D.maxIteration=1e3,D.edgeStrength=200,D.nodeStrength=1e3,D.coulombDisScale=.005,D.damping=.9,D.maxSpeed=1e3,D.minMovement=.5,D.interval=.02,D.factor=1,D.linkDistance=1,D.gravity=10,D.workerEnabled=!1,D.nodes=[],D.edges=[],D.width=300,D.height=300,D.nodeMap={},D.nodeIdxMap={},D.updateCfg(I),D}return S.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},S.prototype.execute=function(){return st(this,void 0,void 0,function(){var I,D,P,y,v;return tt(this,function(K){switch(K.label){case 0:return I=this,D=I.nodes,!D||D.length===0?(I.onLayoutEnd&&I.onLayoutEnd(),[2]):(!I.width&&typeof window!="undefined"&&(I.width=window.innerWidth),!I.height&&typeof window!="undefined"&&(I.height=window.innerHeight),I.center||(I.center=[I.width/2,I.height/2]),P=I.center,D.length===1?(D[0].x=P[0],D[0].y=P[1],I.onLayoutEnd&&I.onLayoutEnd(),[2]):(y={},v={},D.forEach(function(R,B){(0,J.isNumber)(R.x)||(R.x=Math.random()*I.width),(0,J.isNumber)(R.y)||(R.y=Math.random()*I.height),y[R.id]=R,v[R.id]=B}),I.nodeMap=y,I.nodeIdxMap=v,I.nodeStrength=(0,T.proccessToFunc)(I.nodeStrength,1),I.edgeStrength=(0,T.proccessToFunc)(I.edgeStrength,1),[4,I.run()]));case 1:return K.sent(),[2]}})})},S.prototype.executeWithWorker=function(I,D){var P=this,y=P.nodes,v=P.center;if(!(!y||y.length===0)){if(y.length===1){y[0].x=v[0],y[0].y=v[1];return}var K={},R={};y.forEach(function(B,Y){(0,J.isNumber)(B.x)||(B.x=Math.random()*P.width),(0,J.isNumber)(B.y)||(B.y=Math.random()*P.height),K[B.id]=B,R[B.id]=Y}),P.nodeMap=K,P.nodeIdxMap=R,P.nodeStrength=(0,T.proccessToFunc)(P.nodeStrength,1),P.edgeStrength=(0,T.proccessToFunc)(P.edgeStrength,1),P.run(I,D)}},S.prototype.run=function(I,D){return st(this,void 0,void 0,function(){var P,y,v,K,R,B,Y,W,q,H,et,ct,at,St,bt,zt,kt,Kt,it,gt,Vt,re,It,Wt,$t,ae,Bt,Ot=this;return tt(this,function(Ht){switch(Ht.label){case 0:for(P=this,y=P.nodes,v=P.edges,K=P.maxIteration,!P.width&&typeof window!="undefined"&&(P.width=window.innerWidth),!P.height&&typeof window!="undefined"&&(P.height=window.innerHeight),R=y.length,P.linkDistance=(0,T.proccessToFunc)(P.linkDistance),P.edgeStrength=(0,T.proccessToFunc)(P.edgeStrength),B=(0,T.buildTextureDataWithTwoEdgeAttr)(y,v,P.linkDistance,P.edgeStrength),Y=B.maxEdgePerVetex,W=B.array,P.degrees=(0,M.getDegree)(y.length,P.nodeIdxMap,v).map(function(pe){return pe.all}),q=[],H=[],et=[],ct=[],at=[],St=[],bt=[],P.getMass||(P.getMass=function(pe){return P.degrees[P.nodeIdxMap[pe.id]]||1}),zt=P.gravity,kt=P.center,y.forEach(function(pe,ve){q.push(P.getMass(pe)),H.push(P.nodeStrength(pe)),P.degrees[ve]||(P.degrees[ve]=0);var Tt=[kt[0],kt[1],zt];if(P.getCenter){var Zt=P.getCenter(pe,P.degrees[ve]);Zt&&(0,J.isNumber)(Zt[0])&&(0,J.isNumber)(Zt[1])&&(0,J.isNumber)(Zt[2])&&(Tt=Zt)}et.push(Tt[0]),ct.push(Tt[1]),at.push(Tt[2]),(0,J.isNumber)(pe.fx)&&(0,J.isNumber)(pe.fy)?(St.push(pe.fx||.001),bt.push(pe.fy||.001)):(St.push(0),bt.push(0))}),Kt=(0,T.arrayToTextureData)([q,P.degrees,H,St]),it=(0,T.arrayToTextureData)([et,ct,at,bt]),gt=P.workerEnabled,gt?Vt=X.World.create({canvas:I,engineOptions:{supportCompute:!0}}):Vt=X.World.create({engineOptions:{supportCompute:!0}}),re=P.onLayoutEnd,It=[],W.forEach(function(pe){It.push(pe)}),Wt=0;Wt<4;Wt++)It.push(0);return $t=Vt.createKernel(C.gForceBundle).setDispatch([R,1,1]).setBinding({u_Data:W,u_damping:P.damping,u_maxSpeed:P.maxSpeed,u_minMovement:P.minMovement,u_coulombDisScale:P.coulombDisScale,u_factor:P.factor,u_NodeAttributeArray1:Kt,u_NodeAttributeArray2:it,MAX_EDGE_PER_VERTEX:Y,VERTEX_COUNT:R,u_AveMovement:It,u_interval:P.interval}),ae=Vt.createKernel(C.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:W,VERTEX_COUNT:R,u_AveMovement:[0,0,0,0]}),Bt=function(){return st(Ot,void 0,void 0,function(){var pe,ve,Tt;return tt(this,function(Zt){switch(Zt.label){case 0:pe=0,Zt.label=1;case 1:return pe<K?[4,$t.execute()]:[3,5];case 2:return Zt.sent(),ae.setBinding({u_Data:$t}),[4,ae.execute()];case 3:Zt.sent(),ve=Math.max(.02,P.interval-pe*.002),$t.setBinding({u_interval:ve,u_AveMovement:ae}),Zt.label=4;case 4:return pe++,[3,1];case 5:return[4,$t.getOutput()];case 6:return Tt=Zt.sent(),I?D.postMessage({type:_.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Tt}):y.forEach(function(Ce,Ut){var se=Tt[4*Ut],_e=Tt[4*Ut+1];Ce.x=se,Ce.y=_e}),re&&re(),[2]}})})},[4,Bt()];case 1:return Ht.sent(),[2]}})})},S.prototype.getType=function(){return"gForce-gpu"},S}(Q.Base);G.GForceGPULayout=b},549762:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.aveMovementBundle=G.aveMovementCode=G.gForceBundle=G.gForceCode=void 0,G.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,G.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,G.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var J=function(X,T){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,C){M.__proto__=C}||function(M,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(M[_]=C[_])},J(X,T)};return function(X,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");J(X,T);function M(){this.constructor=X}X.prototype=T===null?Object.create(T):(M.prototype=T.prototype,new M)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GridLayout=void 0;var st=ut(449784),tt=ut(762329),Q=function(J){wt(X,J);function X(T){var M=J.call(this)||this;return M.begin=[0,0],M.preventOverlap=!0,M.preventOverlapPadding=10,M.condense=!1,M.sortBy="degree",M.nodes=[],M.edges=[],M.width=300,M.height=300,M.row=0,M.col=0,M.cellWidth=0,M.cellHeight=0,M.cellUsed={},M.id2manPos={},M.onLayoutEnd=function(){},M.updateCfg(T),M}return X.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},X.prototype.execute=function(){var T=this,M=T.nodes,C=T.edges,_=T.begin,b=M.length;if(b===0)return T.onLayoutEnd&&T.onLayoutEnd(),{nodes:M,edges:C};if(b===1)return M[0].x=_[0],M[0].y=_[1],T.onLayoutEnd&&T.onLayoutEnd(),{nodes:M,edges:C};var L=T.sortBy,S=T.width,I=T.height,D=T.condense,P=T.preventOverlapPadding,y=T.preventOverlap,v=T.nodeSpacing,K=T.nodeSize,R=[];M.forEach(function(Kt){R.push(Kt)});var B={};if(R.forEach(function(Kt,it){B[Kt.id]=it}),(L==="degree"||!(0,st.isString)(L)||R[0][L]===void 0)&&(L="degree",(0,st.isNaN)(M[0].degree))){var Y=(0,st.getDegree)(R.length,B,C);R.forEach(function(Kt,it){Kt.degree=Y[it].all})}R.sort(function(Kt,it){return it[L]-Kt[L]}),!S&&typeof window!="undefined"&&(S=window.innerWidth),!I&&typeof window!="undefined"&&(I=window.innerHeight);var W=T.rows,q=T.cols!=null?T.cols:T.columns;if(T.cells=b,W!=null&&q!=null?(T.rows=W,T.cols=q):W!=null&&q==null?(T.rows=W,T.cols=Math.ceil(T.cells/T.rows)):W==null&&q!=null?(T.cols=q,T.rows=Math.ceil(T.cells/T.cols)):(T.splits=Math.sqrt(T.cells*T.height/T.width),T.rows=Math.round(T.splits),T.cols=Math.round(T.width/T.height*T.splits)),T.rows=Math.max(T.rows,1),T.cols=Math.max(T.cols,1),T.cols*T.rows>T.cells){var H=T.small(),et=T.large();(H-1)*et>=T.cells?T.small(H-1):(et-1)*H>=T.cells&&T.large(et-1)}else for(;T.cols*T.rows<T.cells;){var H=T.small(),et=T.large();(et+1)*H>=T.cells?T.large(et+1):T.small(H+1)}if(T.cellWidth=S/T.cols,T.cellHeight=I/T.rows,D&&(T.cellWidth=0,T.cellHeight=0),y||v){var ct=(0,st.getFuncByUnknownType)(10,v),at=(0,st.getFuncByUnknownType)(30,K,!1);R.forEach(function(Kt){(!Kt.x||!Kt.y)&&(Kt.x=0,Kt.y=0);var it=at(Kt)||30,gt,Vt;(0,st.isArray)(it)?(gt=it[0],Vt=it[1]):(gt=it,Vt=it);var re=ct!==void 0?ct(Kt):P,It=gt+re,Wt=Vt+re;T.cellWidth=Math.max(T.cellWidth,It),T.cellHeight=Math.max(T.cellHeight,Wt)})}T.cellUsed={},T.row=0,T.col=0,T.id2manPos={};for(var St=0;St<R.length;St++){var bt=R[St],zt=void 0;if(T.position&&(zt=T.position(bt)),zt&&(zt.row!==void 0||zt.col!==void 0)){var kt={row:zt.row,col:zt.col};if(kt.col===void 0)for(kt.col=0;T.used(kt.row,kt.col);)kt.col++;else if(kt.row===void 0)for(kt.row=0;T.used(kt.row,kt.col);)kt.row++;T.id2manPos[bt.id]=kt,T.use(kt.row,kt.col)}T.getPos(bt)}return T.onLayoutEnd&&T.onLayoutEnd(),{edges:C,nodes:R}},X.prototype.small=function(T){var M=this,C,_=M.rows||5,b=M.cols||5;if(T==null)C=Math.min(_,b);else{var L=Math.min(_,b);L===M.rows?M.rows=T:M.cols=T}return C},X.prototype.large=function(T){var M=this,C,_=M.rows||5,b=M.cols||5;if(T==null)C=Math.max(_,b);else{var L=Math.max(_,b);L===M.rows?M.rows=T:M.cols=T}return C},X.prototype.used=function(T,M){var C=this;return C.cellUsed["c-".concat(T,"-").concat(M)]||!1},X.prototype.use=function(T,M){var C=this;C.cellUsed["c-".concat(T,"-").concat(M)]=!0},X.prototype.moveToNextCell=function(){var T=this,M=T.cols||5;T.col++,T.col>=M&&(T.col=0,T.row++)},X.prototype.getPos=function(T){var M=this,C=M.begin,_=M.cellWidth,b=M.cellHeight,L,S,I=M.id2manPos[T.id];if(I)L=I.col*_+_/2+C[0],S=I.row*b+b/2+C[1];else{for(;M.used(M.row,M.col);)M.moveToNextCell();L=M.col*_+_/2+C[0],S=M.row*b+b/2+C[1],M.use(M.row,M.col),M.moveToNextCell()}T.x=L,T.y=S},X.prototype.getType=function(){return"grid"},X}(tt.Base);G.GridLayout=Q},702584:function(Sr,G,ut){"use strict";var wt=this&&this.__createBinding||(Object.create?function(Y,W,q,H){H===void 0&&(H=q);var et=Object.getOwnPropertyDescriptor(W,q);(!et||("get"in et?!W.__esModule:et.writable||et.configurable))&&(et={enumerable:!0,get:function(){return W[q]}}),Object.defineProperty(Y,H,et)}:function(Y,W,q,H){H===void 0&&(H=q),Y[H]=W[q]}),st=this&&this.__exportStar||function(Y,W){for(var q in Y)q!=="default"&&!Object.prototype.hasOwnProperty.call(W,q)&&wt(W,Y,q)};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=G.ForceAtlas2Layout=G.ComboCombinedLayout=G.ComboForceLayout=G.GForceGPULayout=G.FruchtermanGPULayout=G.FruchtermanLayout=G.MDSLayout=G.ConcentricLayout=G.RadialLayout=G.DagreCompoundLayout=G.DagreLayout=G.CircularLayout=G.ForceLayout=G.Force2Layout=G.GForceLayout=G.RandomLayout=G.GridLayout=G.Layouts=G.Layout=void 0;var tt=ut(694414);Object.defineProperty(G,"GridLayout",{enumerable:!0,get:function(){return tt.GridLayout}});var Q=ut(539711);Object.defineProperty(G,"RandomLayout",{enumerable:!0,get:function(){return Q.RandomLayout}});var J=ut(113653);Object.defineProperty(G,"GForceLayout",{enumerable:!0,get:function(){return J.GForceLayout}});var X=ut(306740);Object.defineProperty(G,"Force2Layout",{enumerable:!0,get:function(){return X.Force2Layout}});var T=ut(885717);Object.defineProperty(G,"ForceLayout",{enumerable:!0,get:function(){return T.ForceLayout}});var M=ut(964885);Object.defineProperty(G,"CircularLayout",{enumerable:!0,get:function(){return M.CircularLayout}});var C=ut(920171);Object.defineProperty(G,"DagreLayout",{enumerable:!0,get:function(){return C.DagreLayout}});var _=ut(177057);Object.defineProperty(G,"DagreCompoundLayout",{enumerable:!0,get:function(){return _.DagreCompoundLayout}});var b=ut(847944);Object.defineProperty(G,"RadialLayout",{enumerable:!0,get:function(){return b.RadialLayout}});var L=ut(843281);Object.defineProperty(G,"ConcentricLayout",{enumerable:!0,get:function(){return L.ConcentricLayout}});var S=ut(352899);Object.defineProperty(G,"MDSLayout",{enumerable:!0,get:function(){return S.MDSLayout}});var I=ut(880374);Object.defineProperty(G,"FruchtermanLayout",{enumerable:!0,get:function(){return I.FruchtermanLayout}});var D=ut(687745);Object.defineProperty(G,"FruchtermanGPULayout",{enumerable:!0,get:function(){return D.FruchtermanGPULayout}});var P=ut(785194);Object.defineProperty(G,"GForceGPULayout",{enumerable:!0,get:function(){return P.GForceGPULayout}});var y=ut(366590);Object.defineProperty(G,"ComboForceLayout",{enumerable:!0,get:function(){return y.ComboForceLayout}});var v=ut(263861);Object.defineProperty(G,"ComboCombinedLayout",{enumerable:!0,get:function(){return v.ComboCombinedLayout}});var K=ut(148564);Object.defineProperty(G,"ForceAtlas2Layout",{enumerable:!0,get:function(){return K.ForceAtlas2Layout}});var R=ut(290441);Object.defineProperty(G,"ERLayout",{enumerable:!0,get:function(){return R.ERLayout}});var B=ut(842875);Object.defineProperty(G,"Layout",{enumerable:!0,get:function(){return B.Layout}}),Object.defineProperty(G,"Layouts",{enumerable:!0,get:function(){return B.Layouts}}),st(ut(932867),G)},842875:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Layouts=G.Layout=void 0;var wt=ut(695326),st=ut(694414),tt=ut(539711),Q=ut(306740),J=ut(113653),X=ut(885717),T=ut(964885),M=ut(920171),C=ut(847944),_=ut(843281),b=ut(352899),L=ut(880374),S=ut(687745),I=ut(785194),D=ut(366590),P=ut(263861),y=ut(148564),v=ut(290441),K=ut(177057),R=ut(449784),B=function(){function Y(W){var q=(0,wt.getLayoutByName)(W.type);this.layoutInstance=new q(W)}return Y.prototype.layout=function(W){return this.layoutInstance.layout(W)},Y.prototype.updateCfg=function(W){this.layoutInstance.updateCfg(W)},Y.prototype.init=function(W){this.correctLayers(W.nodes),this.layoutInstance.init(W)},Y.prototype.correctLayers=function(W){if(W!=null&&W.length){var q=1/0,H=[];if(W.forEach(function(ct){(0,R.isString)(ct.layer)&&(ct.layer=parseInt(ct.layer,10)),!(ct.layer===void 0||isNaN(ct.layer))&&(H.push(ct),ct.layer<q&&(q=ct.layer))}),q<=0){var et=Math.abs(q)+1;H.forEach(function(ct){return ct.layer+=et})}}},Y.prototype.execute=function(){this.layoutInstance.execute()},Y.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},Y.prototype.destroy=function(){return this.layoutInstance.destroy()},Y}();G.Layout=B,G.Layouts={force:X.ForceLayout,fruchterman:L.FruchtermanLayout,forceAtlas2:y.ForceAtlas2Layout,gForce:J.GForceLayout,force2:Q.Force2Layout,dagre:M.DagreLayout,dagreCompound:K.DagreCompoundLayout,circular:T.CircularLayout,radial:C.RadialLayout,concentric:_.ConcentricLayout,grid:st.GridLayout,mds:b.MDSLayout,comboForce:D.ComboForceLayout,comboCombined:P.ComboCombinedLayout,random:tt.RandomLayout,"gForce-gpu":I.GForceGPULayout,"fruchterman-gpu":S.FruchtermanGPULayout,er:v.ERLayout}},352899:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var X=function(T,M){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(C[b]=_[b])},X(T,M)};return function(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");X(T,M);function C(){this.constructor=T}T.prototype=M===null?Object.create(M):(C.prototype=M.prototype,new C)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.MDSLayout=void 0;var st=ut(97828),tt=ut(449784),Q=ut(762329),J=function(X){wt(T,X);function T(M){var C=X.call(this)||this;return C.center=[0,0],C.linkDistance=50,C.nodes=[],C.edges=[],C.onLayoutEnd=function(){},C.updateCfg(M),C}return T.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},T.prototype.execute=function(){var M=this,C=M.nodes,_=M.edges,b=_===void 0?[]:_,L=M.center;if(!C||C.length===0){M.onLayoutEnd&&M.onLayoutEnd();return}if(C.length===1){C[0].x=L[0],C[0].y=L[1],M.onLayoutEnd&&M.onLayoutEnd();return}var S=M.linkDistance,I=(0,tt.getAdjMatrix)({nodes:C,edges:b},!1),D=(0,tt.floydWarshall)(I);M.handleInfinity(D);var P=(0,tt.scaleMatrix)(D,S);M.scaledDistances=P;var y=M.runMDS();return M.positions=y,y.forEach(function(v,K){C[K].x=v[0]+L[0],C[K].y=v[1]+L[1]}),M.onLayoutEnd&&M.onLayoutEnd(),{nodes:C,edges:b}},T.prototype.runMDS=function(){var M=this,C=2,_=M.scaledDistances,b=st.Matrix.mul(st.Matrix.pow(_,2),-.5),L=b.mean("row"),S=b.mean("column"),I=b.mean();b.add(I).subRowVector(L).subColumnVector(S);var D=new st.SingularValueDecomposition(b),P=st.Matrix.sqrt(D.diagonalMatrix).diagonal();return D.leftSingularVectors.toJSON().map(function(y){return st.Matrix.mul([y],[P]).toJSON()[0].splice(0,C)})},T.prototype.handleInfinity=function(M){var C=-999999;M.forEach(function(_){_.forEach(function(b){b!==1/0&&C<b&&(C=b)})}),M.forEach(function(_,b){_.forEach(function(L,S){L===1/0&&(M[b][S]=C)})})},T.prototype.getType=function(){return"mds"},T}(Q.Base);G.MDSLayout=J},847944:function(Sr,G,ut){"use strict";var wt=this&&this.__createBinding||(Object.create?function(tt,Q,J,X){X===void 0&&(X=J);var T=Object.getOwnPropertyDescriptor(Q,J);(!T||("get"in T?!Q.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return Q[J]}}),Object.defineProperty(tt,X,T)}:function(tt,Q,J,X){X===void 0&&(X=J),tt[X]=Q[J]}),st=this&&this.__exportStar||function(tt,Q){for(var J in tt)J!=="default"&&!Object.prototype.hasOwnProperty.call(Q,J)&&wt(Q,tt,J)};Object.defineProperty(G,"__esModule",{value:!0}),st(ut(255974),G)},366082:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var wt=ut(97828),st=function(){function tt(Q){this.distances=Q.distances,this.dimension=Q.dimension||2,this.linkDistance=Q.linkDistance}return tt.prototype.layout=function(){var Q=this,J=Q.dimension,X=Q.distances,T=Q.linkDistance;try{var M=wt.Matrix.mul(wt.Matrix.pow(X,2),-.5),C=M.mean("row"),_=M.mean("column"),b=M.mean();M.add(b).subRowVector(C).subColumnVector(_);var L=new wt.SingularValueDecomposition(M),S=wt.Matrix.sqrt(L.diagonalMatrix).diagonal();return L.leftSingularVectors.toJSON().map(function(v){return wt.Matrix.mul([v],[S]).toJSON()[0].splice(0,J)})}catch(v){for(var I=[],D=0;D<X.length;D++){var P=Math.random()*T,y=Math.random()*T;I.push([P,y])}return I}},tt}();G.default=st},255974:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var b=function(L,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&(I[P]=D[P])},b(L,S)};return function(L,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(L,S);function I(){this.constructor=L}L.prototype=S===null?Object.create(S):(I.prototype=S.prototype,new I)}}(),st=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(G,"__esModule",{value:!0}),G.RadialLayout=void 0;var tt=ut(449784),Q=ut(762329),J=st(ut(366082)),X=st(ut(706290));function T(b){for(var L=b.length,S=b[0].length,I=[],D=0;D<L;D++){for(var P=[],y=0;y<S;y++)b[D][y]!==0?P.push(1/(b[D][y]*b[D][y])):P.push(0);I.push(P)}return I}function M(b,L){var S=-1;return b.forEach(function(I,D){I.id===L&&(S=D)}),S}function C(b,L){return Math.sqrt((b[0]-L[0])*(b[0]-L[0])+(b[1]-L[1])*(b[1]-L[1]))}var _=function(b){wt(L,b);function L(S){var I=b.call(this)||this;return I.maxIteration=1e3,I.focusNode=null,I.unitRadius=null,I.linkDistance=50,I.preventOverlap=!1,I.strictRadial=!0,I.maxPreventOverlapIteration=200,I.sortStrength=10,I.nodes=[],I.edges=[],I.updateCfg(S),I}return L.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},L.prototype.execute=function(){var S=this,I=S.nodes,D=S.edges||[];if(!I||I.length===0){S.onLayoutEnd&&S.onLayoutEnd();return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var P=S.center;if(I.length===1){I[0].x=P[0],I[0].y=P[1],S.onLayoutEnd&&S.onLayoutEnd();return}var y=S.linkDistance,v=null;if((0,tt.isString)(S.focusNode)){for(var K=!1,R=0;R<I.length;R++)I[R].id===S.focusNode&&(v=I[R],S.focusNode=v,K=!0,R=I.length);K||(v=null)}else v=S.focusNode;v||(v=I[0],S.focusNode=v);var B=M(I,v.id);B<0&&(B=0),S.focusIndex=B;var Y=(0,tt.getAdjMatrix)({nodes:I,edges:D},!1),W=(0,tt.floydWarshall)(Y),q=S.maxToFocus(W,B);S.handleInfinity(W,B,q+1),S.distances=W;var H=W[B],et=S.width||500,ct=S.height||500,at=et-P[0]>P[0]?P[0]:et-P[0],St=ct-P[1]>P[1]?P[1]:ct-P[1];at===0&&(at=et/2),St===0&&(St=ct/2);var bt=St>at?at:St,zt=Math.max.apply(Math,H),kt=[];H.forEach(function(pe,ve){S.unitRadius||(S.unitRadius=bt/zt),kt[ve]=pe*S.unitRadius}),S.radii=kt;var Kt=S.eIdealDisMatrix();S.eIdealDistances=Kt;var it=T(Kt);S.weights=it;var gt=new J.default({linkDistance:y,distances:Kt}),Vt=gt.layout();Vt.forEach(function(pe){(0,tt.isNaN)(pe[0])&&(pe[0]=Math.random()*y),(0,tt.isNaN)(pe[1])&&(pe[1]=Math.random()*y)}),S.positions=Vt,Vt.forEach(function(pe,ve){I[ve].x=pe[0]+P[0],I[ve].y=pe[1]+P[1]}),Vt.forEach(function(pe){pe[0]-=Vt[B][0],pe[1]-=Vt[B][1]}),S.run();var re=S.preventOverlap,It=S.nodeSize,Wt,$t=S.strictRadial;if(re){var ae=S.nodeSpacing,Bt;(0,tt.isNumber)(ae)?Bt=function(){return ae}:(0,tt.isFunction)(ae)?Bt=ae:Bt=function(){return 0},It?(0,tt.isArray)(It)?Wt=function(pe){var ve=It[0]>It[1]?It[0]:It[1];return ve+Bt(pe)}:Wt=function(pe){return It+Bt(pe)}:Wt=function(pe){if(pe.size){if((0,tt.isArray)(pe.size)){var ve=pe.size[0]>pe.size[1]?pe.size[0]:pe.size[1];return ve+Bt(pe)}if((0,tt.isObject)(pe.size)){var ve=pe.size.width>pe.size.height?pe.size.width:pe.size.height;return ve+Bt(pe)}return pe.size+Bt(pe)}return 10+Bt(pe)};var Ot={nodes:I,nodeSizeFunc:Wt,adjMatrix:Y,positions:Vt,radii:kt,height:ct,width:et,strictRadial:$t,focusID:B,iterations:S.maxPreventOverlapIteration||200,k:Vt.length/4.5},Ht=new X.default(Ot);Vt=Ht.layout()}return Vt.forEach(function(pe,ve){I[ve].x=pe[0]+P[0],I[ve].y=pe[1]+P[1]}),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:I,edges:D}},L.prototype.run=function(){for(var S=this,I=S.maxIteration,D=S.positions||[],P=S.weights||[],y=S.eIdealDistances||[],v=S.radii||[],K=0;K<=I;K++){var R=K/I;S.oneIteration(R,D,v,y,P)}},L.prototype.oneIteration=function(S,I,D,P,y){var v=this,K=1-S,R=v.focusIndex;I.forEach(function(B,Y){var W=C(B,[0,0]),q=W===0?0:1/W;if(Y!==R){var H=0,et=0,ct=0;I.forEach(function(St,bt){if(Y!==bt){var zt=C(B,St),kt=zt===0?0:1/zt,Kt=P[bt][Y];ct+=y[Y][bt],H+=y[Y][bt]*(St[0]+Kt*(B[0]-St[0])*kt),et+=y[Y][bt]*(St[1]+Kt*(B[1]-St[1])*kt)}});var at=D[Y]===0?0:1/D[Y];ct*=K,ct+=S*at*at,H*=K,H+=S*at*B[0]*q,B[0]=H/ct,et*=K,et+=S*at*B[1]*q,B[1]=et/ct}})},L.prototype.eIdealDisMatrix=function(){var S=this,I=S.nodes;if(!I)return[];var D=S.distances,P=S.linkDistance,y=S.radii||[],v=S.unitRadius||50,K=[];return D&&D.forEach(function(R,B){var Y=[];R.forEach(function(W,q){if(B===q)Y.push(0);else if(y[B]===y[q])if(S.sortBy==="data")Y.push(W*(Math.abs(B-q)*S.sortStrength)/(y[B]/v));else if(S.sortBy){var H=I[B][S.sortBy]||0,et=I[q][S.sortBy]||0;(0,tt.isString)(H)&&(H=H.charCodeAt(0)),(0,tt.isString)(et)&&(et=et.charCodeAt(0)),Y.push(W*(Math.abs(H-et)*S.sortStrength)/(y[B]/v))}else Y.push(W*P/(y[B]/v));else{var ct=(P+v)/2;Y.push(W*ct)}}),K.push(Y)}),K},L.prototype.handleInfinity=function(S,I,D){for(var P=S.length,y=0;y<P;y++)if(S[I][y]===1/0){S[I][y]=D,S[y][I]=D;for(var v=0;v<P;v++)S[y][v]!==1/0&&S[I][v]===1/0&&(S[I][v]=D+S[y][v],S[v][I]=D+S[y][v])}for(var y=0;y<P;y++)if(y!==I){for(var v=0;v<P;v++)if(S[y][v]===1/0){var K=Math.abs(S[I][y]-S[I][v]);K=K===0?1:K,S[y][v]=K}}},L.prototype.maxToFocus=function(S,I){for(var D=0,P=0;P<S[I].length;P++)S[I][P]!==1/0&&(D=S[I][P]>D?S[I][P]:D);return D},L.prototype.getType=function(){return"radial"},L}(Q.Base);G.RadialLayout=_},706290:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ut=800,wt=function(){function st(tt){this.disp=[],this.positions=tt.positions,this.adjMatrix=tt.adjMatrix,this.focusID=tt.focusID,this.radii=tt.radii,this.iterations=tt.iterations||10,this.height=tt.height||10,this.width=tt.width||10,this.speed=tt.speed||100,this.gravity=tt.gravity||10,this.nodeSizeFunc=tt.nodeSizeFunc,this.k=tt.k||5,this.strictRadial=tt.strictRadial,this.nodes=tt.nodes}return st.prototype.layout=function(){var tt=this,Q=tt.positions,J=[],X=tt.iterations,T=tt.width/10;tt.maxDisplace=T,tt.disp=J;for(var M=0;M<X;M++)Q.forEach(function(C,_){J[_]={x:0,y:0}}),tt.getRepulsion(),tt.updatePositions();return Q},st.prototype.getRepulsion=function(){var tt=this,Q=tt.positions,J=tt.nodes,X=tt.disp,T=tt.k,M=tt.radii||[];Q.forEach(function(C,_){X[_]={x:0,y:0},Q.forEach(function(b,L){if(_!==L&&M[_]===M[L]){var S=C[0]-b[0],I=C[1]-b[1],D=Math.sqrt(S*S+I*I);if(D===0){D=1;var P=_>L?1:-1;S=.01*P,I=.01*P}if(D<tt.nodeSizeFunc(J[_])/2+tt.nodeSizeFunc(J[L])/2){var y=T*T/D;X[_].x+=S/D*y,X[_].y+=I/D*y}}})})},st.prototype.updatePositions=function(){var tt=this,Q=tt.positions,J=tt.disp,X=tt.speed,T=tt.strictRadial,M=tt.focusID,C=tt.maxDisplace||tt.width/10;T&&J.forEach(function(b,L){var S=Q[L][0]-Q[M][0],I=Q[L][1]-Q[M][1],D=Math.sqrt(S*S+I*I),P=I/D,y=-S/D,v=Math.sqrt(b.x*b.x+b.y*b.y),K=Math.acos((P*b.x+y*b.y)/v);K>Math.PI/2&&(K-=Math.PI/2,P*=-1,y*=-1);var R=Math.cos(K)*v;b.x=P*R,b.y=y*R});var _=tt.radii;Q.forEach(function(b,L){if(L!==M){var S=Math.sqrt(J[L].x*J[L].x+J[L].y*J[L].y);if(S>0&&L!==M){var I=Math.min(C*(X/ut),S);if(b[0]+=J[L].x/S*I,b[1]+=J[L].y/S*I,T){var D=b[0]-Q[M][0],P=b[1]-Q[M][1],y=Math.sqrt(D*D+P*P);D=D/y*_[L],P=P/y*_[L],b[0]=Q[M][0]+D,b[1]=Q[M][1]+P}}}})},st}();G.default=wt},539711:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var Q=function(J,X){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,M){T.__proto__=M}||function(T,M){for(var C in M)Object.prototype.hasOwnProperty.call(M,C)&&(T[C]=M[C])},Q(J,X)};return function(J,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");Q(J,X);function T(){this.constructor=J}J.prototype=X===null?Object.create(X):(T.prototype=X.prototype,new T)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.RandomLayout=void 0;var st=ut(762329),tt=function(Q){wt(J,Q);function J(X){var T=Q.call(this)||this;return T.center=[0,0],T.width=300,T.height=300,T.nodes=[],T.edges=[],T.onLayoutEnd=function(){},T.updateCfg(X),T}return J.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},J.prototype.execute=function(){var X=this,T=X.nodes,M=.9,C=X.center;return!X.width&&typeof window!="undefined"&&(X.width=window.innerWidth),!X.height&&typeof window!="undefined"&&(X.height=window.innerHeight),T&&T.forEach(function(_){_.x=(Math.random()-.5)*M*X.width+C[0],_.y=(Math.random()-.5)*M*X.height+C[1]}),X.onLayoutEnd&&X.onLayoutEnd(),{nodes:T,edges:this.edges}},J.prototype.getType=function(){return"random"},J}(st.Base);G.RandomLayout=tt},932867:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0})},695326:function(Sr,G,ut){"use strict";var wt=this&&this.__extends||function(){var M=function(C,_){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,L){b.__proto__=L}||function(b,L){for(var S in L)Object.prototype.hasOwnProperty.call(L,S)&&(b[S]=L[S])},M(C,_)};return function(C,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");M(C,_);function b(){this.constructor=C}C.prototype=_===null?Object.create(_):(b.prototype=_.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var st=ut(762329),tt=ut(449784),Q=new Map,J=function(M,C){if(Q.get(M)&&console.warn("The layout with the name ".concat(M," exists already, it will be overridden")),(0,tt.isObject)(C)){var _=function(b){wt(L,b);function L(S){var I=this,D;I=b.call(this)||this;var P=I,y={},v=Object.assign({},P.getDefaultCfg(),((D=C.getDefaultCfg)===null||D===void 0?void 0:D.call(C))||{});return Object.assign(y,v,C,S),Object.keys(y).forEach(function(K){var R=y[K];P[K]=R}),I}return L}(st.Base);Q.set(M,_)}else Q.set(M,C);return Q.get(M)};G.registerLayout=J;var X=function(M){Q.has(M)&&Q.delete(M)};G.unRegisterLayout=X;var T=function(M){return Q.has(M)?Q.get(M):null};G.getLayoutByName=T},185087:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.isArray=void 0,G.isArray=Array.isArray},578732:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getFuncByUnknownType=G.getFunc=G.isFunction=void 0;var wt=ut(449784),st=ut(330627),tt=function(X){return typeof X=="function"};G.isFunction=tt;var Q=function(X,T,M){var C;return M?C=M:(0,st.isNumber)(X)?C=function(){return X}:C=function(){return T},C};G.getFunc=Q;var J=function(X,T,M){return M===void 0&&(M=!0),!T&&T!==0?function(C){return C.size?(0,wt.isArray)(C.size)?C.size[0]>C.size[1]?C.size[0]:C.size[1]:(0,wt.isObject)(C.size)?C.size.width>C.size.height?C.size.width:C.size.height:C.size:X}:(0,G.isFunction)(T)?T:(0,st.isNumber)(T)?function(){return T}:(0,wt.isArray)(T)?function(){if(M){var C=Math.max.apply(Math,T);return isNaN(C)?X:C}return T}:(0,wt.isObject)(T)?function(){if(M){var C=Math.max(T.width,T.height);return isNaN(C)?X:C}return[T.width,T.height]}:function(){return X}};G.getFuncByUnknownType=J},248835:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.arrayToTextureData=G.attributesToTextureData=G.buildTextureDataWithTwoEdgeAttr=G.buildTextureData=G.proccessToFunc=void 0;var wt=ut(449784),st=ut(280628),tt=function(M,C){var _;return M?(0,wt.isNumber)(M)?_=function(){return M}:_=M:_=function(){return C||1},_};G.proccessToFunc=tt;var Q=function(M,C){var _=[],b=[],L={},S=0;for(S=0;S<M.length;S++){var I=M[S];L[I.id]=S,_.push(I.x),_.push(I.y),_.push(0),_.push(0),b.push([])}for(S=0;S<C.length;S++){var D=C[S],P=(0,st.getEdgeTerminal)(D,"source"),y=(0,st.getEdgeTerminal)(D,"target");!isNaN(L[P])&&!isNaN(L[y])&&(b[L[P]].push(L[y]),b[L[y]].push(L[P]))}var v=0;for(S=0;S<M.length;S++){var K=_.length,R=b[S],B=R.length;_[S*4+2]=K,_[S*4+3]=B,v=Math.max(v,B);for(var Y=0;Y<B;++Y){var W=R[Y];_.push(+W)}}for(;_.length%4!==0;)_.push(0);return{maxEdgePerVetex:v,array:new Float32Array(_)}};G.buildTextureData=Q;var J=function(M,C,_,b){var L=[],S=[],I={},D=0;for(D=0;D<M.length;D++){var P=M[D];I[P.id]=D,L.push(P.x),L.push(P.y),L.push(0),L.push(0),S.push([])}for(D=0;D<C.length;D++){var y=C[D],v=(0,st.getEdgeTerminal)(y,"source"),K=(0,st.getEdgeTerminal)(y,"target");S[I[v]].push(I[K]),S[I[v]].push(_(y)),S[I[v]].push(b(y)),S[I[v]].push(0),S[I[K]].push(I[v]),S[I[K]].push(_(y)),S[I[K]].push(b(y)),S[I[K]].push(0)}var R=0;for(D=0;D<M.length;D++){var B=L.length,Y=S[D],W=Y.length;L[D*4+2]=B+1048576*W/4,L[D*4+3]=0,R=Math.max(R,W/4);for(var q=0;q<W;++q){var H=Y[q];L.push(+H)}}for(;L.length%4!==0;)L.push(0);return{maxEdgePerVetex:R,array:new Float32Array(L)}};G.buildTextureDataWithTwoEdgeAttr=J;var X=function(M,C){var _=[],b=M.length,L={};return C.forEach(function(S){M.forEach(function(I,D){if(L[S[I]]===void 0&&(L[S[I]]=Object.keys(L).length),_.push(L[S[I]]),D===b-1)for(;_.length%4!==0;)_.push(0)})}),{array:new Float32Array(_),count:Object.keys(L).length}};G.attributesToTextureData=X;var T=function(M){for(var C=[],_=M.length,b=M[0].length,L=function(I){M.forEach(function(D,P){if(C.push(D[I]),P===_-1)for(;C.length%4!==0;)C.push(0)})},S=0;S<b;S++)L(S);return new Float32Array(C)};G.arrayToTextureData=T},449784:function(Sr,G,ut){"use strict";var wt=this&&this.__createBinding||(Object.create?function(tt,Q,J,X){X===void 0&&(X=J);var T=Object.getOwnPropertyDescriptor(Q,J);(!T||("get"in T?!Q.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return Q[J]}}),Object.defineProperty(tt,X,T)}:function(tt,Q,J,X){X===void 0&&(X=J),tt[X]=Q[J]}),st=this&&this.__exportStar||function(tt,Q){for(var J in tt)J!=="default"&&!Object.prototype.hasOwnProperty.call(Q,J)&&wt(Q,tt,J)};Object.defineProperty(G,"__esModule",{value:!0}),st(ut(708055),G),st(ut(185087),G),st(ut(330627),G),st(ut(280628),G),st(ut(898130),G),st(ut(578732),G)},280628:function(Sr,G,ut){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getCoreNodeAndRelativeLeafNodes=G.getAvgNodePosition=G.getLayoutBBox=G.traverseTreeUp=G.scaleMatrix=G.getAdjMatrix=G.floydWarshall=G.getDegreeMap=G.getDegree=G.getEdgeTerminal=void 0;var wt=ut(185087),st=ut(330627),tt=ut(898130),Q=function(v,K){var R=v[K];return(0,tt.isObject)(R)?R.cell:R};G.getEdgeTerminal=Q;var J=function(v,K,R){for(var B=[],Y=0;Y<v;Y++)B[Y]={in:0,out:0,all:0};return R&&R.forEach(function(W){var q=(0,G.getEdgeTerminal)(W,"source"),H=(0,G.getEdgeTerminal)(W,"target");q&&B[K[q]]&&(B[K[q]].out+=1,B[K[q]].all+=1),H&&B[K[H]]&&(B[K[H]].in+=1,B[K[H]].all+=1)}),B};G.getDegree=J;var X=function(v,K){var R={};return v.forEach(function(B){R[B.id]={in:0,out:0,all:0}}),K&&K.forEach(function(B){var Y=(0,G.getEdgeTerminal)(B,"source"),W=(0,G.getEdgeTerminal)(B,"target");Y&&(R[Y].out+=1,R[Y].all+=1),W&&(R[W].in+=1,R[W].all+=1)}),R};G.getDegreeMap=X;var T=function(v){for(var K=[],R=v.length,B=0;B<R;B+=1){K[B]=[];for(var Y=0;Y<R;Y+=1)B===Y?K[B][Y]=0:v[B][Y]===0||!v[B][Y]?K[B][Y]=1/0:K[B][Y]=v[B][Y]}for(var W=0;W<R;W+=1)for(var B=0;B<R;B+=1)for(var Y=0;Y<R;Y+=1)K[B][Y]>K[B][W]+K[W][Y]&&(K[B][Y]=K[B][W]+K[W][Y]);return K};G.floydWarshall=T;var M=function(v,K){var R=v.nodes,B=v.edges,Y=[],W={};if(!R)throw new Error("invalid nodes data!");return R&&R.forEach(function(q,H){W[q.id]=H;var et=[];Y.push(et)}),B==null||B.forEach(function(q){var H=(0,G.getEdgeTerminal)(q,"source"),et=(0,G.getEdgeTerminal)(q,"target"),ct=W[H],at=W[et];ct===void 0||at===void 0||(Y[ct][at]=1,K||(Y[at][ct]=1))}),Y};G.getAdjMatrix=M;var C=function(v,K){var R=[];return v.forEach(function(B){var Y=[];B.forEach(function(W){Y.push(W*K)}),R.push(Y)}),R};G.scaleMatrix=C;var _=function(v,K){if(v&&v.children){for(var R=v.children.length-1;R>=0;R--)if(!_(v.children[R],K))return}return!!K(v)},b=function(v,K){typeof K=="function"&&_(v,K)};G.traverseTreeUp=b;var L=function(v){var K=1/0,R=1/0,B=-1/0,Y=-1/0;return v.forEach(function(W){var q=W.size;(0,wt.isArray)(q)?q.length===1&&(q=[q[0],q[0]]):(0,st.isNumber)(q)?q=[q,q]:(q===void 0||isNaN(q))&&(q=[30,30]);var H=[q[0]/2,q[1]/2],et=W.x-H[0],ct=W.x+H[0],at=W.y-H[1],St=W.y+H[1];K>et&&(K=et),R>at&&(R=at),B<ct&&(B=ct),Y<St&&(Y=St)}),{minX:K,minY:R,maxX:B,maxY:Y}};G.getLayoutBBox=L;var S=function(v){var K={x:0,y:0};v.forEach(function(B){K.x+=B.x||0,K.y+=B.y||0});var R=v.length||1;return{x:K.x/R,y:K.y/R}};G.getAvgNodePosition=S;var I=function(v,K,R){var B,Y;return v==="source"?((B=R==null?void 0:R.find(function(W){return W.target===K.id}))===null||B===void 0?void 0:B.source)||{}:((Y=R==null?void 0:R.find(function(W){return W.source===K.id}))===null||Y===void 0?void 0:Y.target)||{}},D=function(v,K,R){var B=[];switch(v){case"source":B=R==null?void 0:R.filter(function(W){return W.source===K.id}).map(function(W){return W.target});break;case"target":B=R==null?void 0:R.filter(function(W){return W.target===K.id}).map(function(W){return W.source});break;case"both":B=R==null?void 0:R.filter(function(W){return W.source===K.id}).map(function(W){return W.target}).concat(R==null?void 0:R.filter(function(W){return W.target===K.id}).map(function(W){return W.source}));break;default:break}var Y=new Set(B);return Array.from(Y)},P=function(v,K,R,B,Y){var W=R[K]||"",q=(B==null?void 0:B.filter(function(H){return H[K]===W}))||[];return v==="leaf"&&(q=q.filter(function(H){var et,ct;return((et=Y[H.id])===null||et===void 0?void 0:et.in)===0||((ct=Y[H.id])===null||ct===void 0?void 0:ct.out)===0})),q},y=function(v,K,R,B,Y,W){var q=Y[K.id],H=q.in,et=q.out,ct=K,at=[];H===0?(ct=I("source",K,R),at=D("both",ct,R).map(function(bt){return W[bt]})):et===0&&(ct=I("target",K,R),at=D("both",ct,R).map(function(bt){return W[bt]})),at=at.filter(function(bt){return Y[bt.id]&&(Y[bt.id].in===0||Y[bt.id].out===0)});var St=P(v,B,K,at,Y);return{coreNode:ct,relativeLeafNodes:at,sameTypeLeafNodes:St}};G.getCoreNodeAndRelativeLeafNodes=y},330627:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.toNumber=G.isNaN=G.isNumber=void 0;var ut=function(tt){return typeof tt=="number"};G.isNumber=ut;var wt=function(tt){return Number.isNaN(Number(tt))};G.isNaN=wt;var st=function(tt){var Q=parseFloat(tt);return(0,G.isNaN)(Q)?tt:Q};G.toNumber=st},898130:function(Sr,G){"use strict";var ut=this&&this.__assign||function(){return ut=Object.assign||function(tt){for(var Q,J=1,X=arguments.length;J<X;J++){Q=arguments[J];for(var T in Q)Object.prototype.hasOwnProperty.call(Q,T)&&(tt[T]=Q[T])}return tt},ut.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.clone=G.isObject=void 0;var wt=function(tt){return tt!==null&&typeof tt=="object"};G.isObject=wt;var st=function(tt){if(tt===null)return tt;if(tt instanceof Date)return new Date(tt.getTime());if(tt instanceof Array){var Q=[];return tt.forEach(function(X){Q.push(X)}),Q.map(function(X){return(0,G.clone)(X)})}if(typeof tt=="object"&&Object.keys(tt).length){var J=ut({},tt);return Object.keys(J).forEach(function(X){J[X]=(0,G.clone)(J[X])}),J}return tt};G.clone=st},708055:function(Sr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.camelize=G.isString=void 0;var ut=function(tt){return typeof tt=="string"};G.isString=ut;var wt=function(tt){var Q=Object.create(null);return function(J){var X=Q[J];return X||(Q[J]=tt(J))}},st=/-(\w)/g;G.camelize=wt(function(tt){return tt.replace(st,function(Q,J){return J?J.toUpperCase():""})})},211707:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{Cache:function(){return Xf},angleTo:function(){return at},arcToCubic:function(){return Yt},assign:function(){return Vr},augment:function(){return Tr},clamp:function(){return Gi},clearAnimationFrame:function(){return xr},clone:function(){return da},clonePath:function(){return xa},contains:function(){return yt},createDOM:function(){return Ts},debounce:function(){return na},deepMix:function(){return Mi},difference:function(){return V},direction:function(){return ct},distanceSquareRoot:function(){return Na},each:function(){return pr},endsWith:function(){return Do},equalizeSegments:function(){return rn},every:function(){return Vo},extend:function(){return Li},filter:function(){return E},find:function(){return Ee},findIndex:function(){return Ie},firstValue:function(){return ir},fixedBase:function(){return Zi},flatten:function(){return En},flattenDeep:function(){return zn},forIn:function(){return Jt},get:function(){return zf},getDrawDirection:function(){return U},getPathArea:function(){return ka},getPathBBox:function(){return Fa},getPathBBoxTotalLength:function(){return An},getPointAtLength:function(){return Ve},getRange:function(){return qa},getRotatedCurve:function(){return ra},getTotalLength:function(){return wa},getType:function(){return $s},getWrapBehavior:function(){return gs},gradient:function(){return I},group:function(){return jo},groupBy:function(){return yi},groupToMap:function(){return Ho},has:function(){return Fe},hasKey:function(){return je},hasValue:function(){return wn},head:function(){return Si},identity:function(){return Eu},includes:function(){return yt},indexOf:function(){return eo},isArguments:function(){return Ks},isArray:function(){return Te},isArrayLike:function(){return jr},isBoolean:function(){return No},isDate:function(){return Rf},isDecimal:function(){return Ro},isElement:function(){return Ye},isEmpty:function(){return Ps},isEqual:function(){return ko},isEqualWith:function(){return wu},isError:function(){return Ds},isEven:function(){return Zo},isFinite:function(){return Ff},isFunction:function(){return Q},isInteger:function(){return qo},isMatch:function(){return vr},isNegative:function(){return Ia},isNil:function(){return Gt},isNull:function(){return A},isNumber:function(){return di},isNumberEqual:function(){return zi},isObject:function(){return ar},isObjectLike:function(){return Fr},isOdd:function(){return Ci},isPlainObject:function(){return Lt},isPointInPolygon:function(){return uf},isPointInStroke:function(){return Je},isPolygonsIntersect:function(){return Yu},isPositive:function(){return Di},isPrototype:function(){return Nt},isRegExp:function(){return qt},isString:function(){return Wi},isType:function(){return Ge},isUndefined:function(){return be},keys:function(){return kn},last:function(){return fo},lowerCase:function(){return to},lowerFirst:function(){return Us},map:function(){return bc},mapValues:function(){return wc},max:function(){return Gn},maxBy:function(){return Bo},memoize:function(){return X},min:function(){return la},minBy:function(){return Co},mix:function(){return Vr},mod:function(){return As},modifyCSS:function(){return Su},noop:function(){return yn},normalizePath:function(){return $e},number2color:function(){return So},omit:function(){return of},parseRadius:function(){return _s},path2Absolute:function(){return se},path2Array:function(){return Ba},path2Curve:function(){return ba},path2String:function(){return zt},pick:function(){return af},pull:function(){return oo},pullAt:function(){return so},reduce:function(){return Io},remove:function(){return ei},requestAnimationFrame:function(){return mr},reverseCurve:function(){return ya},rgb2arr:function(){return wt},set:function(){return Uf},size:function(){return za},some:function(){return Pn},sortBy:function(){return Yo},startsWith:function(){return Tn},substitute:function(){return Ui},throttle:function(){return Sc},toArray:function(){return al},toCSSGradient:function(){return K},toDegree:function(){return ms},toInteger:function(){return ru},toRGB:function(){return b},toRadian:function(){return At},toString:function(){return Wn},transform:function(){return H},union:function(){return Gs},uniq:function(){return Vi},uniqueId:function(){return Mc},upperCase:function(){return qs},upperFirst:function(){return xu},values:function(){return sn},valuesOfKey:function(){return Wo},vertical:function(){return St},wrapBehavior:function(){return us}});function wt(Z){return[parseInt(Z.substr(1,2),16),parseInt(Z.substr(3,2),16),parseInt(Z.substr(5,2),16)]}function st(Z){var vt=Math.round(Z).toString(16);return vt.length===1?"0"+vt:vt}function tt(Z){return"#"+st(Z[0])+st(Z[1])+st(Z[2])}var Q=function(Z){return typeof Z=="function"};function J(Z){var vt,_t,Xt,ce=Z||1;function Be(sr,Rr){++vt>ce&&(Xt=_t,ze(1),++vt),_t[sr]=Rr}function ze(sr){vt=0,_t=Object.create(null),sr||(Xt=Object.create(null))}return ze(),{clear:ze,has:function(sr){return _t[sr]!==void 0||Xt[sr]!==void 0},get:function(sr){var Rr=_t[sr];if(Rr!==void 0)return Rr;if((Rr=Xt[sr])!==void 0)return Be(sr,Rr),Rr},set:function(sr,Rr){_t[sr]!==void 0?_t[sr]=Rr:Be(sr,Rr)}}}var X=function(Z,vt,_t){if(_t===void 0&&(_t=128),!Q(Z))throw new TypeError("Expected a function");var Xt=function(){for(var ce=[],Be=0;Be<arguments.length;Be++)ce[Be]=arguments[Be];var ze=vt?vt.apply(this,ce):ce[0],sr=Xt.cache;if(sr.has(ze))return sr.get(ze);var Rr=Z.apply(this,ce);return sr.set(ze,Rr),Rr};return Xt.cache=J(_t),Xt},T=/rgba?\(([\s.,0-9]+)\)/;function M(){var Z=document.createElement("i");return Z.title="Web Colour Picker",Z.style.display="none",document.body.appendChild(Z),Z}var C;function _(Z){if(Z[0]==="#"&&Z.length===7)return Z;C||(C=M()),C.style.color=Z;var vt=document.defaultView.getComputedStyle(C,"").getPropertyValue("color"),_t=T.exec(vt),Xt=_t[1].split(/\s*,\s*/).map(function(ce){return Number(ce)});return vt=tt(Xt),vt}var b=X(_,function(Z){return Z},256);function L(Z,vt,_t,Xt){return Z[Xt]+(vt[Xt]-Z[Xt])*_t}function S(Z,vt){var _t=isNaN(Number(vt))||vt<0?0:vt>1?1:Number(vt),Xt=Z.length-1,ce=Math.floor(Xt*_t),Be=Xt*_t-ce,ze=Z[ce],sr=ce===Xt?ze:Z[ce+1];return tt([L(ze,sr,Be,0),L(ze,sr,Be,1),L(ze,sr,Be,2)])}function I(Z){var vt=typeof Z=="string"?Z.split("-"):Z,_t=vt.map(function(Xt){return wt(Xt.indexOf("#")===-1?b(Xt):Xt)});return function(Xt){return S(_t,Xt)}}var D=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,P=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function v(Z){return/^[r,R,L,l]{1}[\s]*\(/.test(Z)}function K(Z){if(v(Z)){var vt,_t=void 0;if(Z[0]==="l"){var Xt=D.exec(Z),ce=+Xt[1]+90;_t=Xt[2],vt="linear-gradient("+ce+"deg, "}else if(Z[0]==="r"){vt="radial-gradient(";var Xt=P.exec(Z);_t=Xt[4]}var Be=_t.match(y);return Be.forEach(function(ze,sr){var Rr=ze.split(":");vt+=Rr[1]+" "+Number(Rr[0])*100+"%",sr!==Be.length-1&&(vt+=", ")}),vt+=")",vt}return Z}var R=ut(935600);function B(Z,vt,_t){var Xt=[0,0,0,0,0,0,0,0,0];return R.fromTranslation(Xt,_t),R.multiply(Z,Xt,vt)}function Y(Z,vt,_t){var Xt=[0,0,0,0,0,0,0,0,0];return R.fromRotation(Xt,_t),R.multiply(Z,Xt,vt)}function W(Z,vt,_t){var Xt=[0,0,0,0,0,0,0,0,0];return R.fromScaling(Xt,_t),R.multiply(Z,Xt,vt)}function q(Z,vt,_t){return R.multiply(Z,_t,vt)}function H(Z,vt){for(var _t=Z?[].concat(Z):[1,0,0,0,1,0,0,0,1],Xt=0,ce=vt.length;Xt<ce;Xt++){var Be=vt[Xt];switch(Be[0]){case"t":B(_t,_t,[Be[1],Be[2]]);break;case"s":W(_t,_t,[Be[1],Be[2]]);break;case"r":Y(_t,_t,Be[1]);break;case"m":q(_t,_t,Be[1]);break;default:break}}return _t}var et=ut(631437);function ct(Z,vt){return Z[0]*vt[1]-vt[0]*Z[1]}function at(Z,vt,_t){var Xt=et.angle(Z,vt),ce=ct(Z,vt)>=0;return _t?ce?Math.PI*2-Xt:Xt:ce?Xt:Math.PI*2-Xt}function St(Z,vt,_t){return _t?(Z[0]=vt[1],Z[1]=-1*vt[0]):(Z[0]=-1*vt[1],Z[1]=vt[0]),Z}function bt(Z,vt){if(vt==="off")return[].concat(Z);var _t=typeof vt=="number"&&vt>=1?Math.pow(10,vt):1;return Z.map(function(Xt){var ce=Xt.slice(1).map(Number).map(function(Be){return vt?Math.round(Be*_t)/_t:Math.round(Be)});return[Xt[0]].concat(ce)})}function zt(Z,vt){return vt===void 0&&(vt="off"),bt(Z,vt).map(function(_t){return _t[0]+_t.slice(1).join(" ")}).join("")}var kt=ut(197582),Kt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function it(Z,vt,_t){if(Z[_t].length>7){Z[_t].shift();for(var Xt=Z[_t],ce=_t;Xt.length;)vt[_t]="A",Z.splice(ce+=1,0,["C"].concat(Xt.splice(0,6)));Z.splice(_t,1)}}var gt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Vt(Z){return Array.isArray(Z)&&Z.every(function(vt){var _t=vt[0].toLowerCase();return gt[_t]===vt.length-1&&"achlmqstvz".includes(_t)})}function re(Z){return Vt(Z)&&Z.every(function(vt){var _t=vt[0];return _t===_t.toUpperCase()})}function It(Z){return re(Z)&&Z.every(function(vt){var _t=vt[0];return"ACLMQZ".includes(_t)})}function Wt(Z){for(var vt=Z.pathValue[Z.segmentStart],_t=vt.toLowerCase(),Xt=Z.data;Xt.length>=gt[_t]&&(_t==="m"&&Xt.length>2?(Z.segments.push([vt].concat(Xt.splice(0,2))),_t="l",vt=vt==="m"?"l":"L"):Z.segments.push([vt].concat(Xt.splice(0,gt[_t]))),!!gt[_t]););}function $t(Z){var vt=Z.index,_t=Z.pathValue,Xt=_t.charCodeAt(vt);if(Xt===48){Z.param=0,Z.index+=1;return}if(Xt===49){Z.param=1,Z.index+=1;return}Z.err='[path-util]: invalid Arc flag "'+_t[vt]+'", expecting 0 or 1 at index '+vt}function ae(Z){return Z>=48&&Z<=57||Z===43||Z===45||Z===46}function Bt(Z){return Z>=48&&Z<=57}function Ot(Z){var vt=Z.max,_t=Z.pathValue,Xt=Z.index,ce=Xt,Be=!1,ze=!1,sr=!1,Rr=!1,Wr;if(ce>=vt){Z.err="[path-util]: Invalid path value at index "+ce+', "pathValue" is missing param';return}if(Wr=_t.charCodeAt(ce),(Wr===43||Wr===45)&&(ce+=1,Wr=_t.charCodeAt(ce)),!Bt(Wr)&&Wr!==46){Z.err="[path-util]: Invalid path value at index "+ce+', "'+_t[ce]+'" is not a number';return}if(Wr!==46){if(Be=Wr===48,ce+=1,Wr=_t.charCodeAt(ce),Be&&ce<vt&&Wr&&Bt(Wr)){Z.err="[path-util]: Invalid path value at index "+Xt+', "'+_t[Xt]+'" illegal number';return}for(;ce<vt&&Bt(_t.charCodeAt(ce));)ce+=1,ze=!0;Wr=_t.charCodeAt(ce)}if(Wr===46){for(Rr=!0,ce+=1;Bt(_t.charCodeAt(ce));)ce+=1,sr=!0;Wr=_t.charCodeAt(ce)}if(Wr===101||Wr===69){if(Rr&&!ze&&!sr){Z.err="[path-util]: Invalid path value at index "+ce+', "'+_t[ce]+'" invalid float exponent';return}if(ce+=1,Wr=_t.charCodeAt(ce),(Wr===43||Wr===45)&&(ce+=1),ce<vt&&Bt(_t.charCodeAt(ce)))for(;ce<vt&&Bt(_t.charCodeAt(ce));)ce+=1;else{Z.err="[path-util]: Invalid path value at index "+ce+', "'+_t[ce]+'" invalid integer exponent';return}}Z.index=ce,Z.param=+Z.pathValue.slice(Xt,ce)}function Ht(Z){var vt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return Z===10||Z===13||Z===8232||Z===8233||Z===32||Z===9||Z===11||Z===12||Z===160||Z>=5760&&vt.includes(Z)}function pe(Z){for(var vt=Z.pathValue,_t=Z.max;Z.index<_t&&Ht(vt.charCodeAt(Z.index));)Z.index+=1}function ve(Z){switch(Z|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Tt(Z){return(Z|32)===97}function Zt(Z){var vt=Z.max,_t=Z.pathValue,Xt=Z.index,ce=_t.charCodeAt(Xt),Be=gt[_t[Xt].toLowerCase()];if(Z.segmentStart=Xt,!ve(ce)){Z.err='[path-util]: Invalid path value "'+_t[Xt]+'" is not a path command';return}if(Z.index+=1,pe(Z),Z.data=[],!Be){Wt(Z);return}for(;;){for(var ze=Be;ze>0;ze-=1){if(Tt(ce)&&(ze===3||ze===4)?$t(Z):Ot(Z),Z.err.length)return;Z.data.push(Z.param),pe(Z),Z.index<vt&&_t.charCodeAt(Z.index)===44&&(Z.index+=1,pe(Z))}if(Z.index>=Z.max||!ae(_t.charCodeAt(Z.index)))break}Wt(Z)}var Ce=function(){function Z(vt){this.pathValue=vt,this.segments=[],this.max=vt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return Z}();function Ut(Z){if(Vt(Z))return[].concat(Z);var vt=new Ce(Z);for(pe(vt);vt.index<vt.max&&!vt.err.length;)Zt(vt);return vt.err?vt.err:vt.segments}function se(Z){if(re(Z))return[].concat(Z);var vt=Ut(Z),_t=0,Xt=0,ce=0,Be=0;return vt.map(function(ze){var sr=ze.slice(1).map(Number),Rr=ze[0],Wr=Rr.toUpperCase();if(Rr==="M")return _t=sr[0],Xt=sr[1],ce=_t,Be=Xt,["M",_t,Xt];var bn;if(Rr!==Wr)switch(Wr){case"A":bn=[Wr,sr[0],sr[1],sr[2],sr[3],sr[4],sr[5]+_t,sr[6]+Xt];break;case"V":bn=[Wr,sr[0]+Xt];break;case"H":bn=[Wr,sr[0]+_t];break;default:{var dn=sr.map(function($n,Ea){return $n+(Ea%2?Xt:_t)});bn=[Wr].concat(dn)}}else bn=[Wr].concat(sr);var mn=bn.length;switch(Wr){case"Z":_t=ce,Xt=Be;break;case"H":_t=bn[1];break;case"V":Xt=bn[1];break;default:_t=bn[mn-2],Xt=bn[mn-1],Wr==="M"&&(ce=_t,Be=Xt)}return bn})}function _e(Z,vt){var _t=Z[0],Xt=vt.x1,ce=vt.y1,Be=vt.x2,ze=vt.y2,sr=Z.slice(1).map(Number),Rr=Z;if("TQ".includes(_t)||(vt.qx=null,vt.qy=null),_t==="H")Rr=["L",Z[1],ce];else if(_t==="V")Rr=["L",Xt,Z[1]];else if(_t==="S"){var Wr=Xt*2-Be,bn=ce*2-ze;vt.x1=Wr,vt.y1=bn,Rr=["C",Wr,bn].concat(sr)}else if(_t==="T"){var dn=Xt*2-vt.qx,mn=ce*2-vt.qy;vt.qx=dn,vt.qy=mn,Rr=["Q",dn,mn].concat(sr)}else if(_t==="Q"){var $n=sr[0],Ea=sr[1];vt.qx=$n,vt.qy=Ea}return Rr}function $e(Z){if(It(Z))return[].concat(Z);for(var vt=se(Z),_t=(0,kt.pi)({},Kt),Xt=0;Xt<vt.length;Xt+=1){vt[Xt]=_e(vt[Xt],_t);var ce=vt[Xt],Be=ce.length;_t.x1=+ce[Be-2],_t.y1=+ce[Be-1],_t.x2=+ce[Be-4]||_t.x1,_t.y2=+ce[Be-3]||_t.y1}return vt}function fr(Z){return It(Z)&&Z.every(function(vt){var _t=vt[0];return"MC".includes(_t)})}function gr(Z,vt,_t){var Xt=Z*Math.cos(_t)-vt*Math.sin(_t),ce=Z*Math.sin(_t)+vt*Math.cos(_t);return{x:Xt,y:ce}}function Yt(Z,vt,_t,Xt,ce,Be,ze,sr,Rr,Wr){var bn=Z,dn=vt,mn=_t,$n=Xt,Ea=sr,ha=Rr,Zn=Math.PI*120/180,Ma=Math.PI/180*(+ce||0),Dn=[],_a,aa,Rn,Ca,Ka;if(Wr)aa=Wr[0],Rn=Wr[1],Ca=Wr[2],Ka=Wr[3];else{_a=gr(bn,dn,-Ma),bn=_a.x,dn=_a.y,_a=gr(Ea,ha,-Ma),Ea=_a.x,ha=_a.y;var ii=(bn-Ea)/2,ri=(dn-ha)/2,Xa=ii*ii/(mn*mn)+ri*ri/($n*$n);Xa>1&&(Xa=Math.sqrt(Xa),mn*=Xa,$n*=Xa);var _i=mn*mn,Pi=$n*$n,bi=(Be===ze?-1:1)*Math.sqrt(Math.abs((_i*Pi-_i*ri*ri-Pi*ii*ii)/(_i*ri*ri+Pi*ii*ii)));Ca=bi*mn*ri/$n+(bn+Ea)/2,Ka=bi*-$n*ii/mn+(dn+ha)/2,aa=Math.asin(((dn-Ka)/$n*Math.pow(10,9)>>0)/Math.pow(10,9)),Rn=Math.asin(((ha-Ka)/$n*Math.pow(10,9)>>0)/Math.pow(10,9)),aa=bn<Ca?Math.PI-aa:aa,Rn=Ea<Ca?Math.PI-Rn:Rn,aa<0&&(aa=Math.PI*2+aa),Rn<0&&(Rn=Math.PI*2+Rn),ze&&aa>Rn&&(aa-=Math.PI*2),!ze&&Rn>aa&&(Rn-=Math.PI*2)}var Wu=Rn-aa;if(Math.abs(Wu)>Zn){var Yf=Rn,Qo=Ea,Mu=ha;Rn=aa+Zn*(ze&&Rn>aa?1:-1),Ea=Ca+mn*Math.cos(Rn),ha=Ka+$n*Math.sin(Rn),Dn=Yt(Ea,ha,mn,$n,ce,0,ze,Qo,Mu,[Rn,Yf,Ca,Ka])}Wu=Rn-aa;var lf=Math.cos(aa),ou=Math.sin(aa),hf=Math.cos(Rn),df=Math.sin(Rn),Vu=Math.tan(Wu/4),Ac=4/3*mn*Vu,Tc=4/3*$n*Vu,su=[bn,dn],Xs=[bn+Ac*ou,dn-Tc*lf],_u=[Ea+Ac*df,ha-Tc*hf],Ic=[Ea,ha];if(Xs[0]=2*su[0]-Xs[0],Xs[1]=2*su[1]-Xs[1],Wr)return Xs.concat(_u,Ic,Dn);Dn=Xs.concat(_u,Ic,Dn);for(var uu=[],Jo=0,Ys=Dn.length;Jo<Ys;Jo+=1)uu[Jo]=Jo%2?gr(Dn[Jo-1],Dn[Jo],Ma).y:gr(Dn[Jo],Dn[Jo+1],Ma).x;return uu}function Mr(Z,vt,_t,Xt,ce,Be){var ze=.3333333333333333,sr=2/3;return[ze*Z+sr*_t,ze*vt+sr*Xt,ze*ce+sr*_t,ze*Be+sr*Xt,ce,Be]}function Ln(Z,vt,_t){var Xt=Z[0],ce=Z[1],Be=vt[0],ze=vt[1];return[Xt+(Be-Xt)*_t,ce+(ze-ce)*_t]}var Yn=function(Z,vt,_t,Xt){var ce=.5,Be=Ln([Z,vt],[_t,Xt],ce);return(0,kt.ev)((0,kt.ev)([],Be,!0),[_t,Xt,_t,Xt],!1)};function Ra(Z,vt){var _t=Z[0],Xt=Z.slice(1).map(Number),ce=Xt[0],Be=Xt[1],ze,sr=vt.x1,Rr=vt.y1,Wr=vt.x,bn=vt.y;switch("TQ".includes(_t)||(vt.qx=null,vt.qy=null),_t){case"M":return vt.x=ce,vt.y=Be,Z;case"A":return ze=[sr,Rr].concat(Xt),["C"].concat(Yt(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5],ze[6],ze[7],ze[8],ze[9]));case"Q":return vt.qx=ce,vt.qy=Be,ze=[sr,Rr].concat(Xt),["C"].concat(Mr(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5]));case"L":return["C"].concat(Yn(sr,Rr,ce,Be));case"Z":return sr===Wr&&Rr===bn?["C",sr,Rr,Wr,bn,Wr,bn]:["C"].concat(Yn(sr,Rr,Wr,bn));default:}return Z}function ba(Z,vt){if(vt===void 0&&(vt=!1),fr(Z)){var _t=[].concat(Z);return vt?[_t,[]]:_t}for(var Xt=$e(Z),ce=(0,kt.pi)({},Kt),Be=[],ze="",sr=Xt.length,Rr,Wr,bn=[],dn=0;dn<sr;dn+=1){Xt[dn]&&(ze=Xt[dn][0]),Be[dn]=ze;var mn=Ra(Xt[dn],ce);Xt[dn]=mn,it(Xt,Be,dn),sr=Xt.length,ze==="Z"&&bn.push(dn),Rr=Xt[dn],Wr=Rr.length,ce.x1=+Rr[Wr-2],ce.y1=+Rr[Wr-1],ce.x2=+Rr[Wr-4]||ce.x1,ce.y2=+Rr[Wr-3]||ce.y1}return vt?[Xt,bn]:Xt}function Ba(Z){return Ut(Z)}function xa(Z){return Z.map(function(vt){return Array.isArray(vt)?[].concat(vt):vt})}function ya(Z){var vt=Z.slice(1).map(function(_t,Xt,ce){return Xt?ce[Xt-1].slice(-2).concat(_t.slice(1)):Z[0].slice(1).concat(_t.slice(1))}).map(function(_t){return _t.map(function(Xt,ce){return _t[_t.length-ce-2*(1-ce%2)]})}).reverse();return[["M"].concat(vt[0].slice(0,2))].concat(vt.map(function(_t){return["C"].concat(_t.slice(2))}))}function Na(Z,vt){return Math.sqrt((Z[0]-vt[0])*(Z[0]-vt[0])+(Z[1]-vt[1])*(Z[1]-vt[1]))}function Ta(Z,vt,_t,Xt,ce){var Be=Na([Z,vt],[_t,Xt]),ze={x:0,y:0};if(typeof ce=="number")if(ce<=0)ze={x:Z,y:vt};else if(ce>=Be)ze={x:_t,y:Xt};else{var sr=Ln([Z,vt],[_t,Xt],ce/Be),Rr=sr[0],Wr=sr[1];ze={x:Rr,y:Wr}}return{length:Be,point:ze,min:{x:Math.min(Z,_t),y:Math.min(vt,Xt)},max:{x:Math.max(Z,_t),y:Math.max(vt,Xt)}}}function hr(Z,vt){var _t=Z.x,Xt=Z.y,ce=vt.x,Be=vt.y,ze=_t*ce+Xt*Be,sr=Math.sqrt((Math.pow(_t,2)+Math.pow(Xt,2))*(Math.pow(ce,2)+Math.pow(Be,2))),Rr=_t*Be-Xt*ce<0?-1:1,Wr=Rr*Math.acos(ze/sr);return Wr}function Br(Z,vt,_t,Xt,ce,Be,ze,sr,Rr,Wr){var bn=Math.abs,dn=Math.sin,mn=Math.cos,$n=Math.sqrt,Ea=Math.PI,ha=bn(_t),Zn=bn(Xt),Ma=(ce%360+360)%360,Dn=Ma*(Ea/180);if(Z===sr&&vt===Rr)return{x:Z,y:vt};if(ha===0||Zn===0)return Ta(Z,vt,sr,Rr,Wr).point;var _a=(Z-sr)/2,aa=(vt-Rr)/2,Rn={x:mn(Dn)*_a+dn(Dn)*aa,y:-dn(Dn)*_a+mn(Dn)*aa},Ca=Math.pow(Rn.x,2)/Math.pow(ha,2)+Math.pow(Rn.y,2)/Math.pow(Zn,2);Ca>1&&(ha*=$n(Ca),Zn*=$n(Ca));var Ka=Math.pow(ha,2)*Math.pow(Zn,2)-Math.pow(ha,2)*Math.pow(Rn.y,2)-Math.pow(Zn,2)*Math.pow(Rn.x,2),ii=Math.pow(ha,2)*Math.pow(Rn.y,2)+Math.pow(Zn,2)*Math.pow(Rn.x,2),ri=Ka/ii;ri=ri<0?0:ri;var Xa=(Be!==ze?1:-1)*$n(ri),_i={x:Xa*(ha*Rn.y/Zn),y:Xa*(-(Zn*Rn.x)/ha)},Pi={x:mn(Dn)*_i.x-dn(Dn)*_i.y+(Z+sr)/2,y:dn(Dn)*_i.x+mn(Dn)*_i.y+(vt+Rr)/2},bi={x:(Rn.x-_i.x)/ha,y:(Rn.y-_i.y)/Zn},Wu=hr({x:1,y:0},bi),Yf={x:(-Rn.x-_i.x)/ha,y:(-Rn.y-_i.y)/Zn},Qo=hr(bi,Yf);!ze&&Qo>0?Qo-=2*Ea:ze&&Qo<0&&(Qo+=2*Ea),Qo%=2*Ea;var Mu=Wu+Qo*Wr,lf=ha*mn(Mu),ou=Zn*dn(Mu),hf={x:mn(Dn)*lf-dn(Dn)*ou+Pi.x,y:dn(Dn)*lf+mn(Dn)*ou+Pi.y};return hf}function cn(Z,vt,_t,Xt,ce,Be,ze,sr,Rr,Wr,bn){var dn,mn=bn.bbox,$n=mn===void 0?!0:mn,Ea=bn.length,ha=Ea===void 0?!0:Ea,Zn=bn.sampleSize,Ma=Zn===void 0?30:Zn,Dn=typeof Wr=="number",_a=Z,aa=vt,Rn=0,Ca=[_a,aa,Rn],Ka=[_a,aa],ii=0,ri={x:0,y:0},Xa=[{x:_a,y:aa}];Dn&&Wr<=0&&(ri={x:_a,y:aa});for(var _i=0;_i<=Ma;_i+=1){if(ii=_i/Ma,dn=Br(Z,vt,_t,Xt,ce,Be,ze,sr,Rr,ii),_a=dn.x,aa=dn.y,$n&&Xa.push({x:_a,y:aa}),ha&&(Rn+=Na(Ka,[_a,aa])),Ka=[_a,aa],Dn&&Rn>=Wr&&Wr>Ca[2]){var Pi=(Rn-Wr)/(Rn-Ca[2]);ri={x:Ka[0]*(1-Pi)+Ca[0]*Pi,y:Ka[1]*(1-Pi)+Ca[1]*Pi}}Ca=[_a,aa,Rn]}return Dn&&Wr>=Rn&&(ri={x:sr,y:Rr}),{length:Rn,point:ri,min:{x:Math.min.apply(null,Xa.map(function(bi){return bi.x})),y:Math.min.apply(null,Xa.map(function(bi){return bi.y}))},max:{x:Math.max.apply(null,Xa.map(function(bi){return bi.x})),y:Math.max.apply(null,Xa.map(function(bi){return bi.y}))}}}function Cn(Z,vt,_t,Xt,ce,Be,ze,sr,Rr){var Wr=1-Rr;return{x:Math.pow(Wr,3)*Z+3*Math.pow(Wr,2)*Rr*_t+3*Wr*Math.pow(Rr,2)*ce+Math.pow(Rr,3)*ze,y:Math.pow(Wr,3)*vt+3*Math.pow(Wr,2)*Rr*Xt+3*Wr*Math.pow(Rr,2)*Be+Math.pow(Rr,3)*sr}}function Qn(Z,vt,_t,Xt,ce,Be,ze,sr,Rr,Wr){var bn,dn=Wr.bbox,mn=dn===void 0?!0:dn,$n=Wr.length,Ea=$n===void 0?!0:$n,ha=Wr.sampleSize,Zn=ha===void 0?10:ha,Ma=typeof Rr=="number",Dn=Z,_a=vt,aa=0,Rn=[Dn,_a,aa],Ca=[Dn,_a],Ka=0,ii={x:0,y:0},ri=[{x:Dn,y:_a}];Ma&&Rr<=0&&(ii={x:Dn,y:_a});for(var Xa=0;Xa<=Zn;Xa+=1){if(Ka=Xa/Zn,bn=Cn(Z,vt,_t,Xt,ce,Be,ze,sr,Ka),Dn=bn.x,_a=bn.y,mn&&ri.push({x:Dn,y:_a}),Ea&&(aa+=Na(Ca,[Dn,_a])),Ca=[Dn,_a],Ma&&aa>=Rr&&Rr>Rn[2]){var _i=(aa-Rr)/(aa-Rn[2]);ii={x:Ca[0]*(1-_i)+Rn[0]*_i,y:Ca[1]*(1-_i)+Rn[1]*_i}}Rn=[Dn,_a,aa]}return Ma&&Rr>=aa&&(ii={x:ze,y:sr}),{length:aa,point:ii,min:{x:Math.min.apply(null,ri.map(function(Pi){return Pi.x})),y:Math.min.apply(null,ri.map(function(Pi){return Pi.y}))},max:{x:Math.max.apply(null,ri.map(function(Pi){return Pi.x})),y:Math.max.apply(null,ri.map(function(Pi){return Pi.y}))}}}function Bn(Z,vt,_t,Xt,ce,Be,ze){var sr=1-ze;return{x:Math.pow(sr,2)*Z+2*sr*ze*_t+Math.pow(ze,2)*ce,y:Math.pow(sr,2)*vt+2*sr*ze*Xt+Math.pow(ze,2)*Be}}function ta(Z,vt,_t,Xt,ce,Be,ze,sr){var Rr,Wr=sr.bbox,bn=Wr===void 0?!0:Wr,dn=sr.length,mn=dn===void 0?!0:dn,$n=sr.sampleSize,Ea=$n===void 0?10:$n,ha=typeof ze=="number",Zn=Z,Ma=vt,Dn=0,_a=[Zn,Ma,Dn],aa=[Zn,Ma],Rn=0,Ca={x:0,y:0},Ka=[{x:Zn,y:Ma}];ha&&ze<=0&&(Ca={x:Zn,y:Ma});for(var ii=0;ii<=Ea;ii+=1){if(Rn=ii/Ea,Rr=Bn(Z,vt,_t,Xt,ce,Be,Rn),Zn=Rr.x,Ma=Rr.y,bn&&Ka.push({x:Zn,y:Ma}),mn&&(Dn+=Na(aa,[Zn,Ma])),aa=[Zn,Ma],ha&&Dn>=ze&&ze>_a[2]){var ri=(Dn-ze)/(Dn-_a[2]);Ca={x:aa[0]*(1-ri)+_a[0]*ri,y:aa[1]*(1-ri)+_a[1]*ri}}_a=[Zn,Ma,Dn]}return ha&&ze>=Dn&&(Ca={x:ce,y:Be}),{length:Dn,point:Ca,min:{x:Math.min.apply(null,Ka.map(function(Xa){return Xa.x})),y:Math.min.apply(null,Ka.map(function(Xa){return Xa.y}))},max:{x:Math.max.apply(null,Ka.map(function(Xa){return Xa.x})),y:Math.max.apply(null,Ka.map(function(Xa){return Xa.y}))}}}function sa(Z,vt,_t){for(var Xt,ce,Be,ze,sr,Rr,Wr=$e(Z),bn=typeof vt=="number",dn,mn=[],$n,Ea=0,ha=0,Zn=0,Ma=0,Dn,_a=[],aa=[],Rn=0,Ca={x:0,y:0},Ka=Ca,ii=Ca,ri=Ca,Xa=0,_i=0,Pi=Wr.length;_i<Pi;_i+=1)Dn=Wr[_i],$n=Dn[0],dn=$n==="M",mn=dn?mn:[Ea,ha].concat(Dn.slice(1)),dn?(Zn=Dn[1],Ma=Dn[2],Ca={x:Zn,y:Ma},Ka=Ca,Rn=0,bn&&vt<.001&&(ri=Ca)):$n==="L"?(Xt=Ta(mn[0],mn[1],mn[2],mn[3],(vt||0)-Xa),Rn=Xt.length,Ca=Xt.min,Ka=Xt.max,ii=Xt.point):$n==="A"?(ce=cn(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5],mn[6],mn[7],mn[8],(vt||0)-Xa,_t||{}),Rn=ce.length,Ca=ce.min,Ka=ce.max,ii=ce.point):$n==="C"?(Be=Qn(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5],mn[6],mn[7],(vt||0)-Xa,_t||{}),Rn=Be.length,Ca=Be.min,Ka=Be.max,ii=Be.point):$n==="Q"?(ze=ta(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5],(vt||0)-Xa,_t||{}),Rn=ze.length,Ca=ze.min,Ka=ze.max,ii=ze.point):$n==="Z"&&(mn=[Ea,ha,Zn,Ma],sr=Ta(mn[0],mn[1],mn[2],mn[3],(vt||0)-Xa),Rn=sr.length,Ca=sr.min,Ka=sr.max,ii=sr.point),bn&&Xa<vt&&Xa+Rn>=vt&&(ri=ii),aa.push(Ka),_a.push(Ca),Xa+=Rn,Rr=$n!=="Z"?Dn.slice(-2):[Zn,Ma],Ea=Rr[0],ha=Rr[1];return bn&&vt>=Xa&&(ri={x:Ea,y:ha}),{length:Xa,point:ri,min:{x:Math.min.apply(null,_a.map(function(bi){return bi.x})),y:Math.min.apply(null,_a.map(function(bi){return bi.y}))},max:{x:Math.max.apply(null,aa.map(function(bi){return bi.x})),y:Math.max.apply(null,aa.map(function(bi){return bi.y}))}}}function Fa(Z,vt){if(!Z)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var _t=sa(Z,void 0,(0,kt.pi)((0,kt.pi)({},vt),{length:!1})),Xt=_t.min,ce=Xt.x,Be=Xt.y,ze=_t.max,sr=ze.x,Rr=ze.y,Wr=sr-ce,bn=Rr-Be;return{width:Wr,height:bn,x:ce,y:Be,x2:sr,y2:Rr,cx:ce+Wr/2,cy:Be+bn/2,cz:Math.max(Wr,bn)+Math.min(Wr,bn)/2}}function wa(Z,vt){return sa(Z,void 0,(0,kt.pi)((0,kt.pi)({},vt),{bbox:!1,length:!0})).length}function An(Z,vt){if(!Z)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var _t=sa(Z,void 0,(0,kt.pi)((0,kt.pi)({},vt),{bbox:!0,length:!0})),Xt=_t.length,ce=_t.min,Be=ce.x,ze=ce.y,sr=_t.max,Rr=sr.x,Wr=sr.y,bn=Rr-Be,dn=Wr-ze;return{length:Xt,width:bn,height:dn,x:Be,y:ze,x2:Rr,y2:Wr,cx:Be+bn/2,cy:ze+dn/2,cz:Math.max(bn,dn)+Math.min(bn,dn)/2}}function ua(Z){var vt=Z.length,_t=vt-1;return Z.map(function(Xt,ce){return Z.map(function(Be,ze){var sr=ce+ze,Rr;return ze===0||Z[sr]&&Z[sr][0]==="M"?(Rr=Z[sr],["M"].concat(Rr.slice(-2))):(sr>=vt&&(sr-=_t),Z[sr])})})}function ra(Z,vt){var _t=Z.length-1,Xt=[],ce=0,Be=0,ze=ua(Z);return ze.forEach(function(sr,Rr){Z.slice(1).forEach(function(Wr,bn){Be+=Na(Z[(Rr+bn)%_t].slice(-2),vt[bn%_t].slice(-2))}),Xt[Rr]=Be,Be=0}),ce=Xt.indexOf(Math.min.apply(null,Xt)),ze[ce]}function Fn(Z,vt,_t,Xt,ce,Be,ze,sr){return 3*((sr-vt)*(_t+ce)-(ze-Z)*(Xt+Be)+Xt*(Z-ce)-_t*(vt-Be)+sr*(ce+Z/3)-ze*(Be+vt/3))/20}function ka(Z){var vt=0,_t=0,Xt=0;return ba(Z).map(function(ce){var Be;switch(ce[0]){case"M":return vt=ce[1],_t=ce[2],0;default:var ze=ce.slice(1),sr=ze[0],Rr=ze[1],Wr=ze[2],bn=ze[3],dn=ze[4],mn=ze[5];return Xt=Fn(vt,_t,sr,Rr,Wr,bn,dn,mn),Be=ce.slice(-2),vt=Be[0],_t=Be[1],Xt}}).reduce(function(ce,Be){return ce+Be},0)}function U(Z){return ka(Z)>=0}function Ve(Z,vt,_t){return sa(Z,vt,(0,kt.pi)((0,kt.pi)({},_t),{bbox:!1,length:!0})).point}function we(Z,vt){var _t=Ut(Z);if(typeof _t=="string")throw TypeError(_t);var Xt=_t.slice(),ce=wa(Xt),Be=Xt.length-1,ze=0,sr=0,Rr=_t[0],Wr=Rr.slice(-2),bn=Wr[0],dn=Wr[1],mn={x:bn,y:dn};if(Be<=0||!vt||!Number.isFinite(vt))return{segment:Rr,index:0,length:sr,point:mn,lengthAtSegment:ze};if(vt>=ce)return Xt=_t.slice(0,-1),ze=wa(Xt),sr=ce-ze,{segment:_t[Be],index:Be,length:sr,lengthAtSegment:ze};for(var $n=[];Be>0;)Rr=Xt[Be],Xt=Xt.slice(0,-1),ze=wa(Xt),sr=ce-ze,ce=ze,$n.push({segment:Rr,index:Be,length:sr,lengthAtSegment:ze}),Be-=1;return $n.find(function(Ea){var ha=Ea.lengthAtSegment;return ha<=vt})}function er(Z,vt){for(var _t=Ut(Z),Xt=$e(_t),ce=wa(_t),Be=function(Rn){var Ca=Rn.x-vt.x,Ka=Rn.y-vt.y;return Ca*Ca+Ka*Ka},ze=8,sr,Rr=0,Wr,bn=0,dn=1/0,mn=0;mn<=ce;mn+=ze)sr=Ve(Xt,mn),Rr=Be(sr),Rr<dn&&(Wr=sr,bn=mn,dn=Rr);ze/=2;for(var $n,Ea,ha=0,Zn=0,Ma=0,Dn=0;ze>.5;)ha=bn-ze,$n=Ve(Xt,ha),Ma=Be($n),Zn=bn+ze,Ea=Ve(Xt,Zn),Dn=Be(Ea),ha>=0&&Ma<dn?(Wr=$n,bn=ha,dn=Ma):Zn<=ce&&Dn<dn?(Wr=Ea,bn=Zn,dn=Dn):ze/=2;var _a=we(_t,bn),aa=Math.sqrt(dn);return{closest:Wr,distance:aa,segment:_a}}function Je(Z,vt){var _t=er(Z,vt).distance;return Math.abs(_t)<.001}function Pr(Z,vt){vt===void 0&&(vt=.5);var _t=Z.slice(0,2),Xt=Z.slice(2,4),ce=Z.slice(4,6),Be=Z.slice(6,8),ze=Ln(_t,Xt,vt),sr=Ln(Xt,ce,vt),Rr=Ln(ce,Be,vt),Wr=Ln(ze,sr,vt),bn=Ln(sr,Rr,vt),dn=Ln(Wr,bn,vt);return[["C"].concat(ze,Wr,dn),["C"].concat(bn,Rr,Be)]}function Or(Z){return Z.map(function(vt,_t,Xt){var ce=_t&&Xt[_t-1].slice(-2).concat(vt.slice(1)),Be=_t?Qn(ce[0],ce[1],ce[2],ce[3],ce[4],ce[5],ce[6],ce[7],ce[8],{bbox:!1}).length:0,ze;return _t?ze=Be?Pr(ce):[vt,vt]:ze=[vt],{s:vt,ss:ze,l:Be}})}function rn(Z,vt,_t){var Xt=Or(Z),ce=Or(vt),Be=Xt.length,ze=ce.length,sr=Xt.filter(function(Zn){return Zn.l}).length,Rr=ce.filter(function(Zn){return Zn.l}).length,Wr=Xt.filter(function(Zn){return Zn.l}).reduce(function(Zn,Ma){var Dn=Ma.l;return Zn+Dn},0)/sr||0,bn=ce.filter(function(Zn){return Zn.l}).reduce(function(Zn,Ma){var Dn=Ma.l;return Zn+Dn},0)/Rr||0,dn=_t||Math.max(Be,ze),mn=[Wr,bn],$n=[dn-Be,dn-ze],Ea=0,ha=[Xt,ce].map(function(Zn,Ma){return Zn.l===dn?Zn.map(function(Dn){return Dn.s}):Zn.map(function(Dn,_a){return Ea=_a&&$n[Ma]&&Dn.l>=mn[Ma],$n[Ma]-=Ea?1:0,Ea?Dn.ss:[Dn.s]}).flat()});return ha[0].length===ha[1].length?ha:rn(ha[0],ha[1],dn)}var fn=function(Z){return Z!==null&&typeof Z!="function"&&isFinite(Z.length)},jr=fn,ht=function(Z,vt){return jr(Z)?Z.indexOf(vt)>-1:!1},yt=ht,O=function(Z,vt){if(!jr(Z))return Z;for(var _t=[],Xt=0;Xt<Z.length;Xt++){var ce=Z[Xt];vt(ce,Xt)&&_t.push(ce)}return _t},E=O,w=function(Z,vt){return vt===void 0&&(vt=[]),E(Z,function(_t){return!yt(vt,_t)})},V=w,Et=function(Z){return Z==null},Gt=Et,Dt={}.toString,ie=function(Z,vt){return Dt.call(Z)==="[object "+vt+"]"},Ge=ie,Te=function(Z){return Array.isArray?Array.isArray(Z):Ge(Z,"Array")},ar=function(Z){var vt=typeof Z;return Z!==null&&vt==="object"||vt==="function"};function Ur(Z,vt){if(Z){var _t;if(Te(Z))for(var Xt=0,ce=Z.length;Xt<ce&&(_t=vt(Z[Xt],Xt),_t!==!1);Xt++);else if(ar(Z)){for(var Be in Z)if(Z.hasOwnProperty(Be)&&(_t=vt(Z[Be],Be),_t===!1))break}}}var pr=Ur,nn=Object.keys?function(Z){return Object.keys(Z)}:function(Z){var vt=[];return pr(Z,function(_t,Xt){Q(Z)&&Xt==="prototype"||vt.push(Xt)}),vt},kn=nn;function We(Z,vt){var _t=kn(vt),Xt=_t.length;if(Gt(Z))return!Xt;for(var ce=0;ce<Xt;ce+=1){var Be=_t[ce];if(vt[Be]!==Z[Be]||!(Be in Z))return!1}return!0}var vr=We,Nr=function(Z){return typeof Z=="object"&&Z!==null},Fr=Nr,ee=function(Z){if(!Fr(Z)||!Ge(Z,"Object"))return!1;if(Object.getPrototypeOf(Z)===null)return!0;for(var vt=Z;Object.getPrototypeOf(vt)!==null;)vt=Object.getPrototypeOf(vt);return Object.getPrototypeOf(Z)===vt},Lt=ee;function ue(Z,vt){if(!Te(Z))return null;var _t;if(Q(vt)&&(_t=vt),Lt(vt)&&(_t=function(ce){return vr(ce,vt)}),_t){for(var Xt=0;Xt<Z.length;Xt+=1)if(_t(Z[Xt]))return Z[Xt]}return null}var Ee=ue;function me(Z,vt,_t){_t===void 0&&(_t=0);for(var Xt=_t;Xt<Z.length;Xt++)if(vt(Z[Xt],Xt))return Xt;return-1}var Ie=me,rr=function(Z,vt){for(var _t=null,Xt=0;Xt<Z.length;Xt++){var ce=Z[Xt],Be=ce[vt];if(!Gt(Be)){Te(Be)?_t=Be[0]:_t=Be;break}}return _t},ir=rr,Zr=function(Z){if(!Te(Z))return[];for(var vt=[],_t=0;_t<Z.length;_t++)vt=vt.concat(Z[_t]);return vt},En=Zr,ln=function(Z,vt){if(vt===void 0&&(vt=[]),!Te(Z))vt.push(Z);else for(var _t=0;_t<Z.length;_t+=1)ln(Z[_t],vt);return vt},zn=ln,Gn=function(Z){if(Te(Z))return Z.reduce(function(vt,_t){return Math.max(vt,_t)},Z[0])},la=function(Z){if(Te(Z))return Z.reduce(function(vt,_t){return Math.min(vt,_t)},Z[0])},Ha=function(Z){var vt=Z.filter(function(ze){return!isNaN(ze)});if(!vt.length)return{min:0,max:0};if(Te(Z[0])){for(var _t=[],Xt=0;Xt<Z.length;Xt++)_t=_t.concat(Z[Xt]);vt=_t}var ce=Gn(vt),Be=la(vt);return{min:Be,max:ce}},qa=Ha,Oa=Array.prototype,Ao=Oa.splice,wi=Oa.indexOf,Ei=function(Z){for(var vt=[],_t=1;_t<arguments.length;_t++)vt[_t-1]=arguments[_t];for(var Xt=0;Xt<vt.length;Xt++)for(var ce=vt[Xt],Be=-1;(Be=wi.call(Z,ce))>-1;)Ao.call(Z,Be,1);return Z},oo=Ei,hs=Array.prototype.splice,To=function(vt,_t){if(!jr(vt))return[];for(var Xt=vt?_t.length:0,ce=Xt-1;Xt--;){var Be=void 0,ze=_t[Xt];(Xt===ce||ze!==Be)&&(Be=ze,hs.call(vt,ze,1))}return vt},so=To,ma=function(Z,vt,_t){if(!Te(Z)&&!Lt(Z))return Z;var Xt=_t;return pr(Z,function(ce,Be){Xt=vt(Xt,ce,Be)}),Xt},Io=ma,ds=function(Z,vt){var _t=[];if(!jr(Z))return _t;for(var Xt=-1,ce=[],Be=Z.length;++Xt<Be;){var ze=Z[Xt];vt(ze,Xt,Z)&&(_t.push(ze),ce.push(Xt))}return so(Z,ce),_t},ei=ds,Wi=function(Z){return Ge(Z,"String")};function vs(Z,vt){var _t;if(Q(vt))_t=function(ce,Be){return vt(ce)-vt(Be)};else{var Xt=[];Wi(vt)?Xt.push(vt):Te(vt)&&(Xt=vt),_t=function(ce,Be){for(var ze=0;ze<Xt.length;ze+=1){var sr=Xt[ze];if(ce[sr]>Be[sr])return 1;if(ce[sr]<Be[sr])return-1}return 0}}return Z.sort(_t),Z}var Yo=vs;function Vi(Z,vt){vt===void 0&&(vt=new Map);var _t=[];if(Array.isArray(Z))for(var Xt=0,ce=Z.length;Xt<ce;Xt++){var Be=Z[Xt];vt.has(Be)||(_t.push(Be),vt.set(Be,!0))}return _t}var uo=function(){for(var Z=[],vt=0;vt<arguments.length;vt++)Z[vt]=arguments[vt];return Vi([].concat.apply([],Z))},Gs=uo,Wo=function(Z,vt){for(var _t=[],Xt={},ce=0;ce<Z.length;ce++){var Be=Z[ce],ze=Be[vt];if(!Gt(ze)){Te(ze)||(ze=[ze]);for(var sr=0;sr<ze.length;sr++){var Rr=ze[sr];Xt[Rr]||(_t.push(Rr),Xt[Rr]=!0)}}}return _t};function Si(Z){if(jr(Z))return Z[0]}function fo(Z){if(jr(Z)){var vt=Z;return vt[vt.length-1]}}function ps(Z,vt){return Te(Z)||Wi(Z)?Z[0]===vt:!1}var Tn=ps;function Eo(Z,vt){return Te(Z)||Wi(Z)?Z[Z.length-1]===vt:!1}var Do=Eo,Ss=function(Z,vt){for(var _t=0;_t<Z.length;_t++)if(!vt(Z[_t],_t))return!1;return!0},Vo=Ss,Ns=function(Z,vt){for(var _t=0;_t<Z.length;_t++)if(vt(Z[_t],_t))return!0;return!1},Pn=Ns,Hi=Object.prototype.hasOwnProperty;function ji(Z,vt){if(!vt||!Te(Z))return{};for(var _t={},Xt=Q(vt)?vt:function(sr){return sr[vt]},ce,Be=0;Be<Z.length;Be++){var ze=Z[Be];ce=Xt(ze),Hi.call(_t,ce)?_t[ce].push(ze):_t[ce]=[ze]}return _t}var yi=ji;function Ho(Z,vt){if(!vt)return{0:Z};if(!Q(vt)){var _t=Te(vt)?vt:vt.replace(/\s+/g,"").split("*");vt=function(Xt){for(var ce="_",Be=0,ze=_t.length;Be<ze;Be++)ce+=Xt[_t[Be]]&&Xt[_t[Be]].toString();return ce}}return yi(Z,vt)}var jo=function(Z,vt){if(!vt)return[Z];var _t=Ho(Z,vt),Xt=[];for(var ce in _t)Xt.push(_t[ce]);return Xt};function co(Z,vt){return Z["_wrap_"+vt]}var gs=co;function Ms(Z,vt){if(Z["_wrap_"+vt])return Z["_wrap_"+vt];var _t=function(Xt){Z[vt](Xt)};return Z["_wrap_"+vt]=_t,_t}var us=Ms,Sa={};function ks(Z){var vt=Sa[Z];if(!vt){for(var _t=Z.toString(16),Xt=_t.length;Xt<6;Xt++)_t="0"+_t;vt="#"+_t,Sa[Z]=vt}return vt}var So=ks;function lo(Z){var vt=0,_t=0,Xt=0,ce=0;return Te(Z)?Z.length===1?vt=_t=Xt=ce=Z[0]:Z.length===2?(vt=Xt=Z[0],_t=ce=Z[1]):Z.length===3?(vt=Z[0],_t=ce=Z[1],Xt=Z[2]):(vt=Z[0],_t=Z[1],Xt=Z[2],ce=Z[3]):vt=_t=Xt=ce=Z,{r1:vt,r2:_t,r3:Xt,r4:ce}}var _s=lo,Po=function(Z,vt,_t){return Z<vt?vt:Z>_t?_t:Z},Gi=Po,Mo=function(Z,vt){var _t=vt.toString(),Xt=_t.indexOf(".");if(Xt===-1)return Math.round(Z);var ce=_t.substr(Xt+1).length;return ce>20&&(ce=20),parseFloat(Z.toFixed(ce))},Zi=Mo,Lo=function(Z){return Ge(Z,"Number")},di=Lo,Cs=function(Z){return di(Z)&&Z%1!==0},Ro=Cs,ho=function(Z){return di(Z)&&Z%2===0},Zo=ho,_o=Number.isInteger?Number.isInteger:function(Z){return di(Z)&&Z%1===0},qo=_o,go=function(Z){return di(Z)&&Z<0},Ia=go,Oi=1e-5;function zi(Z,vt,_t){return _t===void 0&&(_t=Oi),Math.abs(Z-vt)<_t}var La=function(Z){return di(Z)&&Z%2!==0},Ci=La,$o=function(Z){return di(Z)&&Z>0},Di=$o,Bo=function(Z,vt){if(Te(Z)){for(var _t,Xt=-1/0,ce=0;ce<Z.length;ce++){var Be=Z[ce],ze=Q(vt)?vt(Be):Be[vt];ze>Xt&&(_t=Be,Xt=ze)}return _t}},Co=function(Z,vt){if(Te(Z)){for(var _t,Xt=1/0,ce=0;ce<Z.length;ce++){var Be=Z[ce],ze=Q(vt)?vt(Be):Be[vt];ze<Xt&&(_t=Be,Xt=ze)}return _t}},qi=function(Z,vt){return(Z%vt+vt)%vt},As=qi,ys=180/Math.PI,Ko=function(Z){return ys*Z},ms=Ko,ru=parseInt,zs=Math.PI/180,bs=function(Z){return zs*Z},At=bs,Jt=pr,Fe=function(Z,vt){return Z.hasOwnProperty(vt)},je=Fe,Ar=Object.values?function(Z){return Object.values(Z)}:function(Z){var vt=[];return pr(Z,function(_t,Xt){Q(Z)&&Xt==="prototype"||vt.push(_t)}),vt},sn=Ar,wn=function(Z,vt){return yt(sn(Z),vt)},Wn=function(Z){return Gt(Z)?"":Z.toString()},si=function(Z){return Wn(Z).toLowerCase()},to=si,vo=function(Z){var vt=Wn(Z);return vt.charAt(0).toLowerCase()+vt.substring(1)},Us=vo;function bu(Z,vt){return!Z||!vt?Z:Z.replace(/\\?\{([^{}]+)\}/g,function(_t,Xt){return _t.charAt(0)==="\\"?_t.slice(1):vt[Xt]===void 0?"":vt[Xt]})}var Ui=bu,yo=function(Z){return Wn(Z).toUpperCase()},qs=yo,zu=function(Z){var vt=Wn(Z);return vt.charAt(0).toUpperCase()+vt.substring(1)},xu=zu,nu={}.toString,au=function(Z){return nu.call(Z).replace(/^\[object /,"").replace(/]$/,"")},$s=au,Os=function(Z){return Ge(Z,"Arguments")},Ks=Os,xs=function(Z){return Ge(Z,"Boolean")},No=xs,nf=function(Z){return Ge(Z,"Date")},Rf=nf,Bf=function(Z){return Ge(Z,"Error")},Ds=Bf;function Ff(Z){return di(Z)&&isFinite(Z)}var h=function(Z){return Z===null},A=h,lt=Object.prototype,xt=function(Z){var vt=Z&&Z.constructor,_t=typeof vt=="function"&&vt.prototype||lt;return Z===_t},Nt=xt,jt=function(Z){return Ge(Z,"RegExp")},qt=jt,de=function(Z){return Z===void 0},be=de,Le=function(Z){return Z instanceof Element||Z instanceof Document},Ye=Le;function mr(Z){var vt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(_t){return setTimeout(_t,16)};return vt(Z)}function xr(Z){var vt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;vt(Z)}function yr(Z,vt){for(var _t in vt)vt.hasOwnProperty(_t)&&_t!=="constructor"&&vt[_t]!==void 0&&(Z[_t]=vt[_t])}function Vr(Z,vt,_t,Xt){return vt&&yr(Z,vt),_t&&yr(Z,_t),Xt&&yr(Z,Xt),Z}var Jr=function(){for(var Z=[],vt=0;vt<arguments.length;vt++)Z[vt]=arguments[vt];for(var _t=Z[0],Xt=1;Xt<Z.length;Xt++){var ce=Z[Xt];Q(ce)&&(ce=ce.prototype),Vr(_t.prototype,ce)}},Tr=Jr,gn=function(Z){if(typeof Z!="object"||Z===null)return Z;var vt;if(Te(Z)){vt=[];for(var _t=0,Xt=Z.length;_t<Xt;_t++)typeof Z[_t]=="object"&&Z[_t]!=null?vt[_t]=gn(Z[_t]):vt[_t]=Z[_t]}else{vt={};for(var ce in Z)typeof Z[ce]=="object"&&Z[ce]!=null?vt[ce]=gn(Z[ce]):vt[ce]=Z[ce]}return vt},da=gn;function va(Z,vt,_t){var Xt;return function(){var ce=this,Be=arguments,ze=function(){Xt=null,_t||Z.apply(ce,Be)},sr=_t&&!Xt;clearTimeout(Xt),Xt=setTimeout(ze,vt),sr&&Z.apply(ce,Be)}}var na=va,Vn=5;function ea(Z,vt){if(Object.hasOwn)return Object.hasOwn(Z,vt);if(Z==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(Z),vt)}function Ai(Z,vt,_t,Xt){_t=_t||0,Xt=Xt||Vn;for(var ce in vt)if(ea(vt,ce)){var Be=vt[ce];Be!==null&&Lt(Be)?(Lt(Z[ce])||(Z[ce]={}),_t<Xt?Ai(Z[ce],Be,_t+1,Xt):Z[ce]=vt[ce]):Te(Be)?(Z[ce]=[],Z[ce]=Z[ce].concat(Be)):Be!==void 0&&(Z[ce]=Be)}}var Ti=function(Z){for(var vt=[],_t=1;_t<arguments.length;_t++)vt[_t-1]=arguments[_t];for(var Xt=0;Xt<vt.length;Xt+=1)Ai(Z,vt[Xt]);return Z},Mi=Ti,Ii=function(Z,vt,_t,Xt){Q(vt)||(_t=vt,vt=Z,Z=function(){});var ce=Object.create?function(ze,sr){return Object.create(ze,{constructor:{value:sr}})}:function(ze,sr){function Rr(){}Rr.prototype=ze;var Wr=new Rr;return Wr.constructor=sr,Wr},Be=ce(vt.prototype,Z);return Z.prototype=Vr(Be,Z.prototype),Z.superclass=ce(vt.prototype,vt),Vr(Be,_t),Vr(Z,Xt),Z},Li=Ii,Xi=function(Z,vt){if(!jr(Z))return-1;var _t=Array.prototype.indexOf;if(_t)return _t.call(Z,vt);for(var Xt=-1,ce=0;ce<Z.length;ce++)if(Z[ce]===vt){Xt=ce;break}return Xt},eo=Xi,Ga=Object.prototype.hasOwnProperty;function ui(Z){if(Gt(Z))return!0;if(jr(Z))return!Z.length;var vt=$s(Z);if(vt==="Map"||vt==="Set")return!Z.size;if(Nt(Z))return!Object.keys(Z).length;for(var _t in Z)if(Ga.call(Z,_t))return!1;return!0}var Ps=ui,ws=function(Z,vt){if(Z===vt)return!0;if(!Z||!vt||Wi(Z)||Wi(vt))return!1;if(jr(Z)||jr(vt)){if(Z.length!==vt.length)return!1;for(var _t=!0,Xt=0;Xt<Z.length&&(_t=ws(Z[Xt],vt[Xt]),!!_t);Xt++);return _t}if(Fr(Z)||Fr(vt)){var ce=Object.keys(Z),Be=Object.keys(vt);if(ce.length!==Be.length)return!1;for(var _t=!0,Xt=0;Xt<ce.length&&(_t=ws(Z[ce[Xt]],vt[ce[Xt]]),!!_t);Xt++);return _t}return!1},ko=ws,wu=function(Z,vt,_t){return Q(_t)?!!_t(Z,vt):ko(Z,vt)},Gf=function(Z,vt){if(!jr(Z))return Z;for(var _t=[],Xt=0;Xt<Z.length;Xt++){var ce=Z[Xt];_t.push(vt(ce,Xt))}return _t},bc=Gf,xc=function(Z){return Z},wc=function(Z,vt){vt===void 0&&(vt=xc);var _t={};return ar(Z)&&!Gt(Z)&&Object.keys(Z).forEach(function(Xt){_t[Xt]=vt(Z[Xt],Xt)}),_t},zf=function(Z,vt,_t){for(var Xt=0,ce=Wi(vt)?vt.split("."):vt;Z&&Xt<ce.length;)Z=Z[ce[Xt++]];return Z===void 0||Xt<ce.length?_t:Z},Uf=function(Z,vt,_t){var Xt=Z,ce=Wi(vt)?vt.split("."):vt;return ce.forEach(function(Be,ze){ze<ce.length-1?(ar(Xt[Be])||(Xt[Be]=di(ce[ze+1])?[]:{}),Xt=Xt[Be]):Xt[Be]=_t}),Z},Ec=Object.prototype.hasOwnProperty,af=function(Z,vt){if(Z===null||!Lt(Z))return{};var _t={};return pr(vt,function(Xt){Ec.call(Z,Xt)&&(_t[Xt]=Z[Xt])}),_t},of=function(Z,vt){return Io(Z,function(_t,Xt,ce){return vt.includes(ce)||(_t[ce]=Xt),_t},{})},Sc=function(Z,vt,_t){var Xt,ce,Be,ze,sr=0;_t||(_t={});var Rr=function(){sr=_t.leading===!1?0:Date.now(),Xt=null,ze=Z.apply(ce,Be),Xt||(ce=Be=null)},Wr=function(){var bn=Date.now();!sr&&_t.leading===!1&&(sr=bn);var dn=vt-(bn-sr);return ce=this,Be=arguments,dn<=0||dn>vt?(Xt&&(clearTimeout(Xt),Xt=null),sr=bn,ze=Z.apply(ce,Be),Xt||(ce=Be=null)):!Xt&&_t.trailing!==!1&&(Xt=setTimeout(Rr,dn)),ze};return Wr.cancel=function(){clearTimeout(Xt),sr=0,Xt=ce=Be=null},Wr},al=function(Z){return jr(Z)?Array.prototype.slice.call(Z):[]},Rs={},Mc=function(Z){return Z=Z||"g",Rs[Z]?Rs[Z]+=1:Rs[Z]=1,Z+Rs[Z]},yn=function(){},Eu=function(Z){return Z};function za(Z){return Gt(Z)?0:jr(Z)?Z.length:Object.keys(Z).length}var sf=function(){function Z(){this.map={}}return Z.prototype.has=function(vt){return this.map[vt]!==void 0},Z.prototype.get=function(vt,_t){var Xt=this.map[vt];return Xt===void 0?_t:Xt},Z.prototype.set=function(vt,_t){this.map[vt]=_t},Z.prototype.clear=function(){this.map={}},Z.prototype.delete=function(vt){delete this.map[vt]},Z.prototype.size=function(){return Object.keys(this.map).length},Z}(),Xf=sf,iu=1e-6;function Uu(Z){return Math.abs(Z)<iu?0:Z<0?-1:1}function Xu(Z,vt,_t){return(_t[0]-Z[0])*(vt[1]-Z[1])===(vt[0]-Z[0])*(_t[1]-Z[1])&&Math.min(Z[0],vt[0])<=_t[0]&&_t[0]<=Math.max(Z[0],vt[0])&&Math.min(Z[1],vt[1])<=_t[1]&&_t[1]<=Math.max(Z[1],vt[1])}function uf(Z,vt,_t){var Xt=!1,ce=Z.length;if(ce<=2)return!1;for(var Be=0;Be<ce;Be++){var ze=Z[Be],sr=Z[(Be+1)%ce];if(Xu(ze,sr,[vt,_t]))return!0;Uu(ze[1]-_t)>0!=Uu(sr[1]-_t)>0&&Uu(vt-(_t-ze[1])*(ze[0]-sr[0])/(ze[1]-sr[1])-ze[0])<0&&(Xt=!Xt)}return Xt}var ff=function(Z,vt,_t){return Z>=vt&&Z<=_t};function _c(Z,vt,_t,Xt){var ce=.001,Be={x:_t.x-Z.x,y:_t.y-Z.y},ze={x:vt.x-Z.x,y:vt.y-Z.y},sr={x:Xt.x-_t.x,y:Xt.y-_t.y},Rr=ze.x*sr.y-ze.y*sr.x,Wr=Rr*Rr,bn=ze.x*ze.x+ze.y*ze.y,dn=sr.x*sr.x+sr.y*sr.y,mn=null;if(Wr>ce*bn*dn){var $n=(Be.x*sr.y-Be.y*sr.x)/Rr,Ea=(Be.x*ze.y-Be.y*ze.x)/Rr;ff($n,0,1)&&ff(Ea,0,1)&&(mn={x:Z.x+$n*ze.x,y:Z.y+$n*ze.y})}return mn}function Es(Z){for(var vt=[],_t=Z.length,Xt=0;Xt<_t-1;Xt++){var ce=Z[Xt],Be=Z[Xt+1];vt.push({from:{x:ce[0],y:ce[1]},to:{x:Be[0],y:Be[1]}})}if(vt.length>1){var ze=Z[0],sr=Z[_t-1];vt.push({from:{x:sr[0],y:sr[1]},to:{x:ze[0],y:ze[1]}})}return vt}function Cc(Z,vt){var _t=!1;return Z.forEach(function(Xt){if(_c(Xt.from,Xt.to,vt.from,vt.to))return _t=!0,!1}),_t}function cf(Z){var vt=Z.map(function(Xt){return Xt[0]}),_t=Z.map(function(Xt){return Xt[1]});return{minX:Math.min.apply(null,vt),maxX:Math.max.apply(null,vt),minY:Math.min.apply(null,_t),maxY:Math.max.apply(null,_t)}}function mi(Z,vt){return!(vt.minX>Z.maxX||vt.maxX<Z.minX||vt.minY>Z.maxY||vt.maxY<Z.minY)}function Yu(Z,vt){if(Z.length<2||vt.length<2)return!1;var _t=cf(Z),Xt=cf(vt);if(!mi(_t,Xt))return!1;var ce=!1;if(vt.forEach(function(Rr){if(uf(Z,Rr[0],Rr[1]))return ce=!0,!1}),ce||(Z.forEach(function(Rr){if(uf(vt,Rr[0],Rr[1]))return ce=!0,!1}),ce))return!0;var Be=Es(Z),ze=Es(vt),sr=!1;return ze.forEach(function(Rr){if(Cc(Be,Rr))return sr=!0,!1}),sr}function Ts(Z){var vt=document.createElement("div");vt.innerHTML=Z;var _t=vt.childNodes[0];return _t&&vt.contains(_t)&&vt.removeChild(_t),_t}function Su(Z,vt){if(Z)return Object.keys(vt).forEach(function(_t){Z.style[_t]=vt[_t]}),Z}},731278:function(Sr,G,ut){"use strict";var wt;wt={value:!0};var st=ut(858204);function tt(b,L,S){var I=[0,0,0,0,0,0,0,0,0];return st.mat3.fromTranslation(I,S),st.mat3.multiply(b,I,L)}wt=tt;function Q(b,L,S){var I=[0,0,0,0,0,0,0,0,0];return st.mat3.fromRotation(I,S),st.mat3.multiply(b,I,L)}wt=Q;function J(b,L,S){var I=[0,0,0,0,0,0,0,0,0];return st.mat3.fromScaling(I,S),st.mat3.multiply(b,I,L)}wt=J;function X(b,L,S){return st.mat3.multiply(b,S,L)}function T(b,L){for(var S=b?[].concat(b):[1,0,0,0,1,0,0,0,1],I=0,D=L.length;I<D;I++){var P=L[I];switch(P[0]){case"t":tt(S,S,[P[1],P[2]]);break;case"s":J(S,S,[P[1],P[2]]);break;case"r":Q(S,S,P[1]);break;case"m":X(S,S,P[1]);break;default:break}}return S}G.vs=T;function M(b,L){return b[0]*L[1]-L[0]*b[1]}wt=M;function C(b,L,S){var I=st.vec2.angle(b,L),D=M(b,L)>=0;return S?D?Math.PI*2-I:I:D?I:Math.PI*2-I}wt=C;function _(b,L,S){return S?(b[0]=L[1],b[1]=-1*L[0]):(b[0]=-1*L[1],b[1]=L[0]),b}wt=_},413810:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{Cache:function(){return bs},assign:function(){return Hi},augment:function(){return yi},clamp:function(){return er},clearAnimationFrame:function(){return Ns},clone:function(){return jo},contains:function(){return Q},debounce:function(){return gs},deepMix:function(){return So},difference:function(){return M},each:function(){return v},endsWith:function(){return Na},every:function(){return hr},extend:function(){return _s},filter:function(){return X},find:function(){return at},findIndex:function(){return bt},firstValue:function(){return kt},fixedBase:function(){return Pr},flatten:function(){return it},flattenDeep:function(){return Vt},forIn:function(){return ue},get:function(){return go},getEllipsisText:function(){return ru},getRange:function(){return $t},getType:function(){return hs},getWrapBehavior:function(){return wa},group:function(){return sa},groupBy:function(){return Bn},groupToMap:function(){return ta},has:function(){return Ee},hasKey:function(){return me},hasValue:function(){return ir},head:function(){return Ra},identity:function(){return qi},includes:function(){return Q},indexOf:function(){return Gi},isArguments:function(){return so},isArray:function(){return D},isArrayLike:function(){return st},isBoolean:function(){return Io},isDate:function(){return ei},isDecimal:function(){return jr},isElement:function(){return Ss},isEmpty:function(){return Lo},isEqual:function(){return Cs},isEqualWith:function(){return Ro},isError:function(){return vs},isEven:function(){return yt},isFinite:function(){return Yo},isFunction:function(){return L},isInteger:function(){return E},isMatch:function(){return Y},isNegative:function(){return V},isNil:function(){return I},isNull:function(){return uo},isNumber:function(){return rn},isNumberEqual:function(){return Gt},isObject:function(){return P},isObjectLike:function(){return q},isOdd:function(){return ie},isPlainObject:function(){return et},isPositive:function(){return Te},isPrototype:function(){return Si},isRegExp:function(){return ps},isString:function(){return $e},isType:function(){return b},isUndefined:function(){return Eo},keys:function(){return R},last:function(){return ba},lowerCase:function(){return ln},lowerFirst:function(){return Gn},map:function(){return Zo},mapValues:function(){return qo},max:function(){return re},maxBy:function(){return ar},measureTextWidth:function(){return ms},memoize:function(){return Ms},min:function(){return It},minBy:function(){return Ur},mix:function(){return Hi},mod:function(){return nn},noop:function(){return Co},number2color:function(){return ka},omit:function(){return La},parseRadius:function(){return Ve},pick:function(){return zi},pull:function(){return pe},pullAt:function(){return Zt},reduce:function(){return Ut},remove:function(){return _e},requestAnimationFrame:function(){return Vo},set:function(){return Ia},size:function(){return As},some:function(){return cn},sortBy:function(){return gr},startsWith:function(){return xa},substitute:function(){return Ha},throttle:function(){return Ci},toArray:function(){return $o},toDegree:function(){return vr},toInteger:function(){return Nr},toRadian:function(){return Lt},toString:function(){return Zr},union:function(){return Ln},uniq:function(){return Yt},uniqueId:function(){return Bo},upperCase:function(){return Oa},upperFirst:function(){return wi},values:function(){return rr},valuesOfKey:function(){return Yn},wrapBehavior:function(){return ua}});var wt=function(At){return At!==null&&typeof At!="function"&&isFinite(At.length)},st=wt,tt=function(At,Jt){return st(At)?At.indexOf(Jt)>-1:!1},Q=tt,J=function(At,Jt){if(!st(At))return At;for(var Fe=[],je=0;je<At.length;je++){var Ar=At[je];Jt(Ar,je)&&Fe.push(Ar)}return Fe},X=J,T=function(At,Jt){return Jt===void 0&&(Jt=[]),X(At,function(Fe){return!Q(Jt,Fe)})},M=T,C={}.toString,_=function(At,Jt){return C.call(At)==="[object "+Jt+"]"},b=_,L=function(At){return b(At,"Function")},S=function(At){return At==null},I=S,D=function(At){return Array.isArray?Array.isArray(At):b(At,"Array")},P=function(At){var Jt=typeof At;return At!==null&&Jt==="object"||Jt==="function"};function y(At,Jt){if(At){var Fe;if(D(At))for(var je=0,Ar=At.length;je<Ar&&(Fe=Jt(At[je],je),Fe!==!1);je++);else if(P(At)){for(var sn in At)if(At.hasOwnProperty(sn)&&(Fe=Jt(At[sn],sn),Fe===!1))break}}}var v=y,K=Object.keys?function(At){return Object.keys(At)}:function(At){var Jt=[];return v(At,function(Fe,je){L(At)&&je==="prototype"||Jt.push(je)}),Jt},R=K;function B(At,Jt){var Fe=R(Jt),je=Fe.length;if(I(At))return!je;for(var Ar=0;Ar<je;Ar+=1){var sn=Fe[Ar];if(Jt[sn]!==At[sn]||!(sn in At))return!1}return!0}var Y=B,W=function(At){return typeof At=="object"&&At!==null},q=W,H=function(At){if(!q(At)||!b(At,"Object"))return!1;if(Object.getPrototypeOf(At)===null)return!0;for(var Jt=At;Object.getPrototypeOf(Jt)!==null;)Jt=Object.getPrototypeOf(Jt);return Object.getPrototypeOf(At)===Jt},et=H;function ct(At,Jt){if(!D(At))return null;var Fe;if(L(Jt)&&(Fe=Jt),et(Jt)&&(Fe=function(Ar){return Y(Ar,Jt)}),Fe){for(var je=0;je<At.length;je+=1)if(Fe(At[je]))return At[je]}return null}var at=ct;function St(At,Jt,Fe){Fe===void 0&&(Fe=0);for(var je=Fe;je<At.length;je++)if(Jt(At[je],je))return je;return-1}var bt=St,zt=function(At,Jt){for(var Fe=null,je=0;je<At.length;je++){var Ar=At[je],sn=Ar[Jt];if(!I(sn)){D(sn)?Fe=sn[0]:Fe=sn;break}}return Fe},kt=zt,Kt=function(At){if(!D(At))return[];for(var Jt=[],Fe=0;Fe<At.length;Fe++)Jt=Jt.concat(At[Fe]);return Jt},it=Kt,gt=function(At,Jt){if(Jt===void 0&&(Jt=[]),!D(At))Jt.push(At);else for(var Fe=0;Fe<At.length;Fe+=1)gt(At[Fe],Jt);return Jt},Vt=gt,re=function(At){if(D(At))return At.reduce(function(Jt,Fe){return Math.max(Jt,Fe)},At[0])},It=function(At){if(D(At))return At.reduce(function(Jt,Fe){return Math.min(Jt,Fe)},At[0])},Wt=function(At){var Jt=At.filter(function(wn){return!isNaN(wn)});if(!Jt.length)return{min:0,max:0};if(D(At[0])){for(var Fe=[],je=0;je<At.length;je++)Fe=Fe.concat(At[je]);Jt=Fe}var Ar=re(Jt),sn=It(Jt);return{min:sn,max:Ar}},$t=Wt,ae=Array.prototype,Bt=ae.splice,Ot=ae.indexOf,Ht=function(At){for(var Jt=[],Fe=1;Fe<arguments.length;Fe++)Jt[Fe-1]=arguments[Fe];for(var je=0;je<Jt.length;je++)for(var Ar=Jt[je],sn=-1;(sn=Ot.call(At,Ar))>-1;)Bt.call(At,sn,1);return At},pe=Ht,ve=Array.prototype.splice,Tt=function(Jt,Fe){if(!st(Jt))return[];for(var je=Jt?Fe.length:0,Ar=je-1;je--;){var sn=void 0,wn=Fe[je];(je===Ar||wn!==sn)&&(sn=wn,ve.call(Jt,wn,1))}return Jt},Zt=Tt,Ce=function(At,Jt,Fe){if(!D(At)&&!et(At))return At;var je=Fe;return v(At,function(Ar,sn){je=Jt(je,Ar,sn)}),je},Ut=Ce,se=function(At,Jt){var Fe=[];if(!st(At))return Fe;for(var je=-1,Ar=[],sn=At.length;++je<sn;){var wn=At[je];Jt(wn,je,At)&&(Fe.push(wn),Ar.push(je))}return Zt(At,Ar),Fe},_e=se,$e=function(At){return b(At,"String")};function fr(At,Jt){var Fe;if(L(Jt))Fe=function(Ar,sn){return Jt(Ar)-Jt(sn)};else{var je=[];$e(Jt)?je.push(Jt):D(Jt)&&(je=Jt),Fe=function(Ar,sn){for(var wn=0;wn<je.length;wn+=1){var Wn=je[wn];if(Ar[Wn]>sn[Wn])return 1;if(Ar[Wn]<sn[Wn])return-1}return 0}}return At.sort(Fe),At}var gr=fr;function Yt(At,Jt){Jt===void 0&&(Jt=new Map);var Fe=[];if(Array.isArray(At))for(var je=0,Ar=At.length;je<Ar;je++){var sn=At[je];Jt.has(sn)||(Fe.push(sn),Jt.set(sn,!0))}return Fe}var Mr=function(){for(var At=[],Jt=0;Jt<arguments.length;Jt++)At[Jt]=arguments[Jt];return Yt([].concat.apply([],At))},Ln=Mr,Yn=function(At,Jt){for(var Fe=[],je={},Ar=0;Ar<At.length;Ar++){var sn=At[Ar],wn=sn[Jt];if(!I(wn)){D(wn)||(wn=[wn]);for(var Wn=0;Wn<wn.length;Wn++){var si=wn[Wn];je[si]||(Fe.push(si),je[si]=!0)}}}return Fe};function Ra(At){if(st(At))return At[0]}function ba(At){if(st(At)){var Jt=At;return Jt[Jt.length-1]}}function Ba(At,Jt){return D(At)||$e(At)?At[0]===Jt:!1}var xa=Ba;function ya(At,Jt){return D(At)||$e(At)?At[At.length-1]===Jt:!1}var Na=ya,Ta=function(At,Jt){for(var Fe=0;Fe<At.length;Fe++)if(!Jt(At[Fe],Fe))return!1;return!0},hr=Ta,Br=function(At,Jt){for(var Fe=0;Fe<At.length;Fe++)if(Jt(At[Fe],Fe))return!0;return!1},cn=Br,Cn=Object.prototype.hasOwnProperty;function Qn(At,Jt){if(!Jt||!D(At))return{};for(var Fe={},je=L(Jt)?Jt:function(Wn){return Wn[Jt]},Ar,sn=0;sn<At.length;sn++){var wn=At[sn];Ar=je(wn),Cn.call(Fe,Ar)?Fe[Ar].push(wn):Fe[Ar]=[wn]}return Fe}var Bn=Qn;function ta(At,Jt){if(!Jt)return{0:At};if(!L(Jt)){var Fe=D(Jt)?Jt:Jt.replace(/\s+/g,"").split("*");Jt=function(je){for(var Ar="_",sn=0,wn=Fe.length;sn<wn;sn++)Ar+=je[Fe[sn]]&&je[Fe[sn]].toString();return Ar}}return Bn(At,Jt)}var sa=function(At,Jt){if(!Jt)return[At];var Fe=ta(At,Jt),je=[];for(var Ar in Fe)je.push(Fe[Ar]);return je};function Fa(At,Jt){return At["_wrap_"+Jt]}var wa=Fa;function An(At,Jt){if(At["_wrap_"+Jt])return At["_wrap_"+Jt];var Fe=function(je){At[Jt](je)};return At["_wrap_"+Jt]=Fe,Fe}var ua=An,ra={};function Fn(At){var Jt=ra[At];if(!Jt){for(var Fe=At.toString(16),je=Fe.length;je<6;je++)Fe="0"+Fe;Jt="#"+Fe,ra[At]=Jt}return Jt}var ka=Fn;function U(At){var Jt=0,Fe=0,je=0,Ar=0;return D(At)?At.length===1?Jt=Fe=je=Ar=At[0]:At.length===2?(Jt=je=At[0],Fe=Ar=At[1]):At.length===3?(Jt=At[0],Fe=Ar=At[1],je=At[2]):(Jt=At[0],Fe=At[1],je=At[2],Ar=At[3]):Jt=Fe=je=Ar=At,{r1:Jt,r2:Fe,r3:je,r4:Ar}}var Ve=U,we=function(At,Jt,Fe){return At<Jt?Jt:At>Fe?Fe:At},er=we,Je=function(At,Jt){var Fe=Jt.toString(),je=Fe.indexOf(".");if(je===-1)return Math.round(At);var Ar=Fe.substr(je+1).length;return Ar>20&&(Ar=20),parseFloat(At.toFixed(Ar))},Pr=Je,Or=function(At){return b(At,"Number")},rn=Or,fn=function(At){return rn(At)&&At%1!==0},jr=fn,ht=function(At){return rn(At)&&At%2===0},yt=ht,O=Number.isInteger?Number.isInteger:function(At){return rn(At)&&At%1===0},E=O,w=function(At){return rn(At)&&At<0},V=w,Et=1e-5;function Gt(At,Jt,Fe){return Fe===void 0&&(Fe=Et),Math.abs(At-Jt)<Fe}var Dt=function(At){return rn(At)&&At%2!==0},ie=Dt,Ge=function(At){return rn(At)&&At>0},Te=Ge,ar=function(At,Jt){if(D(At)){for(var Fe,je=-1/0,Ar=0;Ar<At.length;Ar++){var sn=At[Ar],wn=L(Jt)?Jt(sn):sn[Jt];wn>je&&(Fe=sn,je=wn)}return Fe}},Ur=function(At,Jt){if(D(At)){for(var Fe,je=1/0,Ar=0;Ar<At.length;Ar++){var sn=At[Ar],wn=L(Jt)?Jt(sn):sn[Jt];wn<je&&(Fe=sn,je=wn)}return Fe}},pr=function(At,Jt){return(At%Jt+Jt)%Jt},nn=pr,kn=180/Math.PI,We=function(At){return kn*At},vr=We,Nr=parseInt,Fr=Math.PI/180,ee=function(At){return Fr*At},Lt=ee,ue=v,Ee=function(At,Jt){return At.hasOwnProperty(Jt)},me=Ee,Ie=Object.values?function(At){return Object.values(At)}:function(At){var Jt=[];return v(At,function(Fe,je){L(At)&&je==="prototype"||Jt.push(Fe)}),Jt},rr=Ie,ir=function(At,Jt){return Q(rr(At),Jt)},Zr=function(At){return I(At)?"":At.toString()},En=function(At){return Zr(At).toLowerCase()},ln=En,zn=function(At){var Jt=Zr(At);return Jt.charAt(0).toLowerCase()+Jt.substring(1)},Gn=zn;function la(At,Jt){return!At||!Jt?At:At.replace(/\\?\{([^{}]+)\}/g,function(Fe,je){return Fe.charAt(0)==="\\"?Fe.slice(1):Jt[je]===void 0?"":Jt[je]})}var Ha=la,qa=function(At){return Zr(At).toUpperCase()},Oa=qa,Ao=function(At){var Jt=Zr(At);return Jt.charAt(0).toUpperCase()+Jt.substring(1)},wi=Ao,Ei={}.toString,oo=function(At){return Ei.call(At).replace(/^\[object /,"").replace(/]$/,"")},hs=oo,To=function(At){return b(At,"Arguments")},so=To,ma=function(At){return b(At,"Boolean")},Io=ma,ds=function(At){return b(At,"Date")},ei=ds,Wi=function(At){return b(At,"Error")},vs=Wi;function Yo(At){return rn(At)&&isFinite(At)}var Vi=function(At){return At===null},uo=Vi,Gs=Object.prototype,Wo=function(At){var Jt=At&&At.constructor,Fe=typeof Jt=="function"&&Jt.prototype||Gs;return At===Fe},Si=Wo,fo=function(At){return b(At,"RegExp")},ps=fo,Tn=function(At){return At===void 0},Eo=Tn,Do=function(At){return At instanceof Element||At instanceof HTMLDocument},Ss=Do;function Vo(At){var Jt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Fe){return setTimeout(Fe,16)};return Jt(At)}function Ns(At){var Jt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Jt(At)}function Pn(At,Jt){for(var Fe in Jt)Jt.hasOwnProperty(Fe)&&Fe!=="constructor"&&Jt[Fe]!==void 0&&(At[Fe]=Jt[Fe])}function Hi(At,Jt,Fe,je){return Jt&&Pn(At,Jt),Fe&&Pn(At,Fe),je&&Pn(At,je),At}var ji=function(){for(var At=[],Jt=0;Jt<arguments.length;Jt++)At[Jt]=arguments[Jt];for(var Fe=At[0],je=1;je<At.length;je++){var Ar=At[je];L(Ar)&&(Ar=Ar.prototype),Hi(Fe.prototype,Ar)}},yi=ji,Ho=function(At){if(typeof At!="object"||At===null)return At;var Jt;if(D(At)){Jt=[];for(var Fe=0,je=At.length;Fe<je;Fe++)typeof At[Fe]=="object"&&At[Fe]!=null?Jt[Fe]=Ho(At[Fe]):Jt[Fe]=At[Fe]}else{Jt={};for(var Ar in At)typeof At[Ar]=="object"&&At[Ar]!=null?Jt[Ar]=Ho(At[Ar]):Jt[Ar]=At[Ar]}return Jt},jo=Ho;function co(At,Jt,Fe){var je;return function(){var Ar=this,sn=arguments,wn=function(){je=null,Fe||At.apply(Ar,sn)},Wn=Fe&&!je;clearTimeout(je),je=setTimeout(wn,Jt),Wn&&At.apply(Ar,sn)}}var gs=co,Ms=function(At,Jt){if(!L(At))throw new TypeError("Expected a function");var Fe=function(){for(var je=[],Ar=0;Ar<arguments.length;Ar++)je[Ar]=arguments[Ar];var sn=Jt?Jt.apply(this,je):je[0],wn=Fe.cache;if(wn.has(sn))return wn.get(sn);var Wn=At.apply(this,je);return wn.set(sn,Wn),Wn};return Fe.cache=new Map,Fe},us=5;function Sa(At,Jt,Fe,je){Fe=Fe||0,je=je||us;for(var Ar in Jt)if(Jt.hasOwnProperty(Ar)){var sn=Jt[Ar];sn!==null&&et(sn)?(et(At[Ar])||(At[Ar]={}),Fe<je?Sa(At[Ar],sn,Fe+1,je):At[Ar]=Jt[Ar]):D(sn)?(At[Ar]=[],At[Ar]=At[Ar].concat(sn)):sn!==void 0&&(At[Ar]=sn)}}var ks=function(At){for(var Jt=[],Fe=1;Fe<arguments.length;Fe++)Jt[Fe-1]=arguments[Fe];for(var je=0;je<Jt.length;je+=1)Sa(At,Jt[je]);return At},So=ks,lo=function(At,Jt,Fe,je){L(Jt)||(Fe=Jt,Jt=At,At=function(){});var Ar=Object.create?function(wn,Wn){return Object.create(wn,{constructor:{value:Wn}})}:function(wn,Wn){function si(){}si.prototype=wn;var to=new si;return to.constructor=Wn,to},sn=Ar(Jt.prototype,At);return At.prototype=Hi(sn,At.prototype),At.superclass=Ar(Jt.prototype,Jt),Hi(sn,Fe),Hi(At,je),At},_s=lo,Po=function(At,Jt){if(!st(At))return-1;var Fe=Array.prototype.indexOf;if(Fe)return Fe.call(At,Jt);for(var je=-1,Ar=0;Ar<At.length;Ar++)if(At[Ar]===Jt){je=Ar;break}return je},Gi=Po,Mo=Object.prototype.hasOwnProperty;function Zi(At){if(I(At))return!0;if(st(At))return!At.length;var Jt=hs(At);if(Jt==="Map"||Jt==="Set")return!At.size;if(Si(At))return!Object.keys(At).length;for(var Fe in At)if(Mo.call(At,Fe))return!1;return!0}var Lo=Zi,di=function(At,Jt){if(At===Jt)return!0;if(!At||!Jt||$e(At)||$e(Jt))return!1;if(st(At)||st(Jt)){if(At.length!==Jt.length)return!1;for(var Fe=!0,je=0;je<At.length&&(Fe=di(At[je],Jt[je]),!!Fe);je++);return Fe}if(q(At)||q(Jt)){var Ar=Object.keys(At),sn=Object.keys(Jt);if(Ar.length!==sn.length)return!1;for(var Fe=!0,je=0;je<Ar.length&&(Fe=di(At[Ar[je]],Jt[Ar[je]]),!!Fe);je++);return Fe}return!1},Cs=di,Ro=function(At,Jt,Fe){return L(Fe)?!!Fe(At,Jt):Cs(At,Jt)},ho=function(At,Jt){if(!st(At))return At;for(var Fe=[],je=0;je<At.length;je++){var Ar=At[je];Fe.push(Jt(Ar,je))}return Fe},Zo=ho,_o=function(At){return At},qo=function(At,Jt){Jt===void 0&&(Jt=_o);var Fe={};return P(At)&&!I(At)&&Object.keys(At).forEach(function(je){Fe[je]=Jt(At[je],je)}),Fe},go=function(At,Jt,Fe){for(var je=0,Ar=$e(Jt)?Jt.split("."):Jt;At&&je<Ar.length;)At=At[Ar[je++]];return At===void 0||je<Ar.length?Fe:At},Ia=function(At,Jt,Fe){var je=At,Ar=$e(Jt)?Jt.split("."):Jt;return Ar.forEach(function(sn,wn){wn<Ar.length-1?(P(je[sn])||(je[sn]=rn(Ar[wn+1])?[]:{}),je=je[sn]):je[sn]=Fe}),At},Oi=Object.prototype.hasOwnProperty,zi=function(At,Jt){if(At===null||!et(At))return{};var Fe={};return v(Jt,function(je){Oi.call(At,je)&&(Fe[je]=At[je])}),Fe},La=function(At,Jt){return Ut(At,function(Fe,je,Ar){return Jt.includes(Ar)||(Fe[Ar]=je),Fe},{})},Ci=function(At,Jt,Fe){var je,Ar,sn,wn,Wn=0;Fe||(Fe={});var si=function(){Wn=Fe.leading===!1?0:Date.now(),je=null,wn=At.apply(Ar,sn),je||(Ar=sn=null)},to=function(){var vo=Date.now();!Wn&&Fe.leading===!1&&(Wn=vo);var Us=Jt-(vo-Wn);return Ar=this,sn=arguments,Us<=0||Us>Jt?(je&&(clearTimeout(je),je=null),Wn=vo,wn=At.apply(Ar,sn),je||(Ar=sn=null)):!je&&Fe.trailing!==!1&&(je=setTimeout(si,Us)),wn};return to.cancel=function(){clearTimeout(je),Wn=0,je=Ar=sn=null},to},$o=function(At){return st(At)?Array.prototype.slice.call(At):[]},Di={},Bo=function(At){return At=At||"g",Di[At]?Di[At]+=1:Di[At]=1,At+Di[At]},Co=function(){},qi=function(At){return At};function As(At){return I(At)?0:st(At)?At.length:Object.keys(At).length}var ys=ut(197582),Ko,ms=Ms(function(At,Jt){Jt===void 0&&(Jt={});var Fe=Jt.fontSize,je=Jt.fontFamily,Ar=Jt.fontWeight,sn=Jt.fontStyle,wn=Jt.fontVariant;return Ko||(Ko=document.createElement("canvas").getContext("2d")),Ko.font=[sn,wn,Ar,Fe+"px",je].join(" "),Ko.measureText($e(At)?At:"").width},function(At,Jt){return Jt===void 0&&(Jt={}),(0,ys.pr)([At],rr(Jt)).join("")}),ru=function(At,Jt,Fe,je){je===void 0&&(je="...");var Ar=16,sn=ms(je,Fe),wn=$e(At)?At:Zr(At),Wn=Jt,si=[],to,vo;if(ms(At,Fe)<=Jt)return At;for(;to=wn.substr(0,Ar),vo=ms(to,Fe),!(vo+sn>Wn&&vo>Wn);)if(si.push(to),Wn-=vo,wn=wn.substr(Ar),!wn)return si.join("");for(;to=wn.substr(0,1),vo=ms(to,Fe),!(vo+sn>Wn);)if(si.push(to),Wn-=vo,wn=wn.substr(1),!wn)return si.join("");return""+si.join("")+je},zs=function(){function At(){this.map={}}return At.prototype.has=function(Jt){return this.map[Jt]!==void 0},At.prototype.get=function(Jt,Fe){var je=this.map[Jt];return je===void 0?Fe:je},At.prototype.set=function(Jt,Fe){this.map[Jt]=Fe},At.prototype.clear=function(){this.map={}},At.prototype.delete=function(Jt){delete this.map[Jt]},At.prototype.size=function(){return Object.keys(this.map).length},At}(),bs=zs},97828:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{AbstractMatrix:function(){return gr},CHO:function(){return fn},CholeskyDecomposition:function(){return fn},EVD:function(){return we},EigenvalueDecomposition:function(){return we},LU:function(){return Qn},LuDecomposition:function(){return Qn},Matrix:function(){return Mr},MatrixColumnSelectionView:function(){return Ra},MatrixColumnView:function(){return Yn},MatrixFlipColumnView:function(){return ba},MatrixFlipRowView:function(){return Ba},MatrixRowSelectionView:function(){return ya},MatrixRowView:function(){return xa},MatrixSelectionView:function(){return Na},MatrixSubView:function(){return Ta},MatrixTransposeView:function(){return hr},NIPALS:function(){return jr},Nipals:function(){return jr},QR:function(){return ta},QrDecomposition:function(){return ta},SVD:function(){return sa},SingularValueDecomposition:function(){return sa},WrapperMatrix1D:function(){return Br},WrapperMatrix2D:function(){return cn},correlation:function(){return Ve},covariance:function(){return U},default:function(){return Mr},determinant:function(){return An},inverse:function(){return Fa},linearDependencies:function(){return Fn},pseudoInverse:function(){return ka},solve:function(){return wa},wrap:function(){return Cn}});var wt=ut(273408),st=ut.n(wt),tt=ut(325098),Q=ut.n(tt),J=ut(731996),X=ut.n(J),T=ut(626037),M=ut.n(T),C=ut(952677),_=ut.n(C),b=ut(912444),L=ut.n(b),S=ut(272004),I=ut.n(S);const D=Object.prototype.toString;function P(ht){const yt=D.call(ht);return yt.endsWith("Array]")&&!yt.includes("Big")}function y(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!P(ht))throw new TypeError("input must be an array");if(ht.length===0)throw new TypeError("input must not be empty");var O=yt.fromIndex,E=O===void 0?0:O,w=yt.toIndex,V=w===void 0?ht.length:w;if(E<0||E>=ht.length||!Number.isInteger(E))throw new Error("fromIndex must be a positive integer smaller than length");if(V<=E||V>ht.length||!Number.isInteger(V))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Et=ht[E],Gt=E+1;Gt<V;Gt++)ht[Gt]>Et&&(Et=ht[Gt]);return Et}function v(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!P(ht))throw new TypeError("input must be an array");if(ht.length===0)throw new TypeError("input must not be empty");var O=yt.fromIndex,E=O===void 0?0:O,w=yt.toIndex,V=w===void 0?ht.length:w;if(E<0||E>=ht.length||!Number.isInteger(E))throw new Error("fromIndex must be a positive integer smaller than length");if(V<=E||V>ht.length||!Number.isInteger(V))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Et=ht[E],Gt=E+1;Gt<V;Gt++)ht[Gt]<Et&&(Et=ht[Gt]);return Et}function K(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(ht)){if(ht.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var O;if(yt.output!==void 0){if(!P(yt.output))throw new TypeError("output option must be an array if specified");O=yt.output}else O=new Array(ht.length);var E=v(ht),w=y(ht);if(E===w)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var V=yt.min,Et=V===void 0?yt.autoMinMax?E:0:V,Gt=yt.max,Dt=Gt===void 0?yt.autoMinMax?w:1:Gt;if(Et>=Dt)throw new RangeError("min option must be smaller than max option");for(var ie=(Dt-Et)/(w-E),Ge=0;Ge<ht.length;Ge++)O[Ge]=(ht[Ge]-E)*ie+Et;return O}var R=" ".repeat(2),B=" ".repeat(4);function Y(){return W(this)}function W(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=yt.maxRows,E=O===void 0?15:O,w=yt.maxColumns,V=w===void 0?10:w,Et=yt.maxNumSize,Gt=Et===void 0?8:Et;return"".concat(ht.constructor.name,` {
`).concat(R,`[
`).concat(B).concat(q(ht,E,V,Gt),`
`).concat(R,`]
`).concat(R,"rows: ").concat(ht.rows,`
`).concat(R,"columns: ").concat(ht.columns,`
}`)}function q(ht,yt,O,E){for(var w=ht.rows,V=ht.columns,Et=Math.min(w,yt),Gt=Math.min(V,O),Dt=[],ie=0;ie<Et;ie++){for(var Ge=[],Te=0;Te<Gt;Te++)Ge.push(H(ht.get(ie,Te),E));Dt.push("".concat(Ge.join(" ")))}return Gt!==V&&(Dt[Dt.length-1]+=" ... ".concat(V-O," more columns")),Et!==w&&Dt.push("... ".concat(w-yt," more rows")),Dt.join(`
`.concat(B))}function H(ht,yt){var O=String(ht);if(O.length<=yt)return O.padEnd(yt," ");var E=ht.toPrecision(yt-2);if(E.length<=yt)return E;var w=ht.toExponential(yt-2),V=w.indexOf("e"),Et=w.slice(V);return w.slice(0,yt-Et.length)+Et}function et(ht,yt){ht.prototype.add=function(E){return typeof E=="number"?this.addS(E):this.addM(E)},ht.prototype.addS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)+E);return this},ht.prototype.addM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)+E.get(w,V));return this},ht.add=function(E,w){var V=new yt(E);return V.add(w)},ht.prototype.sub=function(E){return typeof E=="number"?this.subS(E):this.subM(E)},ht.prototype.subS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)-E);return this},ht.prototype.subM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)-E.get(w,V));return this},ht.sub=function(E,w){var V=new yt(E);return V.sub(w)},ht.prototype.subtract=ht.prototype.sub,ht.prototype.subtractS=ht.prototype.subS,ht.prototype.subtractM=ht.prototype.subM,ht.subtract=ht.sub,ht.prototype.mul=function(E){return typeof E=="number"?this.mulS(E):this.mulM(E)},ht.prototype.mulS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)*E);return this},ht.prototype.mulM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)*E.get(w,V));return this},ht.mul=function(E,w){var V=new yt(E);return V.mul(w)},ht.prototype.multiply=ht.prototype.mul,ht.prototype.multiplyS=ht.prototype.mulS,ht.prototype.multiplyM=ht.prototype.mulM,ht.multiply=ht.mul,ht.prototype.div=function(E){return typeof E=="number"?this.divS(E):this.divM(E)},ht.prototype.divS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)/E);return this},ht.prototype.divM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)/E.get(w,V));return this},ht.div=function(E,w){var V=new yt(E);return V.div(w)},ht.prototype.divide=ht.prototype.div,ht.prototype.divideS=ht.prototype.divS,ht.prototype.divideM=ht.prototype.divM,ht.divide=ht.div,ht.prototype.mod=function(E){return typeof E=="number"?this.modS(E):this.modM(E)},ht.prototype.modS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)%E);return this},ht.prototype.modM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)%E.get(w,V));return this},ht.mod=function(E,w){var V=new yt(E);return V.mod(w)},ht.prototype.modulus=ht.prototype.mod,ht.prototype.modulusS=ht.prototype.modS,ht.prototype.modulusM=ht.prototype.modM,ht.modulus=ht.mod,ht.prototype.and=function(E){return typeof E=="number"?this.andS(E):this.andM(E)},ht.prototype.andS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)&E);return this},ht.prototype.andM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)&E.get(w,V));return this},ht.and=function(E,w){var V=new yt(E);return V.and(w)},ht.prototype.or=function(E){return typeof E=="number"?this.orS(E):this.orM(E)},ht.prototype.orS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)|E);return this},ht.prototype.orM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)|E.get(w,V));return this},ht.or=function(E,w){var V=new yt(E);return V.or(w)},ht.prototype.xor=function(E){return typeof E=="number"?this.xorS(E):this.xorM(E)},ht.prototype.xorS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)^E);return this},ht.prototype.xorM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)^E.get(w,V));return this},ht.xor=function(E,w){var V=new yt(E);return V.xor(w)},ht.prototype.leftShift=function(E){return typeof E=="number"?this.leftShiftS(E):this.leftShiftM(E)},ht.prototype.leftShiftS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)<<E);return this},ht.prototype.leftShiftM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)<<E.get(w,V));return this},ht.leftShift=function(E,w){var V=new yt(E);return V.leftShift(w)},ht.prototype.signPropagatingRightShift=function(E){return typeof E=="number"?this.signPropagatingRightShiftS(E):this.signPropagatingRightShiftM(E)},ht.prototype.signPropagatingRightShiftS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>E);return this},ht.prototype.signPropagatingRightShiftM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>E.get(w,V));return this},ht.signPropagatingRightShift=function(E,w){var V=new yt(E);return V.signPropagatingRightShift(w)},ht.prototype.rightShift=function(E){return typeof E=="number"?this.rightShiftS(E):this.rightShiftM(E)},ht.prototype.rightShiftS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>>E);return this},ht.prototype.rightShiftM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>>E.get(w,V));return this},ht.rightShift=function(E,w){var V=new yt(E);return V.rightShift(w)},ht.prototype.zeroFillRightShift=ht.prototype.rightShift,ht.prototype.zeroFillRightShiftS=ht.prototype.rightShiftS,ht.prototype.zeroFillRightShiftM=ht.prototype.rightShiftM,ht.zeroFillRightShift=ht.rightShift,ht.prototype.not=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,~this.get(E,w));return this},ht.not=function(E){var w=new yt(E);return w.not()},ht.prototype.abs=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.abs(this.get(E,w)));return this},ht.abs=function(E){var w=new yt(E);return w.abs()},ht.prototype.acos=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.acos(this.get(E,w)));return this},ht.acos=function(E){var w=new yt(E);return w.acos()},ht.prototype.acosh=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.acosh(this.get(E,w)));return this},ht.acosh=function(E){var w=new yt(E);return w.acosh()},ht.prototype.asin=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.asin(this.get(E,w)));return this},ht.asin=function(E){var w=new yt(E);return w.asin()},ht.prototype.asinh=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.asinh(this.get(E,w)));return this},ht.asinh=function(E){var w=new yt(E);return w.asinh()},ht.prototype.atan=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.atan(this.get(E,w)));return this},ht.atan=function(E){var w=new yt(E);return w.atan()},ht.prototype.atanh=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.atanh(this.get(E,w)));return this},ht.atanh=function(E){var w=new yt(E);return w.atanh()},ht.prototype.cbrt=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.cbrt(this.get(E,w)));return this},ht.cbrt=function(E){var w=new yt(E);return w.cbrt()},ht.prototype.ceil=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.ceil(this.get(E,w)));return this},ht.ceil=function(E){var w=new yt(E);return w.ceil()},ht.prototype.clz32=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.clz32(this.get(E,w)));return this},ht.clz32=function(E){var w=new yt(E);return w.clz32()},ht.prototype.cos=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.cos(this.get(E,w)));return this},ht.cos=function(E){var w=new yt(E);return w.cos()},ht.prototype.cosh=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.cosh(this.get(E,w)));return this},ht.cosh=function(E){var w=new yt(E);return w.cosh()},ht.prototype.exp=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.exp(this.get(E,w)));return this},ht.exp=function(E){var w=new yt(E);return w.exp()},ht.prototype.expm1=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.expm1(this.get(E,w)));return this},ht.expm1=function(E){var w=new yt(E);return w.expm1()},ht.prototype.floor=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.floor(this.get(E,w)));return this},ht.floor=function(E){var w=new yt(E);return w.floor()},ht.prototype.fround=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.fround(this.get(E,w)));return this},ht.fround=function(E){var w=new yt(E);return w.fround()},ht.prototype.log=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.log(this.get(E,w)));return this},ht.log=function(E){var w=new yt(E);return w.log()},ht.prototype.log1p=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.log1p(this.get(E,w)));return this},ht.log1p=function(E){var w=new yt(E);return w.log1p()},ht.prototype.log10=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.log10(this.get(E,w)));return this},ht.log10=function(E){var w=new yt(E);return w.log10()},ht.prototype.log2=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.log2(this.get(E,w)));return this},ht.log2=function(E){var w=new yt(E);return w.log2()},ht.prototype.round=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.round(this.get(E,w)));return this},ht.round=function(E){var w=new yt(E);return w.round()},ht.prototype.sign=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.sign(this.get(E,w)));return this},ht.sign=function(E){var w=new yt(E);return w.sign()},ht.prototype.sin=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.sin(this.get(E,w)));return this},ht.sin=function(E){var w=new yt(E);return w.sin()},ht.prototype.sinh=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.sinh(this.get(E,w)));return this},ht.sinh=function(E){var w=new yt(E);return w.sinh()},ht.prototype.sqrt=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.sqrt(this.get(E,w)));return this},ht.sqrt=function(E){var w=new yt(E);return w.sqrt()},ht.prototype.tan=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.tan(this.get(E,w)));return this},ht.tan=function(E){var w=new yt(E);return w.tan()},ht.prototype.tanh=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.tanh(this.get(E,w)));return this},ht.tanh=function(E){var w=new yt(E);return w.tanh()},ht.prototype.trunc=function(){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,Math.trunc(this.get(E,w)));return this},ht.trunc=function(E){var w=new yt(E);return w.trunc()},ht.pow=function(E,w){var V=new yt(E);return V.pow(w)},ht.prototype.pow=function(E){return typeof E=="number"?this.powS(E):this.powM(E)},ht.prototype.powS=function(E){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,Math.pow(this.get(w,V),E));return this},ht.prototype.powM=function(E){if(E=yt.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,Math.pow(this.get(w,V),E.get(w,V)));return this}}function ct(ht,yt,O){var E=O?ht.rows:ht.rows-1;if(yt<0||yt>E)throw new RangeError("Row index out of range")}function at(ht,yt,O){var E=O?ht.columns:ht.columns-1;if(yt<0||yt>E)throw new RangeError("Column index out of range")}function St(ht,yt){if(yt.to1DArray&&(yt=yt.to1DArray()),yt.length!==ht.columns)throw new RangeError("vector size must be the same as the number of columns");return yt}function bt(ht,yt){if(yt.to1DArray&&(yt=yt.to1DArray()),yt.length!==ht.rows)throw new RangeError("vector size must be the same as the number of rows");return yt}function zt(ht,yt,O){return{row:kt(ht,yt),column:Kt(ht,O)}}function kt(ht,yt){if(_()(yt)!=="object")throw new TypeError("unexpected type for row indices");var O=yt.some(function(E){return E<0||E>=ht.rows});if(O)throw new RangeError("row indices are out of range");return Array.isArray(yt)||(yt=Array.from(yt)),yt}function Kt(ht,yt){if(_()(yt)!=="object")throw new TypeError("unexpected type for column indices");var O=yt.some(function(E){return E<0||E>=ht.columns});if(O)throw new RangeError("column indices are out of range");return Array.isArray(yt)||(yt=Array.from(yt)),yt}function it(ht,yt,O,E,w){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Vt("startRow",yt),Vt("endRow",O),Vt("startColumn",E),Vt("endColumn",w),yt>O||E>w||yt<0||yt>=ht.rows||O<0||O>=ht.rows||E<0||E>=ht.columns||w<0||w>=ht.columns)throw new RangeError("Submatrix indices are out of range")}function gt(ht){for(var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=[],E=0;E<ht;E++)O.push(yt);return O}function Vt(ht,yt){if(typeof yt!="number")throw new TypeError("".concat(ht," must be a number"))}function re(ht){for(var yt=gt(ht.rows),O=0;O<ht.rows;++O)for(var E=0;E<ht.columns;++E)yt[O]+=ht.get(O,E);return yt}function It(ht){for(var yt=gt(ht.columns),O=0;O<ht.rows;++O)for(var E=0;E<ht.columns;++E)yt[E]+=ht.get(O,E);return yt}function Wt(ht){for(var yt=0,O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)yt+=ht.get(O,E);return yt}function $t(ht){for(var yt=gt(ht.rows,1),O=0;O<ht.rows;++O)for(var E=0;E<ht.columns;++E)yt[O]*=ht.get(O,E);return yt}function ae(ht){for(var yt=gt(ht.columns,1),O=0;O<ht.rows;++O)for(var E=0;E<ht.columns;++E)yt[E]*=ht.get(O,E);return yt}function Bt(ht){for(var yt=1,O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)yt*=ht.get(O,E);return yt}function Ot(ht,yt,O){for(var E=ht.rows,w=ht.columns,V=[],Et=0;Et<E;Et++){for(var Gt=0,Dt=0,ie=0,Ge=0;Ge<w;Ge++)ie=ht.get(Et,Ge)-O[Et],Gt+=ie,Dt+=ie*ie;yt?V.push((Dt-Gt*Gt/w)/(w-1)):V.push((Dt-Gt*Gt/w)/w)}return V}function Ht(ht,yt,O){for(var E=ht.rows,w=ht.columns,V=[],Et=0;Et<w;Et++){for(var Gt=0,Dt=0,ie=0,Ge=0;Ge<E;Ge++)ie=ht.get(Ge,Et)-O[Et],Gt+=ie,Dt+=ie*ie;yt?V.push((Dt-Gt*Gt/E)/(E-1)):V.push((Dt-Gt*Gt/E)/E)}return V}function pe(ht,yt,O){for(var E=ht.rows,w=ht.columns,V=E*w,Et=0,Gt=0,Dt=0,ie=0;ie<E;ie++)for(var Ge=0;Ge<w;Ge++)Dt=ht.get(ie,Ge)-O,Et+=Dt,Gt+=Dt*Dt;return yt?(Gt-Et*Et/V)/(V-1):(Gt-Et*Et/V)/V}function ve(ht,yt){for(var O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)ht.set(O,E,ht.get(O,E)-yt[O])}function Tt(ht,yt){for(var O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)ht.set(O,E,ht.get(O,E)-yt[E])}function Zt(ht,yt){for(var O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)ht.set(O,E,ht.get(O,E)-yt)}function Ce(ht){for(var yt=[],O=0;O<ht.rows;O++){for(var E=0,w=0;w<ht.columns;w++)E+=Math.pow(ht.get(O,w),2)/(ht.columns-1);yt.push(Math.sqrt(E))}return yt}function Ut(ht,yt){for(var O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)ht.set(O,E,ht.get(O,E)/yt[O])}function se(ht){for(var yt=[],O=0;O<ht.columns;O++){for(var E=0,w=0;w<ht.rows;w++)E+=Math.pow(ht.get(w,O),2)/(ht.rows-1);yt.push(Math.sqrt(E))}return yt}function _e(ht,yt){for(var O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)ht.set(O,E,ht.get(O,E)/yt[E])}function $e(ht){for(var yt=ht.size-1,O=0,E=0;E<ht.columns;E++)for(var w=0;w<ht.rows;w++)O+=Math.pow(ht.get(w,E),2)/yt;return Math.sqrt(O)}function fr(ht,yt){for(var O=0;O<ht.rows;O++)for(var E=0;E<ht.columns;E++)ht.set(O,E,ht.get(O,E)/yt)}var gr=function(){function ht(){L()(this,ht)}return I()(ht,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(O){if(typeof O!="function")throw new TypeError("callback must be a function");for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)O.call(this,E,w);return this}},{key:"to1DArray",value:function(){for(var O=[],E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)O.push(this.get(E,w));return O}},{key:"to2DArray",value:function(){for(var O=[],E=0;E<this.rows;E++){O.push([]);for(var w=0;w<this.columns;w++)O[E].push(this.get(E,w))}return O}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var O=0;O<this.rows;O++)for(var E=0;E<=O;E++)if(this.get(O,E)!==this.get(E,O))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var O=0,E=0,w=-1,V=!0,Et=!1;O<this.rows&&V;){for(E=0,Et=!1;E<this.columns&&Et===!1;)this.get(O,E)===0?E++:this.get(O,E)===1&&E>w?(Et=!0,w=E):(V=!1,Et=!0);O++}return V}},{key:"isReducedEchelonForm",value:function(){for(var O=0,E=0,w=-1,V=!0,Et=!1;O<this.rows&&V;){for(E=0,Et=!1;E<this.columns&&Et===!1;)this.get(O,E)===0?E++:this.get(O,E)===1&&E>w?(Et=!0,w=E):(V=!1,Et=!0);for(var Gt=E+1;Gt<this.rows;Gt++)this.get(O,Gt)!==0&&(V=!1);O++}return V}},{key:"echelonForm",value:function(){for(var O=this.clone(),E=0,w=0;E<O.rows&&w<O.columns;){for(var V=E,Et=E;Et<O.rows;Et++)O.get(Et,w)>O.get(V,w)&&(V=Et);if(O.get(V,w)===0)w++;else{O.swapRows(E,V);for(var Gt=O.get(E,w),Dt=w;Dt<O.columns;Dt++)O.set(E,Dt,O.get(E,Dt)/Gt);for(var ie=E+1;ie<O.rows;ie++){var Ge=O.get(ie,w)/O.get(E,w);O.set(ie,w,0);for(var Te=w+1;Te<O.columns;Te++)O.set(ie,Te,O.get(ie,Te)-O.get(E,Te)*Ge)}E++,w++}}return O}},{key:"reducedEchelonForm",value:function(){for(var O=this.echelonForm(),E=O.columns,w=O.rows,V=w-1;V>=0;)if(O.maxRow(V)===0)V--;else{for(var Et=0,Gt=!1;Et<w&&Gt===!1;)O.get(V,Et)===1?Gt=!0:Et++;for(var Dt=0;Dt<V;Dt++)for(var ie=O.get(Dt,Et),Ge=Et;Ge<E;Ge++){var Te=O.get(Dt,Ge)-ie*O.get(V,Ge);O.set(Dt,Ge,Te)}V--}return O}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(_()(O)!=="object")throw new TypeError("options must be an object");var E=O.rows,w=E===void 0?1:E,V=O.columns,Et=V===void 0?1:V;if(!Number.isInteger(w)||w<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Et)||Et<=0)throw new TypeError("columns must be a positive integer");for(var Gt=new Mr(this.rows*w,this.columns*Et),Dt=0;Dt<w;Dt++)for(var ie=0;ie<Et;ie++)Gt.setSubMatrix(this,this.rows*Dt,this.columns*ie);return Gt}},{key:"fill",value:function(O){for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,O);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(O){ct(this,O);for(var E=[],w=0;w<this.columns;w++)E.push(this.get(O,w));return E}},{key:"getRowVector",value:function(O){return Mr.rowVector(this.getRow(O))}},{key:"setRow",value:function(O,E){ct(this,O),E=St(this,E);for(var w=0;w<this.columns;w++)this.set(O,w,E[w]);return this}},{key:"swapRows",value:function(O,E){ct(this,O),ct(this,E);for(var w=0;w<this.columns;w++){var V=this.get(O,w);this.set(O,w,this.get(E,w)),this.set(E,w,V)}return this}},{key:"getColumn",value:function(O){at(this,O);for(var E=[],w=0;w<this.rows;w++)E.push(this.get(w,O));return E}},{key:"getColumnVector",value:function(O){return Mr.columnVector(this.getColumn(O))}},{key:"setColumn",value:function(O,E){at(this,O),E=bt(this,E);for(var w=0;w<this.rows;w++)this.set(w,O,E[w]);return this}},{key:"swapColumns",value:function(O,E){at(this,O),at(this,E);for(var w=0;w<this.rows;w++){var V=this.get(w,O);this.set(w,O,this.get(w,E)),this.set(w,E,V)}return this}},{key:"addRowVector",value:function(O){O=St(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)+O[w]);return this}},{key:"subRowVector",value:function(O){O=St(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)-O[w]);return this}},{key:"mulRowVector",value:function(O){O=St(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)*O[w]);return this}},{key:"divRowVector",value:function(O){O=St(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)/O[w]);return this}},{key:"addColumnVector",value:function(O){O=bt(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)+O[E]);return this}},{key:"subColumnVector",value:function(O){O=bt(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)-O[E]);return this}},{key:"mulColumnVector",value:function(O){O=bt(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)*O[E]);return this}},{key:"divColumnVector",value:function(O){O=bt(this,O);for(var E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.set(E,w,this.get(E,w)/O[E]);return this}},{key:"mulRow",value:function(O,E){ct(this,O);for(var w=0;w<this.columns;w++)this.set(O,w,this.get(O,w)*E);return this}},{key:"mulColumn",value:function(O,E){at(this,O);for(var w=0;w<this.rows;w++)this.set(w,O,this.get(w,O)*E);return this}},{key:"max",value:function(){for(var O=this.get(0,0),E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.get(E,w)>O&&(O=this.get(E,w));return O}},{key:"maxIndex",value:function(){for(var O=this.get(0,0),E=[0,0],w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.get(w,V)>O&&(O=this.get(w,V),E[0]=w,E[1]=V);return E}},{key:"min",value:function(){for(var O=this.get(0,0),E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)this.get(E,w)<O&&(O=this.get(E,w));return O}},{key:"minIndex",value:function(){for(var O=this.get(0,0),E=[0,0],w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.get(w,V)<O&&(O=this.get(w,V),E[0]=w,E[1]=V);return E}},{key:"maxRow",value:function(O){ct(this,O);for(var E=this.get(O,0),w=1;w<this.columns;w++)this.get(O,w)>E&&(E=this.get(O,w));return E}},{key:"maxRowIndex",value:function(O){ct(this,O);for(var E=this.get(O,0),w=[O,0],V=1;V<this.columns;V++)this.get(O,V)>E&&(E=this.get(O,V),w[1]=V);return w}},{key:"minRow",value:function(O){ct(this,O);for(var E=this.get(O,0),w=1;w<this.columns;w++)this.get(O,w)<E&&(E=this.get(O,w));return E}},{key:"minRowIndex",value:function(O){ct(this,O);for(var E=this.get(O,0),w=[O,0],V=1;V<this.columns;V++)this.get(O,V)<E&&(E=this.get(O,V),w[1]=V);return w}},{key:"maxColumn",value:function(O){at(this,O);for(var E=this.get(0,O),w=1;w<this.rows;w++)this.get(w,O)>E&&(E=this.get(w,O));return E}},{key:"maxColumnIndex",value:function(O){at(this,O);for(var E=this.get(0,O),w=[0,O],V=1;V<this.rows;V++)this.get(V,O)>E&&(E=this.get(V,O),w[0]=V);return w}},{key:"minColumn",value:function(O){at(this,O);for(var E=this.get(0,O),w=1;w<this.rows;w++)this.get(w,O)<E&&(E=this.get(w,O));return E}},{key:"minColumnIndex",value:function(O){at(this,O);for(var E=this.get(0,O),w=[0,O],V=1;V<this.rows;V++)this.get(V,O)<E&&(E=this.get(V,O),w[0]=V);return w}},{key:"diag",value:function(){for(var O=Math.min(this.rows,this.columns),E=[],w=0;w<O;w++)E.push(this.get(w,w));return E}},{key:"norm",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",E=0;if(O==="max")return this.max();if(O==="frobenius"){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)E=E+this.get(w,V)*this.get(w,V);return Math.sqrt(E)}else throw new RangeError("unknown norm type: ".concat(O))}},{key:"cumulativeSum",value:function(){for(var O=0,E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)O+=this.get(E,w),this.set(E,w,O);return this}},{key:"dot",value:function(O){ht.isMatrix(O)&&(O=O.to1DArray());var E=this.to1DArray();if(E.length!==O.length)throw new RangeError("vectors do not have the same size");for(var w=0,V=0;V<E.length;V++)w+=E[V]*O[V];return w}},{key:"mmul",value:function(O){O=Mr.checkMatrix(O);for(var E=this.rows,w=this.columns,V=O.columns,Et=new Mr(E,V),Gt=new Float64Array(w),Dt=0;Dt<V;Dt++){for(var ie=0;ie<w;ie++)Gt[ie]=O.get(ie,Dt);for(var Ge=0;Ge<E;Ge++){for(var Te=0,ar=0;ar<w;ar++)Te+=this.get(Ge,ar)*Gt[ar];Et.set(Ge,Dt,Te)}}return Et}},{key:"strassen2x2",value:function(O){O=Mr.checkMatrix(O);var E=new Mr(2,2),w=this.get(0,0),V=O.get(0,0),Et=this.get(0,1),Gt=O.get(0,1),Dt=this.get(1,0),ie=O.get(1,0),Ge=this.get(1,1),Te=O.get(1,1),ar=(w+Ge)*(V+Te),Ur=(Dt+Ge)*V,pr=w*(Gt-Te),nn=Ge*(ie-V),kn=(w+Et)*Te,We=(Dt-w)*(V+Gt),vr=(Et-Ge)*(ie+Te),Nr=ar+nn-kn+vr,Fr=pr+kn,ee=Ur+nn,Lt=ar-Ur+pr+We;return E.set(0,0,Nr),E.set(0,1,Fr),E.set(1,0,ee),E.set(1,1,Lt),E}},{key:"strassen3x3",value:function(O){O=Mr.checkMatrix(O);var E=new Mr(3,3),w=this.get(0,0),V=this.get(0,1),Et=this.get(0,2),Gt=this.get(1,0),Dt=this.get(1,1),ie=this.get(1,2),Ge=this.get(2,0),Te=this.get(2,1),ar=this.get(2,2),Ur=O.get(0,0),pr=O.get(0,1),nn=O.get(0,2),kn=O.get(1,0),We=O.get(1,1),vr=O.get(1,2),Nr=O.get(2,0),Fr=O.get(2,1),ee=O.get(2,2),Lt=(w+V+Et-Gt-Dt-Te-ar)*We,ue=(w-Gt)*(-pr+We),Ee=Dt*(-Ur+pr+kn-We-vr-Nr+ee),me=(-w+Gt+Dt)*(Ur-pr+We),Ie=(Gt+Dt)*(-Ur+pr),rr=w*Ur,ir=(-w+Ge+Te)*(Ur-nn+vr),Zr=(-w+Ge)*(nn-vr),En=(Ge+Te)*(-Ur+nn),ln=(w+V+Et-Dt-ie-Ge-Te)*vr,zn=Te*(-Ur+nn+kn-We-vr-Nr+Fr),Gn=(-Et+Te+ar)*(We+Nr-Fr),la=(Et-ar)*(We-Fr),Ha=Et*Nr,qa=(Te+ar)*(-Nr+Fr),Oa=(-Et+Dt+ie)*(vr+Nr-ee),Ao=(Et-ie)*(vr-ee),wi=(Dt+ie)*(-Nr+ee),Ei=V*kn,oo=ie*Fr,hs=Gt*nn,To=Ge*pr,so=ar*ee,ma=rr+Ha+Ei,Io=Lt+me+Ie+rr+Gn+Ha+qa,ds=rr+ir+En+ln+Ha+Oa+wi,ei=ue+Ee+me+rr+Ha+Oa+Ao,Wi=ue+me+Ie+rr+oo,vs=Ha+Oa+Ao+wi+hs,Yo=rr+ir+Zr+zn+Gn+la+Ha,Vi=Gn+la+Ha+qa+To,uo=rr+ir+Zr+En+so;return E.set(0,0,ma),E.set(0,1,Io),E.set(0,2,ds),E.set(1,0,ei),E.set(1,1,Wi),E.set(1,2,vs),E.set(2,0,Yo),E.set(2,1,Vi),E.set(2,2,uo),E}},{key:"mmulStrassen",value:function(O){O=Mr.checkMatrix(O);var E=this.clone(),w=E.rows,V=E.columns,Et=O.rows,Gt=O.columns;V!==Et&&console.warn("Multiplying ".concat(w," x ").concat(V," and ").concat(Et," x ").concat(Gt," matrix: dimensions do not match."));function Dt(ar,Ur,pr){var nn=ar.rows,kn=ar.columns;if(nn===Ur&&kn===pr)return ar;var We=ht.zeros(Ur,pr);return We=We.setSubMatrix(ar,0,0),We}var ie=Math.max(w,Et),Ge=Math.max(V,Gt);E=Dt(E,ie,Ge),O=Dt(O,ie,Ge);function Te(ar,Ur,pr,nn){if(pr<=512||nn<=512)return ar.mmul(Ur);pr%2===1&&nn%2===1?(ar=Dt(ar,pr+1,nn+1),Ur=Dt(Ur,pr+1,nn+1)):pr%2===1?(ar=Dt(ar,pr+1,nn),Ur=Dt(Ur,pr+1,nn)):nn%2===1&&(ar=Dt(ar,pr,nn+1),Ur=Dt(Ur,pr,nn+1));var kn=parseInt(ar.rows/2,10),We=parseInt(ar.columns/2,10),vr=ar.subMatrix(0,kn-1,0,We-1),Nr=Ur.subMatrix(0,kn-1,0,We-1),Fr=ar.subMatrix(0,kn-1,We,ar.columns-1),ee=Ur.subMatrix(0,kn-1,We,Ur.columns-1),Lt=ar.subMatrix(kn,ar.rows-1,0,We-1),ue=Ur.subMatrix(kn,Ur.rows-1,0,We-1),Ee=ar.subMatrix(kn,ar.rows-1,We,ar.columns-1),me=Ur.subMatrix(kn,Ur.rows-1,We,Ur.columns-1),Ie=Te(ht.add(vr,Ee),ht.add(Nr,me),kn,We),rr=Te(ht.add(Lt,Ee),Nr,kn,We),ir=Te(vr,ht.sub(ee,me),kn,We),Zr=Te(Ee,ht.sub(ue,Nr),kn,We),En=Te(ht.add(vr,Fr),me,kn,We),ln=Te(ht.sub(Lt,vr),ht.add(Nr,ee),kn,We),zn=Te(ht.sub(Fr,Ee),ht.add(ue,me),kn,We),Gn=ht.add(Ie,Zr);Gn.sub(En),Gn.add(zn);var la=ht.add(ir,En),Ha=ht.add(rr,Zr),qa=ht.sub(Ie,rr);qa.add(ir),qa.add(ln);var Oa=ht.zeros(2*Gn.rows,2*Gn.columns);return Oa=Oa.setSubMatrix(Gn,0,0),Oa=Oa.setSubMatrix(la,Gn.rows,0),Oa=Oa.setSubMatrix(Ha,0,Gn.columns),Oa=Oa.setSubMatrix(qa,Gn.rows,Gn.columns),Oa.subMatrix(0,pr-1,0,nn-1)}return Te(E,O,ie,Ge)}},{key:"scaleRows",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(_()(O)!=="object")throw new TypeError("options must be an object");var E=O.min,w=E===void 0?0:E,V=O.max,Et=V===void 0?1:V;if(!Number.isFinite(w))throw new TypeError("min must be a number");if(!Number.isFinite(Et))throw new TypeError("max must be a number");if(w>=Et)throw new RangeError("min must be smaller than max");for(var Gt=new Mr(this.rows,this.columns),Dt=0;Dt<this.rows;Dt++){var ie=this.getRow(Dt);K(ie,{min:w,max:Et,output:ie}),Gt.setRow(Dt,ie)}return Gt}},{key:"scaleColumns",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(_()(O)!=="object")throw new TypeError("options must be an object");var E=O.min,w=E===void 0?0:E,V=O.max,Et=V===void 0?1:V;if(!Number.isFinite(w))throw new TypeError("min must be a number");if(!Number.isFinite(Et))throw new TypeError("max must be a number");if(w>=Et)throw new RangeError("min must be smaller than max");for(var Gt=new Mr(this.rows,this.columns),Dt=0;Dt<this.columns;Dt++){var ie=this.getColumn(Dt);K(ie,{min:w,max:Et,output:ie}),Gt.setColumn(Dt,ie)}return Gt}},{key:"flipRows",value:function(){for(var O=Math.ceil(this.columns/2),E=0;E<this.rows;E++)for(var w=0;w<O;w++){var V=this.get(E,w),Et=this.get(E,this.columns-1-w);this.set(E,w,Et),this.set(E,this.columns-1-w,V)}return this}},{key:"flipColumns",value:function(){for(var O=Math.ceil(this.rows/2),E=0;E<this.columns;E++)for(var w=0;w<O;w++){var V=this.get(w,E),Et=this.get(this.rows-1-w,E);this.set(w,E,Et),this.set(this.rows-1-w,E,V)}return this}},{key:"kroneckerProduct",value:function(O){O=Mr.checkMatrix(O);for(var E=this.rows,w=this.columns,V=O.rows,Et=O.columns,Gt=new Mr(E*V,w*Et),Dt=0;Dt<E;Dt++)for(var ie=0;ie<w;ie++)for(var Ge=0;Ge<V;Ge++)for(var Te=0;Te<Et;Te++)Gt.set(V*Dt+Ge,Et*ie+Te,this.get(Dt,ie)*O.get(Ge,Te));return Gt}},{key:"transpose",value:function(){for(var O=new Mr(this.columns,this.rows),E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)O.set(w,E,this.get(E,w));return O}},{key:"sortRows",value:function(){for(var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,E=0;E<this.rows;E++)this.setRow(E,this.getRow(E).sort(O));return this}},{key:"sortColumns",value:function(){for(var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,E=0;E<this.columns;E++)this.setColumn(E,this.getColumn(E).sort(O));return this}},{key:"subMatrix",value:function(O,E,w,V){it(this,O,E,w,V);for(var Et=new Mr(E-O+1,V-w+1),Gt=O;Gt<=E;Gt++)for(var Dt=w;Dt<=V;Dt++)Et.set(Gt-O,Dt-w,this.get(Gt,Dt));return Et}},{key:"subMatrixRow",value:function(O,E,w){if(E===void 0&&(E=0),w===void 0&&(w=this.columns-1),E>w||E<0||E>=this.columns||w<0||w>=this.columns)throw new RangeError("Argument out of range");for(var V=new Mr(O.length,w-E+1),Et=0;Et<O.length;Et++)for(var Gt=E;Gt<=w;Gt++){if(O[Et]<0||O[Et]>=this.rows)throw new RangeError("Row index out of range: ".concat(O[Et]));V.set(Et,Gt-E,this.get(O[Et],Gt))}return V}},{key:"subMatrixColumn",value:function(O,E,w){if(E===void 0&&(E=0),w===void 0&&(w=this.rows-1),E>w||E<0||E>=this.rows||w<0||w>=this.rows)throw new RangeError("Argument out of range");for(var V=new Mr(w-E+1,O.length),Et=0;Et<O.length;Et++)for(var Gt=E;Gt<=w;Gt++){if(O[Et]<0||O[Et]>=this.columns)throw new RangeError("Column index out of range: ".concat(O[Et]));V.set(Gt-E,Et,this.get(Gt,O[Et]))}return V}},{key:"setSubMatrix",value:function(O,E,w){O=Mr.checkMatrix(O);var V=E+O.rows-1,Et=w+O.columns-1;it(this,E,V,w,Et);for(var Gt=0;Gt<O.rows;Gt++)for(var Dt=0;Dt<O.columns;Dt++)this.set(E+Gt,w+Dt,O.get(Gt,Dt));return this}},{key:"selection",value:function(O,E){for(var w=zt(this,O,E),V=new Mr(O.length,E.length),Et=0;Et<w.row.length;Et++)for(var Gt=w.row[Et],Dt=0;Dt<w.column.length;Dt++){var ie=w.column[Dt];V.set(Et,Dt,this.get(Gt,ie))}return V}},{key:"trace",value:function(){for(var O=Math.min(this.rows,this.columns),E=0,w=0;w<O;w++)E+=this.get(w,w);return E}},{key:"clone",value:function(){for(var O=new Mr(this.rows,this.columns),E=0;E<this.rows;E++)for(var w=0;w<this.columns;w++)O.set(E,w,this.get(E,w));return O}},{key:"sum",value:function(O){switch(O){case"row":return re(this);case"column":return It(this);case void 0:return Wt(this);default:throw new Error("invalid option: ".concat(O))}}},{key:"product",value:function(O){switch(O){case"row":return $t(this);case"column":return ae(this);case void 0:return Bt(this);default:throw new Error("invalid option: ".concat(O))}}},{key:"mean",value:function(O){var E=this.sum(O);switch(O){case"row":{for(var w=0;w<this.rows;w++)E[w]/=this.columns;return E}case"column":{for(var V=0;V<this.columns;V++)E[V]/=this.rows;return E}case void 0:return E/this.size;default:throw new Error("invalid option: ".concat(O))}}},{key:"variance",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_()(O)==="object"&&(E=O,O=void 0),_()(E)!=="object")throw new TypeError("options must be an object");var w=E,V=w.unbiased,Et=V===void 0?!0:V,Gt=w.mean,Dt=Gt===void 0?this.mean(O):Gt;if(typeof Et!="boolean")throw new TypeError("unbiased must be a boolean");switch(O){case"row":{if(!Array.isArray(Dt))throw new TypeError("mean must be an array");return Ot(this,Et,Dt)}case"column":{if(!Array.isArray(Dt))throw new TypeError("mean must be an array");return Ht(this,Et,Dt)}case void 0:{if(typeof Dt!="number")throw new TypeError("mean must be a number");return pe(this,Et,Dt)}default:throw new Error("invalid option: ".concat(O))}}},{key:"standardDeviation",value:function(O,E){_()(O)==="object"&&(E=O,O=void 0);var w=this.variance(O,E);if(O===void 0)return Math.sqrt(w);for(var V=0;V<w.length;V++)w[V]=Math.sqrt(w[V]);return w}},{key:"center",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_()(O)==="object"&&(E=O,O=void 0),_()(E)!=="object")throw new TypeError("options must be an object");var w=E,V=w.center,Et=V===void 0?this.mean(O):V;switch(O){case"row":{if(!Array.isArray(Et))throw new TypeError("center must be an array");return ve(this,Et),this}case"column":{if(!Array.isArray(Et))throw new TypeError("center must be an array");return Tt(this,Et),this}case void 0:{if(typeof Et!="number")throw new TypeError("center must be a number");return Zt(this,Et),this}default:throw new Error("invalid option: ".concat(O))}}},{key:"scale",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_()(O)==="object"&&(E=O,O=void 0),_()(E)!=="object")throw new TypeError("options must be an object");var w=E.scale;switch(O){case"row":{if(w===void 0)w=Ce(this);else if(!Array.isArray(w))throw new TypeError("scale must be an array");return Ut(this,w),this}case"column":{if(w===void 0)w=se(this);else if(!Array.isArray(w))throw new TypeError("scale must be an array");return _e(this,w),this}case void 0:{if(w===void 0)w=$e(this);else if(typeof w!="number")throw new TypeError("scale must be a number");return fr(this,w),this}default:throw new Error("invalid option: ".concat(O))}}},{key:"toString",value:function(O){return W(this,O)}}],[{key:"from1DArray",value:function(O,E,w){var V=O*E;if(V!==w.length)throw new RangeError("data length does not match given dimensions");for(var Et=new Mr(O,E),Gt=0;Gt<O;Gt++)for(var Dt=0;Dt<E;Dt++)Et.set(Gt,Dt,w[Gt*E+Dt]);return Et}},{key:"rowVector",value:function(O){for(var E=new Mr(1,O.length),w=0;w<O.length;w++)E.set(0,w,O[w]);return E}},{key:"columnVector",value:function(O){for(var E=new Mr(O.length,1),w=0;w<O.length;w++)E.set(w,0,O[w]);return E}},{key:"zeros",value:function(O,E){return new Mr(O,E)}},{key:"ones",value:function(O,E){return new Mr(O,E).fill(1)}},{key:"rand",value:function(O,E){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(_()(w)!=="object")throw new TypeError("options must be an object");for(var V=w.random,Et=V===void 0?Math.random:V,Gt=new Mr(O,E),Dt=0;Dt<O;Dt++)for(var ie=0;ie<E;ie++)Gt.set(Dt,ie,Et());return Gt}},{key:"randInt",value:function(O,E){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(_()(w)!=="object")throw new TypeError("options must be an object");var V=w.min,Et=V===void 0?0:V,Gt=w.max,Dt=Gt===void 0?1e3:Gt,ie=w.random,Ge=ie===void 0?Math.random:ie;if(!Number.isInteger(Et))throw new TypeError("min must be an integer");if(!Number.isInteger(Dt))throw new TypeError("max must be an integer");if(Et>=Dt)throw new RangeError("min must be smaller than max");for(var Te=Dt-Et,ar=new Mr(O,E),Ur=0;Ur<O;Ur++)for(var pr=0;pr<E;pr++){var nn=Et+Math.round(Ge()*Te);ar.set(Ur,pr,nn)}return ar}},{key:"eye",value:function(O,E,w){E===void 0&&(E=O),w===void 0&&(w=1);for(var V=Math.min(O,E),Et=this.zeros(O,E),Gt=0;Gt<V;Gt++)Et.set(Gt,Gt,w);return Et}},{key:"diag",value:function(O,E,w){var V=O.length;E===void 0&&(E=V),w===void 0&&(w=E);for(var Et=Math.min(V,E,w),Gt=this.zeros(E,w),Dt=0;Dt<Et;Dt++)Gt.set(Dt,Dt,O[Dt]);return Gt}},{key:"min",value:function(O,E){O=this.checkMatrix(O),E=this.checkMatrix(E);for(var w=O.rows,V=O.columns,Et=new Mr(w,V),Gt=0;Gt<w;Gt++)for(var Dt=0;Dt<V;Dt++)Et.set(Gt,Dt,Math.min(O.get(Gt,Dt),E.get(Gt,Dt)));return Et}},{key:"max",value:function(O,E){O=this.checkMatrix(O),E=this.checkMatrix(E);for(var w=O.rows,V=O.columns,Et=new this(w,V),Gt=0;Gt<w;Gt++)for(var Dt=0;Dt<V;Dt++)Et.set(Gt,Dt,Math.max(O.get(Gt,Dt),E.get(Gt,Dt)));return Et}},{key:"checkMatrix",value:function(O){return ht.isMatrix(O)?O:new Mr(O)}},{key:"isMatrix",value:function(O){return O!=null&&O.klass==="Matrix"}}]),ht}();gr.prototype.klass="Matrix",typeof Symbol!="undefined"&&(gr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y);function Yt(ht,yt){return ht-yt}gr.random=gr.rand,gr.randomInt=gr.randInt,gr.diagonal=gr.diag,gr.prototype.diagonal=gr.prototype.diag,gr.identity=gr.eye,gr.prototype.negate=gr.prototype.neg,gr.prototype.tensorProduct=gr.prototype.kroneckerProduct;var Mr=function(ht){X()(O,ht);var yt=M()(O);function O(E,w){var V;if(L()(this,O),V=yt.call(this),O.isMatrix(E))return st()(V,E.clone());if(Number.isInteger(E)&&E>0)if(V.data=[],Number.isInteger(w)&&w>0)for(var Et=0;Et<E;Et++)V.data.push(new Float64Array(w));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(E)){var Gt=E;if(E=Gt.length,w=Gt[0].length,typeof w!="number"||w===0)throw new TypeError("Data must be a 2D array with at least one element");V.data=[];for(var Dt=0;Dt<E;Dt++){if(Gt[Dt].length!==w)throw new RangeError("Inconsistent array dimensions");V.data.push(Float64Array.from(Gt[Dt]))}}else throw new TypeError("First argument must be a positive number or an array");return V.rows=E,V.columns=w,st()(V,Q()(V))}return I()(O,[{key:"set",value:function(w,V,Et){return this.data[w][V]=Et,this}},{key:"get",value:function(w,V){return this.data[w][V]}},{key:"removeRow",value:function(w){if(ct(this,w),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(w,1),this.rows-=1,this}},{key:"addRow",value:function(w,V){return V===void 0&&(V=w,w=this.rows),ct(this,w,!0),V=Float64Array.from(St(this,V,!0)),this.data.splice(w,0,V),this.rows+=1,this}},{key:"removeColumn",value:function(w){if(at(this,w),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var V=0;V<this.rows;V++){for(var Et=new Float64Array(this.columns-1),Gt=0;Gt<w;Gt++)Et[Gt]=this.data[V][Gt];for(var Dt=w+1;Dt<this.columns;Dt++)Et[Dt-1]=this.data[V][Dt];this.data[V]=Et}return this.columns-=1,this}},{key:"addColumn",value:function(w,V){typeof V=="undefined"&&(V=w,w=this.columns),at(this,w,!0),V=bt(this,V);for(var Et=0;Et<this.rows;Et++){for(var Gt=new Float64Array(this.columns+1),Dt=0;Dt<w;Dt++)Gt[Dt]=this.data[Et][Dt];for(Gt[Dt++]=V[Et];Dt<this.columns+1;Dt++)Gt[Dt]=this.data[Et][Dt-1];this.data[Et]=Gt}return this.columns+=1,this}}]),O}(gr);et(gr,Mr);var Ln=function(ht){X()(O,ht);var yt=M()(O);function O(E,w,V){var Et;return L()(this,O),Et=yt.call(this),Et.matrix=E,Et.rows=w,Et.columns=V,Et}return I()(O)}(gr),Yn=function(ht){X()(O,ht);var yt=M()(O);function O(E,w){var V;return L()(this,O),at(E,w),V=yt.call(this,E,E.rows,1),V.column=w,V}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(w,this.column,Et),this}},{key:"get",value:function(w){return this.matrix.get(w,this.column)}}]),O}(Ln),Ra=function(ht){X()(O,ht);var yt=M()(O);function O(E,w){var V;return L()(this,O),w=Kt(E,w),V=yt.call(this,E,E.rows,w.length),V.columnIndices=w,V}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(w,this.columnIndices[V],Et),this}},{key:"get",value:function(w,V){return this.matrix.get(w,this.columnIndices[V])}}]),O}(Ln),ba=function(ht){X()(O,ht);var yt=M()(O);function O(E){return L()(this,O),yt.call(this,E,E.rows,E.columns)}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(w,this.columns-V-1,Et),this}},{key:"get",value:function(w,V){return this.matrix.get(w,this.columns-V-1)}}]),O}(Ln),Ba=function(ht){X()(O,ht);var yt=M()(O);function O(E){return L()(this,O),yt.call(this,E,E.rows,E.columns)}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(this.rows-w-1,V,Et),this}},{key:"get",value:function(w,V){return this.matrix.get(this.rows-w-1,V)}}]),O}(Ln),xa=function(ht){X()(O,ht);var yt=M()(O);function O(E,w){var V;return L()(this,O),ct(E,w),V=yt.call(this,E,1,E.columns),V.row=w,V}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(this.row,V,Et),this}},{key:"get",value:function(w,V){return this.matrix.get(this.row,V)}}]),O}(Ln),ya=function(ht){X()(O,ht);var yt=M()(O);function O(E,w){var V;return L()(this,O),w=kt(E,w),V=yt.call(this,E,w.length,E.columns),V.rowIndices=w,V}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(this.rowIndices[w],V,Et),this}},{key:"get",value:function(w,V){return this.matrix.get(this.rowIndices[w],V)}}]),O}(Ln),Na=function(ht){X()(O,ht);var yt=M()(O);function O(E,w,V){var Et;L()(this,O);var Gt=zt(E,w,V);return Et=yt.call(this,E,Gt.row.length,Gt.column.length),Et.rowIndices=Gt.row,Et.columnIndices=Gt.column,Et}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(this.rowIndices[w],this.columnIndices[V],Et),this}},{key:"get",value:function(w,V){return this.matrix.get(this.rowIndices[w],this.columnIndices[V])}}]),O}(Ln),Ta=function(ht){X()(O,ht);var yt=M()(O);function O(E,w,V,Et,Gt){var Dt;return L()(this,O),it(E,w,V,Et,Gt),Dt=yt.call(this,E,V-w+1,Gt-Et+1),Dt.startRow=w,Dt.startColumn=Et,Dt}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(this.startRow+w,this.startColumn+V,Et),this}},{key:"get",value:function(w,V){return this.matrix.get(this.startRow+w,this.startColumn+V)}}]),O}(Ln),hr=function(ht){X()(O,ht);var yt=M()(O);function O(E){return L()(this,O),yt.call(this,E,E.columns,E.rows)}return I()(O,[{key:"set",value:function(w,V,Et){return this.matrix.set(V,w,Et),this}},{key:"get",value:function(w,V){return this.matrix.get(V,w)}}]),O}(Ln),Br=function(ht){X()(O,ht);var yt=M()(O);function O(E){var w,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L()(this,O);var Et=V.rows,Gt=Et===void 0?1:Et;if(E.length%Gt!==0)throw new Error("the data length is not divisible by the number of rows");return w=yt.call(this),w.rows=Gt,w.columns=E.length/Gt,w.data=E,w}return I()(O,[{key:"set",value:function(w,V,Et){var Gt=this._calculateIndex(w,V);return this.data[Gt]=Et,this}},{key:"get",value:function(w,V){var Et=this._calculateIndex(w,V);return this.data[Et]}},{key:"_calculateIndex",value:function(w,V){return w*this.columns+V}}]),O}(gr),cn=function(ht){X()(O,ht);var yt=M()(O);function O(E){var w;return L()(this,O),w=yt.call(this),w.data=E,w.rows=E.length,w.columns=E[0].length,w}return I()(O,[{key:"set",value:function(w,V,Et){return this.data[w][V]=Et,this}},{key:"get",value:function(w,V){return this.data[w][V]}}]),O}(gr);function Cn(ht,yt){if(Array.isArray(ht))return ht[0]&&Array.isArray(ht[0])?new cn(ht):new Br(ht,yt);throw new Error("the argument is not an array")}var Qn=function(){function ht(yt){L()(this,ht),yt=cn.checkMatrix(yt);var O=yt.clone(),E=O.rows,w=O.columns,V=new Float64Array(E),Et=1,Gt,Dt,ie,Ge,Te,ar,Ur,pr,nn;for(Gt=0;Gt<E;Gt++)V[Gt]=Gt;for(pr=new Float64Array(E),Dt=0;Dt<w;Dt++){for(Gt=0;Gt<E;Gt++)pr[Gt]=O.get(Gt,Dt);for(Gt=0;Gt<E;Gt++){for(nn=Math.min(Gt,Dt),Te=0,ie=0;ie<nn;ie++)Te+=O.get(Gt,ie)*pr[ie];pr[Gt]-=Te,O.set(Gt,Dt,pr[Gt])}for(Ge=Dt,Gt=Dt+1;Gt<E;Gt++)Math.abs(pr[Gt])>Math.abs(pr[Ge])&&(Ge=Gt);if(Ge!==Dt){for(ie=0;ie<w;ie++)ar=O.get(Ge,ie),O.set(Ge,ie,O.get(Dt,ie)),O.set(Dt,ie,ar);Ur=V[Ge],V[Ge]=V[Dt],V[Dt]=Ur,Et=-Et}if(Dt<E&&O.get(Dt,Dt)!==0)for(Gt=Dt+1;Gt<E;Gt++)O.set(Gt,Dt,O.get(Gt,Dt)/O.get(Dt,Dt))}this.LU=O,this.pivotVector=V,this.pivotSign=Et}return I()(ht,[{key:"isSingular",value:function(){for(var O=this.LU,E=O.columns,w=0;w<E;w++)if(O.get(w,w)===0)return!0;return!1}},{key:"solve",value:function(O){O=Mr.checkMatrix(O);var E=this.LU,w=E.rows;if(w!==O.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var V=O.columns,Et=O.subMatrixRow(this.pivotVector,0,V-1),Gt=E.columns,Dt,ie,Ge;for(Ge=0;Ge<Gt;Ge++)for(Dt=Ge+1;Dt<Gt;Dt++)for(ie=0;ie<V;ie++)Et.set(Dt,ie,Et.get(Dt,ie)-Et.get(Ge,ie)*E.get(Dt,Ge));for(Ge=Gt-1;Ge>=0;Ge--){for(ie=0;ie<V;ie++)Et.set(Ge,ie,Et.get(Ge,ie)/E.get(Ge,Ge));for(Dt=0;Dt<Ge;Dt++)for(ie=0;ie<V;ie++)Et.set(Dt,ie,Et.get(Dt,ie)-Et.get(Ge,ie)*E.get(Dt,Ge))}return Et}},{key:"determinant",get:function(){var O=this.LU;if(!O.isSquare())throw new Error("Matrix must be square");for(var E=this.pivotSign,w=O.columns,V=0;V<w;V++)E*=O.get(V,V);return E}},{key:"lowerTriangularMatrix",get:function(){for(var O=this.LU,E=O.rows,w=O.columns,V=new Mr(E,w),Et=0;Et<E;Et++)for(var Gt=0;Gt<w;Gt++)Et>Gt?V.set(Et,Gt,O.get(Et,Gt)):Et===Gt?V.set(Et,Gt,1):V.set(Et,Gt,0);return V}},{key:"upperTriangularMatrix",get:function(){for(var O=this.LU,E=O.rows,w=O.columns,V=new Mr(E,w),Et=0;Et<E;Et++)for(var Gt=0;Gt<w;Gt++)Et<=Gt?V.set(Et,Gt,O.get(Et,Gt)):V.set(Et,Gt,0);return V}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),ht}();function Bn(ht,yt){var O=0;return Math.abs(ht)>Math.abs(yt)?(O=yt/ht,Math.abs(ht)*Math.sqrt(1+O*O)):yt!==0?(O=ht/yt,Math.abs(yt)*Math.sqrt(1+O*O)):0}var ta=function(){function ht(yt){L()(this,ht),yt=cn.checkMatrix(yt);var O=yt.clone(),E=yt.rows,w=yt.columns,V=new Float64Array(w),Et,Gt,Dt,ie;for(Dt=0;Dt<w;Dt++){var Ge=0;for(Et=Dt;Et<E;Et++)Ge=Bn(Ge,O.get(Et,Dt));if(Ge!==0){for(O.get(Dt,Dt)<0&&(Ge=-Ge),Et=Dt;Et<E;Et++)O.set(Et,Dt,O.get(Et,Dt)/Ge);for(O.set(Dt,Dt,O.get(Dt,Dt)+1),Gt=Dt+1;Gt<w;Gt++){for(ie=0,Et=Dt;Et<E;Et++)ie+=O.get(Et,Dt)*O.get(Et,Gt);for(ie=-ie/O.get(Dt,Dt),Et=Dt;Et<E;Et++)O.set(Et,Gt,O.get(Et,Gt)+ie*O.get(Et,Dt))}}V[Dt]=-Ge}this.QR=O,this.Rdiag=V}return I()(ht,[{key:"solve",value:function(O){O=Mr.checkMatrix(O);var E=this.QR,w=E.rows;if(O.rows!==w)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var V=O.columns,Et=O.clone(),Gt=E.columns,Dt,ie,Ge,Te;for(Ge=0;Ge<Gt;Ge++)for(ie=0;ie<V;ie++){for(Te=0,Dt=Ge;Dt<w;Dt++)Te+=E.get(Dt,Ge)*Et.get(Dt,ie);for(Te=-Te/E.get(Ge,Ge),Dt=Ge;Dt<w;Dt++)Et.set(Dt,ie,Et.get(Dt,ie)+Te*E.get(Dt,Ge))}for(Ge=Gt-1;Ge>=0;Ge--){for(ie=0;ie<V;ie++)Et.set(Ge,ie,Et.get(Ge,ie)/this.Rdiag[Ge]);for(Dt=0;Dt<Ge;Dt++)for(ie=0;ie<V;ie++)Et.set(Dt,ie,Et.get(Dt,ie)-Et.get(Ge,ie)*E.get(Dt,Ge))}return Et.subMatrix(0,Gt-1,0,V-1)}},{key:"isFullRank",value:function(){for(var O=this.QR.columns,E=0;E<O;E++)if(this.Rdiag[E]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var O=this.QR,E=O.columns,w=new Mr(E,E),V,Et;for(V=0;V<E;V++)for(Et=0;Et<E;Et++)V<Et?w.set(V,Et,O.get(V,Et)):V===Et?w.set(V,Et,this.Rdiag[V]):w.set(V,Et,0);return w}},{key:"orthogonalMatrix",get:function(){var O=this.QR,E=O.rows,w=O.columns,V=new Mr(E,w),Et,Gt,Dt,ie;for(Dt=w-1;Dt>=0;Dt--){for(Et=0;Et<E;Et++)V.set(Et,Dt,0);for(V.set(Dt,Dt,1),Gt=Dt;Gt<w;Gt++)if(O.get(Dt,Dt)!==0){for(ie=0,Et=Dt;Et<E;Et++)ie+=O.get(Et,Dt)*V.get(Et,Gt);for(ie=-ie/O.get(Dt,Dt),Et=Dt;Et<E;Et++)V.set(Et,Gt,V.get(Et,Gt)+ie*O.get(Et,Dt))}}return V}}]),ht}(),sa=function(){function ht(yt){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L()(this,ht),yt=cn.checkMatrix(yt);var E=yt.rows,w=yt.columns,V=O.computeLeftSingularVectors,Et=V===void 0?!0:V,Gt=O.computeRightSingularVectors,Dt=Gt===void 0?!0:Gt,ie=O.autoTranspose,Ge=ie===void 0?!1:ie,Te=!!Et,ar=!!Dt,Ur=!1,pr;if(E<w)if(!Ge)pr=yt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{pr=yt.transpose(),E=pr.rows,w=pr.columns,Ur=!0;var nn=Te;Te=ar,ar=nn}else pr=yt.clone();for(var kn=Math.min(E,w),We=Math.min(E+1,w),vr=new Float64Array(We),Nr=new Mr(E,kn),Fr=new Mr(w,w),ee=new Float64Array(w),Lt=new Float64Array(E),ue=new Float64Array(We),Ee=0;Ee<We;Ee++)ue[Ee]=Ee;for(var me=Math.min(E-1,w),Ie=Math.max(0,Math.min(w-2,E)),rr=Math.max(me,Ie),ir=0;ir<rr;ir++){if(ir<me){vr[ir]=0;for(var Zr=ir;Zr<E;Zr++)vr[ir]=Bn(vr[ir],pr.get(Zr,ir));if(vr[ir]!==0){pr.get(ir,ir)<0&&(vr[ir]=-vr[ir]);for(var En=ir;En<E;En++)pr.set(En,ir,pr.get(En,ir)/vr[ir]);pr.set(ir,ir,pr.get(ir,ir)+1)}vr[ir]=-vr[ir]}for(var ln=ir+1;ln<w;ln++){if(ir<me&&vr[ir]!==0){for(var zn=0,Gn=ir;Gn<E;Gn++)zn+=pr.get(Gn,ir)*pr.get(Gn,ln);zn=-zn/pr.get(ir,ir);for(var la=ir;la<E;la++)pr.set(la,ln,pr.get(la,ln)+zn*pr.get(la,ir))}ee[ln]=pr.get(ir,ln)}if(Te&&ir<me)for(var Ha=ir;Ha<E;Ha++)Nr.set(Ha,ir,pr.get(Ha,ir));if(ir<Ie){ee[ir]=0;for(var qa=ir+1;qa<w;qa++)ee[ir]=Bn(ee[ir],ee[qa]);if(ee[ir]!==0){ee[ir+1]<0&&(ee[ir]=0-ee[ir]);for(var Oa=ir+1;Oa<w;Oa++)ee[Oa]/=ee[ir];ee[ir+1]+=1}if(ee[ir]=-ee[ir],ir+1<E&&ee[ir]!==0){for(var Ao=ir+1;Ao<E;Ao++)Lt[Ao]=0;for(var wi=ir+1;wi<E;wi++)for(var Ei=ir+1;Ei<w;Ei++)Lt[wi]+=ee[Ei]*pr.get(wi,Ei);for(var oo=ir+1;oo<w;oo++)for(var hs=-ee[oo]/ee[ir+1],To=ir+1;To<E;To++)pr.set(To,oo,pr.get(To,oo)+hs*Lt[To])}if(ar)for(var so=ir+1;so<w;so++)Fr.set(so,ir,ee[so])}}var ma=Math.min(w,E+1);if(me<w&&(vr[me]=pr.get(me,me)),E<ma&&(vr[ma-1]=0),Ie+1<ma&&(ee[Ie]=pr.get(Ie,ma-1)),ee[ma-1]=0,Te){for(var Io=me;Io<kn;Io++){for(var ds=0;ds<E;ds++)Nr.set(ds,Io,0);Nr.set(Io,Io,1)}for(var ei=me-1;ei>=0;ei--)if(vr[ei]!==0){for(var Wi=ei+1;Wi<kn;Wi++){for(var vs=0,Yo=ei;Yo<E;Yo++)vs+=Nr.get(Yo,ei)*Nr.get(Yo,Wi);vs=-vs/Nr.get(ei,ei);for(var Vi=ei;Vi<E;Vi++)Nr.set(Vi,Wi,Nr.get(Vi,Wi)+vs*Nr.get(Vi,ei))}for(var uo=ei;uo<E;uo++)Nr.set(uo,ei,-Nr.get(uo,ei));Nr.set(ei,ei,1+Nr.get(ei,ei));for(var Gs=0;Gs<ei-1;Gs++)Nr.set(Gs,ei,0)}else{for(var Wo=0;Wo<E;Wo++)Nr.set(Wo,ei,0);Nr.set(ei,ei,1)}}if(ar)for(var Si=w-1;Si>=0;Si--){if(Si<Ie&&ee[Si]!==0)for(var fo=Si+1;fo<w;fo++){for(var ps=0,Tn=Si+1;Tn<w;Tn++)ps+=Fr.get(Tn,Si)*Fr.get(Tn,fo);ps=-ps/Fr.get(Si+1,Si);for(var Eo=Si+1;Eo<w;Eo++)Fr.set(Eo,fo,Fr.get(Eo,fo)+ps*Fr.get(Eo,Si))}for(var Do=0;Do<w;Do++)Fr.set(Do,Si,0);Fr.set(Si,Si,1)}for(var Ss=ma-1,Vo=0,Ns=Number.EPSILON;ma>0;){var Pn=void 0,Hi=void 0;for(Pn=ma-2;Pn>=-1&&Pn!==-1;Pn--){var ji=Number.MIN_VALUE+Ns*Math.abs(vr[Pn]+Math.abs(vr[Pn+1]));if(Math.abs(ee[Pn])<=ji||Number.isNaN(ee[Pn])){ee[Pn]=0;break}}if(Pn===ma-2)Hi=4;else{var yi=void 0;for(yi=ma-1;yi>=Pn&&yi!==Pn;yi--){var Ho=(yi!==ma?Math.abs(ee[yi]):0)+(yi!==Pn+1?Math.abs(ee[yi-1]):0);if(Math.abs(vr[yi])<=Ns*Ho){vr[yi]=0;break}}yi===Pn?Hi=3:yi===ma-1?Hi=1:(Hi=2,Pn=yi)}switch(Pn++,Hi){case 1:{var jo=ee[ma-2];ee[ma-2]=0;for(var co=ma-2;co>=Pn;co--){var gs=Bn(vr[co],jo),Ms=vr[co]/gs,us=jo/gs;if(vr[co]=gs,co!==Pn&&(jo=-us*ee[co-1],ee[co-1]=Ms*ee[co-1]),ar)for(var Sa=0;Sa<w;Sa++)gs=Ms*Fr.get(Sa,co)+us*Fr.get(Sa,ma-1),Fr.set(Sa,ma-1,-us*Fr.get(Sa,co)+Ms*Fr.get(Sa,ma-1)),Fr.set(Sa,co,gs)}break}case 2:{var ks=ee[Pn-1];ee[Pn-1]=0;for(var So=Pn;So<ma;So++){var lo=Bn(vr[So],ks),_s=vr[So]/lo,Po=ks/lo;if(vr[So]=lo,ks=-Po*ee[So],ee[So]=_s*ee[So],Te)for(var Gi=0;Gi<E;Gi++)lo=_s*Nr.get(Gi,So)+Po*Nr.get(Gi,Pn-1),Nr.set(Gi,Pn-1,-Po*Nr.get(Gi,So)+_s*Nr.get(Gi,Pn-1)),Nr.set(Gi,So,lo)}break}case 3:{var Mo=Math.max(Math.abs(vr[ma-1]),Math.abs(vr[ma-2]),Math.abs(ee[ma-2]),Math.abs(vr[Pn]),Math.abs(ee[Pn])),Zi=vr[ma-1]/Mo,Lo=vr[ma-2]/Mo,di=ee[ma-2]/Mo,Cs=vr[Pn]/Mo,Ro=ee[Pn]/Mo,ho=((Lo+Zi)*(Lo-Zi)+di*di)/2,Zo=Zi*di*(Zi*di),_o=0;(ho!==0||Zo!==0)&&(ho<0?_o=0-Math.sqrt(ho*ho+Zo):_o=Math.sqrt(ho*ho+Zo),_o=Zo/(ho+_o));for(var qo=(Cs+Zi)*(Cs-Zi)+_o,go=Cs*Ro,Ia=Pn;Ia<ma-1;Ia++){var Oi=Bn(qo,go);Oi===0&&(Oi=Number.MIN_VALUE);var zi=qo/Oi,La=go/Oi;if(Ia!==Pn&&(ee[Ia-1]=Oi),qo=zi*vr[Ia]+La*ee[Ia],ee[Ia]=zi*ee[Ia]-La*vr[Ia],go=La*vr[Ia+1],vr[Ia+1]=zi*vr[Ia+1],ar)for(var Ci=0;Ci<w;Ci++)Oi=zi*Fr.get(Ci,Ia)+La*Fr.get(Ci,Ia+1),Fr.set(Ci,Ia+1,-La*Fr.get(Ci,Ia)+zi*Fr.get(Ci,Ia+1)),Fr.set(Ci,Ia,Oi);if(Oi=Bn(qo,go),Oi===0&&(Oi=Number.MIN_VALUE),zi=qo/Oi,La=go/Oi,vr[Ia]=Oi,qo=zi*ee[Ia]+La*vr[Ia+1],vr[Ia+1]=-La*ee[Ia]+zi*vr[Ia+1],go=La*ee[Ia+1],ee[Ia+1]=zi*ee[Ia+1],Te&&Ia<E-1)for(var $o=0;$o<E;$o++)Oi=zi*Nr.get($o,Ia)+La*Nr.get($o,Ia+1),Nr.set($o,Ia+1,-La*Nr.get($o,Ia)+zi*Nr.get($o,Ia+1)),Nr.set($o,Ia,Oi)}ee[ma-2]=qo,Vo=Vo+1;break}case 4:{if(vr[Pn]<=0&&(vr[Pn]=vr[Pn]<0?-vr[Pn]:0,ar))for(var Di=0;Di<=Ss;Di++)Fr.set(Di,Pn,-Fr.get(Di,Pn));for(;Pn<Ss&&!(vr[Pn]>=vr[Pn+1]);){var Bo=vr[Pn];if(vr[Pn]=vr[Pn+1],vr[Pn+1]=Bo,ar&&Pn<w-1)for(var Co=0;Co<w;Co++)Bo=Fr.get(Co,Pn+1),Fr.set(Co,Pn+1,Fr.get(Co,Pn)),Fr.set(Co,Pn,Bo);if(Te&&Pn<E-1)for(var qi=0;qi<E;qi++)Bo=Nr.get(qi,Pn+1),Nr.set(qi,Pn+1,Nr.get(qi,Pn)),Nr.set(qi,Pn,Bo);Pn++}Vo=0,ma--;break}}}if(Ur){var As=Fr;Fr=Nr,Nr=As}this.m=E,this.n=w,this.s=vr,this.U=Nr,this.V=Fr}return I()(ht,[{key:"solve",value:function(O){for(var E=O,w=this.threshold,V=this.s.length,Et=Mr.zeros(V,V),Gt=0;Gt<V;Gt++)Math.abs(this.s[Gt])<=w?Et.set(Gt,Gt,0):Et.set(Gt,Gt,1/this.s[Gt]);for(var Dt=this.U,ie=this.rightSingularVectors,Ge=ie.mmul(Et),Te=ie.rows,ar=Dt.rows,Ur=Mr.zeros(Te,ar),pr=0;pr<Te;pr++)for(var nn=0;nn<ar;nn++){for(var kn=0,We=0;We<V;We++)kn+=Ge.get(pr,We)*Dt.get(nn,We);Ur.set(pr,nn,kn)}return Ur.mmul(E)}},{key:"solveForDiagonal",value:function(O){return this.solve(Mr.diag(O))}},{key:"inverse",value:function(){for(var O=this.V,E=this.threshold,w=O.rows,V=O.columns,Et=new Mr(w,this.s.length),Gt=0;Gt<w;Gt++)for(var Dt=0;Dt<V;Dt++)Math.abs(this.s[Dt])>E&&Et.set(Gt,Dt,O.get(Gt,Dt)/this.s[Dt]);for(var ie=this.U,Ge=ie.rows,Te=ie.columns,ar=new Mr(w,Ge),Ur=0;Ur<w;Ur++)for(var pr=0;pr<Ge;pr++){for(var nn=0,kn=0;kn<Te;kn++)nn+=Et.get(Ur,kn)*ie.get(pr,kn);ar.set(Ur,pr,nn)}return ar}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var O=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,E=0,w=this.s,V=0,Et=w.length;V<Et;V++)w[V]>O&&E++;return E}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Mr.diag(this.s)}}]),ht}();function Fa(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ht=cn.checkMatrix(ht),yt?new sa(ht).inverse():wa(ht,Mr.eye(ht.rows))}function wa(ht,yt){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return ht=cn.checkMatrix(ht),yt=cn.checkMatrix(yt),O?new sa(ht).solve(yt):ht.isSquare()?new Qn(ht).solve(yt):new ta(ht).solve(yt)}function An(ht){if(ht=Mr.checkMatrix(ht),ht.isSquare()){var yt,O,E,w;if(ht.columns===2)return yt=ht.get(0,0),O=ht.get(0,1),E=ht.get(1,0),w=ht.get(1,1),yt*w-O*E;if(ht.columns===3){var V,Et,Gt;return V=new Na(ht,[1,2],[1,2]),Et=new Na(ht,[1,2],[0,2]),Gt=new Na(ht,[1,2],[0,1]),yt=ht.get(0,0),O=ht.get(0,1),E=ht.get(0,2),yt*An(V)-O*An(Et)+E*An(Gt)}else return new Qn(ht).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ua(ht,yt){for(var O=[],E=0;E<ht;E++)E!==yt&&O.push(E);return O}function ra(ht,yt,O){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(ht>w)return new Array(yt.rows+1).fill(0);for(var V=yt.addRow(O,[0]),Et=0;Et<V.rows;Et++)Math.abs(V.get(Et,0))<E&&V.set(Et,0,0);return V.to1DArray()}function Fn(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=yt.thresholdValue,E=O===void 0?1e-9:O,w=yt.thresholdError,V=w===void 0?1e-9:w;ht=Mr.checkMatrix(ht);for(var Et=ht.rows,Gt=new Mr(Et,Et),Dt=0;Dt<Et;Dt++){var ie=Mr.columnVector(ht.getRow(Dt)),Ge=ht.subMatrixRow(ua(Et,Dt)).transpose(),Te=new sa(Ge),ar=Te.solve(ie),Ur=Mr.sub(ie,Ge.mmul(ar)).abs().max();Gt.setRow(Dt,ra(Ur,ar,Dt,E,V))}return Gt}function ka(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;ht=Mr.checkMatrix(ht);for(var O=new sa(ht,{autoTranspose:!0}),E=O.leftSingularVectors,w=O.rightSingularVectors,V=O.diagonal,Et=0;Et<V.length;Et++)Math.abs(V[Et])>yt?V[Et]=1/V[Et]:V[Et]=0;return w.mmul(Mr.diag(V).mmul(E.transpose()))}function U(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ht,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ht=new Mr(ht);var E=!1;if(_()(yt)==="object"&&!Mr.isMatrix(yt)&&!Array.isArray(yt)?(O=yt,yt=ht,E=!0):yt=new Mr(yt),ht.rows!==yt.rows)throw new TypeError("Both matrices must have the same number of rows");var w=O,V=w.center,Et=V===void 0?!0:V;Et&&(ht=ht.center("column"),E||(yt=yt.center("column")));for(var Gt=ht.transpose().mmul(yt),Dt=0;Dt<Gt.rows;Dt++)for(var ie=0;ie<Gt.columns;ie++)Gt.set(Dt,ie,Gt.get(Dt,ie)*(1/(ht.rows-1)));return Gt}function Ve(ht){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ht,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ht=new Mr(ht);var E=!1;if(_()(yt)==="object"&&!Mr.isMatrix(yt)&&!Array.isArray(yt)?(O=yt,yt=ht,E=!0):yt=new Mr(yt),ht.rows!==yt.rows)throw new TypeError("Both matrices must have the same number of rows");var w=O,V=w.center,Et=V===void 0?!0:V,Gt=w.scale,Dt=Gt===void 0?!0:Gt;Et&&(ht.center("column"),E||yt.center("column")),Dt&&(ht.scale("column"),E||yt.scale("column"));for(var ie=ht.standardDeviation("column",{unbiased:!0}),Ge=E?ie:yt.standardDeviation("column",{unbiased:!0}),Te=ht.transpose().mmul(yt),ar=0;ar<Te.rows;ar++)for(var Ur=0;Ur<Te.columns;Ur++)Te.set(ar,Ur,Te.get(ar,Ur)*(1/(ie[ar]*Ge[Ur]))*(1/(ht.rows-1)));return Te}var we=function(){function ht(yt){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L()(this,ht);var E=O.assumeSymmetric,w=E===void 0?!1:E;if(yt=cn.checkMatrix(yt),!yt.isSquare())throw new Error("Matrix is not a square matrix");var V=yt.columns,Et=new Mr(V,V),Gt=new Float64Array(V),Dt=new Float64Array(V),ie=yt,Ge,Te,ar=!1;if(w?ar=!0:ar=yt.isSymmetric(),ar){for(Ge=0;Ge<V;Ge++)for(Te=0;Te<V;Te++)Et.set(Ge,Te,ie.get(Ge,Te));er(V,Dt,Gt,Et),Je(V,Dt,Gt,Et)}else{var Ur=new Mr(V,V),pr=new Float64Array(V);for(Te=0;Te<V;Te++)for(Ge=0;Ge<V;Ge++)Ur.set(Ge,Te,ie.get(Ge,Te));Pr(V,Ur,pr,Et),Or(V,Dt,Gt,Et,Ur)}this.n=V,this.e=Dt,this.d=Gt,this.V=Et}return I()(ht,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var O=this.n,E=this.e,w=this.d,V=new Mr(O,O),Et,Gt;for(Et=0;Et<O;Et++){for(Gt=0;Gt<O;Gt++)V.set(Et,Gt,0);V.set(Et,Et,w[Et]),E[Et]>0?V.set(Et,Et+1,E[Et]):E[Et]<0&&V.set(Et,Et-1,E[Et])}return V}}]),ht}();function er(ht,yt,O,E){var w,V,Et,Gt,Dt,ie,Ge,Te;for(Dt=0;Dt<ht;Dt++)O[Dt]=E.get(ht-1,Dt);for(Gt=ht-1;Gt>0;Gt--){for(Te=0,Et=0,ie=0;ie<Gt;ie++)Te=Te+Math.abs(O[ie]);if(Te===0)for(yt[Gt]=O[Gt-1],Dt=0;Dt<Gt;Dt++)O[Dt]=E.get(Gt-1,Dt),E.set(Gt,Dt,0),E.set(Dt,Gt,0);else{for(ie=0;ie<Gt;ie++)O[ie]/=Te,Et+=O[ie]*O[ie];for(w=O[Gt-1],V=Math.sqrt(Et),w>0&&(V=-V),yt[Gt]=Te*V,Et=Et-w*V,O[Gt-1]=w-V,Dt=0;Dt<Gt;Dt++)yt[Dt]=0;for(Dt=0;Dt<Gt;Dt++){for(w=O[Dt],E.set(Dt,Gt,w),V=yt[Dt]+E.get(Dt,Dt)*w,ie=Dt+1;ie<=Gt-1;ie++)V+=E.get(ie,Dt)*O[ie],yt[ie]+=E.get(ie,Dt)*w;yt[Dt]=V}for(w=0,Dt=0;Dt<Gt;Dt++)yt[Dt]/=Et,w+=yt[Dt]*O[Dt];for(Ge=w/(Et+Et),Dt=0;Dt<Gt;Dt++)yt[Dt]-=Ge*O[Dt];for(Dt=0;Dt<Gt;Dt++){for(w=O[Dt],V=yt[Dt],ie=Dt;ie<=Gt-1;ie++)E.set(ie,Dt,E.get(ie,Dt)-(w*yt[ie]+V*O[ie]));O[Dt]=E.get(Gt-1,Dt),E.set(Gt,Dt,0)}}O[Gt]=Et}for(Gt=0;Gt<ht-1;Gt++){if(E.set(ht-1,Gt,E.get(Gt,Gt)),E.set(Gt,Gt,1),Et=O[Gt+1],Et!==0){for(ie=0;ie<=Gt;ie++)O[ie]=E.get(ie,Gt+1)/Et;for(Dt=0;Dt<=Gt;Dt++){for(V=0,ie=0;ie<=Gt;ie++)V+=E.get(ie,Gt+1)*E.get(ie,Dt);for(ie=0;ie<=Gt;ie++)E.set(ie,Dt,E.get(ie,Dt)-V*O[ie])}}for(ie=0;ie<=Gt;ie++)E.set(ie,Gt+1,0)}for(Dt=0;Dt<ht;Dt++)O[Dt]=E.get(ht-1,Dt),E.set(ht-1,Dt,0);E.set(ht-1,ht-1,1),yt[0]=0}function Je(ht,yt,O,E){var w,V,Et,Gt,Dt,ie,Ge,Te,ar,Ur,pr,nn,kn,We,vr,Nr,Fr;for(Et=1;Et<ht;Et++)yt[Et-1]=yt[Et];yt[ht-1]=0;var ee=0,Lt=0,ue=Number.EPSILON;for(ie=0;ie<ht;ie++){for(Lt=Math.max(Lt,Math.abs(O[ie])+Math.abs(yt[ie])),Ge=ie;Ge<ht&&!(Math.abs(yt[Ge])<=ue*Lt);)Ge++;if(Ge>ie){Fr=0;do{for(Fr=Fr+1,w=O[ie],Te=(O[ie+1]-w)/(2*yt[ie]),ar=Bn(Te,1),Te<0&&(ar=-ar),O[ie]=yt[ie]/(Te+ar),O[ie+1]=yt[ie]*(Te+ar),Ur=O[ie+1],V=w-O[ie],Et=ie+2;Et<ht;Et++)O[Et]-=V;for(ee=ee+V,Te=O[Ge],pr=1,nn=pr,kn=pr,We=yt[ie+1],vr=0,Nr=0,Et=Ge-1;Et>=ie;Et--)for(kn=nn,nn=pr,Nr=vr,w=pr*yt[Et],V=pr*Te,ar=Bn(Te,yt[Et]),yt[Et+1]=vr*ar,vr=yt[Et]/ar,pr=Te/ar,Te=pr*O[Et]-vr*w,O[Et+1]=V+vr*(pr*w+vr*O[Et]),Dt=0;Dt<ht;Dt++)V=E.get(Dt,Et+1),E.set(Dt,Et+1,vr*E.get(Dt,Et)+pr*V),E.set(Dt,Et,pr*E.get(Dt,Et)-vr*V);Te=-vr*Nr*kn*We*yt[ie]/Ur,yt[ie]=vr*Te,O[ie]=pr*Te}while(Math.abs(yt[ie])>ue*Lt)}O[ie]=O[ie]+ee,yt[ie]=0}for(Et=0;Et<ht-1;Et++){for(Dt=Et,Te=O[Et],Gt=Et+1;Gt<ht;Gt++)O[Gt]<Te&&(Dt=Gt,Te=O[Gt]);if(Dt!==Et)for(O[Dt]=O[Et],O[Et]=Te,Gt=0;Gt<ht;Gt++)Te=E.get(Gt,Et),E.set(Gt,Et,E.get(Gt,Dt)),E.set(Gt,Dt,Te)}}function Pr(ht,yt,O,E){var w=0,V=ht-1,Et,Gt,Dt,ie,Ge,Te,ar;for(Te=w+1;Te<=V-1;Te++){for(ar=0,ie=Te;ie<=V;ie++)ar=ar+Math.abs(yt.get(ie,Te-1));if(ar!==0){for(Dt=0,ie=V;ie>=Te;ie--)O[ie]=yt.get(ie,Te-1)/ar,Dt+=O[ie]*O[ie];for(Gt=Math.sqrt(Dt),O[Te]>0&&(Gt=-Gt),Dt=Dt-O[Te]*Gt,O[Te]=O[Te]-Gt,Ge=Te;Ge<ht;Ge++){for(Et=0,ie=V;ie>=Te;ie--)Et+=O[ie]*yt.get(ie,Ge);for(Et=Et/Dt,ie=Te;ie<=V;ie++)yt.set(ie,Ge,yt.get(ie,Ge)-Et*O[ie])}for(ie=0;ie<=V;ie++){for(Et=0,Ge=V;Ge>=Te;Ge--)Et+=O[Ge]*yt.get(ie,Ge);for(Et=Et/Dt,Ge=Te;Ge<=V;Ge++)yt.set(ie,Ge,yt.get(ie,Ge)-Et*O[Ge])}O[Te]=ar*O[Te],yt.set(Te,Te-1,ar*Gt)}}for(ie=0;ie<ht;ie++)for(Ge=0;Ge<ht;Ge++)E.set(ie,Ge,ie===Ge?1:0);for(Te=V-1;Te>=w+1;Te--)if(yt.get(Te,Te-1)!==0){for(ie=Te+1;ie<=V;ie++)O[ie]=yt.get(ie,Te-1);for(Ge=Te;Ge<=V;Ge++){for(Gt=0,ie=Te;ie<=V;ie++)Gt+=O[ie]*E.get(ie,Ge);for(Gt=Gt/O[Te]/yt.get(Te,Te-1),ie=Te;ie<=V;ie++)E.set(ie,Ge,E.get(ie,Ge)+Gt*O[ie])}}}function Or(ht,yt,O,E,w){var V=ht-1,Et=0,Gt=ht-1,Dt=Number.EPSILON,ie=0,Ge=0,Te=0,ar=0,Ur=0,pr=0,nn=0,kn=0,We,vr,Nr,Fr,ee,Lt,ue,Ee,me,Ie,rr,ir,Zr,En,ln;for(We=0;We<ht;We++)for((We<Et||We>Gt)&&(O[We]=w.get(We,We),yt[We]=0),vr=Math.max(We-1,0);vr<ht;vr++)Ge=Ge+Math.abs(w.get(We,vr));for(;V>=Et;){for(Fr=V;Fr>Et&&(pr=Math.abs(w.get(Fr-1,Fr-1))+Math.abs(w.get(Fr,Fr)),pr===0&&(pr=Ge),!(Math.abs(w.get(Fr,Fr-1))<Dt*pr));)Fr--;if(Fr===V)w.set(V,V,w.get(V,V)+ie),O[V]=w.get(V,V),yt[V]=0,V--,kn=0;else if(Fr===V-1){if(ue=w.get(V,V-1)*w.get(V-1,V),Te=(w.get(V-1,V-1)-w.get(V,V))/2,ar=Te*Te+ue,nn=Math.sqrt(Math.abs(ar)),w.set(V,V,w.get(V,V)+ie),w.set(V-1,V-1,w.get(V-1,V-1)+ie),Ee=w.get(V,V),ar>=0){for(nn=Te>=0?Te+nn:Te-nn,O[V-1]=Ee+nn,O[V]=O[V-1],nn!==0&&(O[V]=Ee-ue/nn),yt[V-1]=0,yt[V]=0,Ee=w.get(V,V-1),pr=Math.abs(Ee)+Math.abs(nn),Te=Ee/pr,ar=nn/pr,Ur=Math.sqrt(Te*Te+ar*ar),Te=Te/Ur,ar=ar/Ur,vr=V-1;vr<ht;vr++)nn=w.get(V-1,vr),w.set(V-1,vr,ar*nn+Te*w.get(V,vr)),w.set(V,vr,ar*w.get(V,vr)-Te*nn);for(We=0;We<=V;We++)nn=w.get(We,V-1),w.set(We,V-1,ar*nn+Te*w.get(We,V)),w.set(We,V,ar*w.get(We,V)-Te*nn);for(We=Et;We<=Gt;We++)nn=E.get(We,V-1),E.set(We,V-1,ar*nn+Te*E.get(We,V)),E.set(We,V,ar*E.get(We,V)-Te*nn)}else O[V-1]=Ee+Te,O[V]=Ee+Te,yt[V-1]=nn,yt[V]=-nn;V=V-2,kn=0}else{if(Ee=w.get(V,V),me=0,ue=0,Fr<V&&(me=w.get(V-1,V-1),ue=w.get(V,V-1)*w.get(V-1,V)),kn===10){for(ie+=Ee,We=Et;We<=V;We++)w.set(We,We,w.get(We,We)-Ee);pr=Math.abs(w.get(V,V-1))+Math.abs(w.get(V-1,V-2)),Ee=me=.75*pr,ue=-.4375*pr*pr}if(kn===30&&(pr=(me-Ee)/2,pr=pr*pr+ue,pr>0)){for(pr=Math.sqrt(pr),me<Ee&&(pr=-pr),pr=Ee-ue/((me-Ee)/2+pr),We=Et;We<=V;We++)w.set(We,We,w.get(We,We)-pr);ie+=pr,Ee=me=ue=.964}for(kn=kn+1,ee=V-2;ee>=Fr&&(nn=w.get(ee,ee),Ur=Ee-nn,pr=me-nn,Te=(Ur*pr-ue)/w.get(ee+1,ee)+w.get(ee,ee+1),ar=w.get(ee+1,ee+1)-nn-Ur-pr,Ur=w.get(ee+2,ee+1),pr=Math.abs(Te)+Math.abs(ar)+Math.abs(Ur),Te=Te/pr,ar=ar/pr,Ur=Ur/pr,!(ee===Fr||Math.abs(w.get(ee,ee-1))*(Math.abs(ar)+Math.abs(Ur))<Dt*(Math.abs(Te)*(Math.abs(w.get(ee-1,ee-1))+Math.abs(nn)+Math.abs(w.get(ee+1,ee+1))))));)ee--;for(We=ee+2;We<=V;We++)w.set(We,We-2,0),We>ee+2&&w.set(We,We-3,0);for(Nr=ee;Nr<=V-1&&(En=Nr!==V-1,Nr!==ee&&(Te=w.get(Nr,Nr-1),ar=w.get(Nr+1,Nr-1),Ur=En?w.get(Nr+2,Nr-1):0,Ee=Math.abs(Te)+Math.abs(ar)+Math.abs(Ur),Ee!==0&&(Te=Te/Ee,ar=ar/Ee,Ur=Ur/Ee)),Ee!==0);Nr++)if(pr=Math.sqrt(Te*Te+ar*ar+Ur*Ur),Te<0&&(pr=-pr),pr!==0){for(Nr!==ee?w.set(Nr,Nr-1,-pr*Ee):Fr!==ee&&w.set(Nr,Nr-1,-w.get(Nr,Nr-1)),Te=Te+pr,Ee=Te/pr,me=ar/pr,nn=Ur/pr,ar=ar/Te,Ur=Ur/Te,vr=Nr;vr<ht;vr++)Te=w.get(Nr,vr)+ar*w.get(Nr+1,vr),En&&(Te=Te+Ur*w.get(Nr+2,vr),w.set(Nr+2,vr,w.get(Nr+2,vr)-Te*nn)),w.set(Nr,vr,w.get(Nr,vr)-Te*Ee),w.set(Nr+1,vr,w.get(Nr+1,vr)-Te*me);for(We=0;We<=Math.min(V,Nr+3);We++)Te=Ee*w.get(We,Nr)+me*w.get(We,Nr+1),En&&(Te=Te+nn*w.get(We,Nr+2),w.set(We,Nr+2,w.get(We,Nr+2)-Te*Ur)),w.set(We,Nr,w.get(We,Nr)-Te),w.set(We,Nr+1,w.get(We,Nr+1)-Te*ar);for(We=Et;We<=Gt;We++)Te=Ee*E.get(We,Nr)+me*E.get(We,Nr+1),En&&(Te=Te+nn*E.get(We,Nr+2),E.set(We,Nr+2,E.get(We,Nr+2)-Te*Ur)),E.set(We,Nr,E.get(We,Nr)-Te),E.set(We,Nr+1,E.get(We,Nr+1)-Te*ar)}}}if(Ge!==0){for(V=ht-1;V>=0;V--)if(Te=O[V],ar=yt[V],ar===0)for(Fr=V,w.set(V,V,1),We=V-1;We>=0;We--){for(ue=w.get(We,We)-Te,Ur=0,vr=Fr;vr<=V;vr++)Ur=Ur+w.get(We,vr)*w.get(vr,V);if(yt[We]<0)nn=ue,pr=Ur;else if(Fr=We,yt[We]===0?w.set(We,V,ue!==0?-Ur/ue:-Ur/(Dt*Ge)):(Ee=w.get(We,We+1),me=w.get(We+1,We),ar=(O[We]-Te)*(O[We]-Te)+yt[We]*yt[We],Lt=(Ee*pr-nn*Ur)/ar,w.set(We,V,Lt),w.set(We+1,V,Math.abs(Ee)>Math.abs(nn)?(-Ur-ue*Lt)/Ee:(-pr-me*Lt)/nn)),Lt=Math.abs(w.get(We,V)),Dt*Lt*Lt>1)for(vr=We;vr<=V;vr++)w.set(vr,V,w.get(vr,V)/Lt)}else if(ar<0)for(Fr=V-1,Math.abs(w.get(V,V-1))>Math.abs(w.get(V-1,V))?(w.set(V-1,V-1,ar/w.get(V,V-1)),w.set(V-1,V,-(w.get(V,V)-Te)/w.get(V,V-1))):(ln=rn(0,-w.get(V-1,V),w.get(V-1,V-1)-Te,ar),w.set(V-1,V-1,ln[0]),w.set(V-1,V,ln[1])),w.set(V,V-1,0),w.set(V,V,1),We=V-2;We>=0;We--){for(Ie=0,rr=0,vr=Fr;vr<=V;vr++)Ie=Ie+w.get(We,vr)*w.get(vr,V-1),rr=rr+w.get(We,vr)*w.get(vr,V);if(ue=w.get(We,We)-Te,yt[We]<0)nn=ue,Ur=Ie,pr=rr;else if(Fr=We,yt[We]===0?(ln=rn(-Ie,-rr,ue,ar),w.set(We,V-1,ln[0]),w.set(We,V,ln[1])):(Ee=w.get(We,We+1),me=w.get(We+1,We),ir=(O[We]-Te)*(O[We]-Te)+yt[We]*yt[We]-ar*ar,Zr=(O[We]-Te)*2*ar,ir===0&&Zr===0&&(ir=Dt*Ge*(Math.abs(ue)+Math.abs(ar)+Math.abs(Ee)+Math.abs(me)+Math.abs(nn))),ln=rn(Ee*Ur-nn*Ie+ar*rr,Ee*pr-nn*rr-ar*Ie,ir,Zr),w.set(We,V-1,ln[0]),w.set(We,V,ln[1]),Math.abs(Ee)>Math.abs(nn)+Math.abs(ar)?(w.set(We+1,V-1,(-Ie-ue*w.get(We,V-1)+ar*w.get(We,V))/Ee),w.set(We+1,V,(-rr-ue*w.get(We,V)-ar*w.get(We,V-1))/Ee)):(ln=rn(-Ur-me*w.get(We,V-1),-pr-me*w.get(We,V),nn,ar),w.set(We+1,V-1,ln[0]),w.set(We+1,V,ln[1]))),Lt=Math.max(Math.abs(w.get(We,V-1)),Math.abs(w.get(We,V))),Dt*Lt*Lt>1)for(vr=We;vr<=V;vr++)w.set(vr,V-1,w.get(vr,V-1)/Lt),w.set(vr,V,w.get(vr,V)/Lt)}for(We=0;We<ht;We++)if(We<Et||We>Gt)for(vr=We;vr<ht;vr++)E.set(We,vr,w.get(We,vr));for(vr=ht-1;vr>=Et;vr--)for(We=Et;We<=Gt;We++){for(nn=0,Nr=Et;Nr<=Math.min(vr,Gt);Nr++)nn=nn+E.get(We,Nr)*w.get(Nr,vr);E.set(We,vr,nn)}}}function rn(ht,yt,O,E){var w,V;return Math.abs(O)>Math.abs(E)?(w=E/O,V=O+w*E,[(ht+w*yt)/V,(yt-w*ht)/V]):(w=O/E,V=E+w*O,[(w*ht+yt)/V,(w*yt-ht)/V])}var fn=function(){function ht(yt){if(L()(this,ht),yt=cn.checkMatrix(yt),!yt.isSymmetric())throw new Error("Matrix is not symmetric");var O=yt,E=O.rows,w=new Mr(E,E),V=!0,Et,Gt,Dt;for(Gt=0;Gt<E;Gt++){var ie=0;for(Dt=0;Dt<Gt;Dt++){var Ge=0;for(Et=0;Et<Dt;Et++)Ge+=w.get(Dt,Et)*w.get(Gt,Et);Ge=(O.get(Gt,Dt)-Ge)/w.get(Dt,Dt),w.set(Gt,Dt,Ge),ie=ie+Ge*Ge}for(ie=O.get(Gt,Gt)-ie,V&=ie>0,w.set(Gt,Gt,Math.sqrt(Math.max(ie,0))),Dt=Gt+1;Dt<E;Dt++)w.set(Gt,Dt,0)}this.L=w,this.positiveDefinite=!!V}return I()(ht,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(O){O=cn.checkMatrix(O);var E=this.L,w=E.rows;if(O.rows!==w)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var V=O.columns,Et=O.clone(),Gt,Dt,ie;for(ie=0;ie<w;ie++)for(Dt=0;Dt<V;Dt++){for(Gt=0;Gt<ie;Gt++)Et.set(ie,Dt,Et.get(ie,Dt)-Et.get(Gt,Dt)*E.get(ie,Gt));Et.set(ie,Dt,Et.get(ie,Dt)/E.get(ie,ie))}for(ie=w-1;ie>=0;ie--)for(Dt=0;Dt<V;Dt++){for(Gt=ie+1;Gt<w;Gt++)Et.set(ie,Dt,Et.get(ie,Dt)-Et.get(Gt,Dt)*E.get(Gt,ie));Et.set(ie,Dt,Et.get(ie,Dt)/E.get(ie,ie))}return Et}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),ht}(),jr=I()(function ht(yt){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L()(this,ht),yt=cn.checkMatrix(yt);var E=O.Y,w=O.scaleScores,V=w===void 0?!1:w,Et=O.maxIterations,Gt=Et===void 0?1e3:Et,Dt=O.terminationCriteria,ie=Dt===void 0?1e-10:Dt,Ge;if(E){if(Array.isArray(E)&&typeof E[0]=="number"?E=Mr.columnVector(E):E=cn.checkMatrix(E),!E.isColumnVector()||E.rows!==yt.rows)throw new Error("Y must be a column vector of length X.rows");Ge=E}else Ge=yt.getColumnVector(0);for(var Te=1,ar,Ur,pr,nn,kn=0;kn<Gt&&Te>ie;kn++)pr=yt.transpose().mmul(Ge).div(Ge.transpose().mmul(Ge).get(0,0)),pr=pr.div(pr.norm()),ar=yt.mmul(pr).div(pr.transpose().mmul(pr).get(0,0)),kn>0&&(Te=ar.clone().sub(nn).pow(2).sum()),nn=ar.clone(),E?(Ur=E.transpose().mmul(ar).div(ar.transpose().mmul(ar).get(0,0)),Ur=Ur.div(Ur.norm()),Ge=E.mmul(Ur).div(Ur.transpose().mmul(Ur).get(0,0))):Ge=ar;if(E){var We=yt.transpose().mmul(ar).div(ar.transpose().mmul(ar).get(0,0));We=We.div(We.norm());var vr=yt.clone().sub(ar.clone().mmul(We.transpose())),Nr=Ge.transpose().mmul(ar).div(ar.transpose().mmul(ar).get(0,0)),Fr=E.clone().sub(ar.clone().mulS(Nr.get(0,0)).mmul(Ur.transpose()));this.t=ar,this.p=We.transpose(),this.w=pr.transpose(),this.q=Ur,this.u=Ge,this.s=ar.transpose().mmul(ar),this.xResidual=vr,this.yResidual=Fr,this.betas=Nr}else this.w=pr.transpose(),this.s=ar.transpose().mmul(ar).sqrt(),V?this.t=ar.clone().div(this.s.get(0,0)):this.t=ar,this.xResidual=yt.sub(ar.mmul(pr.transpose()))})},451103:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{forceCenter:function(){return wt},forceCollide:function(){return T},forceLink:function(){return L},forceManyBody:function(){return q},forceRadial:function(){return H},forceSimulation:function(){return W},forceX:function(){return et},forceY:function(){return ct}});function wt(at,St){var bt,zt=1;at==null&&(at=0),St==null&&(St=0);function kt(){var Kt,it=bt.length,gt,Vt=0,re=0;for(Kt=0;Kt<it;++Kt)gt=bt[Kt],Vt+=gt.x,re+=gt.y;for(Vt=(Vt/it-at)*zt,re=(re/it-St)*zt,Kt=0;Kt<it;++Kt)gt=bt[Kt],gt.x-=Vt,gt.y-=re}return kt.initialize=function(Kt){bt=Kt},kt.x=function(Kt){return arguments.length?(at=+Kt,kt):at},kt.y=function(Kt){return arguments.length?(St=+Kt,kt):St},kt.strength=function(Kt){return arguments.length?(zt=+Kt,kt):zt},kt}var st=ut(547148);function tt(at){return function(){return at}}function Q(at){return(at()-.5)*1e-6}function J(at){return at.x+at.vx}function X(at){return at.y+at.vy}function T(at){var St,bt,zt,kt=1,Kt=1;typeof at!="function"&&(at=tt(at==null?1:+at));function it(){for(var re,It=St.length,Wt,$t,ae,Bt,Ot,Ht,pe=0;pe<Kt;++pe)for(Wt=(0,st.Z)(St,J,X).visitAfter(gt),re=0;re<It;++re)$t=St[re],Ot=bt[$t.index],Ht=Ot*Ot,ae=$t.x+$t.vx,Bt=$t.y+$t.vy,Wt.visit(ve);function ve(Tt,Zt,Ce,Ut,se){var _e=Tt.data,$e=Tt.r,fr=Ot+$e;if(_e){if(_e.index>$t.index){var gr=ae-_e.x-_e.vx,Yt=Bt-_e.y-_e.vy,Mr=gr*gr+Yt*Yt;Mr<fr*fr&&(gr===0&&(gr=Q(zt),Mr+=gr*gr),Yt===0&&(Yt=Q(zt),Mr+=Yt*Yt),Mr=(fr-(Mr=Math.sqrt(Mr)))/Mr*kt,$t.vx+=(gr*=Mr)*(fr=($e*=$e)/(Ht+$e)),$t.vy+=(Yt*=Mr)*fr,_e.vx-=gr*(fr=1-fr),_e.vy-=Yt*fr)}return}return Zt>ae+fr||Ut<ae-fr||Ce>Bt+fr||se<Bt-fr}}function gt(re){if(re.data)return re.r=bt[re.data.index];for(var It=re.r=0;It<4;++It)re[It]&&re[It].r>re.r&&(re.r=re[It].r)}function Vt(){if(St){var re,It=St.length,Wt;for(bt=new Array(It),re=0;re<It;++re)Wt=St[re],bt[Wt.index]=+at(Wt,re,St)}}return it.initialize=function(re,It){St=re,zt=It,Vt()},it.iterations=function(re){return arguments.length?(Kt=+re,it):Kt},it.strength=function(re){return arguments.length?(kt=+re,it):kt},it.radius=function(re){return arguments.length?(at=typeof re=="function"?re:tt(+re),Vt(),it):at},it}var M=ut(952677),C=ut.n(M);function _(at){return at.index}function b(at,St){var bt=at.get(St);if(!bt)throw new Error("node not found: "+St);return bt}function L(at){var St=_,bt=Wt,zt,kt=tt(30),Kt,it,gt,Vt,re,It=1;at==null&&(at=[]);function Wt(Ht){return 1/Math.min(gt[Ht.source.index],gt[Ht.target.index])}function $t(Ht){for(var pe=0,ve=at.length;pe<It;++pe)for(var Tt=0,Zt,Ce,Ut,se,_e,$e,fr;Tt<ve;++Tt)Zt=at[Tt],Ce=Zt.source,Ut=Zt.target,se=Ut.x+Ut.vx-Ce.x-Ce.vx||Q(re),_e=Ut.y+Ut.vy-Ce.y-Ce.vy||Q(re),$e=Math.sqrt(se*se+_e*_e),$e=($e-Kt[Tt])/$e*Ht*zt[Tt],se*=$e,_e*=$e,Ut.vx-=se*(fr=Vt[Tt]),Ut.vy-=_e*fr,Ce.vx+=se*(fr=1-fr),Ce.vy+=_e*fr}function ae(){if(it){var Ht,pe=it.length,ve=at.length,Tt=new Map(it.map(function(Ce,Ut){return[St(Ce,Ut,it),Ce]})),Zt;for(Ht=0,gt=new Array(pe);Ht<ve;++Ht)Zt=at[Ht],Zt.index=Ht,C()(Zt.source)!=="object"&&(Zt.source=b(Tt,Zt.source)),C()(Zt.target)!=="object"&&(Zt.target=b(Tt,Zt.target)),gt[Zt.source.index]=(gt[Zt.source.index]||0)+1,gt[Zt.target.index]=(gt[Zt.target.index]||0)+1;for(Ht=0,Vt=new Array(ve);Ht<ve;++Ht)Zt=at[Ht],Vt[Ht]=gt[Zt.source.index]/(gt[Zt.source.index]+gt[Zt.target.index]);zt=new Array(ve),Bt(),Kt=new Array(ve),Ot()}}function Bt(){if(it)for(var Ht=0,pe=at.length;Ht<pe;++Ht)zt[Ht]=+bt(at[Ht],Ht,at)}function Ot(){if(it)for(var Ht=0,pe=at.length;Ht<pe;++Ht)Kt[Ht]=+kt(at[Ht],Ht,at)}return $t.initialize=function(Ht,pe){it=Ht,re=pe,ae()},$t.links=function(Ht){return arguments.length?(at=Ht,ae(),$t):at},$t.id=function(Ht){return arguments.length?(St=Ht,$t):St},$t.iterations=function(Ht){return arguments.length?(It=+Ht,$t):It},$t.strength=function(Ht){return arguments.length?(bt=typeof Ht=="function"?Ht:tt(+Ht),Bt(),$t):bt},$t.distance=function(Ht){return arguments.length?(kt=typeof Ht=="function"?Ht:tt(+Ht),Ot(),$t):kt},$t}var S=ut(854354),I=ut(235374),D=1664525,P=1013904223,y=4294967296;function v(){var at=1;return function(){return(at=(D*at+P)%y)/y}}function K(at){return at.x}function R(at){return at.y}var B=10,Y=Math.PI*(3-Math.sqrt(5));function W(at){var St,bt=1,zt=.001,kt=1-Math.pow(zt,1/300),Kt=0,it=.6,gt=new Map,Vt=(0,I.HT)(Wt),re=(0,S.Z)("tick","end"),It=v();at==null&&(at=[]);function Wt(){$t(),re.call("tick",St),bt<zt&&(Vt.stop(),re.call("end",St))}function $t(Ot){var Ht,pe=at.length,ve;Ot===void 0&&(Ot=1);for(var Tt=0;Tt<Ot;++Tt)for(bt+=(Kt-bt)*kt,gt.forEach(function(Zt){Zt(bt)}),Ht=0;Ht<pe;++Ht)ve=at[Ht],ve.fx==null?ve.x+=ve.vx*=it:(ve.x=ve.fx,ve.vx=0),ve.fy==null?ve.y+=ve.vy*=it:(ve.y=ve.fy,ve.vy=0);return St}function ae(){for(var Ot=0,Ht=at.length,pe;Ot<Ht;++Ot){if(pe=at[Ot],pe.index=Ot,pe.fx!=null&&(pe.x=pe.fx),pe.fy!=null&&(pe.y=pe.fy),isNaN(pe.x)||isNaN(pe.y)){var ve=B*Math.sqrt(.5+Ot),Tt=Ot*Y;pe.x=ve*Math.cos(Tt),pe.y=ve*Math.sin(Tt)}(isNaN(pe.vx)||isNaN(pe.vy))&&(pe.vx=pe.vy=0)}}function Bt(Ot){return Ot.initialize&&Ot.initialize(at,It),Ot}return ae(),St={tick:$t,restart:function(){return Vt.restart(Wt),St},stop:function(){return Vt.stop(),St},nodes:function(Ht){return arguments.length?(at=Ht,ae(),gt.forEach(Bt),St):at},alpha:function(Ht){return arguments.length?(bt=+Ht,St):bt},alphaMin:function(Ht){return arguments.length?(zt=+Ht,St):zt},alphaDecay:function(Ht){return arguments.length?(kt=+Ht,St):+kt},alphaTarget:function(Ht){return arguments.length?(Kt=+Ht,St):Kt},velocityDecay:function(Ht){return arguments.length?(it=1-Ht,St):1-it},randomSource:function(Ht){return arguments.length?(It=Ht,gt.forEach(Bt),St):It},force:function(Ht,pe){return arguments.length>1?(pe==null?gt.delete(Ht):gt.set(Ht,Bt(pe)),St):gt.get(Ht)},find:function(Ht,pe,ve){var Tt=0,Zt=at.length,Ce,Ut,se,_e,$e;for(ve==null?ve=1/0:ve*=ve,Tt=0;Tt<Zt;++Tt)_e=at[Tt],Ce=Ht-_e.x,Ut=pe-_e.y,se=Ce*Ce+Ut*Ut,se<ve&&($e=_e,ve=se);return $e},on:function(Ht,pe){return arguments.length>1?(re.on(Ht,pe),St):re.on(Ht)}}}function q(){var at,St,bt,zt,kt=tt(-30),Kt,it=1,gt=1/0,Vt=.81;function re(ae){var Bt,Ot=at.length,Ht=(0,st.Z)(at,K,R).visitAfter(Wt);for(zt=ae,Bt=0;Bt<Ot;++Bt)St=at[Bt],Ht.visit($t)}function It(){if(at){var ae,Bt=at.length,Ot;for(Kt=new Array(Bt),ae=0;ae<Bt;++ae)Ot=at[ae],Kt[Ot.index]=+kt(Ot,ae,at)}}function Wt(ae){var Bt=0,Ot,Ht,pe=0,ve,Tt,Zt;if(ae.length){for(ve=Tt=Zt=0;Zt<4;++Zt)(Ot=ae[Zt])&&(Ht=Math.abs(Ot.value))&&(Bt+=Ot.value,pe+=Ht,ve+=Ht*Ot.x,Tt+=Ht*Ot.y);ae.x=ve/pe,ae.y=Tt/pe}else{Ot=ae,Ot.x=Ot.data.x,Ot.y=Ot.data.y;do Bt+=Kt[Ot.data.index];while(Ot=Ot.next)}ae.value=Bt}function $t(ae,Bt,Ot,Ht){if(!ae.value)return!0;var pe=ae.x-St.x,ve=ae.y-St.y,Tt=Ht-Bt,Zt=pe*pe+ve*ve;if(Tt*Tt/Vt<Zt)return Zt<gt&&(pe===0&&(pe=Q(bt),Zt+=pe*pe),ve===0&&(ve=Q(bt),Zt+=ve*ve),Zt<it&&(Zt=Math.sqrt(it*Zt)),St.vx+=pe*ae.value*zt/Zt,St.vy+=ve*ae.value*zt/Zt),!0;if(ae.length||Zt>=gt)return;(ae.data!==St||ae.next)&&(pe===0&&(pe=Q(bt),Zt+=pe*pe),ve===0&&(ve=Q(bt),Zt+=ve*ve),Zt<it&&(Zt=Math.sqrt(it*Zt)));do ae.data!==St&&(Tt=Kt[ae.data.index]*zt/Zt,St.vx+=pe*Tt,St.vy+=ve*Tt);while(ae=ae.next)}return re.initialize=function(ae,Bt){at=ae,bt=Bt,It()},re.strength=function(ae){return arguments.length?(kt=typeof ae=="function"?ae:tt(+ae),It(),re):kt},re.distanceMin=function(ae){return arguments.length?(it=ae*ae,re):Math.sqrt(it)},re.distanceMax=function(ae){return arguments.length?(gt=ae*ae,re):Math.sqrt(gt)},re.theta=function(ae){return arguments.length?(Vt=ae*ae,re):Math.sqrt(Vt)},re}function H(at,St,bt){var zt,kt=tt(.1),Kt,it;typeof at!="function"&&(at=tt(+at)),St==null&&(St=0),bt==null&&(bt=0);function gt(re){for(var It=0,Wt=zt.length;It<Wt;++It){var $t=zt[It],ae=$t.x-St||1e-6,Bt=$t.y-bt||1e-6,Ot=Math.sqrt(ae*ae+Bt*Bt),Ht=(it[It]-Ot)*Kt[It]*re/Ot;$t.vx+=ae*Ht,$t.vy+=Bt*Ht}}function Vt(){if(zt){var re,It=zt.length;for(Kt=new Array(It),it=new Array(It),re=0;re<It;++re)it[re]=+at(zt[re],re,zt),Kt[re]=isNaN(it[re])?0:+kt(zt[re],re,zt)}}return gt.initialize=function(re){zt=re,Vt()},gt.strength=function(re){return arguments.length?(kt=typeof re=="function"?re:tt(+re),Vt(),gt):kt},gt.radius=function(re){return arguments.length?(at=typeof re=="function"?re:tt(+re),Vt(),gt):at},gt.x=function(re){return arguments.length?(St=+re,gt):St},gt.y=function(re){return arguments.length?(bt=+re,gt):bt},gt}function et(at){var St=tt(.1),bt,zt,kt;typeof at!="function"&&(at=tt(at==null?0:+at));function Kt(gt){for(var Vt=0,re=bt.length,It;Vt<re;++Vt)It=bt[Vt],It.vx+=(kt[Vt]-It.x)*zt[Vt]*gt}function it(){if(bt){var gt,Vt=bt.length;for(zt=new Array(Vt),kt=new Array(Vt),gt=0;gt<Vt;++gt)zt[gt]=isNaN(kt[gt]=+at(bt[gt],gt,bt))?0:+St(bt[gt],gt,bt)}}return Kt.initialize=function(gt){bt=gt,it()},Kt.strength=function(gt){return arguments.length?(St=typeof gt=="function"?gt:tt(+gt),it(),Kt):St},Kt.x=function(gt){return arguments.length?(at=typeof gt=="function"?gt:tt(+gt),it(),Kt):at},Kt}function ct(at){var St=tt(.1),bt,zt,kt;typeof at!="function"&&(at=tt(at==null?0:+at));function Kt(gt){for(var Vt=0,re=bt.length,It;Vt<re;++Vt)It=bt[Vt],It.vy+=(kt[Vt]-It.y)*zt[Vt]*gt}function it(){if(bt){var gt,Vt=bt.length;for(zt=new Array(Vt),kt=new Array(Vt),gt=0;gt<Vt;++gt)zt[gt]=isNaN(kt[gt]=+at(bt[gt],gt,bt))?0:+St(bt[gt],gt,bt)}}return Kt.initialize=function(gt){bt=gt,it()},Kt.strength=function(gt){return arguments.length?(St=typeof gt=="function"?gt:tt(+gt),it(),Kt):St},Kt.y=function(gt){return arguments.length?(at=typeof gt=="function"?gt:tt(+gt),it(),Kt):at},Kt}},971829:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{quadtree:function(){return wt.Z}});var wt=ut(547148)},547148:function(Sr,G,ut){"use strict";ut.d(G,{Z:function(){return K}});function wt(W){const q=+this._x.call(null,W),H=+this._y.call(null,W);return st(this.cover(q,H),q,H,W)}function st(W,q,H,et){if(isNaN(q)||isNaN(H))return W;var ct,at=W._root,St={data:et},bt=W._x0,zt=W._y0,kt=W._x1,Kt=W._y1,it,gt,Vt,re,It,Wt,$t,ae;if(!at)return W._root=St,W;for(;at.length;)if((It=q>=(it=(bt+kt)/2))?bt=it:kt=it,(Wt=H>=(gt=(zt+Kt)/2))?zt=gt:Kt=gt,ct=at,!(at=at[$t=Wt<<1|It]))return ct[$t]=St,W;if(Vt=+W._x.call(null,at.data),re=+W._y.call(null,at.data),q===Vt&&H===re)return St.next=at,ct?ct[$t]=St:W._root=St,W;do ct=ct?ct[$t]=new Array(4):W._root=new Array(4),(It=q>=(it=(bt+kt)/2))?bt=it:kt=it,(Wt=H>=(gt=(zt+Kt)/2))?zt=gt:Kt=gt;while(($t=Wt<<1|It)===(ae=(re>=gt)<<1|Vt>=it));return ct[ae]=at,ct[$t]=St,W}function tt(W){var q,H,et=W.length,ct,at,St=new Array(et),bt=new Array(et),zt=1/0,kt=1/0,Kt=-1/0,it=-1/0;for(H=0;H<et;++H)isNaN(ct=+this._x.call(null,q=W[H]))||isNaN(at=+this._y.call(null,q))||(St[H]=ct,bt[H]=at,ct<zt&&(zt=ct),ct>Kt&&(Kt=ct),at<kt&&(kt=at),at>it&&(it=at));if(zt>Kt||kt>it)return this;for(this.cover(zt,kt).cover(Kt,it),H=0;H<et;++H)st(this,St[H],bt[H],W[H]);return this}function Q(W,q){if(isNaN(W=+W)||isNaN(q=+q))return this;var H=this._x0,et=this._y0,ct=this._x1,at=this._y1;if(isNaN(H))ct=(H=Math.floor(W))+1,at=(et=Math.floor(q))+1;else{for(var St=ct-H||1,bt=this._root,zt,kt;H>W||W>=ct||et>q||q>=at;)switch(kt=(q<et)<<1|W<H,zt=new Array(4),zt[kt]=bt,bt=zt,St*=2,kt){case 0:ct=H+St,at=et+St;break;case 1:H=ct-St,at=et+St;break;case 2:ct=H+St,et=at-St;break;case 3:H=ct-St,et=at-St;break}this._root&&this._root.length&&(this._root=bt)}return this._x0=H,this._y0=et,this._x1=ct,this._y1=at,this}function J(){var W=[];return this.visit(function(q){if(!q.length)do W.push(q.data);while(q=q.next)}),W}function X(W){return arguments.length?this.cover(+W[0][0],+W[0][1]).cover(+W[1][0],+W[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function T(W,q,H,et,ct){this.node=W,this.x0=q,this.y0=H,this.x1=et,this.y1=ct}function M(W,q,H){var et,ct=this._x0,at=this._y0,St,bt,zt,kt,Kt=this._x1,it=this._y1,gt=[],Vt=this._root,re,It;for(Vt&&gt.push(new T(Vt,ct,at,Kt,it)),H==null?H=1/0:(ct=W-H,at=q-H,Kt=W+H,it=q+H,H*=H);re=gt.pop();)if(!(!(Vt=re.node)||(St=re.x0)>Kt||(bt=re.y0)>it||(zt=re.x1)<ct||(kt=re.y1)<at))if(Vt.length){var Wt=(St+zt)/2,$t=(bt+kt)/2;gt.push(new T(Vt[3],Wt,$t,zt,kt),new T(Vt[2],St,$t,Wt,kt),new T(Vt[1],Wt,bt,zt,$t),new T(Vt[0],St,bt,Wt,$t)),(It=(q>=$t)<<1|W>=Wt)&&(re=gt[gt.length-1],gt[gt.length-1]=gt[gt.length-1-It],gt[gt.length-1-It]=re)}else{var ae=W-+this._x.call(null,Vt.data),Bt=q-+this._y.call(null,Vt.data),Ot=ae*ae+Bt*Bt;if(Ot<H){var Ht=Math.sqrt(H=Ot);ct=W-Ht,at=q-Ht,Kt=W+Ht,it=q+Ht,et=Vt.data}}return et}function C(W){if(isNaN(Kt=+this._x.call(null,W))||isNaN(it=+this._y.call(null,W)))return this;var q,H=this._root,et,ct,at,St=this._x0,bt=this._y0,zt=this._x1,kt=this._y1,Kt,it,gt,Vt,re,It,Wt,$t;if(!H)return this;if(H.length)for(;;){if((re=Kt>=(gt=(St+zt)/2))?St=gt:zt=gt,(It=it>=(Vt=(bt+kt)/2))?bt=Vt:kt=Vt,q=H,!(H=H[Wt=It<<1|re]))return this;if(!H.length)break;(q[Wt+1&3]||q[Wt+2&3]||q[Wt+3&3])&&(et=q,$t=Wt)}for(;H.data!==W;)if(ct=H,!(H=H.next))return this;return(at=H.next)&&delete H.next,ct?(at?ct.next=at:delete ct.next,this):q?(at?q[Wt]=at:delete q[Wt],(H=q[0]||q[1]||q[2]||q[3])&&H===(q[3]||q[2]||q[1]||q[0])&&!H.length&&(et?et[$t]=H:this._root=H),this):(this._root=at,this)}function _(W){for(var q=0,H=W.length;q<H;++q)this.remove(W[q]);return this}function b(){return this._root}function L(){var W=0;return this.visit(function(q){if(!q.length)do++W;while(q=q.next)}),W}function S(W){var q=[],H,et=this._root,ct,at,St,bt,zt;for(et&&q.push(new T(et,this._x0,this._y0,this._x1,this._y1));H=q.pop();)if(!W(et=H.node,at=H.x0,St=H.y0,bt=H.x1,zt=H.y1)&&et.length){var kt=(at+bt)/2,Kt=(St+zt)/2;(ct=et[3])&&q.push(new T(ct,kt,Kt,bt,zt)),(ct=et[2])&&q.push(new T(ct,at,Kt,kt,zt)),(ct=et[1])&&q.push(new T(ct,kt,St,bt,Kt)),(ct=et[0])&&q.push(new T(ct,at,St,kt,Kt))}return this}function I(W){var q=[],H=[],et;for(this._root&&q.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));et=q.pop();){var ct=et.node;if(ct.length){var at,St=et.x0,bt=et.y0,zt=et.x1,kt=et.y1,Kt=(St+zt)/2,it=(bt+kt)/2;(at=ct[0])&&q.push(new T(at,St,bt,Kt,it)),(at=ct[1])&&q.push(new T(at,Kt,bt,zt,it)),(at=ct[2])&&q.push(new T(at,St,it,Kt,kt)),(at=ct[3])&&q.push(new T(at,Kt,it,zt,kt))}H.push(et)}for(;et=H.pop();)W(et.node,et.x0,et.y0,et.x1,et.y1);return this}function D(W){return W[0]}function P(W){return arguments.length?(this._x=W,this):this._x}function y(W){return W[1]}function v(W){return arguments.length?(this._y=W,this):this._y}function K(W,q,H){var et=new R(q==null?D:q,H==null?y:H,NaN,NaN,NaN,NaN);return W==null?et:et.addAll(W)}function R(W,q,H,et,ct,at){this._x=W,this._y=q,this._x0=H,this._y0=et,this._x1=ct,this._y1=at,this._root=void 0}function B(W){for(var q={data:W.data},H=q;W=W.next;)H=H.next={data:W.data};return q}var Y=K.prototype=R.prototype;Y.copy=function(){var W=new R(this._x,this._y,this._x0,this._y0,this._x1,this._y1),q=this._root,H,et;if(!q)return W;if(!q.length)return W._root=B(q),W;for(H=[{source:q,target:W._root=new Array(4)}];q=H.pop();)for(var ct=0;ct<4;++ct)(et=q.source[ct])&&(et.length?H.push({source:et,target:q.target[ct]=new Array(4)}):q.target[ct]=B(et));return W},Y.add=wt,Y.addAll=tt,Y.cover=Q,Y.data=J,Y.extent=X,Y.find=M,Y.remove=C,Y.removeAll=_,Y.root=b,Y.size=L,Y.visit=S,Y.visitAfter=I,Y.x=P,Y.y=v},631969:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{BRIDGE_GRAPH_NAME:function(){return J},GraphType:function(){return M},HierarchyNodeType:function(){return C},InclusionType:function(){return T},LAYOUT_CONFIG:function(){return wt},NodeType:function(){return X},ROOT_NAME:function(){return Q},buildGraph:function(){return br},flatGraph:function(){return Xr},getEdges:function(){return qr},mergeConfig:function(){return st}});const wt={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function st(d={},m=wt){var k,z,rt,ot;const dt=JSON.parse(JSON.stringify(m)),mt=((k=d==null?void 0:d.graph)===null||k===void 0?void 0:k.meta)||{},Ct=((z=d==null?void 0:d.subScene)===null||z===void 0?void 0:z.meta)||{},Ft=((rt=d==null?void 0:d.nodeSize)===null||rt===void 0?void 0:rt.meta)||{},oe=((ot=d==null?void 0:d.nodeSize)===null||ot===void 0?void 0:ot.node)||{},Qt=dt.nodeSize.bridge;return{graph:{meta:Object.assign(dt.graph.meta,mt)},subScene:{meta:Object.assign(dt.subScene.meta,Ct)},nodeSize:{meta:Object.assign(dt.nodeSize.meta,Ft),node:Object.assign(dt.nodeSize.node,oe),bridge:Qt}}}function tt(d){return`\u25EC${d}\u25EC`}const Q=tt("ROOT"),J=tt("BRIDGE_GRAPH");var X,T,M,C;(function(d){d[d.META=0]="META",d[d.NODE=1]="NODE",d[d.BRIDGE=2]="BRIDGE"})(X||(X={})),function(d){d[d.INCLUDE=0]="INCLUDE",d[d.EXCLUDE=1]="EXCLUDE",d[d.UNSPECIFIED=2]="UNSPECIFIED"}(T||(T={})),function(d){d[d.META=0]="META",d[d.CORE=1]="CORE",d[d.BRIDGE=2]="BRIDGE"}(M||(M={})),function(d){d[d.META=0]="META",d[d.OP=1]="OP",d[d.SERIES=2]="SERIES"}(C||(C={}));var _=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ut.g!="undefined"?ut.g:typeof self!="undefined"?self:{};function b(d,m){return d(m={exports:{}},m.exports),m.exports}var L=function(){this.__data__=[],this.size=0},S=function(d,m){return d===m||d!=d&&m!=m},I=function(d,m){for(var k=d.length;k--;)if(S(d[k][0],m))return k;return-1},D=Array.prototype.splice,P=function(d){var m=this.__data__,k=I(m,d);return!(k<0)&&(k==m.length-1?m.pop():D.call(m,k,1),--this.size,!0)},y=function(d){var m=this.__data__,k=I(m,d);return k<0?void 0:m[k][1]},v=function(d){return I(this.__data__,d)>-1},K=function(d,m){var k=this.__data__,z=I(k,d);return z<0?(++this.size,k.push([d,m])):k[z][1]=m,this};function R(d){var m=-1,k=d==null?0:d.length;for(this.clear();++m<k;){var z=d[m];this.set(z[0],z[1])}}R.prototype.clear=L,R.prototype.delete=P,R.prototype.get=y,R.prototype.has=v,R.prototype.set=K;var B=R,Y=function(){this.__data__=new B,this.size=0},W=function(d){var m=this.__data__,k=m.delete(d);return this.size=m.size,k},q=function(d){return this.__data__.get(d)},H=function(d){return this.__data__.has(d)},et=typeof _=="object"&&_&&_.Object===Object&&_,ct=typeof self=="object"&&self&&self.Object===Object&&self,at=et||ct||Function("return this")(),St=at.Symbol,bt=Object.prototype,zt=bt.hasOwnProperty,kt=bt.toString,Kt=St?St.toStringTag:void 0,it=function(d){var m=zt.call(d,Kt),k=d[Kt];try{d[Kt]=void 0;var z=!0}catch(ot){}var rt=kt.call(d);return z&&(m?d[Kt]=k:delete d[Kt]),rt},gt=Object.prototype.toString,Vt=function(d){return gt.call(d)},re=St?St.toStringTag:void 0,It=function(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":re&&re in Object(d)?it(d):Vt(d)},Wt=function(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")},$t,ae=function(d){if(!Wt(d))return!1;var m=It(d);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"},Bt=at["__core-js_shared__"],Ot=($t=/[^.]+$/.exec(Bt&&Bt.keys&&Bt.keys.IE_PROTO||""))?"Symbol(src)_1."+$t:"",Ht=function(d){return!!Ot&&Ot in d},pe=Function.prototype.toString,ve=function(d){if(d!=null){try{return pe.call(d)}catch(m){}try{return d+""}catch(m){}}return""},Tt=/^\[object .+?Constructor\]$/,Zt=Function.prototype,Ce=Object.prototype,Ut=Zt.toString,se=Ce.hasOwnProperty,_e=RegExp("^"+Ut.call(se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=function(d){return!(!Wt(d)||Ht(d))&&(ae(d)?_e:Tt).test(ve(d))},fr=function(d,m){return d==null?void 0:d[m]},gr=function(d,m){var k=fr(d,m);return $e(k)?k:void 0},Yt=gr(at,"Map"),Mr=gr(Object,"create"),Ln=function(){this.__data__=Mr?Mr(null):{},this.size=0},Yn=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},Ra=Object.prototype.hasOwnProperty,ba=function(d){var m=this.__data__;if(Mr){var k=m[d];return k==="__lodash_hash_undefined__"?void 0:k}return Ra.call(m,d)?m[d]:void 0},Ba=Object.prototype.hasOwnProperty,xa=function(d){var m=this.__data__;return Mr?m[d]!==void 0:Ba.call(m,d)},ya=function(d,m){var k=this.__data__;return this.size+=this.has(d)?0:1,k[d]=Mr&&m===void 0?"__lodash_hash_undefined__":m,this};function Na(d){var m=-1,k=d==null?0:d.length;for(this.clear();++m<k;){var z=d[m];this.set(z[0],z[1])}}Na.prototype.clear=Ln,Na.prototype.delete=Yn,Na.prototype.get=ba,Na.prototype.has=xa,Na.prototype.set=ya;var Ta=Na,hr=function(){this.size=0,this.__data__={hash:new Ta,map:new(Yt||B),string:new Ta}},Br=function(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null},cn=function(d,m){var k=d.__data__;return Br(m)?k[typeof m=="string"?"string":"hash"]:k.map},Cn=function(d){var m=cn(this,d).delete(d);return this.size-=m?1:0,m},Qn=function(d){return cn(this,d).get(d)},Bn=function(d){return cn(this,d).has(d)},ta=function(d,m){var k=cn(this,d),z=k.size;return k.set(d,m),this.size+=k.size==z?0:1,this};function sa(d){var m=-1,k=d==null?0:d.length;for(this.clear();++m<k;){var z=d[m];this.set(z[0],z[1])}}sa.prototype.clear=hr,sa.prototype.delete=Cn,sa.prototype.get=Qn,sa.prototype.has=Bn,sa.prototype.set=ta;var Fa=sa,wa=function(d,m){var k=this.__data__;if(k instanceof B){var z=k.__data__;if(!Yt||z.length<199)return z.push([d,m]),this.size=++k.size,this;k=this.__data__=new Fa(z)}return k.set(d,m),this.size=k.size,this};function An(d){var m=this.__data__=new B(d);this.size=m.size}An.prototype.clear=Y,An.prototype.delete=W,An.prototype.get=q,An.prototype.has=H,An.prototype.set=wa;var ua=An,ra=function(d,m){for(var k=-1,z=d==null?0:d.length;++k<z&&m(d[k],k,d)!==!1;);return d},Fn=function(){try{var d=gr(Object,"defineProperty");return d({},"",{}),d}catch(m){}}(),ka=function(d,m,k){m=="__proto__"&&Fn?Fn(d,m,{configurable:!0,enumerable:!0,value:k,writable:!0}):d[m]=k},U=Object.prototype.hasOwnProperty,Ve=function(d,m,k){var z=d[m];U.call(d,m)&&S(z,k)&&(k!==void 0||m in d)||ka(d,m,k)},we=function(d,m,k,z){var rt=!k;k||(k={});for(var ot=-1,dt=m.length;++ot<dt;){var mt=m[ot],Ct=z?z(k[mt],d[mt],mt,k,d):void 0;Ct===void 0&&(Ct=d[mt]),rt?ka(k,mt,Ct):Ve(k,mt,Ct)}return k},er=function(d,m){for(var k=-1,z=Array(d);++k<d;)z[k]=m(k);return z},Je=function(d){return d!=null&&typeof d=="object"},Pr=function(d){return Je(d)&&It(d)=="[object Arguments]"},Or=Object.prototype,rn=Or.hasOwnProperty,fn=Or.propertyIsEnumerable,jr=Pr(function(){return arguments}())?Pr:function(d){return Je(d)&&rn.call(d,"callee")&&!fn.call(d,"callee")},ht=Array.isArray,yt=function(){return!1},O=b(function(d,m){var k=m&&!m.nodeType&&m,z=k&&d&&!d.nodeType&&d,rt=z&&z.exports===k?at.Buffer:void 0,ot=(rt?rt.isBuffer:void 0)||yt;d.exports=ot}),E=/^(?:0|[1-9]\d*)$/,w=function(d,m){var k=typeof d;return!!(m=m==null?9007199254740991:m)&&(k=="number"||k!="symbol"&&E.test(d))&&d>-1&&d%1==0&&d<m},V=function(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=9007199254740991},Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1;var Gt=function(d){return Je(d)&&V(d.length)&&!!Et[It(d)]},Dt=function(d){return function(m){return d(m)}},ie=b(function(d,m){var k=m&&!m.nodeType&&m,z=k&&d&&!d.nodeType&&d,rt=z&&z.exports===k&&et.process,ot=function(){try{var dt=z&&z.require&&z.require("util").types;return dt||rt&&rt.binding&&rt.binding("util")}catch(mt){}}();d.exports=ot}),Ge=ie&&ie.isTypedArray,Te=Ge?Dt(Ge):Gt,ar=Object.prototype.hasOwnProperty,Ur=function(d,m){var k=ht(d),z=!k&&jr(d),rt=!k&&!z&&O(d),ot=!k&&!z&&!rt&&Te(d),dt=k||z||rt||ot,mt=dt?er(d.length,String):[],Ct=mt.length;for(var Ft in d)!m&&!ar.call(d,Ft)||dt&&(Ft=="length"||rt&&(Ft=="offset"||Ft=="parent")||ot&&(Ft=="buffer"||Ft=="byteLength"||Ft=="byteOffset")||w(Ft,Ct))||mt.push(Ft);return mt},pr=Object.prototype,nn=function(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||pr)},kn=function(d,m){return function(k){return d(m(k))}},We=kn(Object.keys,Object),vr=Object.prototype.hasOwnProperty,Nr=function(d){if(!nn(d))return We(d);var m=[];for(var k in Object(d))vr.call(d,k)&&k!="constructor"&&m.push(k);return m},Fr=function(d){return d!=null&&V(d.length)&&!ae(d)},ee=function(d){return Fr(d)?Ur(d):Nr(d)},Lt=function(d,m){return d&&we(m,ee(m),d)},ue=function(d){var m=[];if(d!=null)for(var k in Object(d))m.push(k);return m},Ee=Object.prototype.hasOwnProperty,me=function(d){if(!Wt(d))return ue(d);var m=nn(d),k=[];for(var z in d)(z!="constructor"||!m&&Ee.call(d,z))&&k.push(z);return k},Ie=function(d){return Fr(d)?Ur(d,!0):me(d)},rr=function(d,m){return d&&we(m,Ie(m),d)},ir=b(function(d,m){var k=m&&!m.nodeType&&m,z=k&&d&&!d.nodeType&&d,rt=z&&z.exports===k?at.Buffer:void 0,ot=rt?rt.allocUnsafe:void 0;d.exports=function(dt,mt){if(mt)return dt.slice();var Ct=dt.length,Ft=ot?ot(Ct):new dt.constructor(Ct);return dt.copy(Ft),Ft}}),Zr=function(d,m){var k=-1,z=d.length;for(m||(m=Array(z));++k<z;)m[k]=d[k];return m},En=function(d,m){for(var k=-1,z=d==null?0:d.length,rt=0,ot=[];++k<z;){var dt=d[k];m(dt,k,d)&&(ot[rt++]=dt)}return ot},ln=function(){return[]},zn=Object.prototype.propertyIsEnumerable,Gn=Object.getOwnPropertySymbols,la=Gn?function(d){return d==null?[]:(d=Object(d),En(Gn(d),function(m){return zn.call(d,m)}))}:ln,Ha=function(d,m){return we(d,la(d),m)},qa=function(d,m){for(var k=-1,z=m.length,rt=d.length;++k<z;)d[rt+k]=m[k];return d},Oa=kn(Object.getPrototypeOf,Object),Ao=Object.getOwnPropertySymbols?function(d){for(var m=[];d;)qa(m,la(d)),d=Oa(d);return m}:ln,wi=function(d,m){return we(d,Ao(d),m)},Ei=function(d,m,k){var z=m(d);return ht(d)?z:qa(z,k(d))},oo=function(d){return Ei(d,ee,la)},hs=function(d){return Ei(d,Ie,Ao)},To=gr(at,"DataView"),so=gr(at,"Promise"),ma=gr(at,"Set"),Io=gr(at,"WeakMap"),ds=ve(To),ei=ve(Yt),Wi=ve(so),vs=ve(ma),Yo=ve(Io),Vi=It;(To&&Vi(new To(new ArrayBuffer(1)))!="[object DataView]"||Yt&&Vi(new Yt)!="[object Map]"||so&&Vi(so.resolve())!="[object Promise]"||ma&&Vi(new ma)!="[object Set]"||Io&&Vi(new Io)!="[object WeakMap]")&&(Vi=function(d){var m=It(d),k=m=="[object Object]"?d.constructor:void 0,z=k?ve(k):"";if(z)switch(z){case ds:return"[object DataView]";case ei:return"[object Map]";case Wi:return"[object Promise]";case vs:return"[object Set]";case Yo:return"[object WeakMap]"}return m});var uo=Vi,Gs=Object.prototype.hasOwnProperty,Wo=function(d){var m=d.length,k=new d.constructor(m);return m&&typeof d[0]=="string"&&Gs.call(d,"index")&&(k.index=d.index,k.input=d.input),k},Si=at.Uint8Array,fo=function(d){var m=new d.constructor(d.byteLength);return new Si(m).set(new Si(d)),m},ps=function(d,m){var k=m?fo(d.buffer):d.buffer;return new d.constructor(k,d.byteOffset,d.byteLength)},Tn=/\w*$/,Eo=function(d){var m=new d.constructor(d.source,Tn.exec(d));return m.lastIndex=d.lastIndex,m},Do=St?St.prototype:void 0,Ss=Do?Do.valueOf:void 0,Vo=function(d){return Ss?Object(Ss.call(d)):{}},Ns=function(d,m){var k=m?fo(d.buffer):d.buffer;return new d.constructor(k,d.byteOffset,d.length)},Pn=function(d,m,k){var z=d.constructor;switch(m){case"[object ArrayBuffer]":return fo(d);case"[object Boolean]":case"[object Date]":return new z(+d);case"[object DataView]":return ps(d,k);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ns(d,k);case"[object Map]":return new z;case"[object Number]":case"[object String]":return new z(d);case"[object RegExp]":return Eo(d);case"[object Set]":return new z;case"[object Symbol]":return Vo(d)}},Hi=Object.create,ji=function(){function d(){}return function(m){if(!Wt(m))return{};if(Hi)return Hi(m);d.prototype=m;var k=new d;return d.prototype=void 0,k}}(),yi=function(d){return typeof d.constructor!="function"||nn(d)?{}:ji(Oa(d))},Ho=function(d){return Je(d)&&uo(d)=="[object Map]"},jo=ie&&ie.isMap,co=jo?Dt(jo):Ho,gs=function(d){return Je(d)&&uo(d)=="[object Set]"},Ms=ie&&ie.isSet,us=Ms?Dt(Ms):gs,Sa={};Sa["[object Arguments]"]=Sa["[object Array]"]=Sa["[object ArrayBuffer]"]=Sa["[object DataView]"]=Sa["[object Boolean]"]=Sa["[object Date]"]=Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Map]"]=Sa["[object Number]"]=Sa["[object Object]"]=Sa["[object RegExp]"]=Sa["[object Set]"]=Sa["[object String]"]=Sa["[object Symbol]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa["[object Error]"]=Sa["[object Function]"]=Sa["[object WeakMap]"]=!1;var ks=function d(m,k,z,rt,ot,dt){var mt,Ct=1&k,Ft=2&k,oe=4&k;if(z&&(mt=ot?z(m,rt,ot,dt):z(m)),mt!==void 0)return mt;if(!Wt(m))return m;var Qt=ht(m);if(Qt){if(mt=Wo(m),!Ct)return Zr(m,mt)}else{var Me=uo(m),Ue=Me=="[object Function]"||Me=="[object GeneratorFunction]";if(O(m))return ir(m,Ct);if(Me=="[object Object]"||Me=="[object Arguments]"||Ue&&!ot){if(mt=Ft||Ue?{}:yi(m),!Ct)return Ft?wi(m,rr(mt,m)):Ha(m,Lt(mt,m))}else{if(!Sa[Me])return ot?m:{};mt=Pn(m,Me,Ct)}}dt||(dt=new ua);var wr=dt.get(m);if(wr)return wr;dt.set(m,mt),us(m)?m.forEach(function(Ke){mt.add(d(Ke,k,z,Ke,m,dt))}):co(m)&&m.forEach(function(Ke,Qe){mt.set(Qe,d(Ke,k,z,Qe,m,dt))});var Ze=Qt?void 0:(oe?Ft?hs:oo:Ft?Ie:ee)(m);return ra(Ze||m,function(Ke,Qe){Ze&&(Ke=m[Qe=Ke]),Ve(mt,Qe,d(Ke,k,z,Qe,m,dt))}),mt},So=function(d){return ks(d,4)},lo=function(d){return function(){return d}},_s=function(d){return function(m,k,z){for(var rt=-1,ot=Object(m),dt=z(m),mt=dt.length;mt--;){var Ct=dt[d?mt:++rt];if(k(ot[Ct],Ct,ot)===!1)break}return m}}(),Po=function(d,m){return d&&_s(d,m,ee)},Gi=function(d,m){return function(k,z){if(k==null)return k;if(!Fr(k))return d(k,z);for(var rt=k.length,ot=m?rt:-1,dt=Object(k);(m?ot--:++ot<rt)&&z(dt[ot],ot,dt)!==!1;);return k}}(Po),Mo=function(d){return d},Zi=function(d){return typeof d=="function"?d:Mo},Lo=function(d,m){return(ht(d)?ra:Gi)(d,Zi(m))},di=Lo,Cs=function(d,m){var k=[];return Gi(d,function(z,rt,ot){m(z,rt,ot)&&k.push(z)}),k},Ro=function(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},ho=function(d){return this.__data__.has(d)};function Zo(d){var m=-1,k=d==null?0:d.length;for(this.__data__=new Fa;++m<k;)this.add(d[m])}Zo.prototype.add=Zo.prototype.push=Ro,Zo.prototype.has=ho;var _o=Zo,qo=function(d,m){for(var k=-1,z=d==null?0:d.length;++k<z;)if(m(d[k],k,d))return!0;return!1},go=function(d,m){return d.has(m)},Ia=function(d,m,k,z,rt,ot){var dt=1&k,mt=d.length,Ct=m.length;if(mt!=Ct&&!(dt&&Ct>mt))return!1;var Ft=ot.get(d),oe=ot.get(m);if(Ft&&oe)return Ft==m&&oe==d;var Qt=-1,Me=!0,Ue=2&k?new _o:void 0;for(ot.set(d,m),ot.set(m,d);++Qt<mt;){var wr=d[Qt],Ze=m[Qt];if(z)var Ke=dt?z(Ze,wr,Qt,m,d,ot):z(wr,Ze,Qt,d,m,ot);if(Ke!==void 0){if(Ke)continue;Me=!1;break}if(Ue){if(!qo(m,function(Qe,Hr){if(!go(Ue,Hr)&&(wr===Qe||rt(wr,Qe,k,z,ot)))return Ue.push(Hr)})){Me=!1;break}}else if(wr!==Ze&&!rt(wr,Ze,k,z,ot)){Me=!1;break}}return ot.delete(d),ot.delete(m),Me},Oi=function(d){var m=-1,k=Array(d.size);return d.forEach(function(z,rt){k[++m]=[rt,z]}),k},zi=function(d){var m=-1,k=Array(d.size);return d.forEach(function(z){k[++m]=z}),k},La=St?St.prototype:void 0,Ci=La?La.valueOf:void 0,$o=function(d,m,k,z,rt,ot,dt){switch(k){case"[object DataView]":if(d.byteLength!=m.byteLength||d.byteOffset!=m.byteOffset)return!1;d=d.buffer,m=m.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=m.byteLength||!ot(new Si(d),new Si(m)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+d,+m);case"[object Error]":return d.name==m.name&&d.message==m.message;case"[object RegExp]":case"[object String]":return d==m+"";case"[object Map]":var mt=Oi;case"[object Set]":var Ct=1&z;if(mt||(mt=zi),d.size!=m.size&&!Ct)return!1;var Ft=dt.get(d);if(Ft)return Ft==m;z|=2,dt.set(d,m);var oe=Ia(mt(d),mt(m),z,rt,ot,dt);return dt.delete(d),oe;case"[object Symbol]":if(Ci)return Ci.call(d)==Ci.call(m)}return!1},Di=Object.prototype.hasOwnProperty,Bo=function(d,m,k,z,rt,ot){var dt=1&k,mt=oo(d),Ct=mt.length;if(Ct!=oo(m).length&&!dt)return!1;for(var Ft=Ct;Ft--;){var oe=mt[Ft];if(!(dt?oe in m:Di.call(m,oe)))return!1}var Qt=ot.get(d),Me=ot.get(m);if(Qt&&Me)return Qt==m&&Me==d;var Ue=!0;ot.set(d,m),ot.set(m,d);for(var wr=dt;++Ft<Ct;){var Ze=d[oe=mt[Ft]],Ke=m[oe];if(z)var Qe=dt?z(Ke,Ze,oe,m,d,ot):z(Ze,Ke,oe,d,m,ot);if(!(Qe===void 0?Ze===Ke||rt(Ze,Ke,k,z,ot):Qe)){Ue=!1;break}wr||(wr=oe=="constructor")}if(Ue&&!wr){var Hr=d.constructor,un=m.constructor;Hr==un||!("constructor"in d)||!("constructor"in m)||typeof Hr=="function"&&Hr instanceof Hr&&typeof un=="function"&&un instanceof un||(Ue=!1)}return ot.delete(d),ot.delete(m),Ue},Co=Object.prototype.hasOwnProperty,qi=function(d,m,k,z,rt,ot){var dt=ht(d),mt=ht(m),Ct=dt?"[object Array]":uo(d),Ft=mt?"[object Array]":uo(m),oe=(Ct=Ct=="[object Arguments]"?"[object Object]":Ct)=="[object Object]",Qt=(Ft=Ft=="[object Arguments]"?"[object Object]":Ft)=="[object Object]",Me=Ct==Ft;if(Me&&O(d)){if(!O(m))return!1;dt=!0,oe=!1}if(Me&&!oe)return ot||(ot=new ua),dt||Te(d)?Ia(d,m,k,z,rt,ot):$o(d,m,Ct,k,z,rt,ot);if(!(1&k)){var Ue=oe&&Co.call(d,"__wrapped__"),wr=Qt&&Co.call(m,"__wrapped__");if(Ue||wr){var Ze=Ue?d.value():d,Ke=wr?m.value():m;return ot||(ot=new ua),rt(Ze,Ke,k,z,ot)}}return!!Me&&(ot||(ot=new ua),Bo(d,m,k,z,rt,ot))},As=function d(m,k,z,rt,ot){return m===k||(m==null||k==null||!Je(m)&&!Je(k)?m!=m&&k!=k:qi(m,k,z,rt,d,ot))},ys=function(d,m,k,z){var rt=k.length,ot=rt,dt=!z;if(d==null)return!ot;for(d=Object(d);rt--;){var mt=k[rt];if(dt&&mt[2]?mt[1]!==d[mt[0]]:!(mt[0]in d))return!1}for(;++rt<ot;){var Ct=(mt=k[rt])[0],Ft=d[Ct],oe=mt[1];if(dt&&mt[2]){if(Ft===void 0&&!(Ct in d))return!1}else{var Qt=new ua;if(z)var Me=z(Ft,oe,Ct,d,m,Qt);if(!(Me===void 0?As(oe,Ft,3,z,Qt):Me))return!1}}return!0},Ko=function(d){return d==d&&!Wt(d)},ms=function(d){for(var m=ee(d),k=m.length;k--;){var z=m[k],rt=d[z];m[k]=[z,rt,Ko(rt)]}return m},ru=function(d,m){return function(k){return k!=null&&k[d]===m&&(m!==void 0||d in Object(k))}},zs=function(d){var m=ms(d);return m.length==1&&m[0][2]?ru(m[0][0],m[0][1]):function(k){return k===d||ys(k,d,m)}},bs=function(d){return typeof d=="symbol"||Je(d)&&It(d)=="[object Symbol]"},At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jt=/^\w*$/,Fe=function(d,m){if(ht(d))return!1;var k=typeof d;return!(k!="number"&&k!="symbol"&&k!="boolean"&&d!=null&&!bs(d))||Jt.test(d)||!At.test(d)||m!=null&&d in Object(m)};function je(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var k=function(){var z=arguments,rt=m?m.apply(this,z):z[0],ot=k.cache;if(ot.has(rt))return ot.get(rt);var dt=d.apply(this,z);return k.cache=ot.set(rt,dt)||ot,dt};return k.cache=new(je.Cache||Fa),k}je.Cache=Fa;var Ar=je,sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wn=/\\(\\)?/g,Wn=function(d){var m=Ar(d,function(z){return k.size===500&&k.clear(),z}),k=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(sn,function(k,z,rt,ot){m.push(rt?ot.replace(wn,"$1"):z||k)}),m}),si=function(d,m){for(var k=-1,z=d==null?0:d.length,rt=Array(z);++k<z;)rt[k]=m(d[k],k,d);return rt},to=St?St.prototype:void 0,vo=to?to.toString:void 0,Us=function d(m){if(typeof m=="string")return m;if(ht(m))return si(m,d)+"";if(bs(m))return vo?vo.call(m):"";var k=m+"";return k=="0"&&1/m==-1/0?"-0":k},bu=function(d){return d==null?"":Us(d)},Ui=function(d,m){return ht(d)?d:Fe(d,m)?[d]:Wn(bu(d))},yo=function(d){if(typeof d=="string"||bs(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m},qs=function(d,m){for(var k=0,z=(m=Ui(m,d)).length;d!=null&&k<z;)d=d[yo(m[k++])];return k&&k==z?d:void 0},zu=function(d,m,k){var z=d==null?void 0:qs(d,m);return z===void 0?k:z},xu=function(d,m){return d!=null&&m in Object(d)},nu=function(d,m,k){for(var z=-1,rt=(m=Ui(m,d)).length,ot=!1;++z<rt;){var dt=yo(m[z]);if(!(ot=d!=null&&k(d,dt)))break;d=d[dt]}return ot||++z!=rt?ot:!!(rt=d==null?0:d.length)&&V(rt)&&w(dt,rt)&&(ht(d)||jr(d))},au=function(d,m){return d!=null&&nu(d,m,xu)},$s=function(d,m){return Fe(d)&&Ko(m)?ru(yo(d),m):function(k){var z=zu(k,d);return z===void 0&&z===m?au(k,d):As(m,z,3)}},Os=function(d){return function(m){return m==null?void 0:m[d]}},Ks=function(d){return function(m){return qs(m,d)}},xs=function(d){return Fe(d)?Os(yo(d)):Ks(d)},No=function(d){return typeof d=="function"?d:d==null?Mo:typeof d=="object"?ht(d)?$s(d[0],d[1]):zs(d):xs(d)},nf=function(d,m){return(ht(d)?En:Cs)(d,No(m))},Rf=Object.prototype.hasOwnProperty,Bf=function(d,m){return d!=null&&Rf.call(d,m)},Ds=function(d,m){return d!=null&&nu(d,m,Bf)},Ff=Object.prototype.hasOwnProperty,h=function(d){if(d==null)return!0;if(Fr(d)&&(ht(d)||typeof d=="string"||typeof d.splice=="function"||O(d)||Te(d)||jr(d)))return!d.length;var m=uo(d);if(m=="[object Map]"||m=="[object Set]")return!d.size;if(nn(d))return!Nr(d).length;for(var k in d)if(Ff.call(d,k))return!1;return!0},A=function(d){return d===void 0},lt=function(d,m){var k=-1,z=Fr(d)?Array(d.length):[];return Gi(d,function(rt,ot,dt){z[++k]=m(rt,ot,dt)}),z},xt=function(d,m){return(ht(d)?si:lt)(d,No(m))},Nt=function(d,m,k,z){var rt=-1,ot=d==null?0:d.length;for(z&&ot&&(k=d[++rt]);++rt<ot;)k=m(k,d[rt],rt,d);return k},jt=function(d,m,k,z,rt){return rt(d,function(ot,dt,mt){k=z?(z=!1,ot):m(k,ot,dt,mt)}),k},qt=function(d,m,k){var z=ht(d)?Nt:jt,rt=arguments.length<3;return z(d,No(m),k,rt,Gi)},de=function(d){return typeof d=="string"||!ht(d)&&Je(d)&&It(d)=="[object String]"},be=Os("length"),Le=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ye=function(d){return Le.test(d)},mr="[\\ud800-\\udfff]",xr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",yr="\\ud83c[\\udffb-\\udfff]",Vr="[^\\ud800-\\udfff]",Jr="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",gn="(?:"+xr+"|"+yr+")?",da="[\\ufe0e\\ufe0f]?"+gn+("(?:\\u200d(?:"+[Vr,Jr,Tr].join("|")+")[\\ufe0e\\ufe0f]?"+gn+")*"),va="(?:"+[Vr+xr+"?",xr,Jr,Tr,mr].join("|")+")",na=RegExp(yr+"(?="+yr+")|"+va+da,"g"),Vn=function(d){for(var m=na.lastIndex=0;na.test(d);)++m;return m},ea=function(d){return Ye(d)?Vn(d):be(d)},Ai=function(d){if(d==null)return 0;if(Fr(d))return de(d)?ea(d):d.length;var m=uo(d);return m=="[object Map]"||m=="[object Set]"?d.size:Nr(d).length},Ti=function(d,m,k){var z=ht(d),rt=z||O(d)||Te(d);if(m=No(m),k==null){var ot=d&&d.constructor;k=rt?z?new ot:[]:Wt(d)&&ae(ot)?ji(Oa(d)):{}}return(rt?ra:Po)(d,function(dt,mt,Ct){return m(k,dt,mt,Ct)}),k},Mi=St?St.isConcatSpreadable:void 0,Ii=function(d){return ht(d)||jr(d)||!!(Mi&&d&&d[Mi])},Li=function d(m,k,z,rt,ot){var dt=-1,mt=m.length;for(z||(z=Ii),ot||(ot=[]);++dt<mt;){var Ct=m[dt];k>0&&z(Ct)?k>1?d(Ct,k-1,z,rt,ot):qa(ot,Ct):rt||(ot[ot.length]=Ct)}return ot},Xi=function(d,m,k){switch(k.length){case 0:return d.call(m);case 1:return d.call(m,k[0]);case 2:return d.call(m,k[0],k[1]);case 3:return d.call(m,k[0],k[1],k[2])}return d.apply(m,k)},eo=Math.max,Ga=function(d,m,k){return m=eo(m===void 0?d.length-1:m,0),function(){for(var z=arguments,rt=-1,ot=eo(z.length-m,0),dt=Array(ot);++rt<ot;)dt[rt]=z[m+rt];rt=-1;for(var mt=Array(m+1);++rt<m;)mt[rt]=z[rt];return mt[m]=k(dt),Xi(d,this,mt)}},ui=Fn?function(d,m){return Fn(d,"toString",{configurable:!0,enumerable:!1,value:lo(m),writable:!0})}:Mo,Ps=Date.now,ws=function(d){var m=0,k=0;return function(){var z=Ps(),rt=16-(z-k);if(k=z,rt>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(void 0,arguments)}}(ui),ko=function(d,m){return ws(Ga(d,m,Mo),d+"")},wu=function(d,m,k,z){for(var rt=d.length,ot=k+(z?1:-1);z?ot--:++ot<rt;)if(m(d[ot],ot,d))return ot;return-1},Gf=function(d){return d!=d},bc=function(d,m,k){for(var z=k-1,rt=d.length;++z<rt;)if(d[z]===m)return z;return-1},xc=function(d,m,k){return m==m?bc(d,m,k):wu(d,Gf,k)},wc=function(d,m){return!!(d!=null&&d.length)&&xc(d,m,0)>-1},zf=function(d,m,k){for(var z=-1,rt=d==null?0:d.length;++z<rt;)if(k(m,d[z]))return!0;return!1},Uf=function(){},Ec=ma&&1/zi(new ma([,-0]))[1]==1/0?function(d){return new ma(d)}:Uf,af=function(d,m,k){var z=-1,rt=wc,ot=d.length,dt=!0,mt=[],Ct=mt;if(k)dt=!1,rt=zf;else if(ot>=200){var Ft=m?null:Ec(d);if(Ft)return zi(Ft);dt=!1,rt=go,Ct=new _o}else Ct=m?[]:mt;t:for(;++z<ot;){var oe=d[z],Qt=m?m(oe):oe;if(oe=k||oe!==0?oe:0,dt&&Qt==Qt){for(var Me=Ct.length;Me--;)if(Ct[Me]===Qt)continue t;m&&Ct.push(Qt),mt.push(oe)}else rt(Ct,Qt,k)||(Ct!==mt&&Ct.push(Qt),mt.push(oe))}return mt},of=function(d){return Je(d)&&Fr(d)},Sc=ko(function(d){return af(Li(d,1,of,!0))}),al=function(d,m){return si(m,function(k){return d[k]})},Rs,Mc=function(d){return d==null?[]:al(d,ee(d))};try{Rs={clone:So,constant:lo,each:di,filter:nf,has:Ds,isArray:ht,isEmpty:h,isFunction:ae,isUndefined:A,keys:ee,map:xt,reduce:qt,size:Ai,transform:Ti,union:Sc,values:Mc}}catch(d){}Rs||(Rs=window._);var yn=Rs,Eu=za;function za(d){this._isDirected=!yn.has(d,"directed")||d.directed,this._isMultigraph=!!yn.has(d,"multigraph")&&d.multigraph,this._isCompound=!!yn.has(d,"compound")&&d.compound,this._label=void 0,this._defaultNodeLabelFn=yn.constant(void 0),this._defaultEdgeLabelFn=yn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function sf(d,m){d[m]?d[m]++:d[m]=1}function Xf(d,m){--d[m]||delete d[m]}function iu(d,m,k,z){var rt=""+m,ot=""+k;if(!d&&rt>ot){var dt=rt;rt=ot,ot=dt}return rt+""+ot+""+(yn.isUndefined(z)?"\0":z)}function Uu(d,m,k,z){var rt=""+m,ot=""+k;if(!d&&rt>ot){var dt=rt;rt=ot,ot=dt}var mt={v:rt,w:ot};return z&&(mt.name=z),mt}function Xu(d,m){return iu(d,m.v,m.w,m.name)}za.prototype._nodeCount=0,za.prototype._edgeCount=0,za.prototype.isDirected=function(){return this._isDirected},za.prototype.isMultigraph=function(){return this._isMultigraph},za.prototype.isCompound=function(){return this._isCompound},za.prototype.setGraph=function(d){return this._label=d,this},za.prototype.graph=function(){return this._label},za.prototype.setDefaultNodeLabel=function(d){return yn.isFunction(d)||(d=yn.constant(d)),this._defaultNodeLabelFn=d,this},za.prototype.nodeCount=function(){return this._nodeCount},za.prototype.nodes=function(){return yn.keys(this._nodes)},za.prototype.sources=function(){var d=this;return yn.filter(this.nodes(),function(m){return yn.isEmpty(d._in[m])})},za.prototype.sinks=function(){var d=this;return yn.filter(this.nodes(),function(m){return yn.isEmpty(d._out[m])})},za.prototype.setNodes=function(d,m){var k=arguments,z=this;return yn.each(d,function(rt){k.length>1?z.setNode(rt,m):z.setNode(rt)}),this},za.prototype.setNode=function(d,m){return yn.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=m),this):(this._nodes[d]=arguments.length>1?m:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]="\0",this._children[d]={},this._children["\0"][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},za.prototype.node=function(d){return this._nodes[d]},za.prototype.hasNode=function(d){return yn.has(this._nodes,d)},za.prototype.removeNode=function(d){var m=this;if(yn.has(this._nodes,d)){var k=function(z){m.removeEdge(m._edgeObjs[z])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],yn.each(this.children(d),function(z){m.setParent(z)}),delete this._children[d]),yn.each(yn.keys(this._in[d]),k),delete this._in[d],delete this._preds[d],yn.each(yn.keys(this._out[d]),k),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},za.prototype.setParent=function(d,m){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(yn.isUndefined(m))m="\0";else{for(var k=m+="";!yn.isUndefined(k);k=this.parent(k))if(k===d)throw new Error("Setting "+m+" as parent of "+d+" would create a cycle");this.setNode(m)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=m,this._children[m][d]=!0,this},za.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},za.prototype.parent=function(d){if(this._isCompound){var m=this._parent[d];if(m!=="\0")return m}},za.prototype.children=function(d){if(yn.isUndefined(d)&&(d="\0"),this._isCompound){var m=this._children[d];if(m)return yn.keys(m)}else{if(d==="\0")return this.nodes();if(this.hasNode(d))return[]}},za.prototype.predecessors=function(d){var m=this._preds[d];if(m)return yn.keys(m)},za.prototype.successors=function(d){var m=this._sucs[d];if(m)return yn.keys(m)},za.prototype.neighbors=function(d){var m=this.predecessors(d);if(m)return yn.union(m,this.successors(d))},za.prototype.isLeaf=function(d){return(this.isDirected()?this.successors(d):this.neighbors(d)).length===0},za.prototype.filterNodes=function(d){var m=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});m.setGraph(this.graph());var k=this;yn.each(this._nodes,function(ot,dt){d(dt)&&m.setNode(dt,ot)}),yn.each(this._edgeObjs,function(ot){m.hasNode(ot.v)&&m.hasNode(ot.w)&&m.setEdge(ot,k.edge(ot))});var z={};function rt(ot){var dt=k.parent(ot);return dt===void 0||m.hasNode(dt)?(z[ot]=dt,dt):dt in z?z[dt]:rt(dt)}return this._isCompound&&yn.each(m.nodes(),function(ot){m.setParent(ot,rt(ot))}),m},za.prototype.setDefaultEdgeLabel=function(d){return yn.isFunction(d)||(d=yn.constant(d)),this._defaultEdgeLabelFn=d,this},za.prototype.edgeCount=function(){return this._edgeCount},za.prototype.edges=function(){return yn.values(this._edgeObjs)},za.prototype.setPath=function(d,m){var k=this,z=arguments;return yn.reduce(d,function(rt,ot){return z.length>1?k.setEdge(rt,ot,m):k.setEdge(rt,ot),ot}),this},za.prototype.setEdge=function(){var d,m,k,z,rt=!1,ot=arguments[0];typeof ot=="object"&&ot!==null&&"v"in ot?(d=ot.v,m=ot.w,k=ot.name,arguments.length===2&&(z=arguments[1],rt=!0)):(d=ot,m=arguments[1],k=arguments[3],arguments.length>2&&(z=arguments[2],rt=!0)),d=""+d,m=""+m,yn.isUndefined(k)||(k=""+k);var dt=iu(this._isDirected,d,m,k);if(yn.has(this._edgeLabels,dt))return rt&&(this._edgeLabels[dt]=z),this;if(!yn.isUndefined(k)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(m),this._edgeLabels[dt]=rt?z:this._defaultEdgeLabelFn(d,m,k);var mt=Uu(this._isDirected,d,m,k);return d=mt.v,m=mt.w,Object.freeze(mt),this._edgeObjs[dt]=mt,sf(this._preds[m],d),sf(this._sucs[d],m),this._in[m][dt]=mt,this._out[d][dt]=mt,this._edgeCount++,this},za.prototype.edge=function(d,m,k){var z=arguments.length===1?Xu(this._isDirected,arguments[0]):iu(this._isDirected,d,m,k);return this._edgeLabels[z]},za.prototype.hasEdge=function(d,m,k){var z=arguments.length===1?Xu(this._isDirected,arguments[0]):iu(this._isDirected,d,m,k);return yn.has(this._edgeLabels,z)},za.prototype.removeEdge=function(d,m,k){var z=arguments.length===1?Xu(this._isDirected,arguments[0]):iu(this._isDirected,d,m,k),rt=this._edgeObjs[z];return rt&&(d=rt.v,m=rt.w,delete this._edgeLabels[z],delete this._edgeObjs[z],Xf(this._preds[m],d),Xf(this._sucs[d],m),delete this._in[m][z],delete this._out[d][z],this._edgeCount--),this},za.prototype.inEdges=function(d,m){var k=this._in[d];if(k){var z=yn.values(k);return m?yn.filter(z,function(rt){return rt.v===m}):z}},za.prototype.outEdges=function(d,m){var k=this._out[d];if(k){var z=yn.values(k);return m?yn.filter(z,function(rt){return rt.w===m}):z}},za.prototype.nodeEdges=function(d,m){var k=this.inEdges(d,m);if(k)return k.concat(this.outEdges(d,m))};var uf={Graph:Eu,version:"2.1.8"},ff={write:function(d){var m={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:_c(d),edges:Es(d)};return yn.isUndefined(d.graph())||(m.value=yn.clone(d.graph())),m},read:function(d){var m=new Eu(d.options).setGraph(d.value);return yn.each(d.nodes,function(k){m.setNode(k.v,k.value),k.parent&&m.setParent(k.v,k.parent)}),yn.each(d.edges,function(k){m.setEdge({v:k.v,w:k.w,name:k.name},k.value)}),m}};function _c(d){return yn.map(d.nodes(),function(m){var k=d.node(m),z=d.parent(m),rt={v:m};return yn.isUndefined(k)||(rt.value=k),yn.isUndefined(z)||(rt.parent=z),rt})}function Es(d){return yn.map(d.edges(),function(m){var k=d.edge(m),z={v:m.v,w:m.w};return yn.isUndefined(m.name)||(z.name=m.name),yn.isUndefined(k)||(z.value=k),z})}var Cc=function(d){var m,k={},z=[];function rt(ot){yn.has(k,ot)||(k[ot]=!0,m.push(ot),yn.each(d.successors(ot),rt),yn.each(d.predecessors(ot),rt))}return yn.each(d.nodes(),function(ot){m=[],rt(ot),m.length&&z.push(m)}),z},cf=mi;function mi(){this._arr=[],this._keyIndices={}}mi.prototype.size=function(){return this._arr.length},mi.prototype.keys=function(){return this._arr.map(function(d){return d.key})},mi.prototype.has=function(d){return yn.has(this._keyIndices,d)},mi.prototype.priority=function(d){var m=this._keyIndices[d];if(m!==void 0)return this._arr[m].priority},mi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},mi.prototype.add=function(d,m){var k=this._keyIndices;if(d=String(d),!yn.has(k,d)){var z=this._arr,rt=z.length;return k[d]=rt,z.push({key:d,priority:m}),this._decrease(rt),!0}return!1},mi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var d=this._arr.pop();return delete this._keyIndices[d.key],this._heapify(0),d.key},mi.prototype.decrease=function(d,m){var k=this._keyIndices[d];if(m>this._arr[k].priority)throw new Error("New priority is greater than current priority. Key: "+d+" Old: "+this._arr[k].priority+" New: "+m);this._arr[k].priority=m,this._decrease(k)},mi.prototype._heapify=function(d){var m=this._arr,k=2*d,z=k+1,rt=d;k<m.length&&(rt=m[k].priority<m[rt].priority?k:rt,z<m.length&&(rt=m[z].priority<m[rt].priority?z:rt),rt!==d&&(this._swap(d,rt),this._heapify(rt)))},mi.prototype._decrease=function(d){for(var m,k=this._arr,z=k[d].priority;d!==0&&!(k[m=d>>1].priority<z);)this._swap(d,m),d=m},mi.prototype._swap=function(d,m){var k=this._arr,z=this._keyIndices,rt=k[d],ot=k[m];k[d]=ot,k[m]=rt,z[ot.key]=d,z[rt.key]=m};var Yu=function(d,m,k,z){return function(rt,ot,dt,mt){var Ct,Ft,oe={},Qt=new cf,Me=function(Ue){var wr=Ue.v!==Ct?Ue.v:Ue.w,Ze=oe[wr],Ke=dt(Ue),Qe=Ft.distance+Ke;if(Ke<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Ue+" Weight: "+Ke);Qe<Ze.distance&&(Ze.distance=Qe,Ze.predecessor=Ct,Qt.decrease(wr,Qe))};for(rt.nodes().forEach(function(Ue){var wr=Ue===ot?0:Number.POSITIVE_INFINITY;oe[Ue]={distance:wr},Qt.add(Ue,wr)});Qt.size()>0&&(Ct=Qt.removeMin(),(Ft=oe[Ct]).distance!==Number.POSITIVE_INFINITY);)mt(Ct).forEach(Me);return oe}(d,String(m),k||Ts,z||function(rt){return d.outEdges(rt)})},Ts=yn.constant(1),Su=function(d,m,k){return yn.transform(d.nodes(),function(z,rt){z[rt]=Yu(d,rt,m,k)},{})},Z=function(d){var m=0,k=[],z={},rt=[];function ot(dt){var mt=z[dt]={onStack:!0,lowlink:m,index:m++};if(k.push(dt),d.successors(dt).forEach(function(oe){yn.has(z,oe)?z[oe].onStack&&(mt.lowlink=Math.min(mt.lowlink,z[oe].index)):(ot(oe),mt.lowlink=Math.min(mt.lowlink,z[oe].lowlink))}),mt.lowlink===mt.index){var Ct,Ft=[];do Ct=k.pop(),z[Ct].onStack=!1,Ft.push(Ct);while(dt!==Ct);rt.push(Ft)}}return d.nodes().forEach(function(dt){yn.has(z,dt)||ot(dt)}),rt},vt=function(d){return yn.filter(Z(d),function(m){return m.length>1||m.length===1&&d.hasEdge(m[0],m[0])})},_t=function(d,m,k){return function(z,rt,ot){var dt={},mt=z.nodes();return mt.forEach(function(Ct){dt[Ct]={},dt[Ct][Ct]={distance:0},mt.forEach(function(Ft){Ct!==Ft&&(dt[Ct][Ft]={distance:Number.POSITIVE_INFINITY})}),ot(Ct).forEach(function(Ft){var oe=Ft.v===Ct?Ft.w:Ft.v,Qt=rt(Ft);dt[Ct][oe]={distance:Qt,predecessor:Ct}})}),mt.forEach(function(Ct){var Ft=dt[Ct];mt.forEach(function(oe){var Qt=dt[oe];mt.forEach(function(Me){var Ue=Qt[Ct],wr=Ft[Me],Ze=Qt[Me],Ke=Ue.distance+wr.distance;Ke<Ze.distance&&(Ze.distance=Ke,Ze.predecessor=wr.predecessor)})})}),dt}(d,m||Xt,k||function(z){return d.outEdges(z)})},Xt=yn.constant(1),ce=Be;function Be(d){var m={},k={},z=[];if(yn.each(d.sinks(),function rt(ot){if(yn.has(k,ot))throw new ze;yn.has(m,ot)||(k[ot]=!0,m[ot]=!0,yn.each(d.predecessors(ot),rt),delete k[ot],z.push(ot))}),yn.size(m)!==d.nodeCount())throw new ze;return z}function ze(){}Be.CycleException=ze,ze.prototype=new Error;var sr=function(d,m,k){yn.isArray(m)||(m=[m]);var z=(d.isDirected()?d.successors:d.neighbors).bind(d),rt=[],ot={};return yn.each(m,function(dt){if(!d.hasNode(dt))throw new Error("Graph does not have node: "+dt);Rr(d,dt,k==="post",ot,z,rt)}),rt};function Rr(d,m,k,z,rt,ot){yn.has(z,m)||(z[m]=!0,k||ot.push(m),yn.each(rt(m),function(dt){Rr(d,dt,k,z,rt,ot)}),k&&ot.push(m))}var Wr,bn={Graph:uf.Graph,json:ff,alg:{components:Cc,dijkstra:Yu,dijkstraAll:Su,findCycles:vt,floydWarshall:_t,isAcyclic:function(d){try{ce(d)}catch(m){if(m instanceof ce.CycleException)return!1;throw m}return!0},postorder:function(d,m){return sr(d,m,"post")},preorder:function(d,m){return sr(d,m,"pre")},prim:function(d,m){var k,z=new Eu,rt={},ot=new cf;function dt(Ct){var Ft=Ct.v===k?Ct.w:Ct.v,oe=ot.priority(Ft);if(oe!==void 0){var Qt=m(Ct);Qt<oe&&(rt[Ft]=k,ot.decrease(Ft,Qt))}}if(d.nodeCount()===0)return z;yn.each(d.nodes(),function(Ct){ot.add(Ct,Number.POSITIVE_INFINITY),z.setNode(Ct)}),ot.decrease(d.nodes()[0],0);for(var mt=!1;ot.size()>0;){if(k=ot.removeMin(),yn.has(rt,k))z.setEdge(k,rt[k]);else{if(mt)throw new Error("Input graph is not connected: "+d);mt=!0}d.nodeEdges(k).forEach(dt)}return z},tarjan:Z,topsort:ce},version:uf.version};try{Wr=bn}catch(d){}Wr||(Wr=window.graphlib);var dn=Wr,mn=function(d){return ks(d,5)},$n=function(d,m,k){if(!Wt(k))return!1;var z=typeof m;return!!(z=="number"?Fr(k)&&w(m,k.length):z=="string"&&m in k)&&S(k[m],d)},Ea=Object.prototype,ha=Ea.hasOwnProperty,Zn=ko(function(d,m){d=Object(d);var k=-1,z=m.length,rt=z>2?m[2]:void 0;for(rt&&$n(m[0],m[1],rt)&&(z=1);++k<z;)for(var ot=m[k],dt=Ie(ot),mt=-1,Ct=dt.length;++mt<Ct;){var Ft=dt[mt],oe=d[Ft];(oe===void 0||S(oe,Ea[Ft])&&!ha.call(d,Ft))&&(d[Ft]=ot[Ft])}return d}),Ma=function(d){return function(m,k,z){var rt=Object(m);if(!Fr(m)){var ot=No(k);m=ee(m),k=function(mt){return ot(rt[mt],mt,rt)}}var dt=d(m,k,z);return dt>-1?rt[ot?m[dt]:dt]:void 0}},Dn=/^\s+|\s+$/g,_a=/^[-+]0x[0-9a-f]+$/i,aa=/^0b[01]+$/i,Rn=/^0o[0-7]+$/i,Ca=parseInt,Ka=function(d){if(typeof d=="number")return d;if(bs(d))return NaN;if(Wt(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Wt(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=d.replace(Dn,"");var k=aa.test(d);return k||Rn.test(d)?Ca(d.slice(2),k?2:8):_a.test(d)?NaN:+d},ii=function(d){return d?(d=Ka(d))===1/0||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0},ri=function(d){var m=ii(d),k=m%1;return m==m?k?m-k:m:0},Xa=Math.max,_i=Ma(function(d,m,k){var z=d==null?0:d.length;if(!z)return-1;var rt=k==null?0:ri(k);return rt<0&&(rt=Xa(z+rt,0)),wu(d,No(m),rt)}),Pi=function(d){return d!=null&&d.length?Li(d,1):[]},bi=function(d,m){return d==null?d:_s(d,Zi(m),Ie)},Wu=function(d){var m=d==null?0:d.length;return m?d[m-1]:void 0},Yf=function(d,m){var k={};return m=No(m),Po(d,function(z,rt,ot){ka(k,rt,m(z,rt,ot))}),k},Qo=function(d,m,k){for(var z=-1,rt=d.length;++z<rt;){var ot=d[z],dt=m(ot);if(dt!=null&&(mt===void 0?dt==dt&&!bs(dt):k(dt,mt)))var mt=dt,Ct=ot}return Ct},Mu=function(d,m){return d>m},lf=function(d){return d&&d.length?Qo(d,Mo,Mu):void 0},ou=function(d,m,k){(k!==void 0&&!S(d[m],k)||k===void 0&&!(m in d))&&ka(d,m,k)},hf=Function.prototype,df=Object.prototype,Vu=hf.toString,Ac=df.hasOwnProperty,Tc=Vu.call(Object),su=function(d){if(!Je(d)||It(d)!="[object Object]")return!1;var m=Oa(d);if(m===null)return!0;var k=Ac.call(m,"constructor")&&m.constructor;return typeof k=="function"&&k instanceof k&&Vu.call(k)==Tc},Xs=function(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]},_u=function(d){return we(d,Ie(d))},Ic=function(d,m,k,z,rt,ot,dt){var mt=Xs(d,k),Ct=Xs(m,k),Ft=dt.get(Ct);if(Ft)ou(d,k,Ft);else{var oe=ot?ot(mt,Ct,k+"",d,m,dt):void 0,Qt=oe===void 0;if(Qt){var Me=ht(Ct),Ue=!Me&&O(Ct),wr=!Me&&!Ue&&Te(Ct);oe=Ct,Me||Ue||wr?ht(mt)?oe=mt:of(mt)?oe=Zr(mt):Ue?(Qt=!1,oe=ir(Ct,!0)):wr?(Qt=!1,oe=Ns(Ct,!0)):oe=[]:su(Ct)||jr(Ct)?(oe=mt,jr(mt)?oe=_u(mt):Wt(mt)&&!ae(mt)||(oe=yi(Ct))):Qt=!1}Qt&&(dt.set(Ct,oe),rt(oe,Ct,z,ot,dt),dt.delete(Ct)),ou(d,k,oe)}},uu=function d(m,k,z,rt,ot){m!==k&&_s(k,function(dt,mt){if(ot||(ot=new ua),Wt(dt))Ic(m,k,mt,z,d,rt,ot);else{var Ct=rt?rt(Xs(m,mt),dt,mt+"",m,k,ot):void 0;Ct===void 0&&(Ct=dt),ou(m,mt,Ct)}},Ie)},Jo=function(d){return ko(function(m,k){var z=-1,rt=k.length,ot=rt>1?k[rt-1]:void 0,dt=rt>2?k[2]:void 0;for(ot=d.length>3&&typeof ot=="function"?(rt--,ot):void 0,dt&&$n(k[0],k[1],dt)&&(ot=rt<3?void 0:ot,rt=1),m=Object(m);++z<rt;){var mt=k[z];mt&&d(m,mt,z,ot)}return m})}(function(d,m,k){uu(d,m,k)}),Ys=function(d,m){return d<m},vf=function(d){return d&&d.length?Qo(d,Mo,Ys):void 0},Gl=function(d,m){return d&&d.length?Qo(d,No(m),Ys):void 0},Hu=function(){return at.Date.now()},il=function(d,m,k,z){if(!Wt(d))return d;for(var rt=-1,ot=(m=Ui(m,d)).length,dt=ot-1,mt=d;mt!=null&&++rt<ot;){var Ct=yo(m[rt]),Ft=k;if(Ct==="__proto__"||Ct==="constructor"||Ct==="prototype")return d;if(rt!=dt){var oe=mt[Ct];(Ft=z?z(oe,Ct,mt):void 0)===void 0&&(Ft=Wt(oe)?oe:w(m[rt+1])?[]:{})}Ve(mt,Ct,Ft),mt=mt[Ct]}return d},ol=function(d,m,k){for(var z=-1,rt=m.length,ot={};++z<rt;){var dt=m[z],mt=qs(d,dt);k(mt,dt)&&il(ot,Ui(dt,d),mt)}return ot},Lc=function(d,m){return ol(d,m,function(k,z){return au(d,z)})},Wf=function(d){return ws(Ga(d,void 0,Pi),d+"")}(function(d,m){return d==null?{}:Lc(d,m)}),sl=Math.ceil,Nc=Math.max,zl=function(d,m,k,z){for(var rt=-1,ot=Nc(sl((m-d)/(k||1)),0),dt=Array(ot);ot--;)dt[z?ot:++rt]=d,d+=k;return dt},Ul=function(d){return function(m,k,z){return z&&typeof z!="number"&&$n(m,k,z)&&(k=z=void 0),m=ii(m),k===void 0?(k=m,m=0):k=ii(k),z=z===void 0?m<k?1:-1:ii(z),zl(m,k,z,d)}}(),Xl=function(d,m){var k=d.length;for(d.sort(m);k--;)d[k]=d[k].value;return d},Yl=function(d,m){if(d!==m){var k=d!==void 0,z=d===null,rt=d==d,ot=bs(d),dt=m!==void 0,mt=m===null,Ct=m==m,Ft=bs(m);if(!mt&&!Ft&&!ot&&d>m||ot&&dt&&Ct&&!mt&&!Ft||z&&dt&&Ct||!k&&Ct||!rt)return 1;if(!z&&!ot&&!Ft&&d<m||Ft&&k&&rt&&!z&&!ot||mt&&k&&rt||!dt&&rt||!Ct)return-1}return 0},Wl=function(d,m,k){for(var z=-1,rt=d.criteria,ot=m.criteria,dt=rt.length,mt=k.length;++z<dt;){var Ct=Yl(rt[z],ot[z]);if(Ct)return z>=mt?Ct:Ct*(k[z]=="desc"?-1:1)}return d.index-m.index},ul=function(d,m,k){m=m.length?si(m,function(ot){return ht(ot)?function(dt){return qs(dt,ot.length===1?ot[0]:ot)}:ot}):[Mo];var z=-1;m=si(m,Dt(No));var rt=lt(d,function(ot,dt,mt){return{criteria:si(m,function(Ct){return Ct(ot)}),index:++z,value:ot}});return Xl(rt,function(ot,dt){return Wl(ot,dt,k)})},pf=ko(function(d,m){if(d==null)return[];var k=m.length;return k>1&&$n(d,m[0],m[1])?m=[]:k>2&&$n(m[0],m[1],m[2])&&(m=[m[0]]),ul(d,Li(m,1),[])}),Vl=0,gf=function(d){var m=++Vl;return bu(d)+m},Hl=function(d,m,k){for(var z=-1,rt=d.length,ot=m.length,dt={};++z<rt;){var mt=z<ot?m[z]:void 0;k(dt,d[z],mt)}return dt},ju,fl=function(d,m){return Hl(d||[],m||[],Ve)};try{ju={cloneDeep:mn,constant:lo,defaults:Zn,each:di,filter:nf,find:_i,flatten:Pi,forEach:Lo,forIn:bi,has:Ds,isUndefined:A,last:Wu,map:xt,mapValues:Yf,max:lf,merge:Jo,min:vf,minBy:Gl,now:Hu,pick:Wf,range:Ul,reduce:qt,sortBy:pf,uniqueId:gf,values:Mc,zipObject:fl}}catch(d){}ju||(ju=window._);var De=ju,cl=Ws;function Ws(){var d={};d._next=d._prev=d,this._sentinel=d}function yf(d){d._prev._next=d._next,d._next._prev=d._prev,delete d._next,delete d._prev}function kc(d,m){if(d!=="_next"&&d!=="_prev")return m}Ws.prototype.dequeue=function(){var d=this._sentinel,m=d._prev;if(m!==d)return yf(m),m},Ws.prototype.enqueue=function(d){var m=this._sentinel;d._prev&&d._next&&yf(d),d._next=m._next,m._next._prev=d,m._next=d,d._prev=m},Ws.prototype.toString=function(){for(var d=[],m=this._sentinel,k=m._prev;k!==m;)d.push(JSON.stringify(k,kc)),k=k._prev;return"["+d.join(", ")+"]"};var ll=dn.Graph,hl=function(d,m){if(d.nodeCount()<=1)return[];var k=function(rt,ot){var dt=new ll,mt=0,Ct=0;De.forEach(rt.nodes(),function(Qt){dt.setNode(Qt,{v:Qt,in:0,out:0})}),De.forEach(rt.edges(),function(Qt){var Me=dt.edge(Qt.v,Qt.w)||0,Ue=ot(Qt),wr=Me+Ue;dt.setEdge(Qt.v,Qt.w,wr),Ct=Math.max(Ct,dt.node(Qt.v).out+=Ue),mt=Math.max(mt,dt.node(Qt.w).in+=Ue)});var Ft=De.range(Ct+mt+3).map(function(){return new cl}),oe=mt+1;return De.forEach(dt.nodes(),function(Qt){Oc(Ft,oe,dt.node(Qt))}),{graph:dt,buckets:Ft,zeroIdx:oe}}(d,m||jl),z=function(rt,ot,dt){for(var mt,Ct=[],Ft=ot[ot.length-1],oe=ot[0];rt.nodeCount();){for(;mt=oe.dequeue();)mf(rt,ot,dt,mt);for(;mt=Ft.dequeue();)mf(rt,ot,dt,mt);if(rt.nodeCount()){for(var Qt=ot.length-2;Qt>0;--Qt)if(mt=ot[Qt].dequeue()){Ct=Ct.concat(mf(rt,ot,dt,mt,!0));break}}}return Ct}(k.graph,k.buckets,k.zeroIdx);return De.flatten(De.map(z,function(rt){return d.outEdges(rt.v,rt.w)}),!0)},jl=De.constant(1);function mf(d,m,k,z,rt){var ot=rt?[]:void 0;return De.forEach(d.inEdges(z.v),function(dt){var mt=d.edge(dt),Ct=d.node(dt.v);rt&&ot.push({v:dt.v,w:dt.w}),Ct.out-=mt,Oc(m,k,Ct)}),De.forEach(d.outEdges(z.v),function(dt){var mt=d.edge(dt),Ct=dt.w,Ft=d.node(Ct);Ft.in-=mt,Oc(m,k,Ft)}),d.removeNode(z.v),ot}function Oc(d,m,k){k.out?k.in?d[k.out-k.in+m].enqueue(k):d[d.length-1].enqueue(k):d[0].enqueue(k)}var Zl={run:function(d){var m=d.graph().acyclicer==="greedy"?hl(d,function(k){return function(z){return k.edge(z).weight}}(d)):function(k){var z=[],rt={},ot={};function dt(mt){De.has(ot,mt)||(ot[mt]=!0,rt[mt]=!0,De.forEach(k.outEdges(mt),function(Ct){De.has(rt,Ct.w)?z.push(Ct):dt(Ct.w)}),delete rt[mt])}return De.forEach(k.nodes(),dt),z}(d);De.forEach(m,function(k){var z=d.edge(k);d.removeEdge(k),z.forwardName=k.name,z.reversed=!0,d.setEdge(k.w,k.v,z,De.uniqueId("rev"))})},undo:function(d){De.forEach(d.edges(),function(m){var k=d.edge(m);if(k.reversed){d.removeEdge(m);var z=k.forwardName;delete k.reversed,delete k.forwardName,d.setEdge(m.w,m.v,k,z)}})}},Dc=dn.Graph,mo={addDummyNode:Zu,simplify:function(d){var m=new Dc().setGraph(d.graph());return De.forEach(d.nodes(),function(k){m.setNode(k,d.node(k))}),De.forEach(d.edges(),function(k){var z=m.edge(k.v,k.w)||{weight:0,minlen:1},rt=d.edge(k);m.setEdge(k.v,k.w,{weight:z.weight+rt.weight,minlen:Math.max(z.minlen,rt.minlen)})}),m},asNonCompoundGraph:function(d){var m=new Dc({multigraph:d.isMultigraph()}).setGraph(d.graph());return De.forEach(d.nodes(),function(k){d.children(k).length||m.setNode(k,d.node(k))}),De.forEach(d.edges(),function(k){m.setEdge(k,d.edge(k))}),m},successorWeights:function(d){var m=De.map(d.nodes(),function(k){var z={};return De.forEach(d.outEdges(k),function(rt){z[rt.w]=(z[rt.w]||0)+d.edge(rt).weight}),z});return De.zipObject(d.nodes(),m)},predecessorWeights:function(d){var m=De.map(d.nodes(),function(k){var z={};return De.forEach(d.inEdges(k),function(rt){z[rt.v]=(z[rt.v]||0)+d.edge(rt).weight}),z});return De.zipObject(d.nodes(),m)},intersectRect:function(d,m){var k,z,rt=d.x,ot=d.y,dt=m.x-rt,mt=m.y-ot,Ct=d.width/2,Ft=d.height/2;if(!dt&&!mt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(mt)*Ct>Math.abs(dt)*Ft?(mt<0&&(Ft=-Ft),k=Ft*dt/mt,z=Ft):(dt<0&&(Ct=-Ct),k=Ct,z=Ct*mt/dt),{x:rt+k,y:ot+z}},buildLayerMatrix:function(d){var m=De.map(De.range(dl(d)+1),function(){return[]});return De.forEach(d.nodes(),function(k){var z=d.node(k),rt=z.rank;De.isUndefined(rt)||(m[rt][z.order]=k)}),m},normalizeRanks:function(d){var m=De.min(De.map(d.nodes(),function(k){return d.node(k).rank}));De.forEach(d.nodes(),function(k){var z=d.node(k);De.has(z,"rank")&&(z.rank-=m)})},removeEmptyRanks:function(d){var m=De.min(De.map(d.nodes(),function(ot){return d.node(ot).rank})),k=[];De.forEach(d.nodes(),function(ot){var dt=d.node(ot).rank-m;k[dt]||(k[dt]=[]),k[dt].push(ot)});var z=0,rt=d.graph().nodeRankFactor;De.forEach(k,function(ot,dt){De.isUndefined(ot)&&dt%rt!=0?--z:z&&De.forEach(ot,function(mt){d.node(mt).rank+=z})})},addBorderNode:function(d,m,k,z){var rt={width:0,height:0};return arguments.length>=4&&(rt.rank=k,rt.order=z),Zu(d,"border",rt,m)},maxRank:dl,partition:function(d,m){var k={lhs:[],rhs:[]};return De.forEach(d,function(z){m(z)?k.lhs.push(z):k.rhs.push(z)}),k},time:function(d,m){var k=De.now();try{return m()}finally{console.log(d+" time: "+(De.now()-k)+"ms")}},notime:function(d,m){return m()}};function Zu(d,m,k,z){var rt;do rt=De.uniqueId(z);while(d.hasNode(rt));return k.dummy=m,d.setNode(rt,k),rt}function dl(d){return De.max(De.map(d.nodes(),function(m){var k=d.node(m).rank;if(!De.isUndefined(k))return k}))}var Vf={run:function(d){d.graph().dummyChains=[],De.forEach(d.edges(),function(m){(function(k,z){var rt,ot,dt,mt=z.v,Ct=k.node(mt).rank,Ft=z.w,oe=k.node(Ft).rank,Qt=z.name,Me=k.edge(z),Ue=Me.labelRank;if(oe!==Ct+1){for(k.removeEdge(z),dt=0,++Ct;Ct<oe;++dt,++Ct)Me.points=[],ot={width:0,height:0,edgeLabel:Me,edgeObj:z,rank:Ct},rt=mo.addDummyNode(k,"edge",ot,"_d"),Ct===Ue&&(ot.width=Me.width,ot.height=Me.height,ot.dummy="edge-label",ot.labelpos=Me.labelpos),k.setEdge(mt,rt,{weight:Me.weight},Qt),dt===0&&k.graph().dummyChains.push(rt),mt=rt;k.setEdge(mt,Ft,{weight:Me.weight},Qt)}})(d,m)})},undo:function(d){De.forEach(d.graph().dummyChains,function(m){var k,z=d.node(m),rt=z.edgeLabel;for(d.setEdge(z.edgeObj,rt);z.dummy;)k=d.successors(m)[0],d.removeNode(m),rt.points.push({x:z.x,y:z.y}),z.dummy==="edge-label"&&(rt.x=z.x,rt.y=z.y,rt.width=z.width,rt.height=z.height),m=k,z=d.node(m)})}},Qs=function(d){var m={};De.forEach(d.sources(),function k(z){var rt=d.node(z);if(De.has(m,z))return rt.rank;m[z]=!0;var ot=De.min(De.map(d.outEdges(z),function(dt){return k(dt.w)-d.edge(dt).minlen}));return ot!==Number.POSITIVE_INFINITY&&ot!=null||(ot=0),rt.rank=ot})},bf=function(d,m){return d.node(m.w).rank-d.node(m.v).rank-d.edge(m).minlen},qu=dn.Graph,fu=bf,xf=function(d){var m,k,z=new qu({directed:!1}),rt=d.nodes()[0],ot=d.nodeCount();for(z.setNode(rt,{});Cu(z,d)<ot;)m=wf(z,d),k=z.hasNode(m.v)?fu(d,m):-fu(d,m),Au(z,d,k);return z};function Cu(d,m){return De.forEach(d.nodes(),function k(z){De.forEach(m.nodeEdges(z),function(rt){var ot=rt.v,dt=z===ot?rt.w:ot;d.hasNode(dt)||fu(m,rt)||(d.setNode(dt,{}),d.setEdge(z,dt,{}),k(dt))})}),d.nodeCount()}function wf(d,m){return De.minBy(m.edges(),function(k){if(d.hasNode(k.v)!==d.hasNode(k.w))return fu(m,k)})}function Au(d,m,k){De.forEach(d.nodes(),function(z){m.node(z).rank+=k})}var Pc=bf,Rc=Qs,Hf=dn.alg.preorder,Bc=dn.alg.postorder,Fc=mo.simplify,Ef=Bs;function Bs(d){d=Fc(d),Rc(d);var m,k=xf(d);for(jf(k),Gc(k,d);m=zc(k);)ts(k,d,m,pl(k,d,m))}function Gc(d,m){var k=Bc(d,d.nodes());k=k.slice(0,k.length-1),De.forEach(k,function(z){(function(rt,ot,dt){var mt=rt.node(dt).parent;rt.edge(dt,mt).cutvalue=ql(rt,ot,dt)})(d,m,z)})}function ql(d,m,k){var z=d.node(k).parent,rt=!0,ot=m.edge(k,z),dt=0;return ot||(rt=!1,ot=m.edge(z,k)),dt=ot.weight,De.forEach(m.nodeEdges(k),function(mt){var Ct,Ft,oe=mt.v===k,Qt=oe?mt.w:mt.v;if(Qt!==z){var Me=oe===rt,Ue=m.edge(mt).weight;if(dt+=Me?Ue:-Ue,Ct=k,Ft=Qt,d.hasEdge(Ct,Ft)){var wr=d.edge(k,Qt).cutvalue;dt+=Me?-wr:wr}}}),dt}function jf(d,m){arguments.length<2&&(m=d.nodes()[0]),vl(d,{},1,m)}function vl(d,m,k,z,rt){var ot=k,dt=d.node(z);return m[z]=!0,De.forEach(d.neighbors(z),function(mt){De.has(m,mt)||(k=vl(d,m,k,mt,z))}),dt.low=ot,dt.lim=k++,rt?dt.parent=rt:delete dt.parent,k}function zc(d){return De.find(d.edges(),function(m){return d.edge(m).cutvalue<0})}function pl(d,m,k){var z=k.v,rt=k.w;m.hasEdge(z,rt)||(z=k.w,rt=k.v);var ot=d.node(z),dt=d.node(rt),mt=ot,Ct=!1;ot.lim>dt.lim&&(mt=dt,Ct=!0);var Ft=De.filter(m.edges(),function(oe){return Ct===gl(d,d.node(oe.v),mt)&&Ct!==gl(d,d.node(oe.w),mt)});return De.minBy(Ft,function(oe){return Pc(m,oe)})}function ts(d,m,k,z){var rt=k.v,ot=k.w;d.removeEdge(rt,ot),d.setEdge(z.v,z.w,{}),jf(d),Gc(d,m),function(dt,mt){var Ct=De.find(dt.nodes(),function(oe){return!mt.node(oe).parent}),Ft=Hf(dt,Ct);Ft=Ft.slice(1),De.forEach(Ft,function(oe){var Qt=dt.node(oe).parent,Me=mt.edge(oe,Qt),Ue=!1;Me||(Me=mt.edge(Qt,oe),Ue=!0),mt.node(oe).rank=mt.node(Qt).rank+(Ue?Me.minlen:-Me.minlen)})}(d,m)}function gl(d,m,k){return k.low<=m.lim&&m.lim<=k.lim}Bs.initLowLimValues=jf,Bs.initCutValues=Gc,Bs.calcCutValue=ql,Bs.leaveEdge=zc,Bs.enterEdge=pl,Bs.exchangeEdges=ts;var yl=Qs,$l=function(d){switch(d.graph().ranker){case"network-simplex":Zf(d);break;case"tight-tree":(function(m){yl(m),xf(m)})(d);break;case"longest-path":Fo(d);break;default:Zf(d)}},Fo=yl;function Zf(d){Ef(d)}var Sf=function(d){var m=function(k){var z={},rt=0;function ot(dt){var mt=rt;De.forEach(k.children(dt),ot),z[dt]={low:mt,lim:rt++}}return De.forEach(k.children(),ot),z}(d);De.forEach(d.graph().dummyChains,function(k){for(var z=d.node(k),rt=z.edgeObj,ot=function(Qt,Me,Ue,wr){var Ze,Ke,Qe=[],Hr=[],un=Math.min(Me[Ue].low,Me[wr].low),en=Math.max(Me[Ue].lim,Me[wr].lim);Ze=Ue;do Ze=Qt.parent(Ze),Qe.push(Ze);while(Ze&&(Me[Ze].low>un||en>Me[Ze].lim));for(Ke=Ze,Ze=wr;(Ze=Qt.parent(Ze))!==Ke;)Hr.push(Ze);return{path:Qe.concat(Hr.reverse()),lca:Ke}}(d,m,rt.v,rt.w),dt=ot.path,mt=ot.lca,Ct=0,Ft=dt[Ct],oe=!0;k!==rt.w;){if(z=d.node(k),oe){for(;(Ft=dt[Ct])!==mt&&d.node(Ft).maxRank<z.rank;)Ct++;Ft===mt&&(oe=!1)}if(!oe){for(;Ct<dt.length-1&&d.node(Ft=dt[Ct+1]).minRank<=z.rank;)Ct++;Ft=dt[Ct]}d.setParent(k,Ft),k=d.successors(k)[0]}})},hh={run:function(d){var m=mo.addDummyNode(d,"root",{},"_root"),k=function(dt){var mt={};function Ct(Ft,oe){var Qt=dt.children(Ft);Qt&&Qt.length&&De.forEach(Qt,function(Me){Ct(Me,oe+1)}),mt[Ft]=oe}return De.forEach(dt.children(),function(Ft){Ct(Ft,1)}),mt}(d),z=De.max(De.values(k))-1,rt=2*z+1;d.graph().nestingRoot=m,De.forEach(d.edges(),function(dt){d.edge(dt).minlen*=rt});var ot=function(dt){return De.reduce(dt.edges(),function(mt,Ct){return mt+dt.edge(Ct).weight},0)}(d)+1;De.forEach(d.children(),function(dt){qf(d,m,rt,ot,z,k,dt)}),d.graph().nodeRankFactor=rt},cleanup:function(d){var m=d.graph();d.removeNode(m.nestingRoot),delete m.nestingRoot,De.forEach(d.edges(),function(k){d.edge(k).nestingEdge&&d.removeEdge(k)})}};function qf(d,m,k,z,rt,ot,dt){var mt=d.children(dt);if(mt.length){var Ct=mo.addBorderNode(d,"_bt"),Ft=mo.addBorderNode(d,"_bb"),oe=d.node(dt);d.setParent(Ct,dt),oe.borderTop=Ct,d.setParent(Ft,dt),oe.borderBottom=Ft,De.forEach(mt,function(Qt){qf(d,m,k,z,rt,ot,Qt);var Me=d.node(Qt),Ue=Me.borderTop?Me.borderTop:Qt,wr=Me.borderBottom?Me.borderBottom:Qt,Ze=Me.borderTop?z:2*z,Ke=Ue!==wr?1:rt-ot[dt]+1;d.setEdge(Ct,Ue,{weight:Ze,minlen:Ke,nestingEdge:!0}),d.setEdge(wr,Ft,{weight:Ze,minlen:Ke,nestingEdge:!0})}),d.parent(dt)||d.setEdge(m,Ct,{weight:0,minlen:rt+ot[dt]})}else dt!==m&&d.setEdge(m,dt,{weight:0,minlen:k})}var Oo=function(d){De.forEach(d.children(),function m(k){var z=d.children(k),rt=d.node(k);if(z.length&&De.forEach(z,m),De.has(rt,"minRank")){rt.borderLeft=[],rt.borderRight=[];for(var ot=rt.minRank,dt=rt.maxRank+1;ot<dt;++ot)Kl(d,"borderLeft","_bl",k,rt,ot),Kl(d,"borderRight","_br",k,rt,ot)}})};function Kl(d,m,k,z,rt,ot){var dt={width:0,height:0,rank:ot,borderType:m},mt=rt[m][ot-1],Ct=mo.addDummyNode(d,"border",dt,k);rt[m][ot]=Ct,d.setParent(Ct,z),mt&&d.setEdge(mt,Ct,{weight:1})}var ml={adjust:function(d){var m=d.graph().rankdir.toLowerCase();m!=="lr"&&m!=="rl"||Ql(d)},undo:function(d){var m=d.graph().rankdir.toLowerCase();m!=="bt"&&m!=="rl"||function(k){De.forEach(k.nodes(),function(z){Uc(k.node(z))}),De.forEach(k.edges(),function(z){var rt=k.edge(z);De.forEach(rt.points,Uc),De.has(rt,"y")&&Uc(rt)})}(d),m!=="lr"&&m!=="rl"||(function(k){De.forEach(k.nodes(),function(z){Mf(k.node(z))}),De.forEach(k.edges(),function(z){var rt=k.edge(z);De.forEach(rt.points,Mf),De.has(rt,"x")&&Mf(rt)})}(d),Ql(d))}};function Ql(d){De.forEach(d.nodes(),function(m){cu(d.node(m))}),De.forEach(d.edges(),function(m){cu(d.edge(m))})}function cu(d){var m=d.width;d.width=d.height,d.height=m}function Uc(d){d.y=-d.y}function Mf(d){var m=d.x;d.x=d.y,d.y=m}var $f=function(d){var m={},k=De.filter(d.nodes(),function(mt){return!d.children(mt).length}),z=De.max(De.map(k,function(mt){return d.node(mt).rank})),rt=De.map(De.range(z+1),function(){return[]});function ot(mt){if(!De.has(m,mt)){m[mt]=!0;var Ct=d.node(mt);rt[Ct.rank].push(mt),De.forEach(d.successors(mt),ot)}}var dt=De.sortBy(k,function(mt){return d.node(mt).rank});return De.forEach(dt,ot),rt},_f=function(d,m){for(var k=0,z=1;z<m.length;++z)k+=Kf(d,m[z-1],m[z]);return k};function Kf(d,m,k){for(var z=De.zipObject(k,De.map(k,function(Ft,oe){return oe})),rt=De.flatten(De.map(m,function(Ft){return De.sortBy(De.map(d.outEdges(Ft),function(oe){return{pos:z[oe.w],weight:d.edge(oe).weight}}),"pos")}),!0),ot=1;ot<k.length;)ot<<=1;var dt=2*ot-1;ot-=1;var mt=De.map(new Array(dt),function(){return 0}),Ct=0;return De.forEach(rt.forEach(function(Ft){var oe=Ft.pos+ot;mt[oe]+=Ft.weight;for(var Qt=0;oe>0;)oe%2&&(Qt+=mt[oe+1]),mt[oe=oe-1>>1]+=Ft.weight;Ct+=Ft.weight*Qt})),Ct}var Js=function(d,m){return De.map(m,function(k){var z=d.inEdges(k);if(z.length){var rt=De.reduce(z,function(ot,dt){var mt=d.edge(dt),Ct=d.node(dt.v);return{sum:ot.sum+mt.weight*Ct.order,weight:ot.weight+mt.weight}},{sum:0,weight:0});return{v:k,barycenter:rt.sum/rt.weight,weight:rt.weight}}return{v:k}})},Qf=function(d,m){var k={};return De.forEach(d,function(z,rt){var ot=k[z.v]={indegree:0,in:[],out:[],vs:[z.v],i:rt};De.isUndefined(z.barycenter)||(ot.barycenter=z.barycenter,ot.weight=z.weight)}),De.forEach(m.edges(),function(z){var rt=k[z.v],ot=k[z.w];De.isUndefined(rt)||De.isUndefined(ot)||(ot.indegree++,rt.out.push(k[z.w]))}),function(z){var rt=[];function ot(Ct){return function(Ft){Ft.merged||(De.isUndefined(Ft.barycenter)||De.isUndefined(Ct.barycenter)||Ft.barycenter>=Ct.barycenter)&&function(oe,Qt){var Me=0,Ue=0;oe.weight&&(Me+=oe.barycenter*oe.weight,Ue+=oe.weight),Qt.weight&&(Me+=Qt.barycenter*Qt.weight,Ue+=Qt.weight),oe.vs=Qt.vs.concat(oe.vs),oe.barycenter=Me/Ue,oe.weight=Ue,oe.i=Math.min(Qt.i,oe.i),Qt.merged=!0}(Ct,Ft)}}function dt(Ct){return function(Ft){Ft.in.push(Ct),--Ft.indegree==0&&z.push(Ft)}}for(;z.length;){var mt=z.pop();rt.push(mt),De.forEach(mt.in.reverse(),ot(mt)),De.forEach(mt.out,dt(mt))}return De.map(De.filter(rt,function(Ct){return!Ct.merged}),function(Ct){return De.pick(Ct,["vs","i","barycenter","weight"])})}(De.filter(k,function(z){return!z.indegree}))},Cf=function(d,m){var k=mo.partition(d,function(Qt){return De.has(Qt,"barycenter")}),z=k.lhs,rt=De.sortBy(k.rhs,function(Qt){return-Qt.i}),ot=[],dt=0,mt=0,Ct=0;z.sort((Ft=!!m,function(Qt,Me){return Qt.barycenter<Me.barycenter?-1:Qt.barycenter>Me.barycenter?1:Ft?Me.i-Qt.i:Qt.i-Me.i})),Ct=Af(ot,rt,Ct),De.forEach(z,function(Qt){Ct+=Qt.vs.length,ot.push(Qt.vs),dt+=Qt.barycenter*Qt.weight,mt+=Qt.weight,Ct=Af(ot,rt,Ct)});var Ft,oe={vs:De.flatten(ot,!0)};return mt&&(oe.barycenter=dt/mt,oe.weight=mt),oe};function Af(d,m,k){for(var z;m.length&&(z=De.last(m)).i<=k;)m.pop(),d.push(z.vs),k++;return k}var Jf=function d(m,k,z,rt){var ot=m.children(k),dt=m.node(k),mt=dt?dt.borderLeft:void 0,Ct=dt?dt.borderRight:void 0,Ft={};mt&&(ot=De.filter(ot,function(Ze){return Ze!==mt&&Ze!==Ct}));var oe=Js(m,ot);De.forEach(oe,function(Ze){if(m.children(Ze.v).length){var Ke=d(m,Ze.v,z,rt);Ft[Ze.v]=Ke,De.has(Ke,"barycenter")&&(Qe=Ze,Hr=Ke,De.isUndefined(Qe.barycenter)?(Qe.barycenter=Hr.barycenter,Qe.weight=Hr.weight):(Qe.barycenter=(Qe.barycenter*Qe.weight+Hr.barycenter*Hr.weight)/(Qe.weight+Hr.weight),Qe.weight+=Hr.weight))}var Qe,Hr});var Qt=Qf(oe,z);(function(Ze,Ke){De.forEach(Ze,function(Qe){Qe.vs=De.flatten(Qe.vs.map(function(Hr){return Ke[Hr]?Ke[Hr].vs:Hr}),!0)})})(Qt,Ft);var Me=Cf(Qt,rt);if(mt&&(Me.vs=De.flatten([mt,Me.vs,Ct],!0),m.predecessors(mt).length)){var Ue=m.node(m.predecessors(mt)[0]),wr=m.node(m.predecessors(Ct)[0]);De.has(Me,"barycenter")||(Me.barycenter=0,Me.weight=0),Me.barycenter=(Me.barycenter*Me.weight+Ue.order+wr.order)/(Me.weight+2),Me.weight+=2}return Me},Tu=dn.Graph,tc=function(d,m,k){var z=function(ot){for(var dt;ot.hasNode(dt=De.uniqueId("_root")););return dt}(d),rt=new Tu({compound:!0}).setGraph({root:z}).setDefaultNodeLabel(function(ot){return d.node(ot)});return De.forEach(d.nodes(),function(ot){var dt=d.node(ot),mt=d.parent(ot);(dt.rank===m||dt.minRank<=m&&m<=dt.maxRank)&&(rt.setNode(ot),rt.setParent(ot,mt||z),De.forEach(d[k](ot),function(Ct){var Ft=Ct.v===ot?Ct.w:Ct.v,oe=rt.edge(Ft,ot),Qt=De.isUndefined(oe)?0:oe.weight;rt.setEdge(Ft,ot,{weight:d.edge(Ct).weight+Qt})}),De.has(dt,"minRank")&&rt.setNode(ot,{borderLeft:dt.borderLeft[m],borderRight:dt.borderRight[m]}))}),rt},Xc=function(d,m,k){var z,rt={};De.forEach(k,function(ot){for(var dt,mt,Ct=d.parent(ot);Ct;){if((dt=d.parent(Ct))?(mt=rt[dt],rt[dt]=Ct):(mt=z,z=Ct),mt&&mt!==Ct)return void m.setEdge(mt,Ct);Ct=dt}})},ec=dn.Graph,rc=function(d){var m=mo.maxRank(d),k=Tf(d,De.range(1,m+1),"inEdges"),z=Tf(d,De.range(m-1,-1,-1),"outEdges"),rt=$f(d);$u(d,rt);for(var ot,dt=Number.POSITIVE_INFINITY,mt=0,Ct=0;Ct<4;++mt,++Ct){nc(mt%2?k:z,mt%4>=2),rt=mo.buildLayerMatrix(d);var Ft=_f(d,rt);Ft<dt&&(Ct=0,ot=De.cloneDeep(rt),dt=Ft)}$u(d,ot)};function Tf(d,m,k){return De.map(m,function(z){return tc(d,z,k)})}function nc(d,m){var k=new ec;De.forEach(d,function(z){var rt=z.graph().root,ot=Jf(z,rt,k,m);De.forEach(ot.vs,function(dt,mt){z.node(dt).order=mt}),Xc(z,k,ot.vs)})}function $u(d,m){De.forEach(m,function(k){De.forEach(k,function(z,rt){d.node(z).order=rt})})}var bl=dn.Graph,ac=function(d){var m,k=mo.buildLayerMatrix(d),z=De.merge(Iu(d,k),xl(d,k)),rt={};De.forEach(["u","d"],function(dt){m=dt==="u"?k:De.values(k).reverse(),De.forEach(["l","r"],function(mt){mt==="r"&&(m=De.map(m,function(Qt){return De.values(Qt).reverse()}));var Ct=(dt==="u"?d.predecessors:d.successors).bind(d),Ft=th(d,m,z,Ct),oe=eh(d,m,Ft.root,Ft.align,mt==="r");mt==="r"&&(oe=De.mapValues(oe,function(Qt){return-Qt})),rt[dt+mt]=oe})});var ot=lu(d,rt);return wl(rt,ot),Wc(rt,d.graph().align)};function Iu(d,m){var k={};return De.reduce(m,function(z,rt){var ot=0,dt=0,mt=z.length,Ct=De.last(rt);return De.forEach(rt,function(Ft,oe){var Qt=function(Ue,wr){if(Ue.node(wr).dummy)return De.find(Ue.predecessors(wr),function(Ze){return Ue.node(Ze).dummy})}(d,Ft),Me=Qt?d.node(Qt).order:mt;(Qt||Ft===Ct)&&(De.forEach(rt.slice(dt,oe+1),function(Ue){De.forEach(d.predecessors(Ue),function(wr){var Ze=d.node(wr),Ke=Ze.order;!(Ke<ot||Me<Ke)||Ze.dummy&&d.node(Ue).dummy||Yc(k,wr,Ue)})}),dt=oe+1,ot=Me)}),rt}),k}function xl(d,m){var k={};function z(rt,ot,dt,mt,Ct){var Ft;De.forEach(De.range(ot,dt),function(oe){Ft=rt[oe],d.node(Ft).dummy&&De.forEach(d.predecessors(Ft),function(Qt){var Me=d.node(Qt);Me.dummy&&(Me.order<mt||Me.order>Ct)&&Yc(k,Qt,Ft)})})}return De.reduce(m,function(rt,ot){var dt,mt=-1,Ct=0;return De.forEach(ot,function(Ft,oe){if(d.node(Ft).dummy==="border"){var Qt=d.predecessors(Ft);Qt.length&&(dt=d.node(Qt[0]).order,z(ot,Ct,oe,mt,dt),Ct=oe,mt=dt)}z(ot,Ct,ot.length,dt,rt.length)}),ot}),k}function Yc(d,m,k){if(m>k){var z=m;m=k,k=z}var rt=d[m];rt||(d[m]=rt={}),rt[k]=!0}function Jl(d,m,k){if(m>k){var z=m;m=k,k=z}return De.has(d[m],k)}function th(d,m,k,z){var rt={},ot={},dt={};return De.forEach(m,function(mt){De.forEach(mt,function(Ct,Ft){rt[Ct]=Ct,ot[Ct]=Ct,dt[Ct]=Ft})}),De.forEach(m,function(mt){var Ct=-1;De.forEach(mt,function(Ft){var oe=z(Ft);if(oe.length)for(var Qt=((oe=De.sortBy(oe,function(Ze){return dt[Ze]})).length-1)/2,Me=Math.floor(Qt),Ue=Math.ceil(Qt);Me<=Ue;++Me){var wr=oe[Me];ot[Ft]===Ft&&Ct<dt[wr]&&!Jl(k,Ft,wr)&&(ot[wr]=Ft,ot[Ft]=rt[Ft]=rt[wr],Ct=dt[wr])}})}),{root:rt,align:ot}}function eh(d,m,k,z,rt){var ot={},dt=function(Ft,oe,Qt,Me){var Ue=new bl,wr=Ft.graph(),Ze=function(Ke,Qe,Hr){return function(un,en,In){var Mn,Un=un.node(en),ia=un.node(In),qn=0;if(qn+=Un.width/2,De.has(Un,"labelpos"))switch(Un.labelpos.toLowerCase()){case"l":Mn=-Un.width/2;break;case"r":Mn=Un.width/2}if(Mn&&(qn+=Hr?Mn:-Mn),Mn=0,qn+=(Un.dummy?Qe:Ke)/2,qn+=(ia.dummy?Qe:Ke)/2,qn+=ia.width/2,De.has(ia,"labelpos"))switch(ia.labelpos.toLowerCase()){case"l":Mn=ia.width/2;break;case"r":Mn=-ia.width/2}return Mn&&(qn+=Hr?Mn:-Mn),Mn=0,qn}}(wr.nodesep,wr.edgesep,Me);return De.forEach(oe,function(Ke){var Qe;De.forEach(Ke,function(Hr){var un=Qt[Hr];if(Ue.setNode(un),Qe){var en=Qt[Qe],In=Ue.edge(en,un);Ue.setEdge(en,un,Math.max(Ze(Ft,Hr,Qe),In||0))}Qe=Hr})}),Ue}(d,m,k,rt),mt=rt?"borderLeft":"borderRight";function Ct(Ft,oe){for(var Qt=dt.nodes(),Me=Qt.pop(),Ue={};Me;)Ue[Me]?Ft(Me):(Ue[Me]=!0,Qt.push(Me),Qt=Qt.concat(oe(Me))),Me=Qt.pop()}return Ct(function(Ft){ot[Ft]=dt.inEdges(Ft).reduce(function(oe,Qt){return Math.max(oe,ot[Qt.v]+dt.edge(Qt))},0)},dt.predecessors.bind(dt)),Ct(function(Ft){var oe=dt.outEdges(Ft).reduce(function(Me,Ue){return Math.min(Me,ot[Ue.w]-dt.edge(Ue))},Number.POSITIVE_INFINITY),Qt=d.node(Ft);oe!==Number.POSITIVE_INFINITY&&Qt.borderType!==mt&&(ot[Ft]=Math.max(ot[Ft],oe))},dt.successors.bind(dt)),De.forEach(z,function(Ft){ot[Ft]=ot[k[Ft]]}),ot}function lu(d,m){return De.minBy(De.values(m),function(k){var z=Number.NEGATIVE_INFINITY,rt=Number.POSITIVE_INFINITY;return De.forIn(k,function(ot,dt){var mt=function(Ct,Ft){return Ct.node(Ft).width}(d,dt)/2;z=Math.max(ot+mt,z),rt=Math.min(ot-mt,rt)}),z-rt})}function wl(d,m){var k=De.values(m),z=De.min(k),rt=De.max(k);De.forEach(["u","d"],function(ot){De.forEach(["l","r"],function(dt){var mt,Ct=ot+dt,Ft=d[Ct];if(Ft!==m){var oe=De.values(Ft);(mt=dt==="l"?z-De.min(oe):rt-De.max(oe))&&(d[Ct]=De.mapValues(Ft,function(Qt){return Qt+mt}))}})})}function Wc(d,m){return De.mapValues(d.ul,function(k,z){if(m)return d[m.toLowerCase()][z];var rt=De.sortBy(De.map(d,z));return(rt[1]+rt[2])/2})}var ic=ac,Gh=function(d){(function(m){var k=mo.buildLayerMatrix(m),z=m.graph().ranksep,rt=0;De.forEach(k,function(ot){var dt=De.max(De.map(ot,function(mt){return m.node(mt).height}));De.forEach(ot,function(mt){m.node(mt).y=rt+dt/2}),rt+=dt+z})})(d=mo.asNonCompoundGraph(d)),De.forEach(ic(d),function(m,k){d.node(k).x=m})},El=mo.normalizeRanks,Sl=mo.removeEmptyRanks,Go=mo,rh=dn.Graph,Lu=function(d,m){var k=m&&m.debugTiming?Go.time:Go.notime;k("layout",function(){var z=k("  buildLayoutGraph",function(){return function(rt){var ot=new rh({multigraph:!0,compound:!0}),dt=Hc(rt.graph());return ot.setGraph(De.merge({},Ml,es(dt,hu),De.pick(dt,_l))),De.forEach(rt.nodes(),function(mt){var Ct=Hc(rt.node(mt));ot.setNode(mt,De.defaults(es(Ct,Vc),Cl)),ot.setParent(mt,rt.parent(mt))}),De.forEach(rt.edges(),function(mt){var Ct=Hc(rt.edge(mt));ot.setEdge(mt,De.merge({},Nu,es(Ct,fs),De.pick(Ct,ro)))}),ot}(d)});k("  runLayout",function(){(function(rt,ot){ot("    makeSpaceForEdgeLabels",function(){(function(dt){var mt=dt.graph();mt.ranksep/=2,De.forEach(dt.edges(),function(Ct){var Ft=dt.edge(Ct);Ft.minlen*=2,Ft.labelpos.toLowerCase()!=="c"&&(mt.rankdir==="TB"||mt.rankdir==="BT"?Ft.width+=Ft.labeloffset:Ft.height+=Ft.labeloffset)})})(rt)}),ot("    removeSelfEdges",function(){(function(dt){De.forEach(dt.edges(),function(mt){if(mt.v===mt.w){var Ct=dt.node(mt.v);Ct.selfEdges||(Ct.selfEdges=[]),Ct.selfEdges.push({e:mt,label:dt.edge(mt)}),dt.removeEdge(mt)}})})(rt)}),ot("    acyclic",function(){Zl.run(rt)}),ot("    nestingGraph.run",function(){hh.run(rt)}),ot("    rank",function(){$l(Go.asNonCompoundGraph(rt))}),ot("    injectEdgeLabelProxies",function(){(function(dt){De.forEach(dt.edges(),function(mt){var Ct=dt.edge(mt);if(Ct.width&&Ct.height){var Ft=dt.node(mt.v),oe={rank:(dt.node(mt.w).rank-Ft.rank)/2+Ft.rank,e:mt};Go.addDummyNode(dt,"edge-proxy",oe,"_ep")}})})(rt)}),ot("    removeEmptyRanks",function(){Sl(rt)}),ot("    nestingGraph.cleanup",function(){hh.cleanup(rt)}),ot("    normalizeRanks",function(){El(rt)}),ot("    assignRankMinMax",function(){(function(dt){var mt=0;De.forEach(dt.nodes(),function(Ct){var Ft=dt.node(Ct);Ft.borderTop&&(Ft.minRank=dt.node(Ft.borderTop).rank,Ft.maxRank=dt.node(Ft.borderBottom).rank,mt=De.max(mt,Ft.maxRank))}),dt.graph().maxRank=mt})(rt)}),ot("    removeEdgeLabelProxies",function(){(function(dt){De.forEach(dt.nodes(),function(mt){var Ct=dt.node(mt);Ct.dummy==="edge-proxy"&&(dt.edge(Ct.e).labelRank=Ct.rank,dt.removeNode(mt))})})(rt)}),ot("    normalize.run",function(){Vf.run(rt)}),ot("    parentDummyChains",function(){Sf(rt)}),ot("    addBorderSegments",function(){Oo(rt)}),ot("    order",function(){rc(rt)}),ot("    insertSelfEdges",function(){(function(dt){var mt=Go.buildLayerMatrix(dt);De.forEach(mt,function(Ct){var Ft=0;De.forEach(Ct,function(oe,Qt){var Me=dt.node(oe);Me.order=Qt+Ft,De.forEach(Me.selfEdges,function(Ue){Go.addDummyNode(dt,"selfedge",{width:Ue.label.width,height:Ue.label.height,rank:Me.rank,order:Qt+ ++Ft,e:Ue.e,label:Ue.label},"_se")}),delete Me.selfEdges})})})(rt)}),ot("    adjustCoordinateSystem",function(){ml.adjust(rt)}),ot("    position",function(){Gh(rt)}),ot("    positionSelfEdges",function(){(function(dt){De.forEach(dt.nodes(),function(mt){var Ct=dt.node(mt);if(Ct.dummy==="selfedge"){var Ft=dt.node(Ct.e.v),oe=Ft.x+Ft.width/2,Qt=Ft.y,Me=Ct.x-oe,Ue=Ft.height/2;dt.setEdge(Ct.e,Ct.label),dt.removeNode(mt),Ct.label.points=[{x:oe+2*Me/3,y:Qt-Ue},{x:oe+5*Me/6,y:Qt-Ue},{x:oe+Me,y:Qt},{x:oe+5*Me/6,y:Qt+Ue},{x:oe+2*Me/3,y:Qt+Ue}],Ct.label.x=Ct.x,Ct.label.y=Ct.y}})})(rt)}),ot("    removeBorderNodes",function(){(function(dt){De.forEach(dt.nodes(),function(mt){if(dt.children(mt).length){var Ct=dt.node(mt),Ft=dt.node(Ct.borderTop),oe=dt.node(Ct.borderBottom),Qt=dt.node(De.last(Ct.borderLeft)),Me=dt.node(De.last(Ct.borderRight));Ct.width=Math.abs(Me.x-Qt.x),Ct.height=Math.abs(oe.y-Ft.y),Ct.x=Qt.x+Ct.width/2,Ct.y=Ft.y+Ct.height/2}}),De.forEach(dt.nodes(),function(mt){dt.node(mt).dummy==="border"&&dt.removeNode(mt)})})(rt)}),ot("    normalize.undo",function(){Vf.undo(rt)}),ot("    fixupEdgeLabelCoords",function(){(function(dt){De.forEach(dt.edges(),function(mt){var Ct=dt.edge(mt);if(De.has(Ct,"x"))switch(Ct.labelpos!=="l"&&Ct.labelpos!=="r"||(Ct.width-=Ct.labeloffset),Ct.labelpos){case"l":Ct.x-=Ct.width/2+Ct.labeloffset;break;case"r":Ct.x+=Ct.width/2+Ct.labeloffset}})})(rt)}),ot("    undoCoordinateSystem",function(){ml.undo(rt)}),ot("    translateGraph",function(){(function(dt){var mt=Number.POSITIVE_INFINITY,Ct=0,Ft=Number.POSITIVE_INFINITY,oe=0,Qt=dt.graph(),Me=Qt.marginx||0,Ue=Qt.marginy||0;function wr(Ze){var Ke=Ze.x,Qe=Ze.y,Hr=Ze.width,un=Ze.height;mt=Math.min(mt,Ke-Hr/2),Ct=Math.max(Ct,Ke+Hr/2),Ft=Math.min(Ft,Qe-un/2),oe=Math.max(oe,Qe+un/2)}De.forEach(dt.nodes(),function(Ze){wr(dt.node(Ze))}),De.forEach(dt.edges(),function(Ze){var Ke=dt.edge(Ze);De.has(Ke,"x")&&wr(Ke)}),mt-=Me,Ft-=Ue,De.forEach(dt.nodes(),function(Ze){var Ke=dt.node(Ze);Ke.x-=mt,Ke.y-=Ft}),De.forEach(dt.edges(),function(Ze){var Ke=dt.edge(Ze);De.forEach(Ke.points,function(Qe){Qe.x-=mt,Qe.y-=Ft}),De.has(Ke,"x")&&(Ke.x-=mt),De.has(Ke,"y")&&(Ke.y-=Ft)}),Qt.width=Ct-mt+Me,Qt.height=oe-Ft+Ue})(rt)}),ot("    assignNodeIntersects",function(){(function(dt){De.forEach(dt.edges(),function(mt){var Ct,Ft,oe=dt.edge(mt),Qt=dt.node(mt.v),Me=dt.node(mt.w);oe.points?(Ct=oe.points[0],Ft=oe.points[oe.points.length-1]):(oe.points=[],Ct=Me,Ft=Qt),oe.points.unshift(Go.intersectRect(Qt,Ct)),oe.points.push(Go.intersectRect(Me,Ft))})})(rt)}),ot("    reversePoints",function(){(function(dt){De.forEach(dt.edges(),function(mt){var Ct=dt.edge(mt);Ct.reversed&&Ct.points.reverse()})})(rt)}),ot("    acyclic.undo",function(){Zl.undo(rt)})})(z,k)}),k("  updateInputGraph",function(){(function(rt,ot){De.forEach(rt.nodes(),function(dt){var mt=rt.node(dt),Ct=ot.node(dt);mt&&(mt.x=Ct.x,mt.y=Ct.y,ot.children(dt).length&&(mt.width=Ct.width,mt.height=Ct.height))}),De.forEach(rt.edges(),function(dt){var mt=rt.edge(dt),Ct=ot.edge(dt);mt.points=Ct.points,De.has(Ct,"x")&&(mt.x=Ct.x,mt.y=Ct.y)}),rt.graph().width=ot.graph().width,rt.graph().height=ot.graph().height})(d,z)})})},hu=["nodesep","edgesep","ranksep","marginx","marginy"],Ml={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_l=["acyclicer","ranker","rankdir","align"],Vc=["width","height"],Cl={width:0,height:0},fs=["minlen","weight","width","height","labeloffset"],Nu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ro=["labelpos"];function es(d,m){return De.mapValues(De.pick(d,m),Number)}function Hc(d){var m={};return De.forEach(d,function(k,z){m[z.toLowerCase()]=k}),m}var dh=dn.Graph,nh={graphlib:dn,layout:Lu,debug:{debugOrdering:function(d){var m=mo.buildLayerMatrix(d),k=new dh({compound:!0,multigraph:!0}).setGraph({});return De.forEach(d.nodes(),function(z){k.setNode(z,{label:z}),k.setParent(z,"layer"+d.node(z).rank)}),De.forEach(d.edges(),function(z){k.setEdge(z.v,z.w,{},z.name)}),De.forEach(m,function(z,rt){var ot="layer"+rt;k.setNode(ot,{rank:"same"}),De.reduce(z,function(dt,mt){return k.setEdge(dt,mt,{style:"invis"}),mt})}),k}},util:{time:mo.time,notime:mo.notime},version:"0.8.5"},ah=nh.graphlib,vh=nh.layout;class ih{constructor(m){this.cardinality=1,this.include=T.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=X.NODE,this.name=m.name,this.attr=m.attr||{},this.inputs=m.inputs,this.path=m.path||[],this.width=m.width,this.height=m.height}}class zh{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function oc(d){const m=new zh;return d.nodes.map(k=>new ih(k)).forEach(k=>{m.nodes[k.name]=k,k.inputs.forEach(z=>{(function(rt,ot,dt){dt.name!==ot.name&&rt.edges.push(Object.assign(Object.assign({},dt.attr),{v:dt.name,w:ot.name}))})(m,k,z)})}),m}class ph{constructor(m,k={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=T.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=X.META,this.path=[],this.name=m,this.metaGraph=sc(m,M.META,k)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(m=>this.metaGraph.node(m))}leaves(){let m,k=[],z=[this];for(;z.length;){let rt=z.shift();rt.isGroupNode?(m=rt.metaGraph,m.nodes().forEach(ot=>z.push(m.node(ot)))):k.push(rt.name)}return k}}class gh{constructor(m,k){this.v=m,this.w=k,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(m,k){this.baseEdgeList.push(m)}}function jc(d,m={}){return new ph(d,m)}function Al(d,m){return new gh(d,m)}function sc(d,m,k){const z=k||{},rt=new ah.Graph(z);return rt.setGraph({name:d,rankdir:z.rankdir,type:m,align:z.align}),rt}class Tl{constructor(m={}){this.graphOptions=m,this.index={},this.graphOptions.compound=!0,this.root=jc(Q,this.graphOptions),this.index[Q]=this.root}getNodeMap(){return this.index}node(m){return this.index[m]}setNode(m,k){this.index[m]=k}getBridgeGraph(m){const k=this.index[m];if(!k)throw Error("Could not find node in hierarchy: "+m);if(!("metaGraph"in k))return null;const z=k;if(z.bridgeGraph)return z.bridgeGraph;const rt=sc(J,M.BRIDGE,this.graphOptions);if(z.bridgeGraph=rt,!k.parentNode||!("metaGraph"in k.parentNode))return rt;const ot=k.parentNode;return[ot.metaGraph,this.getBridgeGraph(ot.name)].forEach(dt=>{dt.edges().filter(mt=>mt.v===m||mt.w===m).forEach(mt=>{const Ct=mt.w===m;dt.edge(mt).baseEdgeList.forEach(Ft=>{const[oe,Qt]=Ct?[Ft.w,mt.v]:[Ft.v,mt.w],Me=this.getChildName(m,oe),Ue={v:Ct?Qt:Me,w:Ct?Me:Qt};let wr=rt.edge(Ue);wr||(wr=Al(Ue.v,Ue.w),wr.inbound=Ct,rt.setEdge(Ue.v,Ue.w,wr)),wr.addBaseEdge(Ft,this)})})}),rt}getChildName(m,k){let z=this.index[k];for(;z;){if(z.parentNode&&z.parentNode.name===m)return z.name;z=z.parentNode}throw Error("Could not find immediate child for descendant: "+k)}getPredecessors(m){const k=this.index[m];if(!k)throw Error("Could not find node with name: "+m);return this.getOneWayEdges(k,!0)}getSuccessors(m){const k=this.index[m];if(!k)throw Error("Could not find node with name: "+m);return this.getOneWayEdges(k,!1)}getOneWayEdges(m,k){const z=[];if(!m.parentNode||!m.parentNode.isGroupNode)return z;const rt=m.parentNode,ot=rt.metaGraph,dt=this.getBridgeGraph(rt.name);return Zc(ot,m,k,z),Zc(dt,m,k,z),z}}function uc(d,m){const{rankDirection:k,align:z}=m,rt=new Tl({rankdir:k,align:z});return function(ot,dt){Object.keys(dt.nodes).forEach(mt=>{const Ct=dt.nodes[mt],Ft=Ct.path;let oe=ot.root;oe.depth=Math.max(Ft.length,oe.depth);for(let Qt=0;Qt<Ft.length&&(oe.depth=Math.max(oe.depth,Ft.length-Qt),oe.cardinality+=Ct.cardinality,Qt!==Ft.length-1);Qt++){const Me=Ft[Qt];let Ue=ot.node(Me);Ue||(Ue=jc(Me,ot.graphOptions),Ue.path=Ct.path.slice(0,Qt+1),Ue.parentNode=oe,ot.setNode(Me,Ue),oe.metaGraph.setNode(Me,Ue)),oe=Ue}ot.setNode(Ct.name,Ct),Ct.parentNode=oe,oe.metaGraph.setNode(Ct.name,Ct)})}(rt,d),function(ot,dt){const mt=ot.getNodeMap();let Ct=[],Ft=[];const oe=(Qt,Me)=>{let Ue=0;for(;Qt;)Me[Ue++]=Qt.name,Qt=Qt.parentNode;return Ue-1};dt.edges.forEach(Qt=>{Ct=[],Ft=[];let Me=oe(dt.nodes[Qt.v],Ct),Ue=oe(dt.nodes[Qt.w],Ft);for(;Ct[Me]===Ft[Ue];)if(Me--,Ue--,Me<0||Ue<0)throw Error("No difference found between ancestor paths.");const wr=mt[Ct[Me+1]],Ze=Ct[Me],Ke=Ft[Ue];let Qe=wr.metaGraph.edge(Ze,Ke);Qe||(Qe=Al(Ze,Ke),wr.metaGraph.setEdge(Ze,Ke,Qe)),Qe.addBaseEdge(Qt,ot)})}(rt,d),rt}function Zc(d,m,k,z){(k?d.inEdges(m.name):d.outEdges(m.name)).forEach(rt=>{const ot=d.edge(rt);z.push(ot)})}class oh{constructor(m){this.hierarchy=m,this.index={},this.hasSubHierarchy={},this.root=new fe(this.hierarchy.root,this.hierarchy.graphOptions),this.index[m.root.name]=this.root,this.buildSubHierarchy(m.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(m){if(m in this.hasSubHierarchy)return;this.hasSubHierarchy[m]=!0;const k=this.index[m];if(k.node.type!==X.META)return;const z=k,rt=z.node.metaGraph,ot=z.coreGraph;rt.nodes().forEach(oe=>{const Qt=this.getOrCreateRenderNodeByName(oe);ot.setNode(oe,Qt)}),rt.edges().forEach(oe=>{const Qt=rt.edge(oe),Me=new pt(Qt);ot.setEdge(oe.v,oe.w,Me)});const dt=z.node.parentNode;if(!dt)return;const mt=this.getRenderNodeByName(dt.name),Ct=(oe,...Qt)=>Qt.concat([oe?"IN":"OUT"]).join("~~"),Ft=this.hierarchy.getBridgeGraph(m);Ft.edges().forEach(oe=>{const Qt=Ft.edge(oe),Me=!!rt.node(oe.w),[Ue,wr]=Me?[oe.w,oe.v]:[oe.v,oe.w],Ze=In=>{const Mn=Me?{v:In,w:m}:{v:m,w:In};return mt.coreGraph.edge(Mn)};let Ke=Ze(wr);Ke||(Ke=Ze(Ct(Me,wr,dt.name)));const Qe=Ct(Me,m),Hr=Ct(Me,wr,m);let un=ot.node(Hr);if(!un){let In=ot.node(Qe);if(!In){const Un={name:Qe,type:X.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:T.UNSPECIFIED,inbound:Me,attr:{}};In=new fc(Un),this.index[Qe]=In,ot.setNode(Qe,In)}const Mn={name:Hr,type:X.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:T.UNSPECIFIED,inbound:Me,attr:{}};un=new fc(Mn),this.index[Hr]=un,ot.setNode(Hr,un),ot.setParent(Hr,Qe),In.node.cardinality++}const en=new pt(Qt);en.adjoiningMetaEdge=Ke,Me?ot.setEdge(Hr,Ue,en):ot.setEdge(Ue,Hr,en)})}getOrCreateRenderNodeByName(m){if(!m)return null;if(m in this.index)return this.index[m];const k=this.getNodeByName(m);return k?(this.index[m]=k.isGroupNode?new fe(k,this.hierarchy.graphOptions):new fc(k),this.index[m]):null}getRenderNodeByName(m){return this.index[m]}getNodeByName(m){return this.hierarchy.node(m)}}class fc{constructor(m){this.node=m,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=m.width||0,this.height=m.height||0,this.displayName=m.name,this.attr=m.attr}}class pt{constructor(m){this.metaEdge=m,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class fe extends fc{constructor(m,k){super(m);const z=m.metaGraph.graph();k.compound=!0,this.coreGraph=sc(z.name,M.CORE,k)}}function Ae(d,m){d.node.isGroupNode&&function(k,z){const rt=st(z);k.coreGraph.nodes().map(ot=>k.coreGraph.node(ot)).forEach(ot=>{var dt,mt,Ct,Ft,oe,Qt;const{height:Me,width:Ue}=ot;switch(ot.node.type){case X.NODE:Object.assign(ot,rt.nodeSize.node),ot.height=Me||rt.nodeSize.node.height,ot.width=Ue||rt.nodeSize.node.width;break;case X.BRIDGE:Object.assign(ot,rt.nodeSize.bridge);break;case X.META:ot.expanded?Ae(ot,z):(Object.assign(ot,rt.nodeSize.meta),ot.height=rt.nodeSize.meta.height,ot.width=rt.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ot.node.type)}if(!ot.expanded){const wr=ot.attr;(function(Ze,Ke=!1){if(Ze.coreBox.width=Ze.width,Ze.coreBox.height=Ze.height,!Ke){const Qe=`${Ze.displayName}`.length,Hr=3;Ze.width=Math.max(Ze.coreBox.width,Qe*Hr)}})(ot,z&&(ot.node.type===0&&!!(!((mt=(dt=z==null?void 0:z.nodeSize)===null||dt===void 0?void 0:dt.meta)===null||mt===void 0)&&mt.width)||ot.node.type===1&&(!!(!((Ft=(Ct=z==null?void 0:z.nodeSize)===null||Ct===void 0?void 0:Ct.node)===null||Ft===void 0)&&Ft.width)||!!wr.width)||ot.node.type===2&&!!(!((Qt=(oe=z==null?void 0:z.nodeSize)===null||oe===void 0?void 0:oe.bridge)===null||Qt===void 0)&&Qt.width)))}})}(d,m),d.node.type===X.META&&function(k,z){const rt=st(z),ot=rt.subScene.meta;Object.assign(k,ot);const{nodeSep:dt,rankSep:mt,edgeSep:Ct,align:Ft}=rt.graph.meta,oe={nodesep:dt,ranksep:mt,edgesep:Ct,align:Ft};Object.assign(k.coreBox,function(Ue,wr){const{ranksep:Ze,nodesep:Ke,edgesep:Qe,align:Hr}=wr;Object.assign(Ue.graph(),{ranksep:Ze,nodesep:Ke,edgesep:Qe,align:Hr});const un=[];if(Ue.nodes().forEach(ia=>{Ue.node(ia).node.type!==X.BRIDGE&&un.push(ia)}),!un.length)return{width:0,height:0};vh(Ue);let en=1/0,In=1/0,Mn=-1/0,Un=-1/0;return un.forEach(ia=>{const qn=Ue.node(ia),vi=.5*qn.width,fa=qn.x-vi,Yi=qn.x+vi;en=fa<en?fa:en,Mn=Yi>Mn?Yi:Mn;const Ya=.5*qn.height,Da=qn.y-Ya,Ri=qn.y+Ya;In=Da<In?Da:In,Un=Ri>Un?Ri:Un}),Ue.edges().forEach(ia=>{const qn=Ue.edge(ia),vi=Ue.node(qn.metaEdge.v),fa=Ue.node(qn.metaEdge.w);if(qn.points.length===3&&function(Da){let Ri=lr(Da[0],Da[1]);for(let Bi=1;Bi<Da.length-1;Bi++){const bo=lr(Da[Bi],Da[Bi+1]);if(Math.abs(bo-Ri)>1)return!1;Ri=bo}return!0}(qn.points)){if(vi!=null){const Da=vi.expanded?vi.x:Lr(vi);qn.points[0].x=Da}if(fa!=null){const Da=fa.expanded?fa.x:Lr(fa);qn.points[2].x=Da}qn.points=[qn.points[0],qn.points[1]]}const Yi=qn.points[qn.points.length-2];fa!=null&&(qn.points[qn.points.length-1]=cr(Yi,fa));const Ya=qn.points[1];vi!=null&&(qn.points[0]=cr(Ya,vi)),qn.points.forEach(Da=>{en=Da.x<en?Da.x:en,Mn=Da.x>Mn?Da.x:Mn,In=Da.y<In?Da.y:In,Un=Da.y>Un?Da.y:Un})}),Ue.nodes().forEach(ia=>{const qn=Ue.node(ia);qn.x-=en,qn.y-=In}),Ue.edges().forEach(ia=>{Ue.edge(ia).points.forEach(qn=>{qn.x-=en,qn.y-=In})}),{width:Mn-en,height:Un-In}}(k.coreGraph,oe));let Qt=0;k.coreGraph.nodeCount()>0&&Qt++;const Me=Qt<=1?0:Qt;k.coreBox.width+=Me+Me,k.coreBox.height=ot.labelHeight+k.coreBox.height,k.width=k.coreBox.width+ot.paddingLeft+ot.paddingRight,k.height=k.paddingTop+k.coreBox.height+k.paddingBottom}(d,m)}function lr(d,m){const k=m.x-d.x,z=m.y-d.y;return 180*Math.atan(z/k)/Math.PI}function Lr(d){return d.expanded?d.x:d.x-d.width/2+0+d.coreBox.width/2}function cr(d,m){const k=m.expanded?m.x:Lr(m),z=m.y,rt=d.x-k,ot=d.y-z;let dt,mt,Ct=m.expanded?m.width:m.coreBox.width,Ft=m.expanded?m.height:m.coreBox.height;return Math.abs(ot)*Ct/2>Math.abs(rt)*Ft/2?(ot<0&&(Ft=-Ft),dt=ot===0?0:Ft/2*rt/ot,mt=Ft/2):(rt<0&&(Ct=-Ct),dt=Ct/2,mt=rt===0?0:Ct/2*ot/rt),{x:k+dt,y:z+mt}}function br(d,m,k){var z,rt,ot,dt;const mt=d.nodes.filter((Qt,Me,Ue)=>Ue.findIndex(wr=>wr.id===Qt.id)!==Me).map(Qt=>Qt.id);if(mt.length)throw new Error(`Duplicated ids found: ${mt.join(", ")}`);const Ct=function(Qt){const Me={nodes:[]},Ue=Qt.compound,wr=Object.keys(Ue||{}),Ze=new Map,Ke=(Hr,un=[])=>{if(Ze.has(Hr))return Ze.get(Hr);for(let en=0;en<wr.length;en++){let In=wr[en];if(Ue&&Ue[In].indexOf(Hr)!==-1)return un.unshift(In),Ke(In,un)}return un.length===0&&Ze.set(Hr,un),un},Qe=Hr=>Qt.edges.filter(un=>un.w===Hr).map(un=>({name:un.v}));return Qt.nodes.forEach(Hr=>{const un=Hr.id,en=[...Ke(un),un];let In=Qe(un);Me.nodes.push({name:un,path:en,inputs:In,width:Hr.width,height:Hr.height,attr:Object.assign({},Hr)})}),Me}(d),Ft=function(Qt,Me){const Ue=(Ze,Ke)=>{for(let Qe of Ke.values())if(Qe.includes(Ze))return!0;return!1},wr=(Ze,Ke=[])=>{if(Object.keys(Ze).length===0)return[...new Set(Ke)];const Qe=new Map(Object.keys(Ze).map(un=>[un,Ze[un]])),Hr={};for(let[un,en]of Qe)Ue(un,Qe)?Hr[un]=en:Ke=Ke.concat(un,en);return wr(Hr,Ke)};return wr(Qt).filter(Ze=>Me.includes(Ze))}(d.compound||{},(m==null?void 0:m.expanded)||[]),oe=function(Qt,Me){return function(Ue){return new oh(Ue)}(uc(oc(Qt),Me))}(Ct,{rankDirection:((rt=(z=k==null?void 0:k.graph)===null||z===void 0?void 0:z.meta)===null||rt===void 0?void 0:rt.rankDir)||(m==null?void 0:m.rankDirection)||wt.graph.meta.rankDir,align:((dt=(ot=k==null?void 0:k.graph)===null||ot===void 0?void 0:ot.meta)===null||dt===void 0?void 0:dt.align)||wt.graph.meta.align});return function(Qt,Me){Me.forEach(Ue=>{const wr=Qt.getRenderInfoNodes().find(Qe=>Qe.displayName===Ue);let Ze=wr&&wr.node&&wr.node.name||"";const Ke=Qt.getRenderNodeByName(Ze);if(!Ke)throw new Error(`No nodes found: ${Ze}`);Ke.expanded=!0,Qt.buildSubHierarchy(Ze)})}(oe,Ft),Ae(oe.root,k),Kr(oe.root)}function Xr(d,m=!1){const k=JSON.parse(JSON.stringify(d)),z={nodes:[k],edges:[...k.edges]};return k.nodes.forEach(function rt(ot){(ot.type===0||ot.type===1)&&z.nodes.push(ot),ot.type===0&&(z.edges=z.edges.concat(ot.edges)),Array.isArray(ot.nodes)&&ot.nodes.forEach(rt)}),m&&z.nodes.forEach(rt=>{const ot=z.nodes.find(dt=>dt.id===rt.parentNodeName);if(ot){const dt=ot.x-ot.width/2+ot.paddingLeft,mt=ot.y-ot.height/2+ot.labelHeight+ot.paddingTop;ot.id!==Q&&(rt.x+=dt,rt.y+=mt),rt.type===0&&rt.edges.forEach(Ct=>{Ct.points.forEach(Ft=>{Ft.x+=rt.x-rt.width/2+rt.paddingLeft,Ft.y+=rt.y-rt.height/2+rt.labelHeight+rt.paddingTop})})}}),z}function qr(d,m,k,z){var rt,ot;let dt=[];const mt=((rt=k.find(Qt=>Qt.id===d))===null||rt===void 0?void 0:rt.path)||[],Ct=((ot=k.find(Qt=>Qt.id===m))===null||ot===void 0?void 0:ot.path)||[],Ft=[Q,...mt].slice(0,mt.length).reverse(),oe=[Q,...Ct].slice(0,Ct.length);return Ft.forEach(Qt=>{const Me=k.find(Ue=>Ue.id===Qt);dt=dt.concat(Me.edges.filter(Ue=>Ue.baseEdgeList.some(wr=>wr.v===((z==null?void 0:z.v)||d)&&wr.w===((z==null?void 0:z.w)||m))))}),oe.filter(Qt=>!Ft.includes(Qt)).forEach(Qt=>{const Me=k.find(Ue=>Ue.id===Qt);dt=dt.concat(Me.edges.filter(Ue=>Ue.baseEdgeList.some(wr=>wr.v===((z==null?void 0:z.v)||d)&&wr.w===((z==null?void 0:z.w)||m))))}),dt}function Kr(d){const m=d.coreGraph.nodes().map(z=>d.coreGraph.node(z));return Object.assign(Object.assign({},Gr(d)),{expanded:d.expanded,nodes:d.expanded?(k=m,k.map(z=>z.node.type===X.META?Kr(z):Gr(z))):[],edges:d.expanded?tn(d):[]});var k}function Gr(d){return{id:d.node.name,name:d.node.name,type:d.node.type,cardinality:d.node.cardinality,attr:d.attr,parentNodeName:d.node.parentNode?d.node.parentNode.name:null,coreBox:Object.assign({},d.coreBox),x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius,labelHeight:d.labelHeight,labelOffset:d.labelOffset,outboxWidth:d.outboxWidth,paddingLeft:d.paddingLeft,paddingTop:d.paddingTop,paddingRight:d.paddingRight,paddingBottom:d.paddingBottom,path:d.node.path}}function tn(d){return d.coreGraph.edges().map(m=>({renderInfoEdge:d.coreGraph.edge(m),edge:m})).filter(({renderInfoEdge:m})=>m.metaEdge).map(({edge:m,renderInfoEdge:k})=>{const z=function(rt,ot){const dt=ot.points.map(mt=>Object.assign({},mt));if(ot.adjoiningMetaEdge){const mt=ot.adjoiningMetaEdge.points,Ct=ot.metaEdge.inbound,Ft=Ct?mt[mt.length-1]:mt[0],oe=dt[Ct?0:dt.length-1],Qt=rt.x-rt.width/2,Me=rt.y-rt.height/2,Ue=Ft.x-Qt,wr=Ft.y-Me,Ze=-rt.paddingLeft,Ke=-(rt.paddingTop+rt.labelHeight);oe.x=Ue+Ze,oe.y=wr+Ke}return dt}(d,k);return{adjoiningEdge:k.adjoiningMetaEdge?{w:k.adjoiningMetaEdge.metaEdge.w,v:k.adjoiningMetaEdge.metaEdge.v}:null,inbound:k.metaEdge.inbound,w:m.w,v:m.v,points:z,weight:k.weight,baseEdgeList:k.metaEdge.baseEdgeList,parentNodeName:d.node.name}})}},73633:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{ARRAY_TYPE:function(){return st},EPSILON:function(){return wt},RANDOM:function(){return tt},equals:function(){return T},setMatrixArrayType:function(){return Q},toRadian:function(){return X}});var wt=1e-6,st=typeof Float32Array!="undefined"?Float32Array:Array,tt=Math.random;function Q(M){st=M}var J=Math.PI/180;function X(M){return M*J}function T(M,C){return Math.abs(M-C)<=wt*Math.max(1,Math.abs(M),Math.abs(C))}Math.hypot||(Math.hypot=function(){for(var M=0,C=arguments.length;C--;)M+=arguments[C]*arguments[C];return Math.sqrt(M)})},858204:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{glMatrix:function(){return T},mat2:function(){return wt},mat2d:function(){return st},mat3:function(){return Yn},mat4:function(){return tt},quat:function(){return J},quat2:function(){return X},vec2:function(){return Ff},vec3:function(){return Nr},vec4:function(){return Q}});var wt={};ut.r(wt),ut.d(wt,{LDU:function(){return H},add:function(){return et},adjoint:function(){return P},clone:function(){return C},copy:function(){return _},create:function(){return M},determinant:function(){return y},equals:function(){return St},exactEquals:function(){return at},frob:function(){return q},fromRotation:function(){return B},fromScaling:function(){return Y},fromValues:function(){return L},identity:function(){return b},invert:function(){return D},mul:function(){return kt},multiply:function(){return v},multiplyScalar:function(){return bt},multiplyScalarAndAdd:function(){return zt},rotate:function(){return K},scale:function(){return R},set:function(){return S},str:function(){return W},sub:function(){return Kt},subtract:function(){return ct},transpose:function(){return I}});var st={};ut.r(st),ut.d(st,{add:function(){return se},clone:function(){return gt},copy:function(){return Vt},create:function(){return it},determinant:function(){return ae},equals:function(){return Yt},exactEquals:function(){return gr},frob:function(){return Ut},fromRotation:function(){return ve},fromScaling:function(){return Tt},fromTranslation:function(){return Zt},fromValues:function(){return It},identity:function(){return re},invert:function(){return $t},mul:function(){return Mr},multiply:function(){return Bt},multiplyScalar:function(){return $e},multiplyScalarAndAdd:function(){return fr},rotate:function(){return Ot},scale:function(){return Ht},set:function(){return Wt},str:function(){return Ce},sub:function(){return Ln},subtract:function(){return _e},translate:function(){return pe}});var tt={};ut.r(tt),ut.d(tt,{add:function(){return Te},adjoint:function(){return Br},clone:function(){return ba},copy:function(){return Ba},create:function(){return Ra},determinant:function(){return cn},equals:function(){return kn},exactEquals:function(){return nn},frob:function(){return Ge},fromQuat:function(){return fn},fromQuat2:function(){return we},fromRotation:function(){return ra},fromRotationTranslation:function(){return Ve},fromRotationTranslationScale:function(){return Or},fromRotationTranslationScaleOrigin:function(){return rn},fromScaling:function(){return ua},fromTranslation:function(){return An},fromValues:function(){return xa},fromXRotation:function(){return Fn},fromYRotation:function(){return ka},fromZRotation:function(){return U},frustum:function(){return jr},getRotation:function(){return Pr},getScaling:function(){return Je},getTranslation:function(){return er},identity:function(){return Na},invert:function(){return hr},lookAt:function(){return Gt},mul:function(){return We},multiply:function(){return Cn},multiplyScalar:function(){return Ur},multiplyScalarAndAdd:function(){return pr},ortho:function(){return V},orthoNO:function(){return w},orthoZO:function(){return Et},perspective:function(){return yt},perspectiveFromFieldOfView:function(){return E},perspectiveNO:function(){return ht},perspectiveZO:function(){return O},rotate:function(){return ta},rotateX:function(){return sa},rotateY:function(){return Fa},rotateZ:function(){return wa},scale:function(){return Bn},set:function(){return ya},str:function(){return ie},sub:function(){return vr},subtract:function(){return ar},targetTo:function(){return Dt},translate:function(){return Qn},transpose:function(){return Ta}});var Q={};ut.r(Q),ut.d(Q,{add:function(){return me},ceil:function(){return Zr},clone:function(){return ee},copy:function(){return ue},create:function(){return Fr},cross:function(){return so},dist:function(){return Si},distance:function(){return qa},div:function(){return Wo},divide:function(){return ir},dot:function(){return To},equals:function(){return Vi},exactEquals:function(){return Yo},floor:function(){return En},forEach:function(){return Eo},fromValues:function(){return Lt},inverse:function(){return oo},len:function(){return ps},length:function(){return Ao},lerp:function(){return ma},max:function(){return zn},min:function(){return ln},mul:function(){return Gs},multiply:function(){return rr},negate:function(){return Ei},normalize:function(){return hs},random:function(){return Io},round:function(){return Gn},scale:function(){return la},scaleAndAdd:function(){return Ha},set:function(){return Ee},sqrDist:function(){return fo},sqrLen:function(){return Tn},squaredDistance:function(){return Oa},squaredLength:function(){return wi},str:function(){return vs},sub:function(){return uo},subtract:function(){return Ie},transformMat4:function(){return ds},transformQuat:function(){return ei},zero:function(){return Wi}});var J={};ut.r(J),ut.d(J,{add:function(){return di},calculateW:function(){return jo},clone:function(){return Gi},conjugate:function(){return So},copy:function(){return Zi},create:function(){return Do},dot:function(){return ho},equals:function(){return La},exactEquals:function(){return zi},exp:function(){return co},fromEuler:function(){return _s},fromMat3:function(){return lo},fromValues:function(){return Mo},getAngle:function(){return Pn},getAxisAngle:function(){return Ns},identity:function(){return Ss},invert:function(){return ks},len:function(){return qo},length:function(){return _o},lerp:function(){return Zo},ln:function(){return gs},mul:function(){return Cs},multiply:function(){return Hi},normalize:function(){return Oi},pow:function(){return Ms},random:function(){return Sa},rotateX:function(){return ji},rotateY:function(){return yi},rotateZ:function(){return Ho},rotationTo:function(){return Ci},scale:function(){return Ro},set:function(){return Lo},setAxes:function(){return Di},setAxisAngle:function(){return Vo},slerp:function(){return us},sqlerp:function(){return $o},sqrLen:function(){return Ia},squaredLength:function(){return go},str:function(){return Po}});var X={};ut.r(X),ut.d(X,{add:function(){return Ui},clone:function(){return Co},conjugate:function(){return $s},copy:function(){return zs},create:function(){return Bo},dot:function(){return xu},equals:function(){return Ds},exactEquals:function(){return Bf},fromMat4:function(){return ru},fromRotation:function(){return ms},fromRotationTranslation:function(){return ys},fromRotationTranslationValues:function(){return As},fromTranslation:function(){return Ko},fromValues:function(){return qi},getDual:function(){return Fe},getReal:function(){return Jt},getTranslation:function(){return sn},identity:function(){return bs},invert:function(){return au},len:function(){return Ks},length:function(){return Os},lerp:function(){return nu},mul:function(){return qs},multiply:function(){return yo},normalize:function(){return nf},rotateAroundAxis:function(){return bu},rotateByQuatAppend:function(){return vo},rotateByQuatPrepend:function(){return Us},rotateX:function(){return Wn},rotateY:function(){return si},rotateZ:function(){return to},scale:function(){return zu},set:function(){return At},setDual:function(){return Ar},setReal:function(){return je},sqrLen:function(){return No},squaredLength:function(){return xs},str:function(){return Rf},translate:function(){return wn}});var T=ut(73633);function M(){var h=new T.ARRAY_TYPE(4);return T.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function C(h){var A=new T.ARRAY_TYPE(4);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A}function _(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h}function b(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function L(h,A,lt,xt){var Nt=new T.ARRAY_TYPE(4);return Nt[0]=h,Nt[1]=A,Nt[2]=lt,Nt[3]=xt,Nt}function S(h,A,lt,xt,Nt){return h[0]=A,h[1]=lt,h[2]=xt,h[3]=Nt,h}function I(h,A){if(h===A){var lt=A[1];h[1]=A[2],h[2]=lt}else h[0]=A[0],h[1]=A[2],h[2]=A[1],h[3]=A[3];return h}function D(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=lt*jt-Nt*xt;return qt?(qt=1/qt,h[0]=jt*qt,h[1]=-xt*qt,h[2]=-Nt*qt,h[3]=lt*qt,h):null}function P(h,A){var lt=A[0];return h[0]=A[3],h[1]=-A[1],h[2]=-A[2],h[3]=lt,h}function y(h){return h[0]*h[3]-h[2]*h[1]}function v(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=lt[0],be=lt[1],Le=lt[2],Ye=lt[3];return h[0]=xt*de+jt*be,h[1]=Nt*de+qt*be,h[2]=xt*Le+jt*Ye,h[3]=Nt*Le+qt*Ye,h}function K(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=Math.sin(lt),be=Math.cos(lt);return h[0]=xt*be+jt*de,h[1]=Nt*be+qt*de,h[2]=xt*-de+jt*be,h[3]=Nt*-de+qt*be,h}function R(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=lt[0],be=lt[1];return h[0]=xt*de,h[1]=Nt*de,h[2]=jt*be,h[3]=qt*be,h}function B(h,A){var lt=Math.sin(A),xt=Math.cos(A);return h[0]=xt,h[1]=lt,h[2]=-lt,h[3]=xt,h}function Y(h,A){return h[0]=A[0],h[1]=0,h[2]=0,h[3]=A[1],h}function W(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function q(h){return Math.hypot(h[0],h[1],h[2],h[3])}function H(h,A,lt,xt){return h[2]=xt[2]/xt[0],lt[0]=xt[0],lt[1]=xt[1],lt[3]=xt[3]-h[2]*lt[1],[h,A,lt]}function et(h,A,lt){return h[0]=A[0]+lt[0],h[1]=A[1]+lt[1],h[2]=A[2]+lt[2],h[3]=A[3]+lt[3],h}function ct(h,A,lt){return h[0]=A[0]-lt[0],h[1]=A[1]-lt[1],h[2]=A[2]-lt[2],h[3]=A[3]-lt[3],h}function at(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]}function St(h,A){var lt=h[0],xt=h[1],Nt=h[2],jt=h[3],qt=A[0],de=A[1],be=A[2],Le=A[3];return Math.abs(lt-qt)<=T.EPSILON*Math.max(1,Math.abs(lt),Math.abs(qt))&&Math.abs(xt-de)<=T.EPSILON*Math.max(1,Math.abs(xt),Math.abs(de))&&Math.abs(Nt-be)<=T.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(be))&&Math.abs(jt-Le)<=T.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Le))}function bt(h,A,lt){return h[0]=A[0]*lt,h[1]=A[1]*lt,h[2]=A[2]*lt,h[3]=A[3]*lt,h}function zt(h,A,lt,xt){return h[0]=A[0]+lt[0]*xt,h[1]=A[1]+lt[1]*xt,h[2]=A[2]+lt[2]*xt,h[3]=A[3]+lt[3]*xt,h}var kt=v,Kt=ct;function it(){var h=new T.ARRAY_TYPE(6);return T.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function gt(h){var A=new T.ARRAY_TYPE(6);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A[4]=h[4],A[5]=h[5],A}function Vt(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[4]=A[4],h[5]=A[5],h}function re(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function It(h,A,lt,xt,Nt,jt){var qt=new T.ARRAY_TYPE(6);return qt[0]=h,qt[1]=A,qt[2]=lt,qt[3]=xt,qt[4]=Nt,qt[5]=jt,qt}function Wt(h,A,lt,xt,Nt,jt,qt){return h[0]=A,h[1]=lt,h[2]=xt,h[3]=Nt,h[4]=jt,h[5]=qt,h}function $t(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=A[4],de=A[5],be=lt*jt-xt*Nt;return be?(be=1/be,h[0]=jt*be,h[1]=-xt*be,h[2]=-Nt*be,h[3]=lt*be,h[4]=(Nt*de-jt*qt)*be,h[5]=(xt*qt-lt*de)*be,h):null}function ae(h){return h[0]*h[3]-h[1]*h[2]}function Bt(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=A[4],be=A[5],Le=lt[0],Ye=lt[1],mr=lt[2],xr=lt[3],yr=lt[4],Vr=lt[5];return h[0]=xt*Le+jt*Ye,h[1]=Nt*Le+qt*Ye,h[2]=xt*mr+jt*xr,h[3]=Nt*mr+qt*xr,h[4]=xt*yr+jt*Vr+de,h[5]=Nt*yr+qt*Vr+be,h}function Ot(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=A[4],be=A[5],Le=Math.sin(lt),Ye=Math.cos(lt);return h[0]=xt*Ye+jt*Le,h[1]=Nt*Ye+qt*Le,h[2]=xt*-Le+jt*Ye,h[3]=Nt*-Le+qt*Ye,h[4]=de,h[5]=be,h}function Ht(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=A[4],be=A[5],Le=lt[0],Ye=lt[1];return h[0]=xt*Le,h[1]=Nt*Le,h[2]=jt*Ye,h[3]=qt*Ye,h[4]=de,h[5]=be,h}function pe(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=A[4],be=A[5],Le=lt[0],Ye=lt[1];return h[0]=xt,h[1]=Nt,h[2]=jt,h[3]=qt,h[4]=xt*Le+jt*Ye+de,h[5]=Nt*Le+qt*Ye+be,h}function ve(h,A){var lt=Math.sin(A),xt=Math.cos(A);return h[0]=xt,h[1]=lt,h[2]=-lt,h[3]=xt,h[4]=0,h[5]=0,h}function Tt(h,A){return h[0]=A[0],h[1]=0,h[2]=0,h[3]=A[1],h[4]=0,h[5]=0,h}function Zt(h,A){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=A[0],h[5]=A[1],h}function Ce(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function Ut(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function se(h,A,lt){return h[0]=A[0]+lt[0],h[1]=A[1]+lt[1],h[2]=A[2]+lt[2],h[3]=A[3]+lt[3],h[4]=A[4]+lt[4],h[5]=A[5]+lt[5],h}function _e(h,A,lt){return h[0]=A[0]-lt[0],h[1]=A[1]-lt[1],h[2]=A[2]-lt[2],h[3]=A[3]-lt[3],h[4]=A[4]-lt[4],h[5]=A[5]-lt[5],h}function $e(h,A,lt){return h[0]=A[0]*lt,h[1]=A[1]*lt,h[2]=A[2]*lt,h[3]=A[3]*lt,h[4]=A[4]*lt,h[5]=A[5]*lt,h}function fr(h,A,lt,xt){return h[0]=A[0]+lt[0]*xt,h[1]=A[1]+lt[1]*xt,h[2]=A[2]+lt[2]*xt,h[3]=A[3]+lt[3]*xt,h[4]=A[4]+lt[4]*xt,h[5]=A[5]+lt[5]*xt,h}function gr(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]&&h[4]===A[4]&&h[5]===A[5]}function Yt(h,A){var lt=h[0],xt=h[1],Nt=h[2],jt=h[3],qt=h[4],de=h[5],be=A[0],Le=A[1],Ye=A[2],mr=A[3],xr=A[4],yr=A[5];return Math.abs(lt-be)<=T.EPSILON*Math.max(1,Math.abs(lt),Math.abs(be))&&Math.abs(xt-Le)<=T.EPSILON*Math.max(1,Math.abs(xt),Math.abs(Le))&&Math.abs(Nt-Ye)<=T.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Ye))&&Math.abs(jt-mr)<=T.EPSILON*Math.max(1,Math.abs(jt),Math.abs(mr))&&Math.abs(qt-xr)<=T.EPSILON*Math.max(1,Math.abs(qt),Math.abs(xr))&&Math.abs(de-yr)<=T.EPSILON*Math.max(1,Math.abs(de),Math.abs(yr))}var Mr=Bt,Ln=_e,Yn=ut(935600);function Ra(){var h=new T.ARRAY_TYPE(16);return T.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function ba(h){var A=new T.ARRAY_TYPE(16);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A[4]=h[4],A[5]=h[5],A[6]=h[6],A[7]=h[7],A[8]=h[8],A[9]=h[9],A[10]=h[10],A[11]=h[11],A[12]=h[12],A[13]=h[13],A[14]=h[14],A[15]=h[15],A}function Ba(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h[8]=A[8],h[9]=A[9],h[10]=A[10],h[11]=A[11],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15],h}function xa(h,A,lt,xt,Nt,jt,qt,de,be,Le,Ye,mr,xr,yr,Vr,Jr){var Tr=new T.ARRAY_TYPE(16);return Tr[0]=h,Tr[1]=A,Tr[2]=lt,Tr[3]=xt,Tr[4]=Nt,Tr[5]=jt,Tr[6]=qt,Tr[7]=de,Tr[8]=be,Tr[9]=Le,Tr[10]=Ye,Tr[11]=mr,Tr[12]=xr,Tr[13]=yr,Tr[14]=Vr,Tr[15]=Jr,Tr}function ya(h,A,lt,xt,Nt,jt,qt,de,be,Le,Ye,mr,xr,yr,Vr,Jr,Tr){return h[0]=A,h[1]=lt,h[2]=xt,h[3]=Nt,h[4]=jt,h[5]=qt,h[6]=de,h[7]=be,h[8]=Le,h[9]=Ye,h[10]=mr,h[11]=xr,h[12]=yr,h[13]=Vr,h[14]=Jr,h[15]=Tr,h}function Na(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Ta(h,A){if(h===A){var lt=A[1],xt=A[2],Nt=A[3],jt=A[6],qt=A[7],de=A[11];h[1]=A[4],h[2]=A[8],h[3]=A[12],h[4]=lt,h[6]=A[9],h[7]=A[13],h[8]=xt,h[9]=jt,h[11]=A[14],h[12]=Nt,h[13]=qt,h[14]=de}else h[0]=A[0],h[1]=A[4],h[2]=A[8],h[3]=A[12],h[4]=A[1],h[5]=A[5],h[6]=A[9],h[7]=A[13],h[8]=A[2],h[9]=A[6],h[10]=A[10],h[11]=A[14],h[12]=A[3],h[13]=A[7],h[14]=A[11],h[15]=A[15];return h}function hr(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=A[4],de=A[5],be=A[6],Le=A[7],Ye=A[8],mr=A[9],xr=A[10],yr=A[11],Vr=A[12],Jr=A[13],Tr=A[14],gn=A[15],da=lt*de-xt*qt,va=lt*be-Nt*qt,na=lt*Le-jt*qt,Vn=xt*be-Nt*de,ea=xt*Le-jt*de,Ai=Nt*Le-jt*be,Ti=Ye*Jr-mr*Vr,Mi=Ye*Tr-xr*Vr,Ii=Ye*gn-yr*Vr,Li=mr*Tr-xr*Jr,Xi=mr*gn-yr*Jr,eo=xr*gn-yr*Tr,Ga=da*eo-va*Xi+na*Li+Vn*Ii-ea*Mi+Ai*Ti;return Ga?(Ga=1/Ga,h[0]=(de*eo-be*Xi+Le*Li)*Ga,h[1]=(Nt*Xi-xt*eo-jt*Li)*Ga,h[2]=(Jr*Ai-Tr*ea+gn*Vn)*Ga,h[3]=(xr*ea-mr*Ai-yr*Vn)*Ga,h[4]=(be*Ii-qt*eo-Le*Mi)*Ga,h[5]=(lt*eo-Nt*Ii+jt*Mi)*Ga,h[6]=(Tr*na-Vr*Ai-gn*va)*Ga,h[7]=(Ye*Ai-xr*na+yr*va)*Ga,h[8]=(qt*Xi-de*Ii+Le*Ti)*Ga,h[9]=(xt*Ii-lt*Xi-jt*Ti)*Ga,h[10]=(Vr*ea-Jr*na+gn*da)*Ga,h[11]=(mr*na-Ye*ea-yr*da)*Ga,h[12]=(de*Mi-qt*Li-be*Ti)*Ga,h[13]=(lt*Li-xt*Mi+Nt*Ti)*Ga,h[14]=(Jr*va-Vr*Vn-Tr*da)*Ga,h[15]=(Ye*Vn-mr*va+xr*da)*Ga,h):null}function Br(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=A[4],de=A[5],be=A[6],Le=A[7],Ye=A[8],mr=A[9],xr=A[10],yr=A[11],Vr=A[12],Jr=A[13],Tr=A[14],gn=A[15];return h[0]=de*(xr*gn-yr*Tr)-mr*(be*gn-Le*Tr)+Jr*(be*yr-Le*xr),h[1]=-(xt*(xr*gn-yr*Tr)-mr*(Nt*gn-jt*Tr)+Jr*(Nt*yr-jt*xr)),h[2]=xt*(be*gn-Le*Tr)-de*(Nt*gn-jt*Tr)+Jr*(Nt*Le-jt*be),h[3]=-(xt*(be*yr-Le*xr)-de*(Nt*yr-jt*xr)+mr*(Nt*Le-jt*be)),h[4]=-(qt*(xr*gn-yr*Tr)-Ye*(be*gn-Le*Tr)+Vr*(be*yr-Le*xr)),h[5]=lt*(xr*gn-yr*Tr)-Ye*(Nt*gn-jt*Tr)+Vr*(Nt*yr-jt*xr),h[6]=-(lt*(be*gn-Le*Tr)-qt*(Nt*gn-jt*Tr)+Vr*(Nt*Le-jt*be)),h[7]=lt*(be*yr-Le*xr)-qt*(Nt*yr-jt*xr)+Ye*(Nt*Le-jt*be),h[8]=qt*(mr*gn-yr*Jr)-Ye*(de*gn-Le*Jr)+Vr*(de*yr-Le*mr),h[9]=-(lt*(mr*gn-yr*Jr)-Ye*(xt*gn-jt*Jr)+Vr*(xt*yr-jt*mr)),h[10]=lt*(de*gn-Le*Jr)-qt*(xt*gn-jt*Jr)+Vr*(xt*Le-jt*de),h[11]=-(lt*(de*yr-Le*mr)-qt*(xt*yr-jt*mr)+Ye*(xt*Le-jt*de)),h[12]=-(qt*(mr*Tr-xr*Jr)-Ye*(de*Tr-be*Jr)+Vr*(de*xr-be*mr)),h[13]=lt*(mr*Tr-xr*Jr)-Ye*(xt*Tr-Nt*Jr)+Vr*(xt*xr-Nt*mr),h[14]=-(lt*(de*Tr-be*Jr)-qt*(xt*Tr-Nt*Jr)+Vr*(xt*be-Nt*de)),h[15]=lt*(de*xr-be*mr)-qt*(xt*xr-Nt*mr)+Ye*(xt*be-Nt*de),h}function cn(h){var A=h[0],lt=h[1],xt=h[2],Nt=h[3],jt=h[4],qt=h[5],de=h[6],be=h[7],Le=h[8],Ye=h[9],mr=h[10],xr=h[11],yr=h[12],Vr=h[13],Jr=h[14],Tr=h[15],gn=A*qt-lt*jt,da=A*de-xt*jt,va=A*be-Nt*jt,na=lt*de-xt*qt,Vn=lt*be-Nt*qt,ea=xt*be-Nt*de,Ai=Le*Vr-Ye*yr,Ti=Le*Jr-mr*yr,Mi=Le*Tr-xr*yr,Ii=Ye*Jr-mr*Vr,Li=Ye*Tr-xr*Vr,Xi=mr*Tr-xr*Jr;return gn*Xi-da*Li+va*Ii+na*Mi-Vn*Ti+ea*Ai}function Cn(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=A[4],be=A[5],Le=A[6],Ye=A[7],mr=A[8],xr=A[9],yr=A[10],Vr=A[11],Jr=A[12],Tr=A[13],gn=A[14],da=A[15],va=lt[0],na=lt[1],Vn=lt[2],ea=lt[3];return h[0]=va*xt+na*de+Vn*mr+ea*Jr,h[1]=va*Nt+na*be+Vn*xr+ea*Tr,h[2]=va*jt+na*Le+Vn*yr+ea*gn,h[3]=va*qt+na*Ye+Vn*Vr+ea*da,va=lt[4],na=lt[5],Vn=lt[6],ea=lt[7],h[4]=va*xt+na*de+Vn*mr+ea*Jr,h[5]=va*Nt+na*be+Vn*xr+ea*Tr,h[6]=va*jt+na*Le+Vn*yr+ea*gn,h[7]=va*qt+na*Ye+Vn*Vr+ea*da,va=lt[8],na=lt[9],Vn=lt[10],ea=lt[11],h[8]=va*xt+na*de+Vn*mr+ea*Jr,h[9]=va*Nt+na*be+Vn*xr+ea*Tr,h[10]=va*jt+na*Le+Vn*yr+ea*gn,h[11]=va*qt+na*Ye+Vn*Vr+ea*da,va=lt[12],na=lt[13],Vn=lt[14],ea=lt[15],h[12]=va*xt+na*de+Vn*mr+ea*Jr,h[13]=va*Nt+na*be+Vn*xr+ea*Tr,h[14]=va*jt+na*Le+Vn*yr+ea*gn,h[15]=va*qt+na*Ye+Vn*Vr+ea*da,h}function Qn(h,A,lt){var xt=lt[0],Nt=lt[1],jt=lt[2],qt,de,be,Le,Ye,mr,xr,yr,Vr,Jr,Tr,gn;return A===h?(h[12]=A[0]*xt+A[4]*Nt+A[8]*jt+A[12],h[13]=A[1]*xt+A[5]*Nt+A[9]*jt+A[13],h[14]=A[2]*xt+A[6]*Nt+A[10]*jt+A[14],h[15]=A[3]*xt+A[7]*Nt+A[11]*jt+A[15]):(qt=A[0],de=A[1],be=A[2],Le=A[3],Ye=A[4],mr=A[5],xr=A[6],yr=A[7],Vr=A[8],Jr=A[9],Tr=A[10],gn=A[11],h[0]=qt,h[1]=de,h[2]=be,h[3]=Le,h[4]=Ye,h[5]=mr,h[6]=xr,h[7]=yr,h[8]=Vr,h[9]=Jr,h[10]=Tr,h[11]=gn,h[12]=qt*xt+Ye*Nt+Vr*jt+A[12],h[13]=de*xt+mr*Nt+Jr*jt+A[13],h[14]=be*xt+xr*Nt+Tr*jt+A[14],h[15]=Le*xt+yr*Nt+gn*jt+A[15]),h}function Bn(h,A,lt){var xt=lt[0],Nt=lt[1],jt=lt[2];return h[0]=A[0]*xt,h[1]=A[1]*xt,h[2]=A[2]*xt,h[3]=A[3]*xt,h[4]=A[4]*Nt,h[5]=A[5]*Nt,h[6]=A[6]*Nt,h[7]=A[7]*Nt,h[8]=A[8]*jt,h[9]=A[9]*jt,h[10]=A[10]*jt,h[11]=A[11]*jt,h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15],h}function ta(h,A,lt,xt){var Nt=xt[0],jt=xt[1],qt=xt[2],de=Math.hypot(Nt,jt,qt),be,Le,Ye,mr,xr,yr,Vr,Jr,Tr,gn,da,va,na,Vn,ea,Ai,Ti,Mi,Ii,Li,Xi,eo,Ga,ui;return de<T.EPSILON?null:(de=1/de,Nt*=de,jt*=de,qt*=de,be=Math.sin(lt),Le=Math.cos(lt),Ye=1-Le,mr=A[0],xr=A[1],yr=A[2],Vr=A[3],Jr=A[4],Tr=A[5],gn=A[6],da=A[7],va=A[8],na=A[9],Vn=A[10],ea=A[11],Ai=Nt*Nt*Ye+Le,Ti=jt*Nt*Ye+qt*be,Mi=qt*Nt*Ye-jt*be,Ii=Nt*jt*Ye-qt*be,Li=jt*jt*Ye+Le,Xi=qt*jt*Ye+Nt*be,eo=Nt*qt*Ye+jt*be,Ga=jt*qt*Ye-Nt*be,ui=qt*qt*Ye+Le,h[0]=mr*Ai+Jr*Ti+va*Mi,h[1]=xr*Ai+Tr*Ti+na*Mi,h[2]=yr*Ai+gn*Ti+Vn*Mi,h[3]=Vr*Ai+da*Ti+ea*Mi,h[4]=mr*Ii+Jr*Li+va*Xi,h[5]=xr*Ii+Tr*Li+na*Xi,h[6]=yr*Ii+gn*Li+Vn*Xi,h[7]=Vr*Ii+da*Li+ea*Xi,h[8]=mr*eo+Jr*Ga+va*ui,h[9]=xr*eo+Tr*Ga+na*ui,h[10]=yr*eo+gn*Ga+Vn*ui,h[11]=Vr*eo+da*Ga+ea*ui,A!==h&&(h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h)}function sa(h,A,lt){var xt=Math.sin(lt),Nt=Math.cos(lt),jt=A[4],qt=A[5],de=A[6],be=A[7],Le=A[8],Ye=A[9],mr=A[10],xr=A[11];return A!==h&&(h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[4]=jt*Nt+Le*xt,h[5]=qt*Nt+Ye*xt,h[6]=de*Nt+mr*xt,h[7]=be*Nt+xr*xt,h[8]=Le*Nt-jt*xt,h[9]=Ye*Nt-qt*xt,h[10]=mr*Nt-de*xt,h[11]=xr*Nt-be*xt,h}function Fa(h,A,lt){var xt=Math.sin(lt),Nt=Math.cos(lt),jt=A[0],qt=A[1],de=A[2],be=A[3],Le=A[8],Ye=A[9],mr=A[10],xr=A[11];return A!==h&&(h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[0]=jt*Nt-Le*xt,h[1]=qt*Nt-Ye*xt,h[2]=de*Nt-mr*xt,h[3]=be*Nt-xr*xt,h[8]=jt*xt+Le*Nt,h[9]=qt*xt+Ye*Nt,h[10]=de*xt+mr*Nt,h[11]=be*xt+xr*Nt,h}function wa(h,A,lt){var xt=Math.sin(lt),Nt=Math.cos(lt),jt=A[0],qt=A[1],de=A[2],be=A[3],Le=A[4],Ye=A[5],mr=A[6],xr=A[7];return A!==h&&(h[8]=A[8],h[9]=A[9],h[10]=A[10],h[11]=A[11],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[0]=jt*Nt+Le*xt,h[1]=qt*Nt+Ye*xt,h[2]=de*Nt+mr*xt,h[3]=be*Nt+xr*xt,h[4]=Le*Nt-jt*xt,h[5]=Ye*Nt-qt*xt,h[6]=mr*Nt-de*xt,h[7]=xr*Nt-be*xt,h}function An(h,A){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=A[0],h[13]=A[1],h[14]=A[2],h[15]=1,h}function ua(h,A){return h[0]=A[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=A[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=A[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ra(h,A,lt){var xt=lt[0],Nt=lt[1],jt=lt[2],qt=Math.hypot(xt,Nt,jt),de,be,Le;return qt<T.EPSILON?null:(qt=1/qt,xt*=qt,Nt*=qt,jt*=qt,de=Math.sin(A),be=Math.cos(A),Le=1-be,h[0]=xt*xt*Le+be,h[1]=Nt*xt*Le+jt*de,h[2]=jt*xt*Le-Nt*de,h[3]=0,h[4]=xt*Nt*Le-jt*de,h[5]=Nt*Nt*Le+be,h[6]=jt*Nt*Le+xt*de,h[7]=0,h[8]=xt*jt*Le+Nt*de,h[9]=Nt*jt*Le-xt*de,h[10]=jt*jt*Le+be,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function Fn(h,A){var lt=Math.sin(A),xt=Math.cos(A);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=xt,h[6]=lt,h[7]=0,h[8]=0,h[9]=-lt,h[10]=xt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ka(h,A){var lt=Math.sin(A),xt=Math.cos(A);return h[0]=xt,h[1]=0,h[2]=-lt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=lt,h[9]=0,h[10]=xt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function U(h,A){var lt=Math.sin(A),xt=Math.cos(A);return h[0]=xt,h[1]=lt,h[2]=0,h[3]=0,h[4]=-lt,h[5]=xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Ve(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=xt+xt,be=Nt+Nt,Le=jt+jt,Ye=xt*de,mr=xt*be,xr=xt*Le,yr=Nt*be,Vr=Nt*Le,Jr=jt*Le,Tr=qt*de,gn=qt*be,da=qt*Le;return h[0]=1-(yr+Jr),h[1]=mr+da,h[2]=xr-gn,h[3]=0,h[4]=mr-da,h[5]=1-(Ye+Jr),h[6]=Vr+Tr,h[7]=0,h[8]=xr+gn,h[9]=Vr-Tr,h[10]=1-(Ye+yr),h[11]=0,h[12]=lt[0],h[13]=lt[1],h[14]=lt[2],h[15]=1,h}function we(h,A){var lt=new T.ARRAY_TYPE(3),xt=-A[0],Nt=-A[1],jt=-A[2],qt=A[3],de=A[4],be=A[5],Le=A[6],Ye=A[7],mr=xt*xt+Nt*Nt+jt*jt+qt*qt;return mr>0?(lt[0]=(de*qt+Ye*xt+be*jt-Le*Nt)*2/mr,lt[1]=(be*qt+Ye*Nt+Le*xt-de*jt)*2/mr,lt[2]=(Le*qt+Ye*jt+de*Nt-be*xt)*2/mr):(lt[0]=(de*qt+Ye*xt+be*jt-Le*Nt)*2,lt[1]=(be*qt+Ye*Nt+Le*xt-de*jt)*2,lt[2]=(Le*qt+Ye*jt+de*Nt-be*xt)*2),Ve(h,A,lt),h}function er(h,A){return h[0]=A[12],h[1]=A[13],h[2]=A[14],h}function Je(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[4],qt=A[5],de=A[6],be=A[8],Le=A[9],Ye=A[10];return h[0]=Math.hypot(lt,xt,Nt),h[1]=Math.hypot(jt,qt,de),h[2]=Math.hypot(be,Le,Ye),h}function Pr(h,A){var lt=new T.ARRAY_TYPE(3);Je(lt,A);var xt=1/lt[0],Nt=1/lt[1],jt=1/lt[2],qt=A[0]*xt,de=A[1]*Nt,be=A[2]*jt,Le=A[4]*xt,Ye=A[5]*Nt,mr=A[6]*jt,xr=A[8]*xt,yr=A[9]*Nt,Vr=A[10]*jt,Jr=qt+Ye+Vr,Tr=0;return Jr>0?(Tr=Math.sqrt(Jr+1)*2,h[3]=.25*Tr,h[0]=(mr-yr)/Tr,h[1]=(xr-be)/Tr,h[2]=(de-Le)/Tr):qt>Ye&&qt>Vr?(Tr=Math.sqrt(1+qt-Ye-Vr)*2,h[3]=(mr-yr)/Tr,h[0]=.25*Tr,h[1]=(de+Le)/Tr,h[2]=(xr+be)/Tr):Ye>Vr?(Tr=Math.sqrt(1+Ye-qt-Vr)*2,h[3]=(xr-be)/Tr,h[0]=(de+Le)/Tr,h[1]=.25*Tr,h[2]=(mr+yr)/Tr):(Tr=Math.sqrt(1+Vr-qt-Ye)*2,h[3]=(de-Le)/Tr,h[0]=(xr+be)/Tr,h[1]=(mr+yr)/Tr,h[2]=.25*Tr),h}function Or(h,A,lt,xt){var Nt=A[0],jt=A[1],qt=A[2],de=A[3],be=Nt+Nt,Le=jt+jt,Ye=qt+qt,mr=Nt*be,xr=Nt*Le,yr=Nt*Ye,Vr=jt*Le,Jr=jt*Ye,Tr=qt*Ye,gn=de*be,da=de*Le,va=de*Ye,na=xt[0],Vn=xt[1],ea=xt[2];return h[0]=(1-(Vr+Tr))*na,h[1]=(xr+va)*na,h[2]=(yr-da)*na,h[3]=0,h[4]=(xr-va)*Vn,h[5]=(1-(mr+Tr))*Vn,h[6]=(Jr+gn)*Vn,h[7]=0,h[8]=(yr+da)*ea,h[9]=(Jr-gn)*ea,h[10]=(1-(mr+Vr))*ea,h[11]=0,h[12]=lt[0],h[13]=lt[1],h[14]=lt[2],h[15]=1,h}function rn(h,A,lt,xt,Nt){var jt=A[0],qt=A[1],de=A[2],be=A[3],Le=jt+jt,Ye=qt+qt,mr=de+de,xr=jt*Le,yr=jt*Ye,Vr=jt*mr,Jr=qt*Ye,Tr=qt*mr,gn=de*mr,da=be*Le,va=be*Ye,na=be*mr,Vn=xt[0],ea=xt[1],Ai=xt[2],Ti=Nt[0],Mi=Nt[1],Ii=Nt[2],Li=(1-(Jr+gn))*Vn,Xi=(yr+na)*Vn,eo=(Vr-va)*Vn,Ga=(yr-na)*ea,ui=(1-(xr+gn))*ea,Ps=(Tr+da)*ea,ws=(Vr+va)*Ai,ko=(Tr-da)*Ai,wu=(1-(xr+Jr))*Ai;return h[0]=Li,h[1]=Xi,h[2]=eo,h[3]=0,h[4]=Ga,h[5]=ui,h[6]=Ps,h[7]=0,h[8]=ws,h[9]=ko,h[10]=wu,h[11]=0,h[12]=lt[0]+Ti-(Li*Ti+Ga*Mi+ws*Ii),h[13]=lt[1]+Mi-(Xi*Ti+ui*Mi+ko*Ii),h[14]=lt[2]+Ii-(eo*Ti+Ps*Mi+wu*Ii),h[15]=1,h}function fn(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=lt+lt,de=xt+xt,be=Nt+Nt,Le=lt*qt,Ye=xt*qt,mr=xt*de,xr=Nt*qt,yr=Nt*de,Vr=Nt*be,Jr=jt*qt,Tr=jt*de,gn=jt*be;return h[0]=1-mr-Vr,h[1]=Ye+gn,h[2]=xr-Tr,h[3]=0,h[4]=Ye-gn,h[5]=1-Le-Vr,h[6]=yr+Jr,h[7]=0,h[8]=xr+Tr,h[9]=yr-Jr,h[10]=1-Le-mr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function jr(h,A,lt,xt,Nt,jt,qt){var de=1/(lt-A),be=1/(Nt-xt),Le=1/(jt-qt);return h[0]=jt*2*de,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=jt*2*be,h[6]=0,h[7]=0,h[8]=(lt+A)*de,h[9]=(Nt+xt)*be,h[10]=(qt+jt)*Le,h[11]=-1,h[12]=0,h[13]=0,h[14]=qt*jt*2*Le,h[15]=0,h}function ht(h,A,lt,xt,Nt){var jt=1/Math.tan(A/2),qt;return h[0]=jt/lt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=jt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Nt!=null&&Nt!==1/0?(qt=1/(xt-Nt),h[10]=(Nt+xt)*qt,h[14]=2*Nt*xt*qt):(h[10]=-1,h[14]=-2*xt),h}var yt=ht;function O(h,A,lt,xt,Nt){var jt=1/Math.tan(A/2),qt;return h[0]=jt/lt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=jt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Nt!=null&&Nt!==1/0?(qt=1/(xt-Nt),h[10]=Nt*qt,h[14]=Nt*xt*qt):(h[10]=-1,h[14]=-xt),h}function E(h,A,lt,xt){var Nt=Math.tan(A.upDegrees*Math.PI/180),jt=Math.tan(A.downDegrees*Math.PI/180),qt=Math.tan(A.leftDegrees*Math.PI/180),de=Math.tan(A.rightDegrees*Math.PI/180),be=2/(qt+de),Le=2/(Nt+jt);return h[0]=be,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Le,h[6]=0,h[7]=0,h[8]=-((qt-de)*be*.5),h[9]=(Nt-jt)*Le*.5,h[10]=xt/(lt-xt),h[11]=-1,h[12]=0,h[13]=0,h[14]=xt*lt/(lt-xt),h[15]=0,h}function w(h,A,lt,xt,Nt,jt,qt){var de=1/(A-lt),be=1/(xt-Nt),Le=1/(jt-qt);return h[0]=-2*de,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*be,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Le,h[11]=0,h[12]=(A+lt)*de,h[13]=(Nt+xt)*be,h[14]=(qt+jt)*Le,h[15]=1,h}var V=w;function Et(h,A,lt,xt,Nt,jt,qt){var de=1/(A-lt),be=1/(xt-Nt),Le=1/(jt-qt);return h[0]=-2*de,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*be,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Le,h[11]=0,h[12]=(A+lt)*de,h[13]=(Nt+xt)*be,h[14]=jt*Le,h[15]=1,h}function Gt(h,A,lt,xt){var Nt,jt,qt,de,be,Le,Ye,mr,xr,yr,Vr=A[0],Jr=A[1],Tr=A[2],gn=xt[0],da=xt[1],va=xt[2],na=lt[0],Vn=lt[1],ea=lt[2];return Math.abs(Vr-na)<T.EPSILON&&Math.abs(Jr-Vn)<T.EPSILON&&Math.abs(Tr-ea)<T.EPSILON?Na(h):(Ye=Vr-na,mr=Jr-Vn,xr=Tr-ea,yr=1/Math.hypot(Ye,mr,xr),Ye*=yr,mr*=yr,xr*=yr,Nt=da*xr-va*mr,jt=va*Ye-gn*xr,qt=gn*mr-da*Ye,yr=Math.hypot(Nt,jt,qt),yr?(yr=1/yr,Nt*=yr,jt*=yr,qt*=yr):(Nt=0,jt=0,qt=0),de=mr*qt-xr*jt,be=xr*Nt-Ye*qt,Le=Ye*jt-mr*Nt,yr=Math.hypot(de,be,Le),yr?(yr=1/yr,de*=yr,be*=yr,Le*=yr):(de=0,be=0,Le=0),h[0]=Nt,h[1]=de,h[2]=Ye,h[3]=0,h[4]=jt,h[5]=be,h[6]=mr,h[7]=0,h[8]=qt,h[9]=Le,h[10]=xr,h[11]=0,h[12]=-(Nt*Vr+jt*Jr+qt*Tr),h[13]=-(de*Vr+be*Jr+Le*Tr),h[14]=-(Ye*Vr+mr*Jr+xr*Tr),h[15]=1,h)}function Dt(h,A,lt,xt){var Nt=A[0],jt=A[1],qt=A[2],de=xt[0],be=xt[1],Le=xt[2],Ye=Nt-lt[0],mr=jt-lt[1],xr=qt-lt[2],yr=Ye*Ye+mr*mr+xr*xr;yr>0&&(yr=1/Math.sqrt(yr),Ye*=yr,mr*=yr,xr*=yr);var Vr=be*xr-Le*mr,Jr=Le*Ye-de*xr,Tr=de*mr-be*Ye;return yr=Vr*Vr+Jr*Jr+Tr*Tr,yr>0&&(yr=1/Math.sqrt(yr),Vr*=yr,Jr*=yr,Tr*=yr),h[0]=Vr,h[1]=Jr,h[2]=Tr,h[3]=0,h[4]=mr*Tr-xr*Jr,h[5]=xr*Vr-Ye*Tr,h[6]=Ye*Jr-mr*Vr,h[7]=0,h[8]=Ye,h[9]=mr,h[10]=xr,h[11]=0,h[12]=Nt,h[13]=jt,h[14]=qt,h[15]=1,h}function ie(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Ge(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function Te(h,A,lt){return h[0]=A[0]+lt[0],h[1]=A[1]+lt[1],h[2]=A[2]+lt[2],h[3]=A[3]+lt[3],h[4]=A[4]+lt[4],h[5]=A[5]+lt[5],h[6]=A[6]+lt[6],h[7]=A[7]+lt[7],h[8]=A[8]+lt[8],h[9]=A[9]+lt[9],h[10]=A[10]+lt[10],h[11]=A[11]+lt[11],h[12]=A[12]+lt[12],h[13]=A[13]+lt[13],h[14]=A[14]+lt[14],h[15]=A[15]+lt[15],h}function ar(h,A,lt){return h[0]=A[0]-lt[0],h[1]=A[1]-lt[1],h[2]=A[2]-lt[2],h[3]=A[3]-lt[3],h[4]=A[4]-lt[4],h[5]=A[5]-lt[5],h[6]=A[6]-lt[6],h[7]=A[7]-lt[7],h[8]=A[8]-lt[8],h[9]=A[9]-lt[9],h[10]=A[10]-lt[10],h[11]=A[11]-lt[11],h[12]=A[12]-lt[12],h[13]=A[13]-lt[13],h[14]=A[14]-lt[14],h[15]=A[15]-lt[15],h}function Ur(h,A,lt){return h[0]=A[0]*lt,h[1]=A[1]*lt,h[2]=A[2]*lt,h[3]=A[3]*lt,h[4]=A[4]*lt,h[5]=A[5]*lt,h[6]=A[6]*lt,h[7]=A[7]*lt,h[8]=A[8]*lt,h[9]=A[9]*lt,h[10]=A[10]*lt,h[11]=A[11]*lt,h[12]=A[12]*lt,h[13]=A[13]*lt,h[14]=A[14]*lt,h[15]=A[15]*lt,h}function pr(h,A,lt,xt){return h[0]=A[0]+lt[0]*xt,h[1]=A[1]+lt[1]*xt,h[2]=A[2]+lt[2]*xt,h[3]=A[3]+lt[3]*xt,h[4]=A[4]+lt[4]*xt,h[5]=A[5]+lt[5]*xt,h[6]=A[6]+lt[6]*xt,h[7]=A[7]+lt[7]*xt,h[8]=A[8]+lt[8]*xt,h[9]=A[9]+lt[9]*xt,h[10]=A[10]+lt[10]*xt,h[11]=A[11]+lt[11]*xt,h[12]=A[12]+lt[12]*xt,h[13]=A[13]+lt[13]*xt,h[14]=A[14]+lt[14]*xt,h[15]=A[15]+lt[15]*xt,h}function nn(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]&&h[4]===A[4]&&h[5]===A[5]&&h[6]===A[6]&&h[7]===A[7]&&h[8]===A[8]&&h[9]===A[9]&&h[10]===A[10]&&h[11]===A[11]&&h[12]===A[12]&&h[13]===A[13]&&h[14]===A[14]&&h[15]===A[15]}function kn(h,A){var lt=h[0],xt=h[1],Nt=h[2],jt=h[3],qt=h[4],de=h[5],be=h[6],Le=h[7],Ye=h[8],mr=h[9],xr=h[10],yr=h[11],Vr=h[12],Jr=h[13],Tr=h[14],gn=h[15],da=A[0],va=A[1],na=A[2],Vn=A[3],ea=A[4],Ai=A[5],Ti=A[6],Mi=A[7],Ii=A[8],Li=A[9],Xi=A[10],eo=A[11],Ga=A[12],ui=A[13],Ps=A[14],ws=A[15];return Math.abs(lt-da)<=T.EPSILON*Math.max(1,Math.abs(lt),Math.abs(da))&&Math.abs(xt-va)<=T.EPSILON*Math.max(1,Math.abs(xt),Math.abs(va))&&Math.abs(Nt-na)<=T.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(na))&&Math.abs(jt-Vn)<=T.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Vn))&&Math.abs(qt-ea)<=T.EPSILON*Math.max(1,Math.abs(qt),Math.abs(ea))&&Math.abs(de-Ai)<=T.EPSILON*Math.max(1,Math.abs(de),Math.abs(Ai))&&Math.abs(be-Ti)<=T.EPSILON*Math.max(1,Math.abs(be),Math.abs(Ti))&&Math.abs(Le-Mi)<=T.EPSILON*Math.max(1,Math.abs(Le),Math.abs(Mi))&&Math.abs(Ye-Ii)<=T.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Ii))&&Math.abs(mr-Li)<=T.EPSILON*Math.max(1,Math.abs(mr),Math.abs(Li))&&Math.abs(xr-Xi)<=T.EPSILON*Math.max(1,Math.abs(xr),Math.abs(Xi))&&Math.abs(yr-eo)<=T.EPSILON*Math.max(1,Math.abs(yr),Math.abs(eo))&&Math.abs(Vr-Ga)<=T.EPSILON*Math.max(1,Math.abs(Vr),Math.abs(Ga))&&Math.abs(Jr-ui)<=T.EPSILON*Math.max(1,Math.abs(Jr),Math.abs(ui))&&Math.abs(Tr-Ps)<=T.EPSILON*Math.max(1,Math.abs(Tr),Math.abs(Ps))&&Math.abs(gn-ws)<=T.EPSILON*Math.max(1,Math.abs(gn),Math.abs(ws))}var We=Cn,vr=ar,Nr=ut(277160);function Fr(){var h=new T.ARRAY_TYPE(4);return T.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function ee(h){var A=new T.ARRAY_TYPE(4);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A}function Lt(h,A,lt,xt){var Nt=new T.ARRAY_TYPE(4);return Nt[0]=h,Nt[1]=A,Nt[2]=lt,Nt[3]=xt,Nt}function ue(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h}function Ee(h,A,lt,xt,Nt){return h[0]=A,h[1]=lt,h[2]=xt,h[3]=Nt,h}function me(h,A,lt){return h[0]=A[0]+lt[0],h[1]=A[1]+lt[1],h[2]=A[2]+lt[2],h[3]=A[3]+lt[3],h}function Ie(h,A,lt){return h[0]=A[0]-lt[0],h[1]=A[1]-lt[1],h[2]=A[2]-lt[2],h[3]=A[3]-lt[3],h}function rr(h,A,lt){return h[0]=A[0]*lt[0],h[1]=A[1]*lt[1],h[2]=A[2]*lt[2],h[3]=A[3]*lt[3],h}function ir(h,A,lt){return h[0]=A[0]/lt[0],h[1]=A[1]/lt[1],h[2]=A[2]/lt[2],h[3]=A[3]/lt[3],h}function Zr(h,A){return h[0]=Math.ceil(A[0]),h[1]=Math.ceil(A[1]),h[2]=Math.ceil(A[2]),h[3]=Math.ceil(A[3]),h}function En(h,A){return h[0]=Math.floor(A[0]),h[1]=Math.floor(A[1]),h[2]=Math.floor(A[2]),h[3]=Math.floor(A[3]),h}function ln(h,A,lt){return h[0]=Math.min(A[0],lt[0]),h[1]=Math.min(A[1],lt[1]),h[2]=Math.min(A[2],lt[2]),h[3]=Math.min(A[3],lt[3]),h}function zn(h,A,lt){return h[0]=Math.max(A[0],lt[0]),h[1]=Math.max(A[1],lt[1]),h[2]=Math.max(A[2],lt[2]),h[3]=Math.max(A[3],lt[3]),h}function Gn(h,A){return h[0]=Math.round(A[0]),h[1]=Math.round(A[1]),h[2]=Math.round(A[2]),h[3]=Math.round(A[3]),h}function la(h,A,lt){return h[0]=A[0]*lt,h[1]=A[1]*lt,h[2]=A[2]*lt,h[3]=A[3]*lt,h}function Ha(h,A,lt,xt){return h[0]=A[0]+lt[0]*xt,h[1]=A[1]+lt[1]*xt,h[2]=A[2]+lt[2]*xt,h[3]=A[3]+lt[3]*xt,h}function qa(h,A){var lt=A[0]-h[0],xt=A[1]-h[1],Nt=A[2]-h[2],jt=A[3]-h[3];return Math.hypot(lt,xt,Nt,jt)}function Oa(h,A){var lt=A[0]-h[0],xt=A[1]-h[1],Nt=A[2]-h[2],jt=A[3]-h[3];return lt*lt+xt*xt+Nt*Nt+jt*jt}function Ao(h){var A=h[0],lt=h[1],xt=h[2],Nt=h[3];return Math.hypot(A,lt,xt,Nt)}function wi(h){var A=h[0],lt=h[1],xt=h[2],Nt=h[3];return A*A+lt*lt+xt*xt+Nt*Nt}function Ei(h,A){return h[0]=-A[0],h[1]=-A[1],h[2]=-A[2],h[3]=-A[3],h}function oo(h,A){return h[0]=1/A[0],h[1]=1/A[1],h[2]=1/A[2],h[3]=1/A[3],h}function hs(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=lt*lt+xt*xt+Nt*Nt+jt*jt;return qt>0&&(qt=1/Math.sqrt(qt)),h[0]=lt*qt,h[1]=xt*qt,h[2]=Nt*qt,h[3]=jt*qt,h}function To(h,A){return h[0]*A[0]+h[1]*A[1]+h[2]*A[2]+h[3]*A[3]}function so(h,A,lt,xt){var Nt=lt[0]*xt[1]-lt[1]*xt[0],jt=lt[0]*xt[2]-lt[2]*xt[0],qt=lt[0]*xt[3]-lt[3]*xt[0],de=lt[1]*xt[2]-lt[2]*xt[1],be=lt[1]*xt[3]-lt[3]*xt[1],Le=lt[2]*xt[3]-lt[3]*xt[2],Ye=A[0],mr=A[1],xr=A[2],yr=A[3];return h[0]=mr*Le-xr*be+yr*de,h[1]=-(Ye*Le)+xr*qt-yr*jt,h[2]=Ye*be-mr*qt+yr*Nt,h[3]=-(Ye*de)+mr*jt-xr*Nt,h}function ma(h,A,lt,xt){var Nt=A[0],jt=A[1],qt=A[2],de=A[3];return h[0]=Nt+xt*(lt[0]-Nt),h[1]=jt+xt*(lt[1]-jt),h[2]=qt+xt*(lt[2]-qt),h[3]=de+xt*(lt[3]-de),h}function Io(h,A){A=A||1;var lt,xt,Nt,jt,qt,de;do lt=T.RANDOM()*2-1,xt=T.RANDOM()*2-1,qt=lt*lt+xt*xt;while(qt>=1);do Nt=T.RANDOM()*2-1,jt=T.RANDOM()*2-1,de=Nt*Nt+jt*jt;while(de>=1);var be=Math.sqrt((1-qt)/de);return h[0]=A*lt,h[1]=A*xt,h[2]=A*Nt*be,h[3]=A*jt*be,h}function ds(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3];return h[0]=lt[0]*xt+lt[4]*Nt+lt[8]*jt+lt[12]*qt,h[1]=lt[1]*xt+lt[5]*Nt+lt[9]*jt+lt[13]*qt,h[2]=lt[2]*xt+lt[6]*Nt+lt[10]*jt+lt[14]*qt,h[3]=lt[3]*xt+lt[7]*Nt+lt[11]*jt+lt[15]*qt,h}function ei(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=lt[0],de=lt[1],be=lt[2],Le=lt[3],Ye=Le*xt+de*jt-be*Nt,mr=Le*Nt+be*xt-qt*jt,xr=Le*jt+qt*Nt-de*xt,yr=-qt*xt-de*Nt-be*jt;return h[0]=Ye*Le+yr*-qt+mr*-be-xr*-de,h[1]=mr*Le+yr*-de+xr*-qt-Ye*-be,h[2]=xr*Le+yr*-be+Ye*-de-mr*-qt,h[3]=A[3],h}function Wi(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function vs(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Yo(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]}function Vi(h,A){var lt=h[0],xt=h[1],Nt=h[2],jt=h[3],qt=A[0],de=A[1],be=A[2],Le=A[3];return Math.abs(lt-qt)<=T.EPSILON*Math.max(1,Math.abs(lt),Math.abs(qt))&&Math.abs(xt-de)<=T.EPSILON*Math.max(1,Math.abs(xt),Math.abs(de))&&Math.abs(Nt-be)<=T.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(be))&&Math.abs(jt-Le)<=T.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Le))}var uo=Ie,Gs=rr,Wo=ir,Si=qa,fo=Oa,ps=Ao,Tn=wi,Eo=function(){var h=Fr();return function(A,lt,xt,Nt,jt,qt){var de,be;for(lt||(lt=4),xt||(xt=0),Nt?be=Math.min(Nt*lt+xt,A.length):be=A.length,de=xt;de<be;de+=lt)h[0]=A[de],h[1]=A[de+1],h[2]=A[de+2],h[3]=A[de+3],jt(h,h,qt),A[de]=h[0],A[de+1]=h[1],A[de+2]=h[2],A[de+3]=h[3];return A}}();function Do(){var h=new T.ARRAY_TYPE(4);return T.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Ss(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Vo(h,A,lt){lt=lt*.5;var xt=Math.sin(lt);return h[0]=xt*A[0],h[1]=xt*A[1],h[2]=xt*A[2],h[3]=Math.cos(lt),h}function Ns(h,A){var lt=Math.acos(A[3])*2,xt=Math.sin(lt/2);return xt>T.EPSILON?(h[0]=A[0]/xt,h[1]=A[1]/xt,h[2]=A[2]/xt):(h[0]=1,h[1]=0,h[2]=0),lt}function Pn(h,A){var lt=ho(h,A);return Math.acos(2*lt*lt-1)}function Hi(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=lt[0],be=lt[1],Le=lt[2],Ye=lt[3];return h[0]=xt*Ye+qt*de+Nt*Le-jt*be,h[1]=Nt*Ye+qt*be+jt*de-xt*Le,h[2]=jt*Ye+qt*Le+xt*be-Nt*de,h[3]=qt*Ye-xt*de-Nt*be-jt*Le,h}function ji(h,A,lt){lt*=.5;var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=Math.sin(lt),be=Math.cos(lt);return h[0]=xt*be+qt*de,h[1]=Nt*be+jt*de,h[2]=jt*be-Nt*de,h[3]=qt*be-xt*de,h}function yi(h,A,lt){lt*=.5;var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=Math.sin(lt),be=Math.cos(lt);return h[0]=xt*be-jt*de,h[1]=Nt*be+qt*de,h[2]=jt*be+xt*de,h[3]=qt*be-Nt*de,h}function Ho(h,A,lt){lt*=.5;var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=Math.sin(lt),be=Math.cos(lt);return h[0]=xt*be+Nt*de,h[1]=Nt*be-xt*de,h[2]=jt*be+qt*de,h[3]=qt*be-jt*de,h}function jo(h,A){var lt=A[0],xt=A[1],Nt=A[2];return h[0]=lt,h[1]=xt,h[2]=Nt,h[3]=Math.sqrt(Math.abs(1-lt*lt-xt*xt-Nt*Nt)),h}function co(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=Math.sqrt(lt*lt+xt*xt+Nt*Nt),de=Math.exp(jt),be=qt>0?de*Math.sin(qt)/qt:0;return h[0]=lt*be,h[1]=xt*be,h[2]=Nt*be,h[3]=de*Math.cos(qt),h}function gs(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=Math.sqrt(lt*lt+xt*xt+Nt*Nt),de=qt>0?Math.atan2(qt,jt)/qt:0;return h[0]=lt*de,h[1]=xt*de,h[2]=Nt*de,h[3]=.5*Math.log(lt*lt+xt*xt+Nt*Nt+jt*jt),h}function Ms(h,A,lt){return gs(h,A),Ro(h,h,lt),co(h,h),h}function us(h,A,lt,xt){var Nt=A[0],jt=A[1],qt=A[2],de=A[3],be=lt[0],Le=lt[1],Ye=lt[2],mr=lt[3],xr,yr,Vr,Jr,Tr;return yr=Nt*be+jt*Le+qt*Ye+de*mr,yr<0&&(yr=-yr,be=-be,Le=-Le,Ye=-Ye,mr=-mr),1-yr>T.EPSILON?(xr=Math.acos(yr),Vr=Math.sin(xr),Jr=Math.sin((1-xt)*xr)/Vr,Tr=Math.sin(xt*xr)/Vr):(Jr=1-xt,Tr=xt),h[0]=Jr*Nt+Tr*be,h[1]=Jr*jt+Tr*Le,h[2]=Jr*qt+Tr*Ye,h[3]=Jr*de+Tr*mr,h}function Sa(h){var A=T.RANDOM(),lt=T.RANDOM(),xt=T.RANDOM(),Nt=Math.sqrt(1-A),jt=Math.sqrt(A);return h[0]=Nt*Math.sin(2*Math.PI*lt),h[1]=Nt*Math.cos(2*Math.PI*lt),h[2]=jt*Math.sin(2*Math.PI*xt),h[3]=jt*Math.cos(2*Math.PI*xt),h}function ks(h,A){var lt=A[0],xt=A[1],Nt=A[2],jt=A[3],qt=lt*lt+xt*xt+Nt*Nt+jt*jt,de=qt?1/qt:0;return h[0]=-lt*de,h[1]=-xt*de,h[2]=-Nt*de,h[3]=jt*de,h}function So(h,A){return h[0]=-A[0],h[1]=-A[1],h[2]=-A[2],h[3]=A[3],h}function lo(h,A){var lt=A[0]+A[4]+A[8],xt;if(lt>0)xt=Math.sqrt(lt+1),h[3]=.5*xt,xt=.5/xt,h[0]=(A[5]-A[7])*xt,h[1]=(A[6]-A[2])*xt,h[2]=(A[1]-A[3])*xt;else{var Nt=0;A[4]>A[0]&&(Nt=1),A[8]>A[Nt*3+Nt]&&(Nt=2);var jt=(Nt+1)%3,qt=(Nt+2)%3;xt=Math.sqrt(A[Nt*3+Nt]-A[jt*3+jt]-A[qt*3+qt]+1),h[Nt]=.5*xt,xt=.5/xt,h[3]=(A[jt*3+qt]-A[qt*3+jt])*xt,h[jt]=(A[jt*3+Nt]+A[Nt*3+jt])*xt,h[qt]=(A[qt*3+Nt]+A[Nt*3+qt])*xt}return h}function _s(h,A,lt,xt){var Nt=.5*Math.PI/180;A*=Nt,lt*=Nt,xt*=Nt;var jt=Math.sin(A),qt=Math.cos(A),de=Math.sin(lt),be=Math.cos(lt),Le=Math.sin(xt),Ye=Math.cos(xt);return h[0]=jt*be*Ye-qt*de*Le,h[1]=qt*de*Ye+jt*be*Le,h[2]=qt*be*Le-jt*de*Ye,h[3]=qt*be*Ye+jt*de*Le,h}function Po(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Gi=ee,Mo=Lt,Zi=ue,Lo=Ee,di=me,Cs=Hi,Ro=la,ho=To,Zo=ma,_o=Ao,qo=_o,go=wi,Ia=go,Oi=hs,zi=Yo,La=Vi,Ci=function(){var h=Nr.create(),A=Nr.fromValues(1,0,0),lt=Nr.fromValues(0,1,0);return function(xt,Nt,jt){var qt=Nr.dot(Nt,jt);return qt<-.999999?(Nr.cross(h,A,Nt),Nr.len(h)<1e-6&&Nr.cross(h,lt,Nt),Nr.normalize(h,h),Vo(xt,h,Math.PI),xt):qt>.999999?(xt[0]=0,xt[1]=0,xt[2]=0,xt[3]=1,xt):(Nr.cross(h,Nt,jt),xt[0]=h[0],xt[1]=h[1],xt[2]=h[2],xt[3]=1+qt,Oi(xt,xt))}}(),$o=function(){var h=Do(),A=Do();return function(lt,xt,Nt,jt,qt,de){return us(h,xt,qt,de),us(A,Nt,jt,de),us(lt,h,A,2*de*(1-de)),lt}}(),Di=function(){var h=Yn.create();return function(A,lt,xt,Nt){return h[0]=xt[0],h[3]=xt[1],h[6]=xt[2],h[1]=Nt[0],h[4]=Nt[1],h[7]=Nt[2],h[2]=-lt[0],h[5]=-lt[1],h[8]=-lt[2],Oi(A,lo(A,h))}}();function Bo(){var h=new T.ARRAY_TYPE(8);return T.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Co(h){var A=new T.ARRAY_TYPE(8);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A[4]=h[4],A[5]=h[5],A[6]=h[6],A[7]=h[7],A}function qi(h,A,lt,xt,Nt,jt,qt,de){var be=new T.ARRAY_TYPE(8);return be[0]=h,be[1]=A,be[2]=lt,be[3]=xt,be[4]=Nt,be[5]=jt,be[6]=qt,be[7]=de,be}function As(h,A,lt,xt,Nt,jt,qt){var de=new T.ARRAY_TYPE(8);de[0]=h,de[1]=A,de[2]=lt,de[3]=xt;var be=Nt*.5,Le=jt*.5,Ye=qt*.5;return de[4]=be*xt+Le*lt-Ye*A,de[5]=Le*xt+Ye*h-be*lt,de[6]=Ye*xt+be*A-Le*h,de[7]=-be*h-Le*A-Ye*lt,de}function ys(h,A,lt){var xt=lt[0]*.5,Nt=lt[1]*.5,jt=lt[2]*.5,qt=A[0],de=A[1],be=A[2],Le=A[3];return h[0]=qt,h[1]=de,h[2]=be,h[3]=Le,h[4]=xt*Le+Nt*be-jt*de,h[5]=Nt*Le+jt*qt-xt*be,h[6]=jt*Le+xt*de-Nt*qt,h[7]=-xt*qt-Nt*de-jt*be,h}function Ko(h,A){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=A[0]*.5,h[5]=A[1]*.5,h[6]=A[2]*.5,h[7]=0,h}function ms(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function ru(h,A){var lt=Do();Pr(lt,A);var xt=new T.ARRAY_TYPE(3);return er(xt,A),ys(h,lt,xt),h}function zs(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h}function bs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function At(h,A,lt,xt,Nt,jt,qt,de,be){return h[0]=A,h[1]=lt,h[2]=xt,h[3]=Nt,h[4]=jt,h[5]=qt,h[6]=de,h[7]=be,h}var Jt=Zi;function Fe(h,A){return h[0]=A[4],h[1]=A[5],h[2]=A[6],h[3]=A[7],h}var je=Zi;function Ar(h,A){return h[4]=A[0],h[5]=A[1],h[6]=A[2],h[7]=A[3],h}function sn(h,A){var lt=A[4],xt=A[5],Nt=A[6],jt=A[7],qt=-A[0],de=-A[1],be=-A[2],Le=A[3];return h[0]=(lt*Le+jt*qt+xt*be-Nt*de)*2,h[1]=(xt*Le+jt*de+Nt*qt-lt*be)*2,h[2]=(Nt*Le+jt*be+lt*de-xt*qt)*2,h}function wn(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=lt[0]*.5,be=lt[1]*.5,Le=lt[2]*.5,Ye=A[4],mr=A[5],xr=A[6],yr=A[7];return h[0]=xt,h[1]=Nt,h[2]=jt,h[3]=qt,h[4]=qt*de+Nt*Le-jt*be+Ye,h[5]=qt*be+jt*de-xt*Le+mr,h[6]=qt*Le+xt*be-Nt*de+xr,h[7]=-xt*de-Nt*be-jt*Le+yr,h}function Wn(h,A,lt){var xt=-A[0],Nt=-A[1],jt=-A[2],qt=A[3],de=A[4],be=A[5],Le=A[6],Ye=A[7],mr=de*qt+Ye*xt+be*jt-Le*Nt,xr=be*qt+Ye*Nt+Le*xt-de*jt,yr=Le*qt+Ye*jt+de*Nt-be*xt,Vr=Ye*qt-de*xt-be*Nt-Le*jt;return ji(h,A,lt),xt=h[0],Nt=h[1],jt=h[2],qt=h[3],h[4]=mr*qt+Vr*xt+xr*jt-yr*Nt,h[5]=xr*qt+Vr*Nt+yr*xt-mr*jt,h[6]=yr*qt+Vr*jt+mr*Nt-xr*xt,h[7]=Vr*qt-mr*xt-xr*Nt-yr*jt,h}function si(h,A,lt){var xt=-A[0],Nt=-A[1],jt=-A[2],qt=A[3],de=A[4],be=A[5],Le=A[6],Ye=A[7],mr=de*qt+Ye*xt+be*jt-Le*Nt,xr=be*qt+Ye*Nt+Le*xt-de*jt,yr=Le*qt+Ye*jt+de*Nt-be*xt,Vr=Ye*qt-de*xt-be*Nt-Le*jt;return yi(h,A,lt),xt=h[0],Nt=h[1],jt=h[2],qt=h[3],h[4]=mr*qt+Vr*xt+xr*jt-yr*Nt,h[5]=xr*qt+Vr*Nt+yr*xt-mr*jt,h[6]=yr*qt+Vr*jt+mr*Nt-xr*xt,h[7]=Vr*qt-mr*xt-xr*Nt-yr*jt,h}function to(h,A,lt){var xt=-A[0],Nt=-A[1],jt=-A[2],qt=A[3],de=A[4],be=A[5],Le=A[6],Ye=A[7],mr=de*qt+Ye*xt+be*jt-Le*Nt,xr=be*qt+Ye*Nt+Le*xt-de*jt,yr=Le*qt+Ye*jt+de*Nt-be*xt,Vr=Ye*qt-de*xt-be*Nt-Le*jt;return Ho(h,A,lt),xt=h[0],Nt=h[1],jt=h[2],qt=h[3],h[4]=mr*qt+Vr*xt+xr*jt-yr*Nt,h[5]=xr*qt+Vr*Nt+yr*xt-mr*jt,h[6]=yr*qt+Vr*jt+mr*Nt-xr*xt,h[7]=Vr*qt-mr*xt-xr*Nt-yr*jt,h}function vo(h,A,lt){var xt=lt[0],Nt=lt[1],jt=lt[2],qt=lt[3],de=A[0],be=A[1],Le=A[2],Ye=A[3];return h[0]=de*qt+Ye*xt+be*jt-Le*Nt,h[1]=be*qt+Ye*Nt+Le*xt-de*jt,h[2]=Le*qt+Ye*jt+de*Nt-be*xt,h[3]=Ye*qt-de*xt-be*Nt-Le*jt,de=A[4],be=A[5],Le=A[6],Ye=A[7],h[4]=de*qt+Ye*xt+be*jt-Le*Nt,h[5]=be*qt+Ye*Nt+Le*xt-de*jt,h[6]=Le*qt+Ye*jt+de*Nt-be*xt,h[7]=Ye*qt-de*xt-be*Nt-Le*jt,h}function Us(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=lt[0],be=lt[1],Le=lt[2],Ye=lt[3];return h[0]=xt*Ye+qt*de+Nt*Le-jt*be,h[1]=Nt*Ye+qt*be+jt*de-xt*Le,h[2]=jt*Ye+qt*Le+xt*be-Nt*de,h[3]=qt*Ye-xt*de-Nt*be-jt*Le,de=lt[4],be=lt[5],Le=lt[6],Ye=lt[7],h[4]=xt*Ye+qt*de+Nt*Le-jt*be,h[5]=Nt*Ye+qt*be+jt*de-xt*Le,h[6]=jt*Ye+qt*Le+xt*be-Nt*de,h[7]=qt*Ye-xt*de-Nt*be-jt*Le,h}function bu(h,A,lt,xt){if(Math.abs(xt)<T.EPSILON)return zs(h,A);var Nt=Math.hypot(lt[0],lt[1],lt[2]);xt=xt*.5;var jt=Math.sin(xt),qt=jt*lt[0]/Nt,de=jt*lt[1]/Nt,be=jt*lt[2]/Nt,Le=Math.cos(xt),Ye=A[0],mr=A[1],xr=A[2],yr=A[3];h[0]=Ye*Le+yr*qt+mr*be-xr*de,h[1]=mr*Le+yr*de+xr*qt-Ye*be,h[2]=xr*Le+yr*be+Ye*de-mr*qt,h[3]=yr*Le-Ye*qt-mr*de-xr*be;var Vr=A[4],Jr=A[5],Tr=A[6],gn=A[7];return h[4]=Vr*Le+gn*qt+Jr*be-Tr*de,h[5]=Jr*Le+gn*de+Tr*qt-Vr*be,h[6]=Tr*Le+gn*be+Vr*de-Jr*qt,h[7]=gn*Le-Vr*qt-Jr*de-Tr*be,h}function Ui(h,A,lt){return h[0]=A[0]+lt[0],h[1]=A[1]+lt[1],h[2]=A[2]+lt[2],h[3]=A[3]+lt[3],h[4]=A[4]+lt[4],h[5]=A[5]+lt[5],h[6]=A[6]+lt[6],h[7]=A[7]+lt[7],h}function yo(h,A,lt){var xt=A[0],Nt=A[1],jt=A[2],qt=A[3],de=lt[4],be=lt[5],Le=lt[6],Ye=lt[7],mr=A[4],xr=A[5],yr=A[6],Vr=A[7],Jr=lt[0],Tr=lt[1],gn=lt[2],da=lt[3];return h[0]=xt*da+qt*Jr+Nt*gn-jt*Tr,h[1]=Nt*da+qt*Tr+jt*Jr-xt*gn,h[2]=jt*da+qt*gn+xt*Tr-Nt*Jr,h[3]=qt*da-xt*Jr-Nt*Tr-jt*gn,h[4]=xt*Ye+qt*de+Nt*Le-jt*be+mr*da+Vr*Jr+xr*gn-yr*Tr,h[5]=Nt*Ye+qt*be+jt*de-xt*Le+xr*da+Vr*Tr+yr*Jr-mr*gn,h[6]=jt*Ye+qt*Le+xt*be-Nt*de+yr*da+Vr*gn+mr*Tr-xr*Jr,h[7]=qt*Ye-xt*de-Nt*be-jt*Le+Vr*da-mr*Jr-xr*Tr-yr*gn,h}var qs=yo;function zu(h,A,lt){return h[0]=A[0]*lt,h[1]=A[1]*lt,h[2]=A[2]*lt,h[3]=A[3]*lt,h[4]=A[4]*lt,h[5]=A[5]*lt,h[6]=A[6]*lt,h[7]=A[7]*lt,h}var xu=ho;function nu(h,A,lt,xt){var Nt=1-xt;return xu(A,lt)<0&&(xt=-xt),h[0]=A[0]*Nt+lt[0]*xt,h[1]=A[1]*Nt+lt[1]*xt,h[2]=A[2]*Nt+lt[2]*xt,h[3]=A[3]*Nt+lt[3]*xt,h[4]=A[4]*Nt+lt[4]*xt,h[5]=A[5]*Nt+lt[5]*xt,h[6]=A[6]*Nt+lt[6]*xt,h[7]=A[7]*Nt+lt[7]*xt,h}function au(h,A){var lt=xs(A);return h[0]=-A[0]/lt,h[1]=-A[1]/lt,h[2]=-A[2]/lt,h[3]=A[3]/lt,h[4]=-A[4]/lt,h[5]=-A[5]/lt,h[6]=-A[6]/lt,h[7]=A[7]/lt,h}function $s(h,A){return h[0]=-A[0],h[1]=-A[1],h[2]=-A[2],h[3]=A[3],h[4]=-A[4],h[5]=-A[5],h[6]=-A[6],h[7]=A[7],h}var Os=_o,Ks=Os,xs=go,No=xs;function nf(h,A){var lt=xs(A);if(lt>0){lt=Math.sqrt(lt);var xt=A[0]/lt,Nt=A[1]/lt,jt=A[2]/lt,qt=A[3]/lt,de=A[4],be=A[5],Le=A[6],Ye=A[7],mr=xt*de+Nt*be+jt*Le+qt*Ye;h[0]=xt,h[1]=Nt,h[2]=jt,h[3]=qt,h[4]=(de-xt*mr)/lt,h[5]=(be-Nt*mr)/lt,h[6]=(Le-jt*mr)/lt,h[7]=(Ye-qt*mr)/lt}return h}function Rf(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Bf(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]&&h[4]===A[4]&&h[5]===A[5]&&h[6]===A[6]&&h[7]===A[7]}function Ds(h,A){var lt=h[0],xt=h[1],Nt=h[2],jt=h[3],qt=h[4],de=h[5],be=h[6],Le=h[7],Ye=A[0],mr=A[1],xr=A[2],yr=A[3],Vr=A[4],Jr=A[5],Tr=A[6],gn=A[7];return Math.abs(lt-Ye)<=T.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Ye))&&Math.abs(xt-mr)<=T.EPSILON*Math.max(1,Math.abs(xt),Math.abs(mr))&&Math.abs(Nt-xr)<=T.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(xr))&&Math.abs(jt-yr)<=T.EPSILON*Math.max(1,Math.abs(jt),Math.abs(yr))&&Math.abs(qt-Vr)<=T.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Vr))&&Math.abs(de-Jr)<=T.EPSILON*Math.max(1,Math.abs(de),Math.abs(Jr))&&Math.abs(be-Tr)<=T.EPSILON*Math.max(1,Math.abs(be),Math.abs(Tr))&&Math.abs(Le-gn)<=T.EPSILON*Math.max(1,Math.abs(Le),Math.abs(gn))}var Ff=ut(631437)},935600:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{add:function(){return et},adjoint:function(){return b},clone:function(){return Q},copy:function(){return J},create:function(){return st},determinant:function(){return L},equals:function(){return zt},exactEquals:function(){return bt},frob:function(){return H},fromMat2d:function(){return R},fromMat4:function(){return tt},fromQuat:function(){return B},fromRotation:function(){return v},fromScaling:function(){return K},fromTranslation:function(){return y},fromValues:function(){return X},identity:function(){return M},invert:function(){return _},mul:function(){return kt},multiply:function(){return S},multiplyScalar:function(){return at},multiplyScalarAndAdd:function(){return St},normalFromMat4:function(){return Y},projection:function(){return W},rotate:function(){return D},scale:function(){return P},set:function(){return T},str:function(){return q},sub:function(){return Kt},subtract:function(){return ct},translate:function(){return I},transpose:function(){return C}});var wt=ut(73633);function st(){var it=new wt.ARRAY_TYPE(9);return wt.ARRAY_TYPE!=Float32Array&&(it[1]=0,it[2]=0,it[3]=0,it[5]=0,it[6]=0,it[7]=0),it[0]=1,it[4]=1,it[8]=1,it}function tt(it,gt){return it[0]=gt[0],it[1]=gt[1],it[2]=gt[2],it[3]=gt[4],it[4]=gt[5],it[5]=gt[6],it[6]=gt[8],it[7]=gt[9],it[8]=gt[10],it}function Q(it){var gt=new wt.ARRAY_TYPE(9);return gt[0]=it[0],gt[1]=it[1],gt[2]=it[2],gt[3]=it[3],gt[4]=it[4],gt[5]=it[5],gt[6]=it[6],gt[7]=it[7],gt[8]=it[8],gt}function J(it,gt){return it[0]=gt[0],it[1]=gt[1],it[2]=gt[2],it[3]=gt[3],it[4]=gt[4],it[5]=gt[5],it[6]=gt[6],it[7]=gt[7],it[8]=gt[8],it}function X(it,gt,Vt,re,It,Wt,$t,ae,Bt){var Ot=new wt.ARRAY_TYPE(9);return Ot[0]=it,Ot[1]=gt,Ot[2]=Vt,Ot[3]=re,Ot[4]=It,Ot[5]=Wt,Ot[6]=$t,Ot[7]=ae,Ot[8]=Bt,Ot}function T(it,gt,Vt,re,It,Wt,$t,ae,Bt,Ot){return it[0]=gt,it[1]=Vt,it[2]=re,it[3]=It,it[4]=Wt,it[5]=$t,it[6]=ae,it[7]=Bt,it[8]=Ot,it}function M(it){return it[0]=1,it[1]=0,it[2]=0,it[3]=0,it[4]=1,it[5]=0,it[6]=0,it[7]=0,it[8]=1,it}function C(it,gt){if(it===gt){var Vt=gt[1],re=gt[2],It=gt[5];it[1]=gt[3],it[2]=gt[6],it[3]=Vt,it[5]=gt[7],it[6]=re,it[7]=It}else it[0]=gt[0],it[1]=gt[3],it[2]=gt[6],it[3]=gt[1],it[4]=gt[4],it[5]=gt[7],it[6]=gt[2],it[7]=gt[5],it[8]=gt[8];return it}function _(it,gt){var Vt=gt[0],re=gt[1],It=gt[2],Wt=gt[3],$t=gt[4],ae=gt[5],Bt=gt[6],Ot=gt[7],Ht=gt[8],pe=Ht*$t-ae*Ot,ve=-Ht*Wt+ae*Bt,Tt=Ot*Wt-$t*Bt,Zt=Vt*pe+re*ve+It*Tt;return Zt?(Zt=1/Zt,it[0]=pe*Zt,it[1]=(-Ht*re+It*Ot)*Zt,it[2]=(ae*re-It*$t)*Zt,it[3]=ve*Zt,it[4]=(Ht*Vt-It*Bt)*Zt,it[5]=(-ae*Vt+It*Wt)*Zt,it[6]=Tt*Zt,it[7]=(-Ot*Vt+re*Bt)*Zt,it[8]=($t*Vt-re*Wt)*Zt,it):null}function b(it,gt){var Vt=gt[0],re=gt[1],It=gt[2],Wt=gt[3],$t=gt[4],ae=gt[5],Bt=gt[6],Ot=gt[7],Ht=gt[8];return it[0]=$t*Ht-ae*Ot,it[1]=It*Ot-re*Ht,it[2]=re*ae-It*$t,it[3]=ae*Bt-Wt*Ht,it[4]=Vt*Ht-It*Bt,it[5]=It*Wt-Vt*ae,it[6]=Wt*Ot-$t*Bt,it[7]=re*Bt-Vt*Ot,it[8]=Vt*$t-re*Wt,it}function L(it){var gt=it[0],Vt=it[1],re=it[2],It=it[3],Wt=it[4],$t=it[5],ae=it[6],Bt=it[7],Ot=it[8];return gt*(Ot*Wt-$t*Bt)+Vt*(-Ot*It+$t*ae)+re*(Bt*It-Wt*ae)}function S(it,gt,Vt){var re=gt[0],It=gt[1],Wt=gt[2],$t=gt[3],ae=gt[4],Bt=gt[5],Ot=gt[6],Ht=gt[7],pe=gt[8],ve=Vt[0],Tt=Vt[1],Zt=Vt[2],Ce=Vt[3],Ut=Vt[4],se=Vt[5],_e=Vt[6],$e=Vt[7],fr=Vt[8];return it[0]=ve*re+Tt*$t+Zt*Ot,it[1]=ve*It+Tt*ae+Zt*Ht,it[2]=ve*Wt+Tt*Bt+Zt*pe,it[3]=Ce*re+Ut*$t+se*Ot,it[4]=Ce*It+Ut*ae+se*Ht,it[5]=Ce*Wt+Ut*Bt+se*pe,it[6]=_e*re+$e*$t+fr*Ot,it[7]=_e*It+$e*ae+fr*Ht,it[8]=_e*Wt+$e*Bt+fr*pe,it}function I(it,gt,Vt){var re=gt[0],It=gt[1],Wt=gt[2],$t=gt[3],ae=gt[4],Bt=gt[5],Ot=gt[6],Ht=gt[7],pe=gt[8],ve=Vt[0],Tt=Vt[1];return it[0]=re,it[1]=It,it[2]=Wt,it[3]=$t,it[4]=ae,it[5]=Bt,it[6]=ve*re+Tt*$t+Ot,it[7]=ve*It+Tt*ae+Ht,it[8]=ve*Wt+Tt*Bt+pe,it}function D(it,gt,Vt){var re=gt[0],It=gt[1],Wt=gt[2],$t=gt[3],ae=gt[4],Bt=gt[5],Ot=gt[6],Ht=gt[7],pe=gt[8],ve=Math.sin(Vt),Tt=Math.cos(Vt);return it[0]=Tt*re+ve*$t,it[1]=Tt*It+ve*ae,it[2]=Tt*Wt+ve*Bt,it[3]=Tt*$t-ve*re,it[4]=Tt*ae-ve*It,it[5]=Tt*Bt-ve*Wt,it[6]=Ot,it[7]=Ht,it[8]=pe,it}function P(it,gt,Vt){var re=Vt[0],It=Vt[1];return it[0]=re*gt[0],it[1]=re*gt[1],it[2]=re*gt[2],it[3]=It*gt[3],it[4]=It*gt[4],it[5]=It*gt[5],it[6]=gt[6],it[7]=gt[7],it[8]=gt[8],it}function y(it,gt){return it[0]=1,it[1]=0,it[2]=0,it[3]=0,it[4]=1,it[5]=0,it[6]=gt[0],it[7]=gt[1],it[8]=1,it}function v(it,gt){var Vt=Math.sin(gt),re=Math.cos(gt);return it[0]=re,it[1]=Vt,it[2]=0,it[3]=-Vt,it[4]=re,it[5]=0,it[6]=0,it[7]=0,it[8]=1,it}function K(it,gt){return it[0]=gt[0],it[1]=0,it[2]=0,it[3]=0,it[4]=gt[1],it[5]=0,it[6]=0,it[7]=0,it[8]=1,it}function R(it,gt){return it[0]=gt[0],it[1]=gt[1],it[2]=0,it[3]=gt[2],it[4]=gt[3],it[5]=0,it[6]=gt[4],it[7]=gt[5],it[8]=1,it}function B(it,gt){var Vt=gt[0],re=gt[1],It=gt[2],Wt=gt[3],$t=Vt+Vt,ae=re+re,Bt=It+It,Ot=Vt*$t,Ht=re*$t,pe=re*ae,ve=It*$t,Tt=It*ae,Zt=It*Bt,Ce=Wt*$t,Ut=Wt*ae,se=Wt*Bt;return it[0]=1-pe-Zt,it[3]=Ht-se,it[6]=ve+Ut,it[1]=Ht+se,it[4]=1-Ot-Zt,it[7]=Tt-Ce,it[2]=ve-Ut,it[5]=Tt+Ce,it[8]=1-Ot-pe,it}function Y(it,gt){var Vt=gt[0],re=gt[1],It=gt[2],Wt=gt[3],$t=gt[4],ae=gt[5],Bt=gt[6],Ot=gt[7],Ht=gt[8],pe=gt[9],ve=gt[10],Tt=gt[11],Zt=gt[12],Ce=gt[13],Ut=gt[14],se=gt[15],_e=Vt*ae-re*$t,$e=Vt*Bt-It*$t,fr=Vt*Ot-Wt*$t,gr=re*Bt-It*ae,Yt=re*Ot-Wt*ae,Mr=It*Ot-Wt*Bt,Ln=Ht*Ce-pe*Zt,Yn=Ht*Ut-ve*Zt,Ra=Ht*se-Tt*Zt,ba=pe*Ut-ve*Ce,Ba=pe*se-Tt*Ce,xa=ve*se-Tt*Ut,ya=_e*xa-$e*Ba+fr*ba+gr*Ra-Yt*Yn+Mr*Ln;return ya?(ya=1/ya,it[0]=(ae*xa-Bt*Ba+Ot*ba)*ya,it[1]=(Bt*Ra-$t*xa-Ot*Yn)*ya,it[2]=($t*Ba-ae*Ra+Ot*Ln)*ya,it[3]=(It*Ba-re*xa-Wt*ba)*ya,it[4]=(Vt*xa-It*Ra+Wt*Yn)*ya,it[5]=(re*Ra-Vt*Ba-Wt*Ln)*ya,it[6]=(Ce*Mr-Ut*Yt+se*gr)*ya,it[7]=(Ut*fr-Zt*Mr-se*$e)*ya,it[8]=(Zt*Yt-Ce*fr+se*_e)*ya,it):null}function W(it,gt,Vt){return it[0]=2/gt,it[1]=0,it[2]=0,it[3]=0,it[4]=-2/Vt,it[5]=0,it[6]=-1,it[7]=1,it[8]=1,it}function q(it){return"mat3("+it[0]+", "+it[1]+", "+it[2]+", "+it[3]+", "+it[4]+", "+it[5]+", "+it[6]+", "+it[7]+", "+it[8]+")"}function H(it){return Math.hypot(it[0],it[1],it[2],it[3],it[4],it[5],it[6],it[7],it[8])}function et(it,gt,Vt){return it[0]=gt[0]+Vt[0],it[1]=gt[1]+Vt[1],it[2]=gt[2]+Vt[2],it[3]=gt[3]+Vt[3],it[4]=gt[4]+Vt[4],it[5]=gt[5]+Vt[5],it[6]=gt[6]+Vt[6],it[7]=gt[7]+Vt[7],it[8]=gt[8]+Vt[8],it}function ct(it,gt,Vt){return it[0]=gt[0]-Vt[0],it[1]=gt[1]-Vt[1],it[2]=gt[2]-Vt[2],it[3]=gt[3]-Vt[3],it[4]=gt[4]-Vt[4],it[5]=gt[5]-Vt[5],it[6]=gt[6]-Vt[6],it[7]=gt[7]-Vt[7],it[8]=gt[8]-Vt[8],it}function at(it,gt,Vt){return it[0]=gt[0]*Vt,it[1]=gt[1]*Vt,it[2]=gt[2]*Vt,it[3]=gt[3]*Vt,it[4]=gt[4]*Vt,it[5]=gt[5]*Vt,it[6]=gt[6]*Vt,it[7]=gt[7]*Vt,it[8]=gt[8]*Vt,it}function St(it,gt,Vt,re){return it[0]=gt[0]+Vt[0]*re,it[1]=gt[1]+Vt[1]*re,it[2]=gt[2]+Vt[2]*re,it[3]=gt[3]+Vt[3]*re,it[4]=gt[4]+Vt[4]*re,it[5]=gt[5]+Vt[5]*re,it[6]=gt[6]+Vt[6]*re,it[7]=gt[7]+Vt[7]*re,it[8]=gt[8]+Vt[8]*re,it}function bt(it,gt){return it[0]===gt[0]&&it[1]===gt[1]&&it[2]===gt[2]&&it[3]===gt[3]&&it[4]===gt[4]&&it[5]===gt[5]&&it[6]===gt[6]&&it[7]===gt[7]&&it[8]===gt[8]}function zt(it,gt){var Vt=it[0],re=it[1],It=it[2],Wt=it[3],$t=it[4],ae=it[5],Bt=it[6],Ot=it[7],Ht=it[8],pe=gt[0],ve=gt[1],Tt=gt[2],Zt=gt[3],Ce=gt[4],Ut=gt[5],se=gt[6],_e=gt[7],$e=gt[8];return Math.abs(Vt-pe)<=wt.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(pe))&&Math.abs(re-ve)<=wt.EPSILON*Math.max(1,Math.abs(re),Math.abs(ve))&&Math.abs(It-Tt)<=wt.EPSILON*Math.max(1,Math.abs(It),Math.abs(Tt))&&Math.abs(Wt-Zt)<=wt.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(Zt))&&Math.abs($t-Ce)<=wt.EPSILON*Math.max(1,Math.abs($t),Math.abs(Ce))&&Math.abs(ae-Ut)<=wt.EPSILON*Math.max(1,Math.abs(ae),Math.abs(Ut))&&Math.abs(Bt-se)<=wt.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(se))&&Math.abs(Ot-_e)<=wt.EPSILON*Math.max(1,Math.abs(Ot),Math.abs(_e))&&Math.abs(Ht-$e)<=wt.EPSILON*Math.max(1,Math.abs(Ht),Math.abs($e))}var kt=S,Kt=ct},631437:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{add:function(){return T},angle:function(){return it},ceil:function(){return b},clone:function(){return tt},copy:function(){return J},create:function(){return st},cross:function(){return et},dist:function(){return Ot},distance:function(){return v},div:function(){return Bt},divide:function(){return _},dot:function(){return H},equals:function(){return It},exactEquals:function(){return re},floor:function(){return L},forEach:function(){return ve},fromValues:function(){return Q},inverse:function(){return W},len:function(){return Wt},length:function(){return R},lerp:function(){return ct},max:function(){return I},min:function(){return S},mul:function(){return ae},multiply:function(){return C},negate:function(){return Y},normalize:function(){return q},random:function(){return at},rotate:function(){return Kt},round:function(){return D},scale:function(){return P},scaleAndAdd:function(){return y},set:function(){return X},sqrDist:function(){return Ht},sqrLen:function(){return pe},squaredDistance:function(){return K},squaredLength:function(){return B},str:function(){return Vt},sub:function(){return $t},subtract:function(){return M},transformMat2:function(){return St},transformMat2d:function(){return bt},transformMat3:function(){return zt},transformMat4:function(){return kt},zero:function(){return gt}});var wt=ut(73633);function st(){var Tt=new wt.ARRAY_TYPE(2);return wt.ARRAY_TYPE!=Float32Array&&(Tt[0]=0,Tt[1]=0),Tt}function tt(Tt){var Zt=new wt.ARRAY_TYPE(2);return Zt[0]=Tt[0],Zt[1]=Tt[1],Zt}function Q(Tt,Zt){var Ce=new wt.ARRAY_TYPE(2);return Ce[0]=Tt,Ce[1]=Zt,Ce}function J(Tt,Zt){return Tt[0]=Zt[0],Tt[1]=Zt[1],Tt}function X(Tt,Zt,Ce){return Tt[0]=Zt,Tt[1]=Ce,Tt}function T(Tt,Zt,Ce){return Tt[0]=Zt[0]+Ce[0],Tt[1]=Zt[1]+Ce[1],Tt}function M(Tt,Zt,Ce){return Tt[0]=Zt[0]-Ce[0],Tt[1]=Zt[1]-Ce[1],Tt}function C(Tt,Zt,Ce){return Tt[0]=Zt[0]*Ce[0],Tt[1]=Zt[1]*Ce[1],Tt}function _(Tt,Zt,Ce){return Tt[0]=Zt[0]/Ce[0],Tt[1]=Zt[1]/Ce[1],Tt}function b(Tt,Zt){return Tt[0]=Math.ceil(Zt[0]),Tt[1]=Math.ceil(Zt[1]),Tt}function L(Tt,Zt){return Tt[0]=Math.floor(Zt[0]),Tt[1]=Math.floor(Zt[1]),Tt}function S(Tt,Zt,Ce){return Tt[0]=Math.min(Zt[0],Ce[0]),Tt[1]=Math.min(Zt[1],Ce[1]),Tt}function I(Tt,Zt,Ce){return Tt[0]=Math.max(Zt[0],Ce[0]),Tt[1]=Math.max(Zt[1],Ce[1]),Tt}function D(Tt,Zt){return Tt[0]=Math.round(Zt[0]),Tt[1]=Math.round(Zt[1]),Tt}function P(Tt,Zt,Ce){return Tt[0]=Zt[0]*Ce,Tt[1]=Zt[1]*Ce,Tt}function y(Tt,Zt,Ce,Ut){return Tt[0]=Zt[0]+Ce[0]*Ut,Tt[1]=Zt[1]+Ce[1]*Ut,Tt}function v(Tt,Zt){var Ce=Zt[0]-Tt[0],Ut=Zt[1]-Tt[1];return Math.hypot(Ce,Ut)}function K(Tt,Zt){var Ce=Zt[0]-Tt[0],Ut=Zt[1]-Tt[1];return Ce*Ce+Ut*Ut}function R(Tt){var Zt=Tt[0],Ce=Tt[1];return Math.hypot(Zt,Ce)}function B(Tt){var Zt=Tt[0],Ce=Tt[1];return Zt*Zt+Ce*Ce}function Y(Tt,Zt){return Tt[0]=-Zt[0],Tt[1]=-Zt[1],Tt}function W(Tt,Zt){return Tt[0]=1/Zt[0],Tt[1]=1/Zt[1],Tt}function q(Tt,Zt){var Ce=Zt[0],Ut=Zt[1],se=Ce*Ce+Ut*Ut;return se>0&&(se=1/Math.sqrt(se)),Tt[0]=Zt[0]*se,Tt[1]=Zt[1]*se,Tt}function H(Tt,Zt){return Tt[0]*Zt[0]+Tt[1]*Zt[1]}function et(Tt,Zt,Ce){var Ut=Zt[0]*Ce[1]-Zt[1]*Ce[0];return Tt[0]=Tt[1]=0,Tt[2]=Ut,Tt}function ct(Tt,Zt,Ce,Ut){var se=Zt[0],_e=Zt[1];return Tt[0]=se+Ut*(Ce[0]-se),Tt[1]=_e+Ut*(Ce[1]-_e),Tt}function at(Tt,Zt){Zt=Zt||1;var Ce=wt.RANDOM()*2*Math.PI;return Tt[0]=Math.cos(Ce)*Zt,Tt[1]=Math.sin(Ce)*Zt,Tt}function St(Tt,Zt,Ce){var Ut=Zt[0],se=Zt[1];return Tt[0]=Ce[0]*Ut+Ce[2]*se,Tt[1]=Ce[1]*Ut+Ce[3]*se,Tt}function bt(Tt,Zt,Ce){var Ut=Zt[0],se=Zt[1];return Tt[0]=Ce[0]*Ut+Ce[2]*se+Ce[4],Tt[1]=Ce[1]*Ut+Ce[3]*se+Ce[5],Tt}function zt(Tt,Zt,Ce){var Ut=Zt[0],se=Zt[1];return Tt[0]=Ce[0]*Ut+Ce[3]*se+Ce[6],Tt[1]=Ce[1]*Ut+Ce[4]*se+Ce[7],Tt}function kt(Tt,Zt,Ce){var Ut=Zt[0],se=Zt[1];return Tt[0]=Ce[0]*Ut+Ce[4]*se+Ce[12],Tt[1]=Ce[1]*Ut+Ce[5]*se+Ce[13],Tt}function Kt(Tt,Zt,Ce,Ut){var se=Zt[0]-Ce[0],_e=Zt[1]-Ce[1],$e=Math.sin(Ut),fr=Math.cos(Ut);return Tt[0]=se*fr-_e*$e+Ce[0],Tt[1]=se*$e+_e*fr+Ce[1],Tt}function it(Tt,Zt){var Ce=Tt[0],Ut=Tt[1],se=Zt[0],_e=Zt[1],$e=Math.sqrt(Ce*Ce+Ut*Ut)*Math.sqrt(se*se+_e*_e),fr=$e&&(Ce*se+Ut*_e)/$e;return Math.acos(Math.min(Math.max(fr,-1),1))}function gt(Tt){return Tt[0]=0,Tt[1]=0,Tt}function Vt(Tt){return"vec2("+Tt[0]+", "+Tt[1]+")"}function re(Tt,Zt){return Tt[0]===Zt[0]&&Tt[1]===Zt[1]}function It(Tt,Zt){var Ce=Tt[0],Ut=Tt[1],se=Zt[0],_e=Zt[1];return Math.abs(Ce-se)<=wt.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(se))&&Math.abs(Ut-_e)<=wt.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(_e))}var Wt=R,$t=M,ae=C,Bt=_,Ot=v,Ht=K,pe=B,ve=function(){var Tt=st();return function(Zt,Ce,Ut,se,_e,$e){var fr,gr;for(Ce||(Ce=2),Ut||(Ut=0),se?gr=Math.min(se*Ce+Ut,Zt.length):gr=Zt.length,fr=Ut;fr<gr;fr+=Ce)Tt[0]=Zt[fr],Tt[1]=Zt[fr+1],_e(Tt,Tt,$e),Zt[fr]=Tt[0],Zt[fr+1]=Tt[1];return Zt}}()},277160:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{add:function(){return M},angle:function(){return re},bezier:function(){return St},ceil:function(){return L},clone:function(){return tt},copy:function(){return X},create:function(){return st},cross:function(){return et},dist:function(){return pe},distance:function(){return K},div:function(){return Ht},divide:function(){return b},dot:function(){return H},equals:function(){return ae},exactEquals:function(){return $t},floor:function(){return S},forEach:function(){return Ce},fromValues:function(){return J},hermite:function(){return at},inverse:function(){return W},len:function(){return Tt},length:function(){return Q},lerp:function(){return ct},max:function(){return D},min:function(){return I},mul:function(){return Ot},multiply:function(){return _},negate:function(){return Y},normalize:function(){return q},random:function(){return bt},rotateX:function(){return it},rotateY:function(){return gt},rotateZ:function(){return Vt},round:function(){return P},scale:function(){return y},scaleAndAdd:function(){return v},set:function(){return T},sqrDist:function(){return ve},sqrLen:function(){return Zt},squaredDistance:function(){return R},squaredLength:function(){return B},str:function(){return Wt},sub:function(){return Bt},subtract:function(){return C},transformMat3:function(){return kt},transformMat4:function(){return zt},transformQuat:function(){return Kt},zero:function(){return It}});var wt=ut(73633);function st(){var Ut=new wt.ARRAY_TYPE(3);return wt.ARRAY_TYPE!=Float32Array&&(Ut[0]=0,Ut[1]=0,Ut[2]=0),Ut}function tt(Ut){var se=new wt.ARRAY_TYPE(3);return se[0]=Ut[0],se[1]=Ut[1],se[2]=Ut[2],se}function Q(Ut){var se=Ut[0],_e=Ut[1],$e=Ut[2];return Math.hypot(se,_e,$e)}function J(Ut,se,_e){var $e=new wt.ARRAY_TYPE(3);return $e[0]=Ut,$e[1]=se,$e[2]=_e,$e}function X(Ut,se){return Ut[0]=se[0],Ut[1]=se[1],Ut[2]=se[2],Ut}function T(Ut,se,_e,$e){return Ut[0]=se,Ut[1]=_e,Ut[2]=$e,Ut}function M(Ut,se,_e){return Ut[0]=se[0]+_e[0],Ut[1]=se[1]+_e[1],Ut[2]=se[2]+_e[2],Ut}function C(Ut,se,_e){return Ut[0]=se[0]-_e[0],Ut[1]=se[1]-_e[1],Ut[2]=se[2]-_e[2],Ut}function _(Ut,se,_e){return Ut[0]=se[0]*_e[0],Ut[1]=se[1]*_e[1],Ut[2]=se[2]*_e[2],Ut}function b(Ut,se,_e){return Ut[0]=se[0]/_e[0],Ut[1]=se[1]/_e[1],Ut[2]=se[2]/_e[2],Ut}function L(Ut,se){return Ut[0]=Math.ceil(se[0]),Ut[1]=Math.ceil(se[1]),Ut[2]=Math.ceil(se[2]),Ut}function S(Ut,se){return Ut[0]=Math.floor(se[0]),Ut[1]=Math.floor(se[1]),Ut[2]=Math.floor(se[2]),Ut}function I(Ut,se,_e){return Ut[0]=Math.min(se[0],_e[0]),Ut[1]=Math.min(se[1],_e[1]),Ut[2]=Math.min(se[2],_e[2]),Ut}function D(Ut,se,_e){return Ut[0]=Math.max(se[0],_e[0]),Ut[1]=Math.max(se[1],_e[1]),Ut[2]=Math.max(se[2],_e[2]),Ut}function P(Ut,se){return Ut[0]=Math.round(se[0]),Ut[1]=Math.round(se[1]),Ut[2]=Math.round(se[2]),Ut}function y(Ut,se,_e){return Ut[0]=se[0]*_e,Ut[1]=se[1]*_e,Ut[2]=se[2]*_e,Ut}function v(Ut,se,_e,$e){return Ut[0]=se[0]+_e[0]*$e,Ut[1]=se[1]+_e[1]*$e,Ut[2]=se[2]+_e[2]*$e,Ut}function K(Ut,se){var _e=se[0]-Ut[0],$e=se[1]-Ut[1],fr=se[2]-Ut[2];return Math.hypot(_e,$e,fr)}function R(Ut,se){var _e=se[0]-Ut[0],$e=se[1]-Ut[1],fr=se[2]-Ut[2];return _e*_e+$e*$e+fr*fr}function B(Ut){var se=Ut[0],_e=Ut[1],$e=Ut[2];return se*se+_e*_e+$e*$e}function Y(Ut,se){return Ut[0]=-se[0],Ut[1]=-se[1],Ut[2]=-se[2],Ut}function W(Ut,se){return Ut[0]=1/se[0],Ut[1]=1/se[1],Ut[2]=1/se[2],Ut}function q(Ut,se){var _e=se[0],$e=se[1],fr=se[2],gr=_e*_e+$e*$e+fr*fr;return gr>0&&(gr=1/Math.sqrt(gr)),Ut[0]=se[0]*gr,Ut[1]=se[1]*gr,Ut[2]=se[2]*gr,Ut}function H(Ut,se){return Ut[0]*se[0]+Ut[1]*se[1]+Ut[2]*se[2]}function et(Ut,se,_e){var $e=se[0],fr=se[1],gr=se[2],Yt=_e[0],Mr=_e[1],Ln=_e[2];return Ut[0]=fr*Ln-gr*Mr,Ut[1]=gr*Yt-$e*Ln,Ut[2]=$e*Mr-fr*Yt,Ut}function ct(Ut,se,_e,$e){var fr=se[0],gr=se[1],Yt=se[2];return Ut[0]=fr+$e*(_e[0]-fr),Ut[1]=gr+$e*(_e[1]-gr),Ut[2]=Yt+$e*(_e[2]-Yt),Ut}function at(Ut,se,_e,$e,fr,gr){var Yt=gr*gr,Mr=Yt*(2*gr-3)+1,Ln=Yt*(gr-2)+gr,Yn=Yt*(gr-1),Ra=Yt*(3-2*gr);return Ut[0]=se[0]*Mr+_e[0]*Ln+$e[0]*Yn+fr[0]*Ra,Ut[1]=se[1]*Mr+_e[1]*Ln+$e[1]*Yn+fr[1]*Ra,Ut[2]=se[2]*Mr+_e[2]*Ln+$e[2]*Yn+fr[2]*Ra,Ut}function St(Ut,se,_e,$e,fr,gr){var Yt=1-gr,Mr=Yt*Yt,Ln=gr*gr,Yn=Mr*Yt,Ra=3*gr*Mr,ba=3*Ln*Yt,Ba=Ln*gr;return Ut[0]=se[0]*Yn+_e[0]*Ra+$e[0]*ba+fr[0]*Ba,Ut[1]=se[1]*Yn+_e[1]*Ra+$e[1]*ba+fr[1]*Ba,Ut[2]=se[2]*Yn+_e[2]*Ra+$e[2]*ba+fr[2]*Ba,Ut}function bt(Ut,se){se=se||1;var _e=wt.RANDOM()*2*Math.PI,$e=wt.RANDOM()*2-1,fr=Math.sqrt(1-$e*$e)*se;return Ut[0]=Math.cos(_e)*fr,Ut[1]=Math.sin(_e)*fr,Ut[2]=$e*se,Ut}function zt(Ut,se,_e){var $e=se[0],fr=se[1],gr=se[2],Yt=_e[3]*$e+_e[7]*fr+_e[11]*gr+_e[15];return Yt=Yt||1,Ut[0]=(_e[0]*$e+_e[4]*fr+_e[8]*gr+_e[12])/Yt,Ut[1]=(_e[1]*$e+_e[5]*fr+_e[9]*gr+_e[13])/Yt,Ut[2]=(_e[2]*$e+_e[6]*fr+_e[10]*gr+_e[14])/Yt,Ut}function kt(Ut,se,_e){var $e=se[0],fr=se[1],gr=se[2];return Ut[0]=$e*_e[0]+fr*_e[3]+gr*_e[6],Ut[1]=$e*_e[1]+fr*_e[4]+gr*_e[7],Ut[2]=$e*_e[2]+fr*_e[5]+gr*_e[8],Ut}function Kt(Ut,se,_e){var $e=_e[0],fr=_e[1],gr=_e[2],Yt=_e[3],Mr=se[0],Ln=se[1],Yn=se[2],Ra=fr*Yn-gr*Ln,ba=gr*Mr-$e*Yn,Ba=$e*Ln-fr*Mr,xa=fr*Ba-gr*ba,ya=gr*Ra-$e*Ba,Na=$e*ba-fr*Ra,Ta=Yt*2;return Ra*=Ta,ba*=Ta,Ba*=Ta,xa*=2,ya*=2,Na*=2,Ut[0]=Mr+Ra+xa,Ut[1]=Ln+ba+ya,Ut[2]=Yn+Ba+Na,Ut}function it(Ut,se,_e,$e){var fr=[],gr=[];return fr[0]=se[0]-_e[0],fr[1]=se[1]-_e[1],fr[2]=se[2]-_e[2],gr[0]=fr[0],gr[1]=fr[1]*Math.cos($e)-fr[2]*Math.sin($e),gr[2]=fr[1]*Math.sin($e)+fr[2]*Math.cos($e),Ut[0]=gr[0]+_e[0],Ut[1]=gr[1]+_e[1],Ut[2]=gr[2]+_e[2],Ut}function gt(Ut,se,_e,$e){var fr=[],gr=[];return fr[0]=se[0]-_e[0],fr[1]=se[1]-_e[1],fr[2]=se[2]-_e[2],gr[0]=fr[2]*Math.sin($e)+fr[0]*Math.cos($e),gr[1]=fr[1],gr[2]=fr[2]*Math.cos($e)-fr[0]*Math.sin($e),Ut[0]=gr[0]+_e[0],Ut[1]=gr[1]+_e[1],Ut[2]=gr[2]+_e[2],Ut}function Vt(Ut,se,_e,$e){var fr=[],gr=[];return fr[0]=se[0]-_e[0],fr[1]=se[1]-_e[1],fr[2]=se[2]-_e[2],gr[0]=fr[0]*Math.cos($e)-fr[1]*Math.sin($e),gr[1]=fr[0]*Math.sin($e)+fr[1]*Math.cos($e),gr[2]=fr[2],Ut[0]=gr[0]+_e[0],Ut[1]=gr[1]+_e[1],Ut[2]=gr[2]+_e[2],Ut}function re(Ut,se){var _e=Ut[0],$e=Ut[1],fr=Ut[2],gr=se[0],Yt=se[1],Mr=se[2],Ln=Math.sqrt(_e*_e+$e*$e+fr*fr),Yn=Math.sqrt(gr*gr+Yt*Yt+Mr*Mr),Ra=Ln*Yn,ba=Ra&&H(Ut,se)/Ra;return Math.acos(Math.min(Math.max(ba,-1),1))}function It(Ut){return Ut[0]=0,Ut[1]=0,Ut[2]=0,Ut}function Wt(Ut){return"vec3("+Ut[0]+", "+Ut[1]+", "+Ut[2]+")"}function $t(Ut,se){return Ut[0]===se[0]&&Ut[1]===se[1]&&Ut[2]===se[2]}function ae(Ut,se){var _e=Ut[0],$e=Ut[1],fr=Ut[2],gr=se[0],Yt=se[1],Mr=se[2];return Math.abs(_e-gr)<=wt.EPSILON*Math.max(1,Math.abs(_e),Math.abs(gr))&&Math.abs($e-Yt)<=wt.EPSILON*Math.max(1,Math.abs($e),Math.abs(Yt))&&Math.abs(fr-Mr)<=wt.EPSILON*Math.max(1,Math.abs(fr),Math.abs(Mr))}var Bt=C,Ot=_,Ht=b,pe=K,ve=R,Tt=Q,Zt=B,Ce=function(){var Ut=st();return function(se,_e,$e,fr,gr,Yt){var Mr,Ln;for(_e||(_e=3),$e||($e=0),fr?Ln=Math.min(fr*_e+$e,se.length):Ln=se.length,Mr=$e;Mr<Ln;Mr+=_e)Ut[0]=se[Mr],Ut[1]=se[Mr+1],Ut[2]=se[Mr+2],gr(Ut,Ut,Yt),se[Mr]=Ut[0],se[Mr+1]=Ut[1],se[Mr+2]=Ut[2];return se}}()},738186:function(Sr){var G=[],ut=[],wt="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function st(Q,J){if(J=J||{},Q===void 0)throw new Error(wt);var X=J.prepend===!0?"prepend":"append",T=J.container!==void 0?J.container:document.querySelector("head"),M=G.indexOf(T);M===-1&&(M=G.push(T)-1,ut[M]={});var C;return ut[M]!==void 0&&ut[M][X]!==void 0?C=ut[M][X]:(C=ut[M][X]=tt(),X==="prepend"?T.insertBefore(C,T.childNodes[0]):T.appendChild(C)),Q.charCodeAt(0)===65279&&(Q=Q.substr(1,Q.length)),C.styleSheet?C.styleSheet.cssText+=Q:C.textContent+=Q,C}function tt(){var Q=document.createElement("style");return Q.setAttribute("type","text/css"),Q}Sr.exports=st,Sr.exports.insertCss=st},238749:function(Sr,G,ut){var wt=ut(644239),st=ut(541780),tt=ut(637005),Q="[object Arguments]",J="[object Array]",X="[object Boolean]",T="[object Date]",M="[object Error]",C="[object Function]",_="[object Map]",b="[object Number]",L="[object Object]",S="[object RegExp]",I="[object Set]",D="[object String]",P="[object WeakMap]",y="[object ArrayBuffer]",v="[object DataView]",K="[object Float32Array]",R="[object Float64Array]",B="[object Int8Array]",Y="[object Int16Array]",W="[object Int32Array]",q="[object Uint8Array]",H="[object Uint8ClampedArray]",et="[object Uint16Array]",ct="[object Uint32Array]",at={};at[K]=at[R]=at[B]=at[Y]=at[W]=at[q]=at[H]=at[et]=at[ct]=!0,at[Q]=at[J]=at[y]=at[X]=at[v]=at[T]=at[M]=at[C]=at[_]=at[b]=at[L]=at[S]=at[I]=at[D]=at[P]=!1;function St(bt){return tt(bt)&&st(bt.length)&&!!at[wt(bt)]}Sr.exports=St},385924:function(Sr,G,ut){var wt=ut(205569),st=wt(Object.getPrototypeOf,Object);Sr.exports=st},531167:function(Sr,G,ut){Sr=ut.nmd(Sr);var wt=ut(431957),st=G&&!G.nodeType&&G,tt=st&&!0&&Sr&&!Sr.nodeType&&Sr,Q=tt&&tt.exports===st,J=Q&&wt.process,X=function(){try{var T=tt&&tt.require&&tt.require("util").types;return T||J&&J.binding&&J.binding("util")}catch(M){}}();Sr.exports=X},205569:function(Sr){function G(ut,wt){return function(st){return ut(wt(st))}}Sr.exports=G},281763:function(Sr,G,ut){var wt=ut(644239),st=ut(637005),tt="[object Number]";function Q(J){return typeof J=="number"||st(J)&&wt(J)==tt}Sr.exports=Q},968630:function(Sr,G,ut){var wt=ut(644239),st=ut(385924),tt=ut(637005),Q="[object Object]",J=Function.prototype,X=Object.prototype,T=J.toString,M=X.hasOwnProperty,C=T.call(Object);function _(b){if(!tt(b)||wt(b)!=Q)return!1;var L=st(b);if(L===null)return!0;var S=M.call(L,"constructor")&&L.constructor;return typeof S=="function"&&S instanceof S&&T.call(S)==C}Sr.exports=_},936719:function(Sr,G,ut){var wt=ut(238749),st=ut(307518),tt=ut(531167),Q=tt&&tt.isTypedArray,J=Q?st(Q):wt;Sr.exports=J},481550:function(Sr){(function(G,ut){Sr.exports=ut()})(this,function(){"use strict";var G=function(pt){return pt instanceof Uint8Array||pt instanceof Uint16Array||pt instanceof Uint32Array||pt instanceof Int8Array||pt instanceof Int16Array||pt instanceof Int32Array||pt instanceof Float32Array||pt instanceof Float64Array||pt instanceof Uint8ClampedArray},ut=function(pt,fe){for(var Ae=Object.keys(fe),lr=0;lr<Ae.length;++lr)pt[Ae[lr]]=fe[Ae[lr]];return pt},wt=`
`;function st(pt){return typeof atob!="undefined"?atob(pt):"base64:"+pt}function tt(pt){var fe=new Error("(regl) "+pt);throw console.error(fe),fe}function Q(pt,fe){pt||tt(fe)}function J(pt){return pt?": "+pt:""}function X(pt,fe,Ae){pt in fe||tt("unknown parameter ("+pt+")"+J(Ae)+". possible values: "+Object.keys(fe).join())}function T(pt,fe){G(pt)||tt("invalid parameter type"+J(fe)+". must be a typed array")}function M(pt,fe){switch(fe){case"number":return typeof pt=="number";case"object":return typeof pt=="object";case"string":return typeof pt=="string";case"boolean":return typeof pt=="boolean";case"function":return typeof pt=="function";case"undefined":return typeof pt=="undefined";case"symbol":return typeof pt=="symbol"}}function C(pt,fe,Ae){M(pt,fe)||tt("invalid parameter type"+J(Ae)+". expected "+fe+", got "+typeof pt)}function _(pt,fe){pt>=0&&(pt|0)===pt||tt("invalid parameter type, ("+pt+")"+J(fe)+". must be a nonnegative integer")}function b(pt,fe,Ae){fe.indexOf(pt)<0&&tt("invalid value"+J(Ae)+". must be one of: "+fe)}var L=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function S(pt){Object.keys(pt).forEach(function(fe){L.indexOf(fe)<0&&tt('invalid regl constructor argument "'+fe+'". must be one of '+L)})}function I(pt,fe){for(pt=pt+"";pt.length<fe;)pt=" "+pt;return pt}function D(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function P(pt,fe){this.number=pt,this.line=fe,this.errors=[]}function y(pt,fe,Ae){this.file=pt,this.line=fe,this.message=Ae}function v(){var pt=new Error,fe=(pt.stack||pt).toString(),Ae=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(fe);if(Ae)return Ae[1];var lr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(fe);return lr?lr[1]:"unknown"}function K(){var pt=new Error,fe=(pt.stack||pt).toString(),Ae=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(fe);if(Ae)return Ae[1];var lr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(fe);return lr?lr[1]:"unknown"}function R(pt,fe){var Ae=pt.split(`
`),lr=1,Lr=0,cr={unknown:new D,0:new D};cr.unknown.name=cr[0].name=fe||v(),cr.unknown.lines.push(new P(0,""));for(var br=0;br<Ae.length;++br){var Xr=Ae[br],qr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Xr);if(qr)switch(qr[1]){case"line":var Kr=/(\d+)(\s+\d+)?/.exec(qr[2]);Kr&&(lr=Kr[1]|0,Kr[2]&&(Lr=Kr[2]|0,Lr in cr||(cr[Lr]=new D)));break;case"define":var Gr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(qr[2]);Gr&&(cr[Lr].name=Gr[1]?st(Gr[2]):Gr[2]);break}cr[Lr].lines.push(new P(lr++,Xr))}return Object.keys(cr).forEach(function(tn){var d=cr[tn];d.lines.forEach(function(m){d.index[m.number]=m})}),cr}function B(pt){var fe=[];return pt.split(`
`).forEach(function(Ae){if(!(Ae.length<5)){var lr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ae);lr?fe.push(new y(lr[1]|0,lr[2]|0,lr[3].trim())):Ae.length>0&&fe.push(new y("unknown",0,Ae))}}),fe}function Y(pt,fe){fe.forEach(function(Ae){var lr=pt[Ae.file];if(lr){var Lr=lr.index[Ae.line];if(Lr){Lr.errors.push(Ae),lr.hasErrors=!0;return}}pt.unknown.hasErrors=!0,pt.unknown.lines[0].errors.push(Ae)})}function W(pt,fe,Ae,lr,Lr){if(!pt.getShaderParameter(fe,pt.COMPILE_STATUS)){var cr=pt.getShaderInfoLog(fe),br=lr===pt.FRAGMENT_SHADER?"fragment":"vertex";bt(Ae,"string",br+" shader source must be a string",Lr);var Xr=R(Ae,Lr),qr=B(cr);Y(Xr,qr),Object.keys(Xr).forEach(function(Kr){var Gr=Xr[Kr];if(!Gr.hasErrors)return;var tn=[""],d=[""];function m(k,z){tn.push(k),d.push(z||"")}m("file number "+Kr+": "+Gr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Gr.lines.forEach(function(k){if(k.errors.length>0){m(I(k.number,4)+"|  ","background-color:yellow; font-weight:bold"),m(k.line+wt,"color:red; background-color:yellow; font-weight:bold");var z=0;k.errors.forEach(function(rt){var ot=rt.message,dt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ot);if(dt){var mt=dt[1];switch(ot=dt[2],mt){case"assign":mt="=";break}z=Math.max(k.line.indexOf(mt,z),0)}else z=0;m(I("| ",6)),m(I("^^^",z+3)+wt,"font-weight:bold"),m(I("| ",6)),m(ot+wt,"font-weight:bold")}),m(I("| ",6)+wt)}else m(I(k.number,4)+"|  "),m(k.line+wt,"color:red")}),typeof document!="undefined"&&!window.chrome?(d[0]=tn.join("%c"),console.log.apply(console,d)):console.log(tn.join(""))}),Q.raise("Error compiling "+br+" shader, "+Xr[0].name)}}function q(pt,fe,Ae,lr,Lr){if(!pt.getProgramParameter(fe,pt.LINK_STATUS)){var cr=pt.getProgramInfoLog(fe),br=R(Ae,Lr),Xr=R(lr,Lr),qr='Error linking program with vertex shader, "'+Xr[0].name+'", and fragment shader "'+br[0].name+'"';typeof document!="undefined"?console.log("%c"+qr+wt+"%c"+cr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(qr+wt+cr),Q.raise(qr)}}function H(pt){pt._commandRef=v()}function et(pt,fe,Ae,lr){H(pt);function Lr(qr){return qr?lr.id(qr):0}pt._fragId=Lr(pt.static.frag),pt._vertId=Lr(pt.static.vert);function cr(qr,Kr){Object.keys(Kr).forEach(function(Gr){qr[lr.id(Gr)]=!0})}var br=pt._uniformSet={};cr(br,fe.static),cr(br,fe.dynamic);var Xr=pt._attributeSet={};cr(Xr,Ae.static),cr(Xr,Ae.dynamic),pt._hasCount="count"in pt.static||"count"in pt.dynamic||"elements"in pt.static||"elements"in pt.dynamic}function ct(pt,fe){var Ae=K();tt(pt+" in command "+(fe||v())+(Ae==="unknown"?"":" called from "+Ae))}function at(pt,fe,Ae){pt||ct(fe,Ae||v())}function St(pt,fe,Ae,lr){pt in fe||ct("unknown parameter ("+pt+")"+J(Ae)+". possible values: "+Object.keys(fe).join(),lr||v())}function bt(pt,fe,Ae,lr){M(pt,fe)||ct("invalid parameter type"+J(Ae)+". expected "+fe+", got "+typeof pt,lr||v())}function zt(pt){pt()}function kt(pt,fe,Ae){pt.texture?b(pt.texture._texture.internalformat,fe,"unsupported texture format for attachment"):b(pt.renderbuffer._renderbuffer.format,Ae,"unsupported renderbuffer format for attachment")}var Kt=33071,it=9728,gt=9984,Vt=9985,re=9986,It=9987,Wt=5120,$t=5121,ae=5122,Bt=5123,Ot=5124,Ht=5125,pe=5126,ve=32819,Tt=32820,Zt=33635,Ce=34042,Ut=36193,se={};se[Wt]=se[$t]=1,se[ae]=se[Bt]=se[Ut]=se[Zt]=se[ve]=se[Tt]=2,se[Ot]=se[Ht]=se[pe]=se[Ce]=4;function _e(pt,fe){return pt===Tt||pt===ve||pt===Zt?2:pt===Ce?4:se[pt]*fe}function $e(pt){return!(pt&pt-1)&&!!pt}function fr(pt,fe,Ae){var lr,Lr=fe.width,cr=fe.height,br=fe.channels;Q(Lr>0&&Lr<=Ae.maxTextureSize&&cr>0&&cr<=Ae.maxTextureSize,"invalid texture shape"),(pt.wrapS!==Kt||pt.wrapT!==Kt)&&Q($e(Lr)&&$e(cr),"incompatible wrap mode for texture, both width and height must be power of 2"),fe.mipmask===1?Lr!==1&&cr!==1&&Q(pt.minFilter!==gt&&pt.minFilter!==re&&pt.minFilter!==Vt&&pt.minFilter!==It,"min filter requires mipmap"):(Q($e(Lr)&&$e(cr),"texture must be a square power of 2 to support mipmapping"),Q(fe.mipmask===(Lr<<1)-1,"missing or incomplete mipmap data")),fe.type===pe&&(Ae.extensions.indexOf("oes_texture_float_linear")<0&&Q(pt.minFilter===it&&pt.magFilter===it,"filter not supported, must enable oes_texture_float_linear"),Q(!pt.genMipmaps,"mipmap generation not supported with float textures"));var Xr=fe.images;for(lr=0;lr<16;++lr)if(Xr[lr]){var qr=Lr>>lr,Kr=cr>>lr;Q(fe.mipmask&1<<lr,"missing mipmap data");var Gr=Xr[lr];if(Q(Gr.width===qr&&Gr.height===Kr,"invalid shape for mip images"),Q(Gr.format===fe.format&&Gr.internalformat===fe.internalformat&&Gr.type===fe.type,"incompatible type for mip image"),!Gr.compressed)if(Gr.data){var tn=Math.ceil(_e(Gr.type,br)*qr/Gr.unpackAlignment)*Gr.unpackAlignment;Q(Gr.data.byteLength===tn*Kr,"invalid data for image, buffer size is inconsistent with image format")}else Gr.element||Gr.copy}else pt.genMipmaps||Q((fe.mipmask&1<<lr)===0,"extra mipmap data");fe.compressed&&Q(!pt.genMipmaps,"mipmap generation for compressed images not supported")}function gr(pt,fe,Ae,lr){var Lr=pt.width,cr=pt.height,br=pt.channels;Q(Lr>0&&Lr<=lr.maxTextureSize&&cr>0&&cr<=lr.maxTextureSize,"invalid texture shape"),Q(Lr===cr,"cube map must be square"),Q(fe.wrapS===Kt&&fe.wrapT===Kt,"wrap mode not supported by cube map");for(var Xr=0;Xr<Ae.length;++Xr){var qr=Ae[Xr];Q(qr.width===Lr&&qr.height===cr,"inconsistent cube map face shape"),fe.genMipmaps&&(Q(!qr.compressed,"can not generate mipmap for compressed textures"),Q(qr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Kr=qr.images,Gr=0;Gr<16;++Gr){var tn=Kr[Gr];if(tn){var d=Lr>>Gr,m=cr>>Gr;Q(qr.mipmask&1<<Gr,"missing mipmap data"),Q(tn.width===d&&tn.height===m,"invalid shape for mip images"),Q(tn.format===pt.format&&tn.internalformat===pt.internalformat&&tn.type===pt.type,"incompatible type for mip image"),tn.compressed||(tn.data?Q(tn.data.byteLength===d*m*Math.max(_e(tn.type,br),tn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):tn.element||tn.copy)}}}}var Yt=ut(Q,{optional:zt,raise:tt,commandRaise:ct,command:at,parameter:X,commandParameter:St,constructor:S,type:C,commandType:bt,isTypedArray:T,nni:_,oneOf:b,shaderError:W,linkError:q,callSite:K,saveCommandRef:H,saveDrawInfo:et,framebufferFormat:kt,guessCommand:v,texture2D:fr,textureCube:gr}),Mr=0,Ln=0,Yn=5,Ra=6;function ba(pt,fe){this.id=Mr++,this.type=pt,this.data=fe}function Ba(pt){return pt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function xa(pt){if(pt.length===0)return[];var fe=pt.charAt(0),Ae=pt.charAt(pt.length-1);if(pt.length>1&&fe===Ae&&(fe==='"'||fe==="'"))return['"'+Ba(pt.substr(1,pt.length-2))+'"'];var lr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(pt);if(lr)return xa(pt.substr(0,lr.index)).concat(xa(lr[1])).concat(xa(pt.substr(lr.index+lr[0].length)));var Lr=pt.split(".");if(Lr.length===1)return['"'+Ba(pt)+'"'];for(var cr=[],br=0;br<Lr.length;++br)cr=cr.concat(xa(Lr[br]));return cr}function ya(pt){return"["+xa(pt).join("][")+"]"}function Na(pt,fe){return new ba(pt,ya(fe+""))}function Ta(pt){return typeof pt=="function"&&!pt._reglType||pt instanceof ba}function hr(pt,fe){if(typeof pt=="function")return new ba(Ln,pt);if(typeof pt=="number"||typeof pt=="boolean")return new ba(Yn,pt);if(Array.isArray(pt))return new ba(Ra,pt.map((Ae,lr)=>hr(Ae,fe+"["+lr+"]")));if(pt instanceof ba)return pt;Yt(!1,"invalid option type in uniform "+fe)}var Br={DynamicVariable:ba,define:Na,isDynamic:Ta,unbox:hr,accessor:ya},cn={next:typeof requestAnimationFrame=="function"?function(pt){return requestAnimationFrame(pt)}:function(pt){return setTimeout(pt,16)},cancel:typeof cancelAnimationFrame=="function"?function(pt){return cancelAnimationFrame(pt)}:clearTimeout},Cn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Qn(){var pt={"":0},fe=[""];return{id:function(Ae){var lr=pt[Ae];return lr||(lr=pt[Ae]=fe.length,fe.push(Ae),lr)},str:function(Ae){return fe[Ae]}}}function Bn(pt,fe,Ae){var lr=document.createElement("canvas");ut(lr.style,{border:0,margin:0,padding:0,top:0,left:0}),pt.appendChild(lr),pt===document.body&&(lr.style.position="absolute",ut(pt.style,{margin:0,padding:0}));function Lr(){var Xr=window.innerWidth,qr=window.innerHeight;if(pt!==document.body){var Kr=pt.getBoundingClientRect();Xr=Kr.right-Kr.left,qr=Kr.bottom-Kr.top}lr.width=Ae*Xr,lr.height=Ae*qr,ut(lr.style,{width:Xr+"px",height:qr+"px"})}var cr;pt!==document.body&&typeof ResizeObserver=="function"?(cr=new ResizeObserver(function(){setTimeout(Lr)}),cr.observe(pt)):window.addEventListener("resize",Lr,!1);function br(){cr?cr.disconnect():window.removeEventListener("resize",Lr),pt.removeChild(lr)}return Lr(),{canvas:lr,onDestroy:br}}function ta(pt,fe){function Ae(lr){try{return pt.getContext(lr,fe)}catch(Lr){return null}}return Ae("webgl")||Ae("experimental-webgl")||Ae("webgl-experimental")}function sa(pt){return typeof pt.nodeName=="string"&&typeof pt.appendChild=="function"&&typeof pt.getBoundingClientRect=="function"}function Fa(pt){return typeof pt.drawArrays=="function"||typeof pt.drawElements=="function"}function wa(pt){return typeof pt=="string"?pt.split():(Yt(Array.isArray(pt),"invalid extension array"),pt)}function An(pt){return typeof pt=="string"?(Yt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(pt)):pt}function ua(pt){var fe=pt||{},Ae,lr,Lr,cr,br={},Xr=[],qr=[],Kr=typeof window=="undefined"?1:window.devicePixelRatio,Gr=!1,tn=function(k){k&&Yt.raise(k)},d=function(){};if(typeof fe=="string"?(Yt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ae=document.querySelector(fe),Yt(Ae,"invalid query string for element")):typeof fe=="object"?sa(fe)?Ae=fe:Fa(fe)?(cr=fe,Lr=cr.canvas):(Yt.constructor(fe),"gl"in fe?cr=fe.gl:"canvas"in fe?Lr=An(fe.canvas):"container"in fe&&(lr=An(fe.container)),"attributes"in fe&&(br=fe.attributes,Yt.type(br,"object","invalid context attributes")),"extensions"in fe&&(Xr=wa(fe.extensions)),"optionalExtensions"in fe&&(qr=wa(fe.optionalExtensions)),"onDone"in fe&&(Yt.type(fe.onDone,"function","invalid or missing onDone callback"),tn=fe.onDone),"profile"in fe&&(Gr=!!fe.profile),"pixelRatio"in fe&&(Kr=+fe.pixelRatio,Yt(Kr>0,"invalid pixel ratio"))):Yt.raise("invalid arguments to regl"),Ae&&(Ae.nodeName.toLowerCase()==="canvas"?Lr=Ae:lr=Ae),!cr){if(!Lr){Yt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var m=Bn(lr||document.body,tn,Kr);if(!m)return null;Lr=m.canvas,d=m.onDestroy}br.premultipliedAlpha===void 0&&(br.premultipliedAlpha=!0),cr=ta(Lr,br)}return cr?{gl:cr,canvas:Lr,container:lr,extensions:Xr,optionalExtensions:qr,pixelRatio:Kr,profile:Gr,onDone:tn,onDestroy:d}:(d(),tn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ra(pt,fe){var Ae={};function lr(br){Yt.type(br,"string","extension name must be string");var Xr=br.toLowerCase(),qr;try{qr=Ae[Xr]=pt.getExtension(Xr)}catch(Kr){}return!!qr}for(var Lr=0;Lr<fe.extensions.length;++Lr){var cr=fe.extensions[Lr];if(!lr(cr))return fe.onDestroy(),fe.onDone('"'+cr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return fe.optionalExtensions.forEach(lr),{extensions:Ae,restore:function(){Object.keys(Ae).forEach(function(br){if(Ae[br]&&!lr(br))throw new Error("(regl): error restoring extension "+br)})}}}function Fn(pt,fe){for(var Ae=Array(pt),lr=0;lr<pt;++lr)Ae[lr]=fe(lr);return Ae}var ka=5120,U=5121,Ve=5122,we=5123,er=5124,Je=5125,Pr=5126;function Or(pt){for(var fe=16;fe<=1<<28;fe*=16)if(pt<=fe)return fe;return 0}function rn(pt){var fe,Ae;return fe=(pt>65535)<<4,pt>>>=fe,Ae=(pt>255)<<3,pt>>>=Ae,fe|=Ae,Ae=(pt>15)<<2,pt>>>=Ae,fe|=Ae,Ae=(pt>3)<<1,pt>>>=Ae,fe|=Ae,fe|pt>>1}function fn(){var pt=Fn(8,function(){return[]});function fe(cr){var br=Or(cr),Xr=pt[rn(br)>>2];return Xr.length>0?Xr.pop():new ArrayBuffer(br)}function Ae(cr){pt[rn(cr.byteLength)>>2].push(cr)}function lr(cr,br){var Xr=null;switch(cr){case ka:Xr=new Int8Array(fe(br),0,br);break;case U:Xr=new Uint8Array(fe(br),0,br);break;case Ve:Xr=new Int16Array(fe(2*br),0,br);break;case we:Xr=new Uint16Array(fe(2*br),0,br);break;case er:Xr=new Int32Array(fe(4*br),0,br);break;case Je:Xr=new Uint32Array(fe(4*br),0,br);break;case Pr:Xr=new Float32Array(fe(4*br),0,br);break;default:return null}return Xr.length!==br?Xr.subarray(0,br):Xr}function Lr(cr){Ae(cr.buffer)}return{alloc:fe,free:Ae,allocType:lr,freeType:Lr}}var jr=fn();jr.zero=fn();var ht=3408,yt=3410,O=3411,E=3412,w=3413,V=3414,Et=3415,Gt=33901,Dt=33902,ie=3379,Ge=3386,Te=34921,ar=36347,Ur=36348,pr=35661,nn=35660,kn=34930,We=36349,vr=34076,Nr=34024,Fr=7936,ee=7937,Lt=7938,ue=35724,Ee=34047,me=36063,Ie=34852,rr=3553,ir=34067,Zr=34069,En=33984,ln=6408,zn=5126,Gn=5121,la=36160,Ha=36053,qa=36064,Oa=16384,Ao=function(pt,fe){var Ae=1;fe.ext_texture_filter_anisotropic&&(Ae=pt.getParameter(Ee));var lr=1,Lr=1;fe.webgl_draw_buffers&&(lr=pt.getParameter(Ie),Lr=pt.getParameter(me));var cr=!!fe.oes_texture_float;if(cr){var br=pt.createTexture();pt.bindTexture(rr,br),pt.texImage2D(rr,0,ln,1,1,0,ln,zn,null);var Xr=pt.createFramebuffer();if(pt.bindFramebuffer(la,Xr),pt.framebufferTexture2D(la,qa,rr,br,0),pt.bindTexture(rr,null),pt.checkFramebufferStatus(la)!==Ha)cr=!1;else{pt.viewport(0,0,1,1),pt.clearColor(1,0,0,1),pt.clear(Oa);var qr=jr.allocType(zn,4);pt.readPixels(0,0,1,1,ln,zn,qr),pt.getError()?cr=!1:(pt.deleteFramebuffer(Xr),pt.deleteTexture(br),cr=qr[0]===1),jr.freeType(qr)}}var Kr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Gr=!0;if(!Kr){var tn=pt.createTexture(),d=jr.allocType(Gn,36);pt.activeTexture(En),pt.bindTexture(ir,tn),pt.texImage2D(Zr,0,ln,3,3,0,ln,Gn,d),jr.freeType(d),pt.bindTexture(ir,null),pt.deleteTexture(tn),Gr=!pt.getError()}return{colorBits:[pt.getParameter(yt),pt.getParameter(O),pt.getParameter(E),pt.getParameter(w)],depthBits:pt.getParameter(V),stencilBits:pt.getParameter(Et),subpixelBits:pt.getParameter(ht),extensions:Object.keys(fe).filter(function(m){return!!fe[m]}),maxAnisotropic:Ae,maxDrawbuffers:lr,maxColorAttachments:Lr,pointSizeDims:pt.getParameter(Gt),lineWidthDims:pt.getParameter(Dt),maxViewportDims:pt.getParameter(Ge),maxCombinedTextureUnits:pt.getParameter(pr),maxCubeMapSize:pt.getParameter(vr),maxRenderbufferSize:pt.getParameter(Nr),maxTextureUnits:pt.getParameter(kn),maxTextureSize:pt.getParameter(ie),maxAttributes:pt.getParameter(Te),maxVertexUniforms:pt.getParameter(ar),maxVertexTextureUnits:pt.getParameter(nn),maxVaryingVectors:pt.getParameter(Ur),maxFragmentUniforms:pt.getParameter(We),glsl:pt.getParameter(ue),renderer:pt.getParameter(ee),vendor:pt.getParameter(Fr),version:pt.getParameter(Lt),readFloat:cr,npotTextureCube:Gr}};function wi(pt){return!!pt&&typeof pt=="object"&&Array.isArray(pt.shape)&&Array.isArray(pt.stride)&&typeof pt.offset=="number"&&pt.shape.length===pt.stride.length&&(Array.isArray(pt.data)||G(pt.data))}var Ei=function(pt){return Object.keys(pt).map(function(fe){return pt[fe]})},oo={shape:ds,flatten:Io};function hs(pt,fe,Ae){for(var lr=0;lr<fe;++lr)Ae[lr]=pt[lr]}function To(pt,fe,Ae,lr){for(var Lr=0,cr=0;cr<fe;++cr)for(var br=pt[cr],Xr=0;Xr<Ae;++Xr)lr[Lr++]=br[Xr]}function so(pt,fe,Ae,lr,Lr,cr){for(var br=cr,Xr=0;Xr<fe;++Xr)for(var qr=pt[Xr],Kr=0;Kr<Ae;++Kr)for(var Gr=qr[Kr],tn=0;tn<lr;++tn)Lr[br++]=Gr[tn]}function ma(pt,fe,Ae,lr,Lr){for(var cr=1,br=Ae+1;br<fe.length;++br)cr*=fe[br];var Xr=fe[Ae];if(fe.length-Ae===4){var qr=fe[Ae+1],Kr=fe[Ae+2],Gr=fe[Ae+3];for(br=0;br<Xr;++br)so(pt[br],qr,Kr,Gr,lr,Lr),Lr+=cr}else for(br=0;br<Xr;++br)ma(pt[br],fe,Ae+1,lr,Lr),Lr+=cr}function Io(pt,fe,Ae,lr){var Lr=1;if(fe.length)for(var cr=0;cr<fe.length;++cr)Lr*=fe[cr];else Lr=0;var br=lr||jr.allocType(Ae,Lr);switch(fe.length){case 0:break;case 1:hs(pt,fe[0],br);break;case 2:To(pt,fe[0],fe[1],br);break;case 3:so(pt,fe[0],fe[1],fe[2],br,0);break;default:ma(pt,fe,0,br,0)}return br}function ds(pt){for(var fe=[],Ae=pt;Ae.length;Ae=Ae[0])fe.push(Ae.length);return fe}var ei={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Wi=5120,vs=5122,Yo=5124,Vi=5121,uo=5123,Gs=5125,Wo=5126,Si=5126,fo={int8:Wi,int16:vs,int32:Yo,uint8:Vi,uint16:uo,uint32:Gs,float:Wo,float32:Si},ps=35048,Tn=35040,Eo={dynamic:ps,stream:Tn,static:35044},Do=oo.flatten,Ss=oo.shape,Vo=35044,Ns=35040,Pn=5121,Hi=5126,ji=[];ji[5120]=1,ji[5122]=2,ji[5124]=4,ji[5121]=1,ji[5123]=2,ji[5125]=4,ji[5126]=4;function yi(pt){return ei[Object.prototype.toString.call(pt)]|0}function Ho(pt,fe){for(var Ae=0;Ae<fe.length;++Ae)pt[Ae]=fe[Ae]}function jo(pt,fe,Ae,lr,Lr,cr,br){for(var Xr=0,qr=0;qr<Ae;++qr)for(var Kr=0;Kr<lr;++Kr)pt[Xr++]=fe[Lr*qr+cr*Kr+br]}function co(pt,fe,Ae,lr){var Lr=0,cr={};function br(z){this.id=Lr++,this.buffer=pt.createBuffer(),this.type=z,this.usage=Vo,this.byteLength=0,this.dimension=1,this.dtype=Pn,this.persistentData=null,Ae.profile&&(this.stats={size:0})}br.prototype.bind=function(){pt.bindBuffer(this.type,this.buffer)},br.prototype.destroy=function(){d(this)};var Xr=[];function qr(z,rt){var ot=Xr.pop();return ot||(ot=new br(z)),ot.bind(),tn(ot,rt,Ns,0,1,!1),ot}function Kr(z){Xr.push(z)}function Gr(z,rt,ot){z.byteLength=rt.byteLength,pt.bufferData(z.type,rt,ot)}function tn(z,rt,ot,dt,mt,Ct){var Ft;if(z.usage=ot,Array.isArray(rt)){if(z.dtype=dt||Hi,rt.length>0){var oe;if(Array.isArray(rt[0])){Ft=Ss(rt);for(var Qt=1,Me=1;Me<Ft.length;++Me)Qt*=Ft[Me];z.dimension=Qt,oe=Do(rt,Ft,z.dtype),Gr(z,oe,ot),Ct?z.persistentData=oe:jr.freeType(oe)}else if(typeof rt[0]=="number"){z.dimension=mt;var Ue=jr.allocType(z.dtype,rt.length);Ho(Ue,rt),Gr(z,Ue,ot),Ct?z.persistentData=Ue:jr.freeType(Ue)}else G(rt[0])?(z.dimension=rt[0].length,z.dtype=dt||yi(rt[0])||Hi,oe=Do(rt,[rt.length,rt[0].length],z.dtype),Gr(z,oe,ot),Ct?z.persistentData=oe:jr.freeType(oe)):Yt.raise("invalid buffer data")}}else if(G(rt))z.dtype=dt||yi(rt),z.dimension=mt,Gr(z,rt,ot),Ct&&(z.persistentData=new Uint8Array(new Uint8Array(rt.buffer)));else if(wi(rt)){Ft=rt.shape;var wr=rt.stride,Ze=rt.offset,Ke=0,Qe=0,Hr=0,un=0;Ft.length===1?(Ke=Ft[0],Qe=1,Hr=wr[0],un=0):Ft.length===2?(Ke=Ft[0],Qe=Ft[1],Hr=wr[0],un=wr[1]):Yt.raise("invalid shape"),z.dtype=dt||yi(rt.data)||Hi,z.dimension=Qe;var en=jr.allocType(z.dtype,Ke*Qe);jo(en,rt.data,Ke,Qe,Hr,un,Ze),Gr(z,en,ot),Ct?z.persistentData=en:jr.freeType(en)}else rt instanceof ArrayBuffer?(z.dtype=Pn,z.dimension=mt,Gr(z,rt,ot),Ct&&(z.persistentData=new Uint8Array(new Uint8Array(rt)))):Yt.raise("invalid buffer data")}function d(z){fe.bufferCount--,lr(z);var rt=z.buffer;Yt(rt,"buffer must not be deleted already"),pt.deleteBuffer(rt),z.buffer=null,delete cr[z.id]}function m(z,rt,ot,dt){fe.bufferCount++;var mt=new br(rt);cr[mt.id]=mt;function Ct(Qt){var Me=Vo,Ue=null,wr=0,Ze=0,Ke=1;return Array.isArray(Qt)||G(Qt)||wi(Qt)||Qt instanceof ArrayBuffer?Ue=Qt:typeof Qt=="number"?wr=Qt|0:Qt&&(Yt.type(Qt,"object","buffer arguments must be an object, a number or an array"),"data"in Qt&&(Yt(Ue===null||Array.isArray(Ue)||G(Ue)||wi(Ue),"invalid data for buffer"),Ue=Qt.data),"usage"in Qt&&(Yt.parameter(Qt.usage,Eo,"invalid buffer usage"),Me=Eo[Qt.usage]),"type"in Qt&&(Yt.parameter(Qt.type,fo,"invalid buffer type"),Ze=fo[Qt.type]),"dimension"in Qt&&(Yt.type(Qt.dimension,"number","invalid dimension"),Ke=Qt.dimension|0),"length"in Qt&&(Yt.nni(wr,"buffer length must be a nonnegative integer"),wr=Qt.length|0)),mt.bind(),Ue?tn(mt,Ue,Me,Ze,Ke,dt):(wr&&pt.bufferData(mt.type,wr,Me),mt.dtype=Ze||Pn,mt.usage=Me,mt.dimension=Ke,mt.byteLength=wr),Ae.profile&&(mt.stats.size=mt.byteLength*ji[mt.dtype]),Ct}function Ft(Qt,Me){Yt(Me+Qt.byteLength<=mt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qt.byteLength+" starting from offset "+Me+" to a buffer of size "+mt.byteLength),pt.bufferSubData(mt.type,Me,Qt)}function oe(Qt,Me){var Ue=(Me||0)|0,wr;if(mt.bind(),G(Qt)||Qt instanceof ArrayBuffer)Ft(Qt,Ue);else if(Array.isArray(Qt)){if(Qt.length>0)if(typeof Qt[0]=="number"){var Ze=jr.allocType(mt.dtype,Qt.length);Ho(Ze,Qt),Ft(Ze,Ue),jr.freeType(Ze)}else if(Array.isArray(Qt[0])||G(Qt[0])){wr=Ss(Qt);var Ke=Do(Qt,wr,mt.dtype);Ft(Ke,Ue),jr.freeType(Ke)}else Yt.raise("invalid buffer data")}else if(wi(Qt)){wr=Qt.shape;var Qe=Qt.stride,Hr=0,un=0,en=0,In=0;wr.length===1?(Hr=wr[0],un=1,en=Qe[0],In=0):wr.length===2?(Hr=wr[0],un=wr[1],en=Qe[0],In=Qe[1]):Yt.raise("invalid shape");var Mn=Array.isArray(Qt.data)?mt.dtype:yi(Qt.data),Un=jr.allocType(Mn,Hr*un);jo(Un,Qt.data,Hr,un,en,In,Qt.offset),Ft(Un,Ue),jr.freeType(Un)}else Yt.raise("invalid data for buffer subdata");return Ct}return ot||Ct(z),Ct._reglType="buffer",Ct._buffer=mt,Ct.subdata=oe,Ae.profile&&(Ct.stats=mt.stats),Ct.destroy=function(){d(mt)},Ct}function k(){Ei(cr).forEach(function(z){z.buffer=pt.createBuffer(),pt.bindBuffer(z.type,z.buffer),pt.bufferData(z.type,z.persistentData||z.byteLength,z.usage)})}return Ae.profile&&(fe.getTotalBufferSize=function(){var z=0;return Object.keys(cr).forEach(function(rt){z+=cr[rt].stats.size}),z}),{create:m,createStream:qr,destroyStream:Kr,clear:function(){Ei(cr).forEach(d),Xr.forEach(d)},getBuffer:function(z){return z&&z._buffer instanceof br?z._buffer:null},restore:k,_initBuffer:tn}}var gs=0,Ms=0,us=1,Sa=1,ks=4,So=4,lo={points:gs,point:Ms,lines:us,line:Sa,triangles:ks,triangle:So,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_s=0,Po=1,Gi=4,Mo=5120,Zi=5121,Lo=5122,di=5123,Cs=5124,Ro=5125,ho=34963,Zo=35040,_o=35044;function qo(pt,fe,Ae,lr){var Lr={},cr=0,br={uint8:Zi,uint16:di};fe.oes_element_index_uint&&(br.uint32=Ro);function Xr(k){this.id=cr++,Lr[this.id]=this,this.buffer=k,this.primType=Gi,this.vertCount=0,this.type=0}Xr.prototype.bind=function(){this.buffer.bind()};var qr=[];function Kr(k){var z=qr.pop();return z||(z=new Xr(Ae.create(null,ho,!0,!1)._buffer)),tn(z,k,Zo,-1,-1,0,0),z}function Gr(k){qr.push(k)}function tn(k,z,rt,ot,dt,mt,Ct){k.buffer.bind();var Ft;if(z){var oe=Ct;!Ct&&(!G(z)||wi(z)&&!G(z.data))&&(oe=fe.oes_element_index_uint?Ro:di),Ae._initBuffer(k.buffer,z,rt,oe,3)}else pt.bufferData(ho,mt,rt),k.buffer.dtype=Ft||Zi,k.buffer.usage=rt,k.buffer.dimension=3,k.buffer.byteLength=mt;if(Ft=Ct,!Ct){switch(k.buffer.dtype){case Zi:case Mo:Ft=Zi;break;case di:case Lo:Ft=di;break;case Ro:case Cs:Ft=Ro;break;default:Yt.raise("unsupported type for element array")}k.buffer.dtype=Ft}k.type=Ft,Yt(Ft!==Ro||!!fe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qt=dt;Qt<0&&(Qt=k.buffer.byteLength,Ft===di?Qt>>=1:Ft===Ro&&(Qt>>=2)),k.vertCount=Qt;var Me=ot;if(ot<0){Me=Gi;var Ue=k.buffer.dimension;Ue===1&&(Me=_s),Ue===2&&(Me=Po),Ue===3&&(Me=Gi)}k.primType=Me}function d(k){lr.elementsCount--,Yt(k.buffer!==null,"must not double destroy elements"),delete Lr[k.id],k.buffer.destroy(),k.buffer=null}function m(k,z){var rt=Ae.create(null,ho,!0),ot=new Xr(rt._buffer);lr.elementsCount++;function dt(mt){if(!mt)rt(),ot.primType=Gi,ot.vertCount=0,ot.type=Zi;else if(typeof mt=="number")rt(mt),ot.primType=Gi,ot.vertCount=mt|0,ot.type=Zi;else{var Ct=null,Ft=_o,oe=-1,Qt=-1,Me=0,Ue=0;Array.isArray(mt)||G(mt)||wi(mt)?Ct=mt:(Yt.type(mt,"object","invalid arguments for elements"),"data"in mt&&(Ct=mt.data,Yt(Array.isArray(Ct)||G(Ct)||wi(Ct),"invalid data for element buffer")),"usage"in mt&&(Yt.parameter(mt.usage,Eo,"invalid element buffer usage"),Ft=Eo[mt.usage]),"primitive"in mt&&(Yt.parameter(mt.primitive,lo,"invalid element buffer primitive"),oe=lo[mt.primitive]),"count"in mt&&(Yt(typeof mt.count=="number"&&mt.count>=0,"invalid vertex count for elements"),Qt=mt.count|0),"type"in mt&&(Yt.parameter(mt.type,br,"invalid buffer type"),Ue=br[mt.type]),"length"in mt?Me=mt.length|0:(Me=Qt,Ue===di||Ue===Lo?Me*=2:(Ue===Ro||Ue===Cs)&&(Me*=4))),tn(ot,Ct,Ft,oe,Qt,Me,Ue)}return dt}return dt(k),dt._reglType="elements",dt._elements=ot,dt.subdata=function(mt,Ct){return rt.subdata(mt,Ct),dt},dt.destroy=function(){d(ot)},dt}return{create:m,createStream:Kr,destroyStream:Gr,getElements:function(k){return typeof k=="function"&&k._elements instanceof Xr?k._elements:null},clear:function(){Ei(Lr).forEach(d)}}}var go=new Float32Array(1),Ia=new Uint32Array(go.buffer),Oi=5123;function zi(pt){for(var fe=jr.allocType(Oi,pt.length),Ae=0;Ae<pt.length;++Ae)if(isNaN(pt[Ae]))fe[Ae]=65535;else if(pt[Ae]===1/0)fe[Ae]=31744;else if(pt[Ae]===-1/0)fe[Ae]=64512;else{go[0]=pt[Ae];var lr=Ia[0],Lr=lr>>>31<<15,cr=(lr<<1>>>24)-127,br=lr>>13&1023;if(cr<-24)fe[Ae]=Lr;else if(cr<-14){var Xr=-14-cr;fe[Ae]=Lr+(br+1024>>Xr)}else cr>15?fe[Ae]=Lr+31744:fe[Ae]=Lr+(cr+15<<10)+br}return fe}function La(pt){return Array.isArray(pt)||G(pt)}var Ci=function(pt){return!(pt&pt-1)&&!!pt},$o=34467,Di=3553,Bo=34067,Co=34069,qi=6408,As=6406,ys=6407,Ko=6409,ms=6410,ru=32854,zs=32855,bs=36194,At=32819,Jt=32820,Fe=33635,je=34042,Ar=6402,sn=34041,wn=35904,Wn=35906,si=36193,to=33776,vo=33777,Us=33778,bu=33779,Ui=35986,yo=35987,qs=34798,zu=35840,xu=35841,nu=35842,au=35843,$s=36196,Os=5121,Ks=5123,xs=5125,No=5126,nf=10242,Rf=10243,Bf=10497,Ds=33071,Ff=33648,h=10240,A=10241,lt=9728,xt=9729,Nt=9984,jt=9985,qt=9986,de=9987,be=33170,Le=4352,Ye=4353,mr=4354,xr=34046,yr=3317,Vr=37440,Jr=37441,Tr=37443,gn=37444,da=33984,va=[Nt,qt,jt,de],na=[0,Ko,ms,ys,qi],Vn={};Vn[Ko]=Vn[As]=Vn[Ar]=1,Vn[sn]=Vn[ms]=2,Vn[ys]=Vn[wn]=3,Vn[qi]=Vn[Wn]=4;function ea(pt){return"[object "+pt+"]"}var Ai=ea("HTMLCanvasElement"),Ti=ea("OffscreenCanvas"),Mi=ea("CanvasRenderingContext2D"),Ii=ea("ImageBitmap"),Li=ea("HTMLImageElement"),Xi=ea("HTMLVideoElement"),eo=Object.keys(ei).concat([Ai,Ti,Mi,Ii,Li,Xi]),Ga=[];Ga[Os]=1,Ga[No]=4,Ga[si]=2,Ga[Ks]=2,Ga[xs]=4;var ui=[];ui[ru]=2,ui[zs]=2,ui[bs]=2,ui[sn]=4,ui[to]=.5,ui[vo]=.5,ui[Us]=1,ui[bu]=1,ui[Ui]=.5,ui[yo]=1,ui[qs]=1,ui[zu]=.5,ui[xu]=.25,ui[nu]=.5,ui[au]=.25,ui[$s]=.5;function Ps(pt){return Array.isArray(pt)&&(pt.length===0||typeof pt[0]=="number")}function ws(pt){if(!Array.isArray(pt))return!1;var fe=pt.length;return!(fe===0||!La(pt[0]))}function ko(pt){return Object.prototype.toString.call(pt)}function wu(pt){return ko(pt)===Ai}function Gf(pt){return ko(pt)===Ti}function bc(pt){return ko(pt)===Mi}function xc(pt){return ko(pt)===Ii}function wc(pt){return ko(pt)===Li}function zf(pt){return ko(pt)===Xi}function Uf(pt){if(!pt)return!1;var fe=ko(pt);return eo.indexOf(fe)>=0?!0:Ps(pt)||ws(pt)||wi(pt)}function Ec(pt){return ei[Object.prototype.toString.call(pt)]|0}function af(pt,fe){var Ae=fe.length;switch(pt.type){case Os:case Ks:case xs:case No:var lr=jr.allocType(pt.type,Ae);lr.set(fe),pt.data=lr;break;case si:pt.data=zi(fe);break;default:Yt.raise("unsupported texture type, must specify a typed array")}}function of(pt,fe){return jr.allocType(pt.type===si?No:pt.type,fe)}function Sc(pt,fe){pt.type===si?(pt.data=zi(fe),jr.freeType(fe)):pt.data=fe}function al(pt,fe,Ae,lr,Lr,cr){for(var br=pt.width,Xr=pt.height,qr=pt.channels,Kr=br*Xr*qr,Gr=of(pt,Kr),tn=0,d=0;d<Xr;++d)for(var m=0;m<br;++m)for(var k=0;k<qr;++k)Gr[tn++]=fe[Ae*m+lr*d+Lr*k+cr];Sc(pt,Gr)}function Rs(pt,fe,Ae,lr,Lr,cr){var br;if(typeof ui[pt]!="undefined"?br=ui[pt]:br=Vn[pt]*Ga[fe],cr&&(br*=6),Lr){for(var Xr=0,qr=Ae;qr>=1;)Xr+=br*qr*qr,qr/=2;return Xr}else return br*Ae*lr}function Mc(pt,fe,Ae,lr,Lr,cr,br){var Xr={"don't care":Le,"dont care":Le,nice:mr,fast:Ye},qr={repeat:Bf,clamp:Ds,mirror:Ff},Kr={nearest:lt,linear:xt},Gr=ut({mipmap:de,"nearest mipmap nearest":Nt,"linear mipmap nearest":jt,"nearest mipmap linear":qt,"linear mipmap linear":de},Kr),tn={none:0,browser:gn},d={uint8:Os,rgba4:At,rgb565:Fe,"rgb5 a1":Jt},m={alpha:As,luminance:Ko,"luminance alpha":ms,rgb:ys,rgba:qi,rgba4:ru,"rgb5 a1":zs,rgb565:bs},k={};fe.ext_srgb&&(m.srgb=wn,m.srgba=Wn),fe.oes_texture_float&&(d.float32=d.float=No),fe.oes_texture_half_float&&(d.float16=d["half float"]=si),fe.webgl_depth_texture&&(ut(m,{depth:Ar,"depth stencil":sn}),ut(d,{uint16:Ks,uint32:xs,"depth stencil":je})),fe.webgl_compressed_texture_s3tc&&ut(k,{"rgb s3tc dxt1":to,"rgba s3tc dxt1":vo,"rgba s3tc dxt3":Us,"rgba s3tc dxt5":bu}),fe.webgl_compressed_texture_atc&&ut(k,{"rgb atc":Ui,"rgba atc explicit alpha":yo,"rgba atc interpolated alpha":qs}),fe.webgl_compressed_texture_pvrtc&&ut(k,{"rgb pvrtc 4bppv1":zu,"rgb pvrtc 2bppv1":xu,"rgba pvrtc 4bppv1":nu,"rgba pvrtc 2bppv1":au}),fe.webgl_compressed_texture_etc1&&(k["rgb etc1"]=$s);var z=Array.prototype.slice.call(pt.getParameter($o));Object.keys(k).forEach(function(Se){var dr=k[Se];z.indexOf(dr)>=0&&(m[Se]=dr)});var rt=Object.keys(m);Ae.textureFormats=rt;var ot=[];Object.keys(m).forEach(function(Se){var dr=m[Se];ot[dr]=Se});var dt=[];Object.keys(d).forEach(function(Se){var dr=d[Se];dt[dr]=Se});var mt=[];Object.keys(Kr).forEach(function(Se){var dr=Kr[Se];mt[dr]=Se});var Ct=[];Object.keys(Gr).forEach(function(Se){var dr=Gr[Se];Ct[dr]=Se});var Ft=[];Object.keys(qr).forEach(function(Se){var dr=qr[Se];Ft[dr]=Se});var oe=rt.reduce(function(Se,dr){var ur=m[dr];return ur===Ko||ur===As||ur===Ko||ur===ms||ur===Ar||ur===sn||fe.ext_srgb&&(ur===wn||ur===Wn)?Se[ur]=ur:ur===zs||dr.indexOf("rgba")>=0?Se[ur]=qi:Se[ur]=ys,Se},{});function Qt(){this.internalformat=qi,this.format=qi,this.type=Os,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=gn,this.width=0,this.height=0,this.channels=0}function Me(Se,dr){Se.internalformat=dr.internalformat,Se.format=dr.format,Se.type=dr.type,Se.compressed=dr.compressed,Se.premultiplyAlpha=dr.premultiplyAlpha,Se.flipY=dr.flipY,Se.unpackAlignment=dr.unpackAlignment,Se.colorSpace=dr.colorSpace,Se.width=dr.width,Se.height=dr.height,Se.channels=dr.channels}function Ue(Se,dr){if(!(typeof dr!="object"||!dr)){if("premultiplyAlpha"in dr&&(Yt.type(dr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Se.premultiplyAlpha=dr.premultiplyAlpha),"flipY"in dr&&(Yt.type(dr.flipY,"boolean","invalid texture flip"),Se.flipY=dr.flipY),"alignment"in dr&&(Yt.oneOf(dr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Se.unpackAlignment=dr.alignment),"colorSpace"in dr&&(Yt.parameter(dr.colorSpace,tn,"invalid colorSpace"),Se.colorSpace=tn[dr.colorSpace]),"type"in dr){var ur=dr.type;Yt(fe.oes_texture_float||!(ur==="float"||ur==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Yt(fe.oes_texture_half_float||!(ur==="half float"||ur==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Yt(fe.webgl_depth_texture||!(ur==="uint16"||ur==="uint32"||ur==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Yt.parameter(ur,d,"invalid texture type"),Se.type=d[ur]}var xn=Se.width,Hn=Se.height,ge=Se.channels,te=!1;"shape"in dr?(Yt(Array.isArray(dr.shape)&&dr.shape.length>=2,"shape must be an array"),xn=dr.shape[0],Hn=dr.shape[1],dr.shape.length===3&&(ge=dr.shape[2],Yt(ge>0&&ge<=4,"invalid number of channels"),te=!0),Yt(xn>=0&&xn<=Ae.maxTextureSize,"invalid width"),Yt(Hn>=0&&Hn<=Ae.maxTextureSize,"invalid height")):("radius"in dr&&(xn=Hn=dr.radius,Yt(xn>=0&&xn<=Ae.maxTextureSize,"invalid radius")),"width"in dr&&(xn=dr.width,Yt(xn>=0&&xn<=Ae.maxTextureSize,"invalid width")),"height"in dr&&(Hn=dr.height,Yt(Hn>=0&&Hn<=Ae.maxTextureSize,"invalid height")),"channels"in dr&&(ge=dr.channels,Yt(ge>0&&ge<=4,"invalid number of channels"),te=!0)),Se.width=xn|0,Se.height=Hn|0,Se.channels=ge|0;var Pe=!1;if("format"in dr){var tr=dr.format;Yt(fe.webgl_depth_texture||!(tr==="depth"||tr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Yt.parameter(tr,m,"invalid texture format");var nr=Se.internalformat=m[tr];Se.format=oe[nr],tr in d&&("type"in dr||(Se.type=d[tr])),tr in k&&(Se.compressed=!0),Pe=!0}!te&&Pe?Se.channels=Vn[Se.format]:te&&!Pe?Se.channels!==na[Se.format]&&(Se.format=Se.internalformat=na[Se.channels]):Pe&&te&&Yt(Se.channels===Vn[Se.format],"number of channels inconsistent with specified format")}}function wr(Se){pt.pixelStorei(Vr,Se.flipY),pt.pixelStorei(Jr,Se.premultiplyAlpha),pt.pixelStorei(Tr,Se.colorSpace),pt.pixelStorei(yr,Se.unpackAlignment)}function Ze(){Qt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ke(Se,dr){var ur=null;if(Uf(dr)?ur=dr:dr&&(Yt.type(dr,"object","invalid pixel data type"),Ue(Se,dr),"x"in dr&&(Se.xOffset=dr.x|0),"y"in dr&&(Se.yOffset=dr.y|0),Uf(dr.data)&&(ur=dr.data)),Yt(!Se.compressed||ur instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),dr.copy){Yt(!ur,"can not specify copy and data field for the same texture");var xn=Lr.viewportWidth,Hn=Lr.viewportHeight;Se.width=Se.width||xn-Se.xOffset,Se.height=Se.height||Hn-Se.yOffset,Se.needsCopy=!0,Yt(Se.xOffset>=0&&Se.xOffset<xn&&Se.yOffset>=0&&Se.yOffset<Hn&&Se.width>0&&Se.width<=xn&&Se.height>0&&Se.height<=Hn,"copy texture read out of bounds")}else if(!ur)Se.width=Se.width||1,Se.height=Se.height||1,Se.channels=Se.channels||4;else if(G(ur))Se.channels=Se.channels||4,Se.data=ur,!("type"in dr)&&Se.type===Os&&(Se.type=Ec(ur));else if(Ps(ur))Se.channels=Se.channels||4,af(Se,ur),Se.alignment=1,Se.needsFree=!0;else if(wi(ur)){var ge=ur.data;!Array.isArray(ge)&&Se.type===Os&&(Se.type=Ec(ge));var te=ur.shape,Pe=ur.stride,tr,nr,Re,ke,Xe,ye;te.length===3?(Re=te[2],ye=Pe[2]):(Yt(te.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Re=1,ye=1),tr=te[0],nr=te[1],ke=Pe[0],Xe=Pe[1],Se.alignment=1,Se.width=tr,Se.height=nr,Se.channels=Re,Se.format=Se.internalformat=na[Re],Se.needsFree=!0,al(Se,ge,ke,Xe,ye,ur.offset)}else if(wu(ur)||Gf(ur)||bc(ur))wu(ur)||Gf(ur)?Se.element=ur:Se.element=ur.canvas,Se.width=Se.element.width,Se.height=Se.element.height,Se.channels=4;else if(xc(ur))Se.element=ur,Se.width=ur.width,Se.height=ur.height,Se.channels=4;else if(wc(ur))Se.element=ur,Se.width=ur.naturalWidth,Se.height=ur.naturalHeight,Se.channels=4;else if(zf(ur))Se.element=ur,Se.width=ur.videoWidth,Se.height=ur.videoHeight,Se.channels=4;else if(ws(ur)){var Oe=Se.width||ur[0].length,le=Se.height||ur.length,qe=Se.channels;La(ur[0][0])?qe=qe||ur[0][0].length:qe=qe||1;for(var or=oo.shape(ur),Ir=1,kr=0;kr<or.length;++kr)Ir*=or[kr];var Er=of(Se,Ir);oo.flatten(ur,or,"",Er),Sc(Se,Er),Se.alignment=1,Se.width=Oe,Se.height=le,Se.channels=qe,Se.format=Se.internalformat=na[qe],Se.needsFree=!0}Se.type===No?Yt(Ae.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Se.type===si&&Yt(Ae.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Qe(Se,dr,ur){var xn=Se.element,Hn=Se.data,ge=Se.internalformat,te=Se.format,Pe=Se.type,tr=Se.width,nr=Se.height;wr(Se),xn?pt.texImage2D(dr,ur,te,te,Pe,xn):Se.compressed?pt.compressedTexImage2D(dr,ur,ge,tr,nr,0,Hn):Se.needsCopy?(lr(),pt.copyTexImage2D(dr,ur,te,Se.xOffset,Se.yOffset,tr,nr,0)):pt.texImage2D(dr,ur,te,tr,nr,0,te,Pe,Hn||null)}function Hr(Se,dr,ur,xn,Hn){var ge=Se.element,te=Se.data,Pe=Se.internalformat,tr=Se.format,nr=Se.type,Re=Se.width,ke=Se.height;wr(Se),ge?pt.texSubImage2D(dr,Hn,ur,xn,tr,nr,ge):Se.compressed?pt.compressedTexSubImage2D(dr,Hn,ur,xn,Pe,Re,ke,te):Se.needsCopy?(lr(),pt.copyTexSubImage2D(dr,Hn,ur,xn,Se.xOffset,Se.yOffset,Re,ke)):pt.texSubImage2D(dr,Hn,ur,xn,Re,ke,tr,nr,te)}var un=[];function en(){return un.pop()||new Ze}function In(Se){Se.needsFree&&jr.freeType(Se.data),Ze.call(Se),un.push(Se)}function Mn(){Qt.call(this),this.genMipmaps=!1,this.mipmapHint=Le,this.mipmask=0,this.images=Array(16)}function Un(Se,dr,ur){var xn=Se.images[0]=en();Se.mipmask=1,xn.width=Se.width=dr,xn.height=Se.height=ur,xn.channels=Se.channels=4}function ia(Se,dr){var ur=null;if(Uf(dr))ur=Se.images[0]=en(),Me(ur,Se),Ke(ur,dr),Se.mipmask=1;else if(Ue(Se,dr),Array.isArray(dr.mipmap))for(var xn=dr.mipmap,Hn=0;Hn<xn.length;++Hn)ur=Se.images[Hn]=en(),Me(ur,Se),ur.width>>=Hn,ur.height>>=Hn,Ke(ur,xn[Hn]),Se.mipmask|=1<<Hn;else ur=Se.images[0]=en(),Me(ur,Se),Ke(ur,dr),Se.mipmask=1;Me(Se,Se.images[0]),Se.compressed&&(Se.internalformat===to||Se.internalformat===vo||Se.internalformat===Us||Se.internalformat===bu)&&Yt(Se.width%4===0&&Se.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function qn(Se,dr){for(var ur=Se.images,xn=0;xn<ur.length;++xn){if(!ur[xn])return;Qe(ur[xn],dr,xn)}}var vi=[];function fa(){var Se=vi.pop()||new Mn;Qt.call(Se),Se.mipmask=0;for(var dr=0;dr<16;++dr)Se.images[dr]=null;return Se}function Yi(Se){for(var dr=Se.images,ur=0;ur<dr.length;++ur)dr[ur]&&In(dr[ur]),dr[ur]=null;vi.push(Se)}function Ya(){this.minFilter=lt,this.magFilter=lt,this.wrapS=Ds,this.wrapT=Ds,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Le}function Da(Se,dr){if("min"in dr){var ur=dr.min;Yt.parameter(ur,Gr),Se.minFilter=Gr[ur],va.indexOf(Se.minFilter)>=0&&!("faces"in dr)&&(Se.genMipmaps=!0)}if("mag"in dr){var xn=dr.mag;Yt.parameter(xn,Kr),Se.magFilter=Kr[xn]}var Hn=Se.wrapS,ge=Se.wrapT;if("wrap"in dr){var te=dr.wrap;typeof te=="string"?(Yt.parameter(te,qr),Hn=ge=qr[te]):Array.isArray(te)&&(Yt.parameter(te[0],qr),Yt.parameter(te[1],qr),Hn=qr[te[0]],ge=qr[te[1]])}else{if("wrapS"in dr){var Pe=dr.wrapS;Yt.parameter(Pe,qr),Hn=qr[Pe]}if("wrapT"in dr){var tr=dr.wrapT;Yt.parameter(tr,qr),ge=qr[tr]}}if(Se.wrapS=Hn,Se.wrapT=ge,"anisotropic"in dr){var nr=dr.anisotropic;Yt(typeof nr=="number"&&nr>=1&&nr<=Ae.maxAnisotropic,"aniso samples must be between 1 and "),Se.anisotropic=dr.anisotropic}if("mipmap"in dr){var Re=!1;switch(typeof dr.mipmap){case"string":Yt.parameter(dr.mipmap,Xr,"invalid mipmap hint"),Se.mipmapHint=Xr[dr.mipmap],Se.genMipmaps=!0,Re=!0;break;case"boolean":Re=Se.genMipmaps=dr.mipmap;break;case"object":Yt(Array.isArray(dr.mipmap),"invalid mipmap type"),Se.genMipmaps=!1,Re=!0;break;default:Yt.raise("invalid mipmap type")}Re&&!("min"in dr)&&(Se.minFilter=Nt)}}function Ri(Se,dr){pt.texParameteri(dr,A,Se.minFilter),pt.texParameteri(dr,h,Se.magFilter),pt.texParameteri(dr,nf,Se.wrapS),pt.texParameteri(dr,Rf,Se.wrapT),fe.ext_texture_filter_anisotropic&&pt.texParameteri(dr,xr,Se.anisotropic),Se.genMipmaps&&(pt.hint(be,Se.mipmapHint),pt.generateMipmap(dr))}var Bi=0,bo={},rs=Ae.maxTextureUnits,$i=Array(rs).map(function(){return null});function pa(Se){Qt.call(this),this.mipmask=0,this.internalformat=qi,this.id=Bi++,this.refCount=1,this.target=Se,this.texture=pt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ya,br.profile&&(this.stats={size:0})}function ns(Se){pt.activeTexture(da),pt.bindTexture(Se.target,Se.texture)}function oi(){var Se=$i[0];Se?pt.bindTexture(Se.target,Se.texture):pt.bindTexture(Di,null)}function Xn(Se){var dr=Se.texture;Yt(dr,"must not double destroy texture");var ur=Se.unit,xn=Se.target;ur>=0&&(pt.activeTexture(da+ur),pt.bindTexture(xn,null),$i[ur]=null),pt.deleteTexture(dr),Se.texture=null,Se.params=null,Se.pixels=null,Se.refCount=0,delete bo[Se.id],cr.textureCount--}ut(pa.prototype,{bind:function(){var Se=this;Se.bindCount+=1;var dr=Se.unit;if(dr<0){for(var ur=0;ur<rs;++ur){var xn=$i[ur];if(xn){if(xn.bindCount>0)continue;xn.unit=-1}$i[ur]=Se,dr=ur;break}dr>=rs&&Yt.raise("insufficient number of texture units"),br.profile&&cr.maxTextureUnits<dr+1&&(cr.maxTextureUnits=dr+1),Se.unit=dr,pt.activeTexture(da+dr),pt.bindTexture(Se.target,Se.texture)}return dr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Xn(this)}});function Pa(Se,dr){var ur=new pa(Di);bo[ur.id]=ur,cr.textureCount++;function xn(te,Pe){var tr=ur.texInfo;Ya.call(tr);var nr=fa();return typeof te=="number"?typeof Pe=="number"?Un(nr,te|0,Pe|0):Un(nr,te|0,te|0):te?(Yt.type(te,"object","invalid arguments to regl.texture"),Da(tr,te),ia(nr,te)):Un(nr,1,1),tr.genMipmaps&&(nr.mipmask=(nr.width<<1)-1),ur.mipmask=nr.mipmask,Me(ur,nr),Yt.texture2D(tr,nr,Ae),ur.internalformat=nr.internalformat,xn.width=nr.width,xn.height=nr.height,ns(ur),qn(nr,Di),Ri(tr,Di),oi(),Yi(nr),br.profile&&(ur.stats.size=Rs(ur.internalformat,ur.type,nr.width,nr.height,tr.genMipmaps,!1)),xn.format=ot[ur.internalformat],xn.type=dt[ur.type],xn.mag=mt[tr.magFilter],xn.min=Ct[tr.minFilter],xn.wrapS=Ft[tr.wrapS],xn.wrapT=Ft[tr.wrapT],xn}function Hn(te,Pe,tr,nr){Yt(!!te,"must specify image data");var Re=Pe|0,ke=tr|0,Xe=nr|0,ye=en();return Me(ye,ur),ye.width=0,ye.height=0,Ke(ye,te),ye.width=ye.width||(ur.width>>Xe)-Re,ye.height=ye.height||(ur.height>>Xe)-ke,Yt(ur.type===ye.type&&ur.format===ye.format&&ur.internalformat===ye.internalformat,"incompatible format for texture.subimage"),Yt(Re>=0&&ke>=0&&Re+ye.width<=ur.width&&ke+ye.height<=ur.height,"texture.subimage write out of bounds"),Yt(ur.mipmask&1<<Xe,"missing mipmap data"),Yt(ye.data||ye.element||ye.needsCopy,"missing image data"),ns(ur),Hr(ye,Di,Re,ke,Xe),oi(),In(ye),xn}function ge(te,Pe){var tr=te|0,nr=Pe|0||tr;if(tr===ur.width&&nr===ur.height)return xn;xn.width=ur.width=tr,xn.height=ur.height=nr,ns(ur);for(var Re=0;ur.mipmask>>Re;++Re){var ke=tr>>Re,Xe=nr>>Re;if(!ke||!Xe)break;pt.texImage2D(Di,Re,ur.format,ke,Xe,0,ur.format,ur.type,null)}return oi(),br.profile&&(ur.stats.size=Rs(ur.internalformat,ur.type,tr,nr,!1,!1)),xn}return xn(Se,dr),xn.subimage=Hn,xn.resize=ge,xn._reglType="texture2d",xn._texture=ur,br.profile&&(xn.stats=ur.stats),xn.destroy=function(){ur.decRef()},xn}function ja(Se,dr,ur,xn,Hn,ge){var te=new pa(Bo);bo[te.id]=te,cr.cubeCount++;var Pe=new Array(6);function tr(ke,Xe,ye,Oe,le,qe){var or,Ir=te.texInfo;for(Ya.call(Ir),or=0;or<6;++or)Pe[or]=fa();if(typeof ke=="number"||!ke){var kr=ke|0||1;for(or=0;or<6;++or)Un(Pe[or],kr,kr)}else if(typeof ke=="object")if(Xe)ia(Pe[0],ke),ia(Pe[1],Xe),ia(Pe[2],ye),ia(Pe[3],Oe),ia(Pe[4],le),ia(Pe[5],qe);else if(Da(Ir,ke),Ue(te,ke),"faces"in ke){var Er=ke.faces;for(Yt(Array.isArray(Er)&&Er.length===6,"cube faces must be a length 6 array"),or=0;or<6;++or)Yt(typeof Er[or]=="object"&&!!Er[or],"invalid input for cube map face"),Me(Pe[or],te),ia(Pe[or],Er[or])}else for(or=0;or<6;++or)ia(Pe[or],ke);else Yt.raise("invalid arguments to cube map");for(Me(te,Pe[0]),Ae.npotTextureCube||Yt(Ci(te.width)&&Ci(te.height),"your browser does not support non power or two texture dimensions"),Ir.genMipmaps?te.mipmask=(Pe[0].width<<1)-1:te.mipmask=Pe[0].mipmask,Yt.textureCube(te,Ir,Pe,Ae),te.internalformat=Pe[0].internalformat,tr.width=Pe[0].width,tr.height=Pe[0].height,ns(te),or=0;or<6;++or)qn(Pe[or],Co+or);for(Ri(Ir,Bo),oi(),br.profile&&(te.stats.size=Rs(te.internalformat,te.type,tr.width,tr.height,Ir.genMipmaps,!0)),tr.format=ot[te.internalformat],tr.type=dt[te.type],tr.mag=mt[Ir.magFilter],tr.min=Ct[Ir.minFilter],tr.wrapS=Ft[Ir.wrapS],tr.wrapT=Ft[Ir.wrapT],or=0;or<6;++or)Yi(Pe[or]);return tr}function nr(ke,Xe,ye,Oe,le){Yt(!!Xe,"must specify image data"),Yt(typeof ke=="number"&&ke===(ke|0)&&ke>=0&&ke<6,"invalid face");var qe=ye|0,or=Oe|0,Ir=le|0,kr=en();return Me(kr,te),kr.width=0,kr.height=0,Ke(kr,Xe),kr.width=kr.width||(te.width>>Ir)-qe,kr.height=kr.height||(te.height>>Ir)-or,Yt(te.type===kr.type&&te.format===kr.format&&te.internalformat===kr.internalformat,"incompatible format for texture.subimage"),Yt(qe>=0&&or>=0&&qe+kr.width<=te.width&&or+kr.height<=te.height,"texture.subimage write out of bounds"),Yt(te.mipmask&1<<Ir,"missing mipmap data"),Yt(kr.data||kr.element||kr.needsCopy,"missing image data"),ns(te),Hr(kr,Co+ke,qe,or,Ir),oi(),In(kr),tr}function Re(ke){var Xe=ke|0;if(Xe!==te.width){tr.width=te.width=Xe,tr.height=te.height=Xe,ns(te);for(var ye=0;ye<6;++ye)for(var Oe=0;te.mipmask>>Oe;++Oe)pt.texImage2D(Co+ye,Oe,te.format,Xe>>Oe,Xe>>Oe,0,te.format,te.type,null);return oi(),br.profile&&(te.stats.size=Rs(te.internalformat,te.type,tr.width,tr.height,!1,!0)),tr}}return tr(Se,dr,ur,xn,Hn,ge),tr.subimage=nr,tr.resize=Re,tr._reglType="textureCube",tr._texture=te,br.profile&&(tr.stats=te.stats),tr.destroy=function(){te.decRef()},tr}function no(){for(var Se=0;Se<rs;++Se)pt.activeTexture(da+Se),pt.bindTexture(Di,null),$i[Se]=null;Ei(bo).forEach(Xn),cr.cubeCount=0,cr.textureCount=0}br.profile&&(cr.getTotalTextureSize=function(){var Se=0;return Object.keys(bo).forEach(function(dr){Se+=bo[dr].stats.size}),Se});function du(){for(var Se=0;Se<rs;++Se){var dr=$i[Se];dr&&(dr.bindCount=0,dr.unit=-1,$i[Se]=null)}Ei(bo).forEach(function(ur){ur.texture=pt.createTexture(),pt.bindTexture(ur.target,ur.texture);for(var xn=0;xn<32;++xn)if(ur.mipmask&1<<xn)if(ur.target===Di)pt.texImage2D(Di,xn,ur.internalformat,ur.width>>xn,ur.height>>xn,0,ur.internalformat,ur.type,null);else for(var Hn=0;Hn<6;++Hn)pt.texImage2D(Co+Hn,xn,ur.internalformat,ur.width>>xn,ur.height>>xn,0,ur.internalformat,ur.type,null);Ri(ur.texInfo,ur.target)})}function Ku(){for(var Se=0;Se<rs;++Se){var dr=$i[Se];dr&&(dr.bindCount=0,dr.unit=-1,$i[Se]=null),pt.activeTexture(da+Se),pt.bindTexture(Di,null),pt.bindTexture(Bo,null)}}return{create2D:Pa,createCube:ja,clear:no,getTexture:function(Se){return null},restore:du,refresh:Ku}}var yn=36161,Eu=32854,za=32855,sf=36194,Xf=33189,iu=36168,Uu=34041,Xu=35907,uf=34836,ff=34842,_c=34843,Es=[];Es[Eu]=2,Es[za]=2,Es[sf]=2,Es[Xf]=2,Es[iu]=1,Es[Uu]=4,Es[Xu]=4,Es[uf]=16,Es[ff]=8,Es[_c]=6;function Cc(pt,fe,Ae){return Es[pt]*fe*Ae}var cf=function(pt,fe,Ae,lr,Lr){var cr={rgba4:Eu,rgb565:sf,"rgb5 a1":za,depth:Xf,stencil:iu,"depth stencil":Uu};fe.ext_srgb&&(cr.srgba=Xu),fe.ext_color_buffer_half_float&&(cr.rgba16f=ff,cr.rgb16f=_c),fe.webgl_color_buffer_float&&(cr.rgba32f=uf);var br=[];Object.keys(cr).forEach(function(m){var k=cr[m];br[k]=m});var Xr=0,qr={};function Kr(m){this.id=Xr++,this.refCount=1,this.renderbuffer=m,this.format=Eu,this.width=0,this.height=0,Lr.profile&&(this.stats={size:0})}Kr.prototype.decRef=function(){--this.refCount<=0&&Gr(this)};function Gr(m){var k=m.renderbuffer;Yt(k,"must not double destroy renderbuffer"),pt.bindRenderbuffer(yn,null),pt.deleteRenderbuffer(k),m.renderbuffer=null,m.refCount=0,delete qr[m.id],lr.renderbufferCount--}function tn(m,k){var z=new Kr(pt.createRenderbuffer());qr[z.id]=z,lr.renderbufferCount++;function rt(dt,mt){var Ct=0,Ft=0,oe=Eu;if(typeof dt=="object"&&dt){var Qt=dt;if("shape"in Qt){var Me=Qt.shape;Yt(Array.isArray(Me)&&Me.length>=2,"invalid renderbuffer shape"),Ct=Me[0]|0,Ft=Me[1]|0}else"radius"in Qt&&(Ct=Ft=Qt.radius|0),"width"in Qt&&(Ct=Qt.width|0),"height"in Qt&&(Ft=Qt.height|0);"format"in Qt&&(Yt.parameter(Qt.format,cr,"invalid renderbuffer format"),oe=cr[Qt.format])}else typeof dt=="number"?(Ct=dt|0,typeof mt=="number"?Ft=mt|0:Ft=Ct):dt?Yt.raise("invalid arguments to renderbuffer constructor"):Ct=Ft=1;if(Yt(Ct>0&&Ft>0&&Ct<=Ae.maxRenderbufferSize&&Ft<=Ae.maxRenderbufferSize,"invalid renderbuffer size"),!(Ct===z.width&&Ft===z.height&&oe===z.format))return rt.width=z.width=Ct,rt.height=z.height=Ft,z.format=oe,pt.bindRenderbuffer(yn,z.renderbuffer),pt.renderbufferStorage(yn,oe,Ct,Ft),Yt(pt.getError()===0,"invalid render buffer format"),Lr.profile&&(z.stats.size=Cc(z.format,z.width,z.height)),rt.format=br[z.format],rt}function ot(dt,mt){var Ct=dt|0,Ft=mt|0||Ct;return Ct===z.width&&Ft===z.height||(Yt(Ct>0&&Ft>0&&Ct<=Ae.maxRenderbufferSize&&Ft<=Ae.maxRenderbufferSize,"invalid renderbuffer size"),rt.width=z.width=Ct,rt.height=z.height=Ft,pt.bindRenderbuffer(yn,z.renderbuffer),pt.renderbufferStorage(yn,z.format,Ct,Ft),Yt(pt.getError()===0,"invalid render buffer format"),Lr.profile&&(z.stats.size=Cc(z.format,z.width,z.height))),rt}return rt(m,k),rt.resize=ot,rt._reglType="renderbuffer",rt._renderbuffer=z,Lr.profile&&(rt.stats=z.stats),rt.destroy=function(){z.decRef()},rt}Lr.profile&&(lr.getTotalRenderbufferSize=function(){var m=0;return Object.keys(qr).forEach(function(k){m+=qr[k].stats.size}),m});function d(){Ei(qr).forEach(function(m){m.renderbuffer=pt.createRenderbuffer(),pt.bindRenderbuffer(yn,m.renderbuffer),pt.renderbufferStorage(yn,m.format,m.width,m.height)}),pt.bindRenderbuffer(yn,null)}return{create:tn,clear:function(){Ei(qr).forEach(Gr)},restore:d}},mi=36160,Yu=36161,Ts=3553,Su=34069,Z=36064,vt=36096,_t=36128,Xt=33306,ce=36053,Be=36054,ze=36055,sr=36057,Rr=36061,Wr=36193,bn=5121,dn=5126,mn=6407,$n=6408,Ea=6402,ha=[mn,$n],Zn=[];Zn[$n]=4,Zn[mn]=3;var Ma=[];Ma[bn]=1,Ma[dn]=4,Ma[Wr]=2;var Dn=32854,_a=32855,aa=36194,Rn=33189,Ca=36168,Ka=34041,ii=35907,ri=34836,Xa=34842,_i=34843,Pi=[Dn,_a,aa,ii,Xa,_i,ri],bi={};bi[ce]="complete",bi[Be]="incomplete attachment",bi[sr]="incomplete dimensions",bi[ze]="incomplete, missing attachment",bi[Rr]="unsupported";function Wu(pt,fe,Ae,lr,Lr,cr){var br={cur:null,next:null,dirty:!1,setFBO:null},Xr=["rgba"],qr=["rgba4","rgb565","rgb5 a1"];fe.ext_srgb&&qr.push("srgba"),fe.ext_color_buffer_half_float&&qr.push("rgba16f","rgb16f"),fe.webgl_color_buffer_float&&qr.push("rgba32f");var Kr=["uint8"];fe.oes_texture_half_float&&Kr.push("half float","float16"),fe.oes_texture_float&&Kr.push("float","float32");function Gr(Ze,Ke,Qe){this.target=Ze,this.texture=Ke,this.renderbuffer=Qe;var Hr=0,un=0;Ke?(Hr=Ke.width,un=Ke.height):Qe&&(Hr=Qe.width,un=Qe.height),this.width=Hr,this.height=un}function tn(Ze){Ze&&(Ze.texture&&Ze.texture._texture.decRef(),Ze.renderbuffer&&Ze.renderbuffer._renderbuffer.decRef())}function d(Ze,Ke,Qe){if(Ze)if(Ze.texture){var Hr=Ze.texture._texture,un=Math.max(1,Hr.width),en=Math.max(1,Hr.height);Yt(un===Ke&&en===Qe,"inconsistent width/height for supplied texture"),Hr.refCount+=1}else{var In=Ze.renderbuffer._renderbuffer;Yt(In.width===Ke&&In.height===Qe,"inconsistent width/height for renderbuffer"),In.refCount+=1}}function m(Ze,Ke){Ke&&(Ke.texture?pt.framebufferTexture2D(mi,Ze,Ke.target,Ke.texture._texture.texture,0):pt.framebufferRenderbuffer(mi,Ze,Yu,Ke.renderbuffer._renderbuffer.renderbuffer))}function k(Ze){var Ke=Ts,Qe=null,Hr=null,un=Ze;typeof Ze=="object"&&(un=Ze.data,"target"in Ze&&(Ke=Ze.target|0)),Yt.type(un,"function","invalid attachment data");var en=un._reglType;return en==="texture2d"?(Qe=un,Yt(Ke===Ts)):en==="textureCube"?(Qe=un,Yt(Ke>=Su&&Ke<Su+6,"invalid cube map target")):en==="renderbuffer"?(Hr=un,Ke=Yu):Yt.raise("invalid regl object for attachment"),new Gr(Ke,Qe,Hr)}function z(Ze,Ke,Qe,Hr,un){if(Qe){var en=lr.create2D({width:Ze,height:Ke,format:Hr,type:un});return en._texture.refCount=0,new Gr(Ts,en,null)}else{var In=Lr.create({width:Ze,height:Ke,format:Hr});return In._renderbuffer.refCount=0,new Gr(Yu,null,In)}}function rt(Ze){return Ze&&(Ze.texture||Ze.renderbuffer)}function ot(Ze,Ke,Qe){Ze&&(Ze.texture?Ze.texture.resize(Ke,Qe):Ze.renderbuffer&&Ze.renderbuffer.resize(Ke,Qe),Ze.width=Ke,Ze.height=Qe)}var dt=0,mt={};function Ct(){this.id=dt++,mt[this.id]=this,this.framebuffer=pt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ft(Ze){Ze.colorAttachments.forEach(tn),tn(Ze.depthAttachment),tn(Ze.stencilAttachment),tn(Ze.depthStencilAttachment)}function oe(Ze){var Ke=Ze.framebuffer;Yt(Ke,"must not double destroy framebuffer"),pt.deleteFramebuffer(Ke),Ze.framebuffer=null,cr.framebufferCount--,delete mt[Ze.id]}function Qt(Ze){var Ke;pt.bindFramebuffer(mi,Ze.framebuffer);var Qe=Ze.colorAttachments;for(Ke=0;Ke<Qe.length;++Ke)m(Z+Ke,Qe[Ke]);for(Ke=Qe.length;Ke<Ae.maxColorAttachments;++Ke)pt.framebufferTexture2D(mi,Z+Ke,Ts,null,0);pt.framebufferTexture2D(mi,Xt,Ts,null,0),pt.framebufferTexture2D(mi,vt,Ts,null,0),pt.framebufferTexture2D(mi,_t,Ts,null,0),m(vt,Ze.depthAttachment),m(_t,Ze.stencilAttachment),m(Xt,Ze.depthStencilAttachment);var Hr=pt.checkFramebufferStatus(mi);!pt.isContextLost()&&Hr!==ce&&Yt.raise("framebuffer configuration not supported, status = "+bi[Hr]),pt.bindFramebuffer(mi,br.next?br.next.framebuffer:null),br.cur=br.next,pt.getError()}function Me(Ze,Ke){var Qe=new Ct;cr.framebufferCount++;function Hr(en,In){var Mn;Yt(br.next!==Qe,"can not update framebuffer which is currently in use");var Un=0,ia=0,qn=!0,vi=!0,fa=null,Yi=!0,Ya="rgba",Da="uint8",Ri=1,Bi=null,bo=null,rs=null,$i=!1;if(typeof en=="number")Un=en|0,ia=In|0||Un;else if(!en)Un=ia=1;else{Yt.type(en,"object","invalid arguments for framebuffer");var pa=en;if("shape"in pa){var ns=pa.shape;Yt(Array.isArray(ns)&&ns.length>=2,"invalid shape for framebuffer"),Un=ns[0],ia=ns[1]}else"radius"in pa&&(Un=ia=pa.radius),"width"in pa&&(Un=pa.width),"height"in pa&&(ia=pa.height);("color"in pa||"colors"in pa)&&(fa=pa.color||pa.colors,Array.isArray(fa)&&Yt(fa.length===1||fe.webgl_draw_buffers,"multiple render targets not supported")),fa||("colorCount"in pa&&(Ri=pa.colorCount|0,Yt(Ri>0,"invalid color buffer count")),"colorTexture"in pa&&(Yi=!!pa.colorTexture,Ya="rgba4"),"colorType"in pa&&(Da=pa.colorType,Yi?(Yt(fe.oes_texture_float||!(Da==="float"||Da==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Yt(fe.oes_texture_half_float||!(Da==="half float"||Da==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Da==="half float"||Da==="float16"?(Yt(fe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Ya="rgba16f"):(Da==="float"||Da==="float32")&&(Yt(fe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Ya="rgba32f"),Yt.oneOf(Da,Kr,"invalid color type")),"colorFormat"in pa&&(Ya=pa.colorFormat,Xr.indexOf(Ya)>=0?Yi=!0:qr.indexOf(Ya)>=0?Yi=!1:Yi?Yt.oneOf(pa.colorFormat,Xr,"invalid color format for texture"):Yt.oneOf(pa.colorFormat,qr,"invalid color format for renderbuffer"))),("depthTexture"in pa||"depthStencilTexture"in pa)&&($i=!!(pa.depthTexture||pa.depthStencilTexture),Yt(!$i||fe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in pa&&(typeof pa.depth=="boolean"?qn=pa.depth:(Bi=pa.depth,vi=!1)),"stencil"in pa&&(typeof pa.stencil=="boolean"?vi=pa.stencil:(bo=pa.stencil,qn=!1)),"depthStencil"in pa&&(typeof pa.depthStencil=="boolean"?qn=vi=pa.depthStencil:(rs=pa.depthStencil,qn=!1,vi=!1))}var oi=null,Xn=null,Pa=null,ja=null;if(Array.isArray(fa))oi=fa.map(k);else if(fa)oi=[k(fa)];else for(oi=new Array(Ri),Mn=0;Mn<Ri;++Mn)oi[Mn]=z(Un,ia,Yi,Ya,Da);Yt(fe.webgl_draw_buffers||oi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Yt(oi.length<=Ae.maxColorAttachments,"too many color attachments, not supported"),Un=Un||oi[0].width,ia=ia||oi[0].height,Bi?Xn=k(Bi):qn&&!vi&&(Xn=z(Un,ia,$i,"depth","uint32")),bo?Pa=k(bo):vi&&!qn&&(Pa=z(Un,ia,!1,"stencil","uint8")),rs?ja=k(rs):!Bi&&!bo&&vi&&qn&&(ja=z(Un,ia,$i,"depth stencil","depth stencil")),Yt(!!Bi+!!bo+!!rs<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var no=null;for(Mn=0;Mn<oi.length;++Mn)if(d(oi[Mn],Un,ia),Yt(!oi[Mn]||oi[Mn].texture&&ha.indexOf(oi[Mn].texture._texture.format)>=0||oi[Mn].renderbuffer&&Pi.indexOf(oi[Mn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Mn+" is invalid"),oi[Mn]&&oi[Mn].texture){var du=Zn[oi[Mn].texture._texture.format]*Ma[oi[Mn].texture._texture.type];no===null?no=du:Yt(no===du,"all color attachments much have the same number of bits per pixel.")}return d(Xn,Un,ia),Yt(!Xn||Xn.texture&&Xn.texture._texture.format===Ea||Xn.renderbuffer&&Xn.renderbuffer._renderbuffer.format===Rn,"invalid depth attachment for framebuffer object"),d(Pa,Un,ia),Yt(!Pa||Pa.renderbuffer&&Pa.renderbuffer._renderbuffer.format===Ca,"invalid stencil attachment for framebuffer object"),d(ja,Un,ia),Yt(!ja||ja.texture&&ja.texture._texture.format===Ka||ja.renderbuffer&&ja.renderbuffer._renderbuffer.format===Ka,"invalid depth-stencil attachment for framebuffer object"),Ft(Qe),Qe.width=Un,Qe.height=ia,Qe.colorAttachments=oi,Qe.depthAttachment=Xn,Qe.stencilAttachment=Pa,Qe.depthStencilAttachment=ja,Hr.color=oi.map(rt),Hr.depth=rt(Xn),Hr.stencil=rt(Pa),Hr.depthStencil=rt(ja),Hr.width=Qe.width,Hr.height=Qe.height,Qt(Qe),Hr}function un(en,In){Yt(br.next!==Qe,"can not resize a framebuffer which is currently in use");var Mn=Math.max(en|0,1),Un=Math.max(In|0||Mn,1);if(Mn===Qe.width&&Un===Qe.height)return Hr;for(var ia=Qe.colorAttachments,qn=0;qn<ia.length;++qn)ot(ia[qn],Mn,Un);return ot(Qe.depthAttachment,Mn,Un),ot(Qe.stencilAttachment,Mn,Un),ot(Qe.depthStencilAttachment,Mn,Un),Qe.width=Hr.width=Mn,Qe.height=Hr.height=Un,Qt(Qe),Hr}return Hr(Ze,Ke),ut(Hr,{resize:un,_reglType:"framebuffer",_framebuffer:Qe,destroy:function(){oe(Qe),Ft(Qe)},use:function(en){br.setFBO({framebuffer:Hr},en)}})}function Ue(Ze){var Ke=Array(6);function Qe(un){var en;Yt(Ke.indexOf(br.next)<0,"can not update framebuffer which is currently in use");var In={color:null},Mn=0,Un=null,ia="rgba",qn="uint8",vi=1;if(typeof un=="number")Mn=un|0;else if(!un)Mn=1;else{Yt.type(un,"object","invalid arguments for framebuffer");var fa=un;if("shape"in fa){var Yi=fa.shape;Yt(Array.isArray(Yi)&&Yi.length>=2,"invalid shape for framebuffer"),Yt(Yi[0]===Yi[1],"cube framebuffer must be square"),Mn=Yi[0]}else"radius"in fa&&(Mn=fa.radius|0),"width"in fa?(Mn=fa.width|0,"height"in fa&&Yt(fa.height===Mn,"must be square")):"height"in fa&&(Mn=fa.height|0);("color"in fa||"colors"in fa)&&(Un=fa.color||fa.colors,Array.isArray(Un)&&Yt(Un.length===1||fe.webgl_draw_buffers,"multiple render targets not supported")),Un||("colorCount"in fa&&(vi=fa.colorCount|0,Yt(vi>0,"invalid color buffer count")),"colorType"in fa&&(Yt.oneOf(fa.colorType,Kr,"invalid color type"),qn=fa.colorType),"colorFormat"in fa&&(ia=fa.colorFormat,Yt.oneOf(fa.colorFormat,Xr,"invalid color format for texture"))),"depth"in fa&&(In.depth=fa.depth),"stencil"in fa&&(In.stencil=fa.stencil),"depthStencil"in fa&&(In.depthStencil=fa.depthStencil)}var Ya;if(Un)if(Array.isArray(Un))for(Ya=[],en=0;en<Un.length;++en)Ya[en]=Un[en];else Ya=[Un];else{Ya=Array(vi);var Da={radius:Mn,format:ia,type:qn};for(en=0;en<vi;++en)Ya[en]=lr.createCube(Da)}for(In.color=Array(Ya.length),en=0;en<Ya.length;++en){var Ri=Ya[en];Yt(typeof Ri=="function"&&Ri._reglType==="textureCube","invalid cube map"),Mn=Mn||Ri.width,Yt(Ri.width===Mn&&Ri.height===Mn,"invalid cube map shape"),In.color[en]={target:Su,data:Ya[en]}}for(en=0;en<6;++en){for(var Bi=0;Bi<Ya.length;++Bi)In.color[Bi].target=Su+en;en>0&&(In.depth=Ke[0].depth,In.stencil=Ke[0].stencil,In.depthStencil=Ke[0].depthStencil),Ke[en]?Ke[en](In):Ke[en]=Me(In)}return ut(Qe,{width:Mn,height:Mn,color:Ya})}function Hr(un){var en,In=un|0;if(Yt(In>0&&In<=Ae.maxCubeMapSize,"invalid radius for cube fbo"),In===Qe.width)return Qe;var Mn=Qe.color;for(en=0;en<Mn.length;++en)Mn[en].resize(In);for(en=0;en<6;++en)Ke[en].resize(In);return Qe.width=Qe.height=In,Qe}return Qe(Ze),ut(Qe,{faces:Ke,resize:Hr,_reglType:"framebufferCube",destroy:function(){Ke.forEach(function(un){un.destroy()})}})}function wr(){br.cur=null,br.next=null,br.dirty=!0,Ei(mt).forEach(function(Ze){Ze.framebuffer=pt.createFramebuffer(),Qt(Ze)})}return ut(br,{getFramebuffer:function(Ze){if(typeof Ze=="function"&&Ze._reglType==="framebuffer"){var Ke=Ze._framebuffer;if(Ke instanceof Ct)return Ke}return null},create:Me,createCube:Ue,clear:function(){Ei(mt).forEach(oe)},restore:wr})}var Yf=5126,Qo=34962;function Mu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Yf,this.offset=0,this.stride=0,this.divisor=0}function lf(pt,fe,Ae,lr,Lr){for(var cr=Ae.maxAttributes,br=new Array(cr),Xr=0;Xr<cr;++Xr)br[Xr]=new Mu;var qr=0,Kr={},Gr={Record:Mu,scope:{},state:br,currentVAO:null,targetVAO:null,restore:d()?mt:function(){},createVAO:Ct,getVAO:k,destroyBuffer:tn,setVAO:d()?z:rt,clear:d()?ot:function(){}};function tn(Ft){for(var oe=0;oe<br.length;++oe){var Qt=br[oe];Qt.buffer===Ft&&(pt.disableVertexAttribArray(oe),Qt.buffer=null)}}function d(){return fe.oes_vertex_array_object}function m(){return fe.angle_instanced_arrays}function k(Ft){return typeof Ft=="function"&&Ft._vao?Ft._vao:null}function z(Ft){if(Ft!==Gr.currentVAO){var oe=d();Ft?oe.bindVertexArrayOES(Ft.vao):oe.bindVertexArrayOES(null),Gr.currentVAO=Ft}}function rt(Ft){if(Ft!==Gr.currentVAO){if(Ft)Ft.bindAttrs();else for(var oe=m(),Qt=0;Qt<br.length;++Qt){var Me=br[Qt];Me.buffer?(pt.enableVertexAttribArray(Qt),pt.vertexAttribPointer(Qt,Me.size,Me.type,Me.normalized,Me.stride,Me.offfset),oe&&Me.divisor&&oe.vertexAttribDivisorANGLE(Qt,Me.divisor)):(pt.disableVertexAttribArray(Qt),pt.vertexAttrib4f(Qt,Me.x,Me.y,Me.z,Me.w))}Gr.currentVAO=Ft}}function ot(){Ei(Kr).forEach(function(Ft){Ft.destroy()})}function dt(){this.id=++qr,this.attributes=[];var Ft=d();Ft?this.vao=Ft.createVertexArrayOES():this.vao=null,Kr[this.id]=this,this.buffers=[]}dt.prototype.bindAttrs=function(){for(var Ft=m(),oe=this.attributes,Qt=0;Qt<oe.length;++Qt){var Me=oe[Qt];Me.buffer?(pt.enableVertexAttribArray(Qt),pt.bindBuffer(Qo,Me.buffer.buffer),pt.vertexAttribPointer(Qt,Me.size,Me.type,Me.normalized,Me.stride,Me.offset),Ft&&Me.divisor&&Ft.vertexAttribDivisorANGLE(Qt,Me.divisor)):(pt.disableVertexAttribArray(Qt),pt.vertexAttrib4f(Qt,Me.x,Me.y,Me.z,Me.w))}for(var Ue=oe.length;Ue<cr;++Ue)pt.disableVertexAttribArray(Ue)},dt.prototype.refresh=function(){var Ft=d();Ft&&(Ft.bindVertexArrayOES(this.vao),this.bindAttrs(),Gr.currentVAO=this)},dt.prototype.destroy=function(){if(this.vao){var Ft=d();this===Gr.currentVAO&&(Gr.currentVAO=null,Ft.bindVertexArrayOES(null)),Ft.deleteVertexArrayOES(this.vao),this.vao=null}Kr[this.id]&&(delete Kr[this.id],lr.vaoCount-=1)};function mt(){var Ft=d();Ft&&Ei(Kr).forEach(function(oe){oe.refresh()})}function Ct(Ft){var oe=new dt;lr.vaoCount+=1;function Qt(Me){Yt(Array.isArray(Me),"arguments to vertex array constructor must be an array"),Yt(Me.length<cr,"too many attributes"),Yt(Me.length>0,"must specify at least one attribute");var Ue={},wr=oe.attributes;wr.length=Me.length;for(var Ze=0;Ze<Me.length;++Ze){var Ke=Me[Ze],Qe=wr[Ze]=new Mu,Hr=Ke.data||Ke;if(Array.isArray(Hr)||G(Hr)||wi(Hr)){var un;oe.buffers[Ze]&&(un=oe.buffers[Ze],G(Hr)&&un._buffer.byteLength>=Hr.byteLength?un.subdata(Hr):(un.destroy(),oe.buffers[Ze]=null)),oe.buffers[Ze]||(un=oe.buffers[Ze]=Lr.create(Ke,Qo,!1,!0)),Qe.buffer=Lr.getBuffer(un),Qe.size=Qe.buffer.dimension|0,Qe.normalized=!1,Qe.type=Qe.buffer.dtype,Qe.offset=0,Qe.stride=0,Qe.divisor=0,Qe.state=1,Ue[Ze]=1}else Lr.getBuffer(Ke)?(Qe.buffer=Lr.getBuffer(Ke),Qe.size=Qe.buffer.dimension|0,Qe.normalized=!1,Qe.type=Qe.buffer.dtype,Qe.offset=0,Qe.stride=0,Qe.divisor=0,Qe.state=1):Lr.getBuffer(Ke.buffer)?(Qe.buffer=Lr.getBuffer(Ke.buffer),Qe.size=(+Ke.size||Qe.buffer.dimension)|0,Qe.normalized=!!Ke.normalized||!1,"type"in Ke?(Yt.parameter(Ke.type,fo,"invalid buffer type"),Qe.type=fo[Ke.type]):Qe.type=Qe.buffer.dtype,Qe.offset=(Ke.offset||0)|0,Qe.stride=(Ke.stride||0)|0,Qe.divisor=(Ke.divisor||0)|0,Qe.state=1,Yt(Qe.size>=1&&Qe.size<=4,"size must be between 1 and 4"),Yt(Qe.offset>=0,"invalid offset"),Yt(Qe.stride>=0&&Qe.stride<=255,"stride must be between 0 and 255"),Yt(Qe.divisor>=0,"divisor must be positive"),Yt(!Qe.divisor||!!fe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ke?(Yt(Ze>0,"first attribute must not be a constant"),Qe.x=+Ke.x||0,Qe.y=+Ke.y||0,Qe.z=+Ke.z||0,Qe.w=+Ke.w||0,Qe.state=2):Yt(!1,"invalid attribute spec for location "+Ze)}for(var en=0;en<oe.buffers.length;++en)!Ue[en]&&oe.buffers[en]&&(oe.buffers[en].destroy(),oe.buffers[en]=null);return oe.refresh(),Qt}return Qt.destroy=function(){for(var Me=0;Me<oe.buffers.length;++Me)oe.buffers[Me]&&oe.buffers[Me].destroy();oe.buffers.length=0,oe.destroy()},Qt._vao=oe,Qt._reglType="vao",Qt(Ft)}return Gr}var ou=35632,hf=35633,df=35718,Vu=35721;function Ac(pt,fe,Ae,lr){var Lr={},cr={};function br(z,rt,ot,dt){this.name=z,this.id=rt,this.location=ot,this.info=dt}function Xr(z,rt){for(var ot=0;ot<z.length;++ot)if(z[ot].id===rt.id){z[ot].location=rt.location;return}z.push(rt)}function qr(z,rt,ot){var dt=z===ou?Lr:cr,mt=dt[rt];if(!mt){var Ct=fe.str(rt);mt=pt.createShader(z),pt.shaderSource(mt,Ct),pt.compileShader(mt),Yt.shaderError(pt,mt,Ct,z,ot),dt[rt]=mt}return mt}var Kr={},Gr=[],tn=0;function d(z,rt){this.id=tn++,this.fragId=z,this.vertId=rt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,lr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function m(z,rt,ot){var dt,mt,Ct=qr(ou,z.fragId),Ft=qr(hf,z.vertId),oe=z.program=pt.createProgram();if(pt.attachShader(oe,Ct),pt.attachShader(oe,Ft),ot)for(dt=0;dt<ot.length;++dt){var Qt=ot[dt];pt.bindAttribLocation(oe,Qt[0],Qt[1])}pt.linkProgram(oe),Yt.linkError(pt,oe,fe.str(z.fragId),fe.str(z.vertId),rt);var Me=pt.getProgramParameter(oe,df);lr.profile&&(z.stats.uniformsCount=Me);var Ue=z.uniforms;for(dt=0;dt<Me;++dt)if(mt=pt.getActiveUniform(oe,dt),mt)if(mt.size>1)for(var wr=0;wr<mt.size;++wr){var Ze=mt.name.replace("[0]","["+wr+"]");Xr(Ue,new br(Ze,fe.id(Ze),pt.getUniformLocation(oe,Ze),mt))}else Xr(Ue,new br(mt.name,fe.id(mt.name),pt.getUniformLocation(oe,mt.name),mt));var Ke=pt.getProgramParameter(oe,Vu);lr.profile&&(z.stats.attributesCount=Ke);var Qe=z.attributes;for(dt=0;dt<Ke;++dt)mt=pt.getActiveAttrib(oe,dt),mt&&Xr(Qe,new br(mt.name,fe.id(mt.name),pt.getAttribLocation(oe,mt.name),mt))}lr.profile&&(Ae.getMaxUniformsCount=function(){var z=0;return Gr.forEach(function(rt){rt.stats.uniformsCount>z&&(z=rt.stats.uniformsCount)}),z},Ae.getMaxAttributesCount=function(){var z=0;return Gr.forEach(function(rt){rt.stats.attributesCount>z&&(z=rt.stats.attributesCount)}),z});function k(){Lr={},cr={};for(var z=0;z<Gr.length;++z)m(Gr[z],null,Gr[z].attributes.map(function(rt){return[rt.location,rt.name]}))}return{clear:function(){var z=pt.deleteShader.bind(pt);Ei(Lr).forEach(z),Lr={},Ei(cr).forEach(z),cr={},Gr.forEach(function(rt){pt.deleteProgram(rt.program)}),Gr.length=0,Kr={},Ae.shaderCount=0},program:function(z,rt,ot,dt){Yt.command(z>=0,"missing vertex shader",ot),Yt.command(rt>=0,"missing fragment shader",ot);var mt=Kr[rt];mt||(mt=Kr[rt]={});var Ct=mt[z];if(Ct&&(Ct.refCount++,!dt))return Ct;var Ft=new d(rt,z);return Ae.shaderCount++,m(Ft,ot,dt),Ct||(mt[z]=Ft),Gr.push(Ft),ut(Ft,{destroy:function(){if(Ft.refCount--,Ft.refCount<=0){pt.deleteProgram(Ft.program);var oe=Gr.indexOf(Ft);Gr.splice(oe,1),Ae.shaderCount--}mt[Ft.vertId].refCount<=0&&(pt.deleteShader(cr[Ft.vertId]),delete cr[Ft.vertId],delete Kr[Ft.fragId][Ft.vertId]),Object.keys(Kr[Ft.fragId]).length||(pt.deleteShader(Lr[Ft.fragId]),delete Lr[Ft.fragId],delete Kr[Ft.fragId])}})},restore:k,shader:qr,frag:-1,vert:-1}}var Tc=6408,su=5121,Xs=3333,_u=5126;function Ic(pt,fe,Ae,lr,Lr,cr,br){function Xr(Gr){var tn;fe.next===null?(Yt(Lr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),tn=su):(Yt(fe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),tn=fe.next.colorAttachments[0].texture._texture.type,cr.oes_texture_float?(Yt(tn===su||tn===_u,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),tn===_u&&Yt(br.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Yt(tn===su,"Reading from a framebuffer is only allowed for the type 'uint8'"));var d=0,m=0,k=lr.framebufferWidth,z=lr.framebufferHeight,rt=null;G(Gr)?rt=Gr:Gr&&(Yt.type(Gr,"object","invalid arguments to regl.read()"),d=Gr.x|0,m=Gr.y|0,Yt(d>=0&&d<lr.framebufferWidth,"invalid x offset for regl.read"),Yt(m>=0&&m<lr.framebufferHeight,"invalid y offset for regl.read"),k=(Gr.width||lr.framebufferWidth-d)|0,z=(Gr.height||lr.framebufferHeight-m)|0,rt=Gr.data||null),rt&&(tn===su?Yt(rt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):tn===_u&&Yt(rt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Yt(k>0&&k+d<=lr.framebufferWidth,"invalid width for read pixels"),Yt(z>0&&z+m<=lr.framebufferHeight,"invalid height for read pixels"),Ae();var ot=k*z*4;return rt||(tn===su?rt=new Uint8Array(ot):tn===_u&&(rt=rt||new Float32Array(ot))),Yt.isTypedArray(rt,"data buffer for regl.read() must be a typedarray"),Yt(rt.byteLength>=ot,"data buffer for regl.read() too small"),pt.pixelStorei(Xs,4),pt.readPixels(d,m,k,z,Tc,tn,rt),rt}function qr(Gr){var tn;return fe.setFBO({framebuffer:Gr.framebuffer},function(){tn=Xr(Gr)}),tn}function Kr(Gr){return!Gr||!("framebuffer"in Gr)?Xr(Gr):qr(Gr)}return Kr}function uu(pt){return Array.prototype.slice.call(pt)}function Jo(pt){return uu(pt).join("")}function Ys(){var pt=0,fe=[],Ae=[];function lr(tn){for(var d=0;d<Ae.length;++d)if(Ae[d]===tn)return fe[d];var m="g"+pt++;return fe.push(m),Ae.push(tn),m}function Lr(){var tn=[];function d(){tn.push.apply(tn,uu(arguments))}var m=[];function k(){var z="v"+pt++;return m.push(z),arguments.length>0&&(tn.push(z,"="),tn.push.apply(tn,uu(arguments)),tn.push(";")),z}return ut(d,{def:k,toString:function(){return Jo([m.length>0?"var "+m.join(",")+";":"",Jo(tn)])}})}function cr(){var tn=Lr(),d=Lr(),m=tn.toString,k=d.toString;function z(rt,ot){d(rt,ot,"=",tn.def(rt,ot),";")}return ut(function(){tn.apply(tn,uu(arguments))},{def:tn.def,entry:tn,exit:d,save:z,set:function(rt,ot,dt){z(rt,ot),tn(rt,ot,"=",dt,";")},toString:function(){return m()+k()}})}function br(){var tn=Jo(arguments),d=cr(),m=cr(),k=d.toString,z=m.toString;return ut(d,{then:function(){return d.apply(d,uu(arguments)),this},else:function(){return m.apply(m,uu(arguments)),this},toString:function(){var rt=z();return rt&&(rt="else{"+rt+"}"),Jo(["if(",tn,"){",k(),"}",rt])}})}var Xr=Lr(),qr={};function Kr(tn,d){var m=[];function k(){var mt="a"+m.length;return m.push(mt),mt}d=d||0;for(var z=0;z<d;++z)k();var rt=cr(),ot=rt.toString,dt=qr[tn]=ut(rt,{arg:k,toString:function(){return Jo(["function(",m.join(),"){",ot(),"}"])}});return dt}function Gr(){var tn=['"use strict";',Xr,"return {"];Object.keys(qr).forEach(function(k){tn.push('"',k,'":',qr[k].toString(),",")}),tn.push("}");var d=Jo(tn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),m=Function.apply(null,fe.concat(d));return m.apply(null,Ae)}return{global:Xr,link:lr,block:Lr,proc:Kr,scope:cr,cond:br,compile:Gr}}var vf="xyzw".split(""),Gl=5121,Hu=1,il=2,ol=0,Lc=1,Wf=2,sl=3,Nc=4,zl=5,Ul=6,Xl="dither",Yl="blend.enable",Wl="blend.color",ul="blend.equation",pf="blend.func",Vl="depth.enable",gf="depth.func",Hl="depth.range",ju="depth.mask",fl="colorMask",De="cull.enable",cl="cull.face",Ws="frontFace",yf="lineWidth",kc="polygonOffset.enable",ll="polygonOffset.offset",hl="sample.alpha",jl="sample.enable",mf="sample.coverage",Oc="stencil.enable",Zl="stencil.mask",Dc="stencil.func",mo="stencil.opFront",Zu="stencil.opBack",dl="scissor.enable",Vf="scissor.box",Qs="viewport",bf="profile",qu="framebuffer",fu="vert",xf="frag",Cu="elements",wf="primitive",Au="count",Pc="offset",Rc="instances",Hf="vao",Bc="Width",Fc="Height",Ef=qu+Bc,Bs=qu+Fc,Gc=Qs+Bc,ql=Qs+Fc,jf="drawingBuffer",vl=jf+Bc,zc=jf+Fc,pl=[pf,ul,Dc,mo,Zu,mf,Qs,Vf,ll],ts=34962,gl=34963,yl=35632,$l=35633,Fo=3553,Zf=34067,Sf=2884,hh=3042,qf=3024,Oo=2960,Kl=2929,ml=3089,Ql=32823,cu=32926,Uc=32928,Mf=5126,$f=35664,_f=35665,Kf=35666,Js=5124,Qf=35667,Cf=35668,Af=35669,Jf=35670,Tu=35671,tc=35672,Xc=35673,ec=35674,rc=35675,Tf=35676,nc=35678,$u=35680,bl=4,ac=1028,Iu=1029,xl=2304,Yc=2305,Jl=32775,th=32776,eh=519,lu=7680,wl=0,Wc=1,ic=32774,Gh=513,El=36160,Sl=36064,Go={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},rh=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Lu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ml={frag:yl,vert:$l},_l={cw:xl,ccw:Yc};function Vc(pt){return Array.isArray(pt)||G(pt)||wi(pt)}function Cl(pt){return pt.sort(function(fe,Ae){return fe===Qs?-1:Ae===Qs?1:fe<Ae?-1:1})}function fs(pt,fe,Ae,lr){this.thisDep=pt,this.contextDep=fe,this.propDep=Ae,this.append=lr}function Nu(pt){return pt&&!(pt.thisDep||pt.contextDep||pt.propDep)}function ro(pt){return new fs(!1,!1,!1,pt)}function es(pt,fe){var Ae=pt.type;if(Ae===ol){var lr=pt.data.length;return new fs(!0,lr>=1,lr>=2,fe)}else if(Ae===Nc){var Lr=pt.data;return new fs(Lr.thisDep,Lr.contextDep,Lr.propDep,fe)}else{if(Ae===zl)return new fs(!1,!1,!1,fe);if(Ae===Ul){for(var cr=!1,br=!1,Xr=!1,qr=0;qr<pt.data.length;++qr){var Kr=pt.data[qr];if(Kr.type===Lc)Xr=!0;else if(Kr.type===Wf)br=!0;else if(Kr.type===sl)cr=!0;else if(Kr.type===ol){cr=!0;var Gr=Kr.data;Gr>=1&&(br=!0),Gr>=2&&(Xr=!0)}else Kr.type===Nc&&(cr=cr||Kr.data.thisDep,br=br||Kr.data.contextDep,Xr=Xr||Kr.data.propDep)}return new fs(cr,br,Xr,fe)}else return new fs(Ae===sl,Ae===Wf,Ae===Lc,fe)}}var Hc=new fs(!1,!1,!1,function(){});function dh(pt,fe,Ae,lr,Lr,cr,br,Xr,qr,Kr,Gr,tn,d,m,k){var z=Kr.Record,rt={add:32774,subtract:32778,"reverse subtract":32779};Ae.ext_blend_minmax&&(rt.min=Jl,rt.max=th);var ot=Ae.angle_instanced_arrays,dt=Ae.webgl_draw_buffers,mt={dirty:!0,profile:k.profile},Ct={},Ft=[],oe={},Qt={};function Me(ge){return ge.replace(".","_")}function Ue(ge,te,Pe){var tr=Me(ge);Ft.push(ge),Ct[tr]=mt[tr]=!!Pe,oe[tr]=te}function wr(ge,te,Pe){var tr=Me(ge);Ft.push(ge),Array.isArray(Pe)?(mt[tr]=Pe.slice(),Ct[tr]=Pe.slice()):mt[tr]=Ct[tr]=Pe,Qt[tr]=te}Ue(Xl,qf),Ue(Yl,hh),wr(Wl,"blendColor",[0,0,0,0]),wr(ul,"blendEquationSeparate",[ic,ic]),wr(pf,"blendFuncSeparate",[Wc,wl,Wc,wl]),Ue(Vl,Kl,!0),wr(gf,"depthFunc",Gh),wr(Hl,"depthRange",[0,1]),wr(ju,"depthMask",!0),wr(fl,fl,[!0,!0,!0,!0]),Ue(De,Sf),wr(cl,"cullFace",Iu),wr(Ws,Ws,Yc),wr(yf,yf,1),Ue(kc,Ql),wr(ll,"polygonOffset",[0,0]),Ue(hl,cu),Ue(jl,Uc),wr(mf,"sampleCoverage",[1,!1]),Ue(Oc,Oo),wr(Zl,"stencilMask",-1),wr(Dc,"stencilFunc",[eh,0,-1]),wr(mo,"stencilOpSeparate",[ac,lu,lu,lu]),wr(Zu,"stencilOpSeparate",[Iu,lu,lu,lu]),Ue(dl,ml),wr(Vf,"scissor",[0,0,pt.drawingBufferWidth,pt.drawingBufferHeight]),wr(Qs,Qs,[0,0,pt.drawingBufferWidth,pt.drawingBufferHeight]);var Ze={gl:pt,context:d,strings:fe,next:Ct,current:mt,draw:tn,elements:cr,buffer:Lr,shader:Gr,attributes:Kr.state,vao:Kr,uniforms:qr,framebuffer:Xr,extensions:Ae,timer:m,isBufferArgs:Vc},Ke={primTypes:lo,compareFuncs:Lu,blendFuncs:Go,blendEquations:rt,stencilOps:hu,glTypes:fo,orientationType:_l};Yt.optional(function(){Ze.isArrayLike=La}),dt&&(Ke.backBuffer=[Iu],Ke.drawBuffer=Fn(lr.maxDrawbuffers,function(ge){return ge===0?[0]:Fn(ge,function(te){return Sl+te})}));var Qe=0;function Hr(){var ge=Ys(),te=ge.link,Pe=ge.global;ge.id=Qe++,ge.batchId="0";var tr=te(Ze),nr=ge.shared={props:"a0"};Object.keys(Ze).forEach(function(Oe){nr[Oe]=Pe.def(tr,".",Oe)}),Yt.optional(function(){ge.CHECK=te(Yt),ge.commandStr=Yt.guessCommand(),ge.command=te(ge.commandStr),ge.assert=function(Oe,le,qe){Oe("if(!(",le,"))",this.CHECK,".commandRaise(",te(qe),",",this.command,");")},Ke.invalidBlendCombinations=rh});var Re=ge.next={},ke=ge.current={};Object.keys(Qt).forEach(function(Oe){Array.isArray(mt[Oe])&&(Re[Oe]=Pe.def(nr.next,".",Oe),ke[Oe]=Pe.def(nr.current,".",Oe))});var Xe=ge.constants={};Object.keys(Ke).forEach(function(Oe){Xe[Oe]=Pe.def(JSON.stringify(Ke[Oe]))}),ge.invoke=function(Oe,le){switch(le.type){case ol:var qe=["this",nr.context,nr.props,ge.batchId];return Oe.def(te(le.data),".call(",qe.slice(0,Math.max(le.data.length+1,4)),")");case Lc:return Oe.def(nr.props,le.data);case Wf:return Oe.def(nr.context,le.data);case sl:return Oe.def("this",le.data);case Nc:return le.data.append(ge,Oe),le.data.ref;case zl:return le.data.toString();case Ul:return le.data.map(function(or){return ge.invoke(Oe,or)})}},ge.attribCache={};var ye={};return ge.scopeAttrib=function(Oe){var le=fe.id(Oe);if(le in ye)return ye[le];var qe=Kr.scope[le];qe||(qe=Kr.scope[le]=new z);var or=ye[le]=te(qe);return or},ge}function un(ge){var te=ge.static,Pe=ge.dynamic,tr;if(bf in te){var nr=!!te[bf];tr=ro(function(ke,Xe){return nr}),tr.enable=nr}else if(bf in Pe){var Re=Pe[bf];tr=es(Re,function(ke,Xe){return ke.invoke(Xe,Re)})}return tr}function en(ge,te){var Pe=ge.static,tr=ge.dynamic;if(qu in Pe){var nr=Pe[qu];return nr?(nr=Xr.getFramebuffer(nr),Yt.command(nr,"invalid framebuffer object"),ro(function(ke,Xe){var ye=ke.link(nr),Oe=ke.shared;Xe.set(Oe.framebuffer,".next",ye);var le=Oe.context;return Xe.set(le,"."+Ef,ye+".width"),Xe.set(le,"."+Bs,ye+".height"),ye})):ro(function(ke,Xe){var ye=ke.shared;Xe.set(ye.framebuffer,".next","null");var Oe=ye.context;return Xe.set(Oe,"."+Ef,Oe+"."+vl),Xe.set(Oe,"."+Bs,Oe+"."+zc),"null"})}else if(qu in tr){var Re=tr[qu];return es(Re,function(ke,Xe){var ye=ke.invoke(Xe,Re),Oe=ke.shared,le=Oe.framebuffer,qe=Xe.def(le,".getFramebuffer(",ye,")");Yt.optional(function(){ke.assert(Xe,"!"+ye+"||"+qe,"invalid framebuffer object")}),Xe.set(le,".next",qe);var or=Oe.context;return Xe.set(or,"."+Ef,qe+"?"+qe+".width:"+or+"."+vl),Xe.set(or,"."+Bs,qe+"?"+qe+".height:"+or+"."+zc),qe})}else return null}function In(ge,te,Pe){var tr=ge.static,nr=ge.dynamic;function Re(ye){if(ye in tr){var Oe=tr[ye];Yt.commandType(Oe,"object","invalid "+ye,Pe.commandStr);var le=!0,qe=Oe.x|0,or=Oe.y|0,Ir,kr;return"width"in Oe?(Ir=Oe.width|0,Yt.command(Ir>=0,"invalid "+ye,Pe.commandStr)):le=!1,"height"in Oe?(kr=Oe.height|0,Yt.command(kr>=0,"invalid "+ye,Pe.commandStr)):le=!1,new fs(!le&&te&&te.thisDep,!le&&te&&te.contextDep,!le&&te&&te.propDep,function(Nn,ga){var _n=Nn.shared.context,jn=Ir;"width"in Oe||(jn=ga.def(_n,".",Ef,"-",qe));var oa=kr;return"height"in Oe||(oa=ga.def(_n,".",Bs,"-",or)),[qe,or,jn,oa]})}else if(ye in nr){var Er=nr[ye],Qr=es(Er,function(Nn,ga){var _n=Nn.invoke(ga,Er);Yt.optional(function(){Nn.assert(ga,_n+"&&typeof "+_n+'==="object"',"invalid "+ye)});var jn=Nn.shared.context,oa=ga.def(_n,".x|0"),Za=ga.def(_n,".y|0"),Ki=ga.def('"width" in ',_n,"?",_n,".width|0:","(",jn,".",Ef,"-",oa,")"),zo=ga.def('"height" in ',_n,"?",_n,".height|0:","(",jn,".",Bs,"-",Za,")");return Yt.optional(function(){Nn.assert(ga,Ki+">=0&&"+zo+">=0","invalid "+ye)}),[oa,Za,Ki,zo]});return te&&(Qr.thisDep=Qr.thisDep||te.thisDep,Qr.contextDep=Qr.contextDep||te.contextDep,Qr.propDep=Qr.propDep||te.propDep),Qr}else return te?new fs(te.thisDep,te.contextDep,te.propDep,function(Nn,ga){var _n=Nn.shared.context;return[0,0,ga.def(_n,".",Ef),ga.def(_n,".",Bs)]}):null}var ke=Re(Qs);if(ke){var Xe=ke;ke=new fs(ke.thisDep,ke.contextDep,ke.propDep,function(ye,Oe){var le=Xe.append(ye,Oe),qe=ye.shared.context;return Oe.set(qe,"."+Gc,le[2]),Oe.set(qe,"."+ql,le[3]),le})}return{viewport:ke,scissor_box:Re(Vf)}}function Mn(ge,te){var Pe=ge.static,tr=typeof Pe[xf]=="string"&&typeof Pe[fu]=="string";if(tr){if(Object.keys(te.dynamic).length>0)return null;var nr=te.static,Re=Object.keys(nr);if(Re.length>0&&typeof nr[Re[0]]=="number"){for(var ke=[],Xe=0;Xe<Re.length;++Xe)Yt(typeof nr[Re[Xe]]=="number","must specify all vertex attribute locations when using vaos"),ke.push([nr[Re[Xe]]|0,Re[Xe]]);return ke}}return null}function Un(ge,te,Pe){var tr=ge.static,nr=ge.dynamic;function Re(le){if(le in tr){var qe=fe.id(tr[le]);Yt.optional(function(){Gr.shader(Ml[le],qe,Yt.guessCommand())});var or=ro(function(){return qe});return or.id=qe,or}else if(le in nr){var Ir=nr[le];return es(Ir,function(kr,Er){var Qr=kr.invoke(Er,Ir),Nn=Er.def(kr.shared.strings,".id(",Qr,")");return Yt.optional(function(){Er(kr.shared.shader,".shader(",Ml[le],",",Nn,",",kr.command,");")}),Nn})}return null}var ke=Re(xf),Xe=Re(fu),ye=null,Oe;return Nu(ke)&&Nu(Xe)?(ye=Gr.program(Xe.id,ke.id,null,Pe),Oe=ro(function(le,qe){return le.link(ye)})):Oe=new fs(ke&&ke.thisDep||Xe&&Xe.thisDep,ke&&ke.contextDep||Xe&&Xe.contextDep,ke&&ke.propDep||Xe&&Xe.propDep,function(le,qe){var or=le.shared.shader,Ir;ke?Ir=ke.append(le,qe):Ir=qe.def(or,".",xf);var kr;Xe?kr=Xe.append(le,qe):kr=qe.def(or,".",fu);var Er=or+".program("+kr+","+Ir;return Yt.optional(function(){Er+=","+le.command}),qe.def(Er+")")}),{frag:ke,vert:Xe,progVar:Oe,program:ye}}function ia(ge,te){var Pe=ge.static,tr=ge.dynamic;function nr(){if(Cu in Pe){var le=Pe[Cu];Vc(le)?le=cr.getElements(cr.create(le,!0)):le&&(le=cr.getElements(le),Yt.command(le,"invalid elements",te.commandStr));var qe=ro(function(Ir,kr){if(le){var Er=Ir.link(le);return Ir.ELEMENTS=Er,Er}return Ir.ELEMENTS=null,null});return qe.value=le,qe}else if(Cu in tr){var or=tr[Cu];return es(or,function(Ir,kr){var Er=Ir.shared,Qr=Er.isBufferArgs,Nn=Er.elements,ga=Ir.invoke(kr,or),_n=kr.def("null"),jn=kr.def(Qr,"(",ga,")"),oa=Ir.cond(jn).then(_n,"=",Nn,".createStream(",ga,");").else(_n,"=",Nn,".getElements(",ga,");");return Yt.optional(function(){Ir.assert(oa.else,"!"+ga+"||"+_n,"invalid elements")}),kr.entry(oa),kr.exit(Ir.cond(jn).then(Nn,".destroyStream(",_n,");")),Ir.ELEMENTS=_n,_n})}return null}var Re=nr();function ke(){if(wf in Pe){var le=Pe[wf];return Yt.commandParameter(le,lo,"invalid primitve",te.commandStr),ro(function(or,Ir){return lo[le]})}else if(wf in tr){var qe=tr[wf];return es(qe,function(or,Ir){var kr=or.constants.primTypes,Er=or.invoke(Ir,qe);return Yt.optional(function(){or.assert(Ir,Er+" in "+kr,"invalid primitive, must be one of "+Object.keys(lo))}),Ir.def(kr,"[",Er,"]")})}else if(Re)return Nu(Re)?Re.value?ro(function(or,Ir){return Ir.def(or.ELEMENTS,".primType")}):ro(function(){return bl}):new fs(Re.thisDep,Re.contextDep,Re.propDep,function(or,Ir){var kr=or.ELEMENTS;return Ir.def(kr,"?",kr,".primType:",bl)});return null}function Xe(le,qe){if(le in Pe){var or=Pe[le]|0;return Yt.command(!qe||or>=0,"invalid "+le,te.commandStr),ro(function(kr,Er){return qe&&(kr.OFFSET=or),or})}else if(le in tr){var Ir=tr[le];return es(Ir,function(kr,Er){var Qr=kr.invoke(Er,Ir);return qe&&(kr.OFFSET=Qr,Yt.optional(function(){kr.assert(Er,Qr+">=0","invalid "+le)})),Qr})}else if(qe&&Re)return ro(function(kr,Er){return kr.OFFSET="0",0});return null}var ye=Xe(Pc,!0);function Oe(){if(Au in Pe){var le=Pe[Au]|0;return Yt.command(typeof le=="number"&&le>=0,"invalid vertex count",te.commandStr),ro(function(){return le})}else if(Au in tr){var qe=tr[Au];return es(qe,function(kr,Er){var Qr=kr.invoke(Er,qe);return Yt.optional(function(){kr.assert(Er,"typeof "+Qr+'==="number"&&'+Qr+">=0&&"+Qr+"===("+Qr+"|0)","invalid vertex count")}),Qr})}else if(Re)if(Nu(Re)){if(Re)return ye?new fs(ye.thisDep,ye.contextDep,ye.propDep,function(kr,Er){var Qr=Er.def(kr.ELEMENTS,".vertCount-",kr.OFFSET);return Yt.optional(function(){kr.assert(Er,Qr+">=0","invalid vertex offset/element buffer too small")}),Qr}):ro(function(kr,Er){return Er.def(kr.ELEMENTS,".vertCount")});var or=ro(function(){return-1});return Yt.optional(function(){or.MISSING=!0}),or}else{var Ir=new fs(Re.thisDep||ye.thisDep,Re.contextDep||ye.contextDep,Re.propDep||ye.propDep,function(kr,Er){var Qr=kr.ELEMENTS;return kr.OFFSET?Er.def(Qr,"?",Qr,".vertCount-",kr.OFFSET,":-1"):Er.def(Qr,"?",Qr,".vertCount:-1")});return Yt.optional(function(){Ir.DYNAMIC=!0}),Ir}return null}return{elements:Re,primitive:ke(),count:Oe(),instances:Xe(Rc,!1),offset:ye}}function qn(ge,te){var Pe=ge.static,tr=ge.dynamic,nr={};return Ft.forEach(function(Re){var ke=Me(Re);function Xe(ye,Oe){if(Re in Pe){var le=ye(Pe[Re]);nr[ke]=ro(function(){return le})}else if(Re in tr){var qe=tr[Re];nr[ke]=es(qe,function(or,Ir){return Oe(or,Ir,or.invoke(Ir,qe))})}}switch(Re){case De:case Yl:case Xl:case Oc:case Vl:case dl:case kc:case hl:case jl:case ju:return Xe(function(ye){return Yt.commandType(ye,"boolean",Re,te.commandStr),ye},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,"typeof "+le+'==="boolean"',"invalid flag "+Re,ye.commandStr)}),le});case gf:return Xe(function(ye){return Yt.commandParameter(ye,Lu,"invalid "+Re,te.commandStr),Lu[ye]},function(ye,Oe,le){var qe=ye.constants.compareFuncs;return Yt.optional(function(){ye.assert(Oe,le+" in "+qe,"invalid "+Re+", must be one of "+Object.keys(Lu))}),Oe.def(qe,"[",le,"]")});case Hl:return Xe(function(ye){return Yt.command(La(ye)&&ye.length===2&&typeof ye[0]=="number"&&typeof ye[1]=="number"&&ye[0]<=ye[1],"depth range is 2d array",te.commandStr),ye},function(ye,Oe,le){Yt.optional(function(){ye.assert(Oe,ye.shared.isArrayLike+"("+le+")&&"+le+".length===2&&typeof "+le+'[0]==="number"&&typeof '+le+'[1]==="number"&&'+le+"[0]<="+le+"[1]","depth range must be a 2d array")});var qe=Oe.def("+",le,"[0]"),or=Oe.def("+",le,"[1]");return[qe,or]});case pf:return Xe(function(ye){Yt.commandType(ye,"object","blend.func",te.commandStr);var Oe="srcRGB"in ye?ye.srcRGB:ye.src,le="srcAlpha"in ye?ye.srcAlpha:ye.src,qe="dstRGB"in ye?ye.dstRGB:ye.dst,or="dstAlpha"in ye?ye.dstAlpha:ye.dst;return Yt.commandParameter(Oe,Go,ke+".srcRGB",te.commandStr),Yt.commandParameter(le,Go,ke+".srcAlpha",te.commandStr),Yt.commandParameter(qe,Go,ke+".dstRGB",te.commandStr),Yt.commandParameter(or,Go,ke+".dstAlpha",te.commandStr),Yt.command(rh.indexOf(Oe+", "+qe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Oe+", "+qe+")",te.commandStr),[Go[Oe],Go[qe],Go[le],Go[or]]},function(ye,Oe,le){var qe=ye.constants.blendFuncs;Yt.optional(function(){ye.assert(Oe,le+"&&typeof "+le+'==="object"',"invalid blend func, must be an object")});function or(_n,jn){var oa=Oe.def('"',_n,jn,'" in ',le,"?",le,".",_n,jn,":",le,".",_n);return Yt.optional(function(){ye.assert(Oe,oa+" in "+qe,"invalid "+Re+"."+_n+jn+", must be one of "+Object.keys(Go))}),oa}var Ir=or("src","RGB"),kr=or("dst","RGB");Yt.optional(function(){var _n=ye.constants.invalidBlendCombinations;ye.assert(Oe,_n+".indexOf("+Ir+'+", "+'+kr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Er=Oe.def(qe,"[",Ir,"]"),Qr=Oe.def(qe,"[",or("src","Alpha"),"]"),Nn=Oe.def(qe,"[",kr,"]"),ga=Oe.def(qe,"[",or("dst","Alpha"),"]");return[Er,Nn,Qr,ga]});case ul:return Xe(function(ye){if(typeof ye=="string")return Yt.commandParameter(ye,rt,"invalid "+Re,te.commandStr),[rt[ye],rt[ye]];if(typeof ye=="object")return Yt.commandParameter(ye.rgb,rt,Re+".rgb",te.commandStr),Yt.commandParameter(ye.alpha,rt,Re+".alpha",te.commandStr),[rt[ye.rgb],rt[ye.alpha]];Yt.commandRaise("invalid blend.equation",te.commandStr)},function(ye,Oe,le){var qe=ye.constants.blendEquations,or=Oe.def(),Ir=Oe.def(),kr=ye.cond("typeof ",le,'==="string"');return Yt.optional(function(){function Er(Qr,Nn,ga){ye.assert(Qr,ga+" in "+qe,"invalid "+Nn+", must be one of "+Object.keys(rt))}Er(kr.then,Re,le),ye.assert(kr.else,le+"&&typeof "+le+'==="object"',"invalid "+Re),Er(kr.else,Re+".rgb",le+".rgb"),Er(kr.else,Re+".alpha",le+".alpha")}),kr.then(or,"=",Ir,"=",qe,"[",le,"];"),kr.else(or,"=",qe,"[",le,".rgb];",Ir,"=",qe,"[",le,".alpha];"),Oe(kr),[or,Ir]});case Wl:return Xe(function(ye){return Yt.command(La(ye)&&ye.length===4,"blend.color must be a 4d array",te.commandStr),Fn(4,function(Oe){return+ye[Oe]})},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,ye.shared.isArrayLike+"("+le+")&&"+le+".length===4","blend.color must be a 4d array")}),Fn(4,function(qe){return Oe.def("+",le,"[",qe,"]")})});case Zl:return Xe(function(ye){return Yt.commandType(ye,"number",ke,te.commandStr),ye|0},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,"typeof "+le+'==="number"',"invalid stencil.mask")}),Oe.def(le,"|0")});case Dc:return Xe(function(ye){Yt.commandType(ye,"object",ke,te.commandStr);var Oe=ye.cmp||"keep",le=ye.ref||0,qe="mask"in ye?ye.mask:-1;return Yt.commandParameter(Oe,Lu,Re+".cmp",te.commandStr),Yt.commandType(le,"number",Re+".ref",te.commandStr),Yt.commandType(qe,"number",Re+".mask",te.commandStr),[Lu[Oe],le,qe]},function(ye,Oe,le){var qe=ye.constants.compareFuncs;Yt.optional(function(){function Er(){ye.assert(Oe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Er(le+"&&typeof ",le,'==="object"'),Er('!("cmp" in ',le,")||(",le,".cmp in ",qe,")")});var or=Oe.def('"cmp" in ',le,"?",qe,"[",le,".cmp]",":",lu),Ir=Oe.def(le,".ref|0"),kr=Oe.def('"mask" in ',le,"?",le,".mask|0:-1");return[or,Ir,kr]});case mo:case Zu:return Xe(function(ye){Yt.commandType(ye,"object",ke,te.commandStr);var Oe=ye.fail||"keep",le=ye.zfail||"keep",qe=ye.zpass||"keep";return Yt.commandParameter(Oe,hu,Re+".fail",te.commandStr),Yt.commandParameter(le,hu,Re+".zfail",te.commandStr),Yt.commandParameter(qe,hu,Re+".zpass",te.commandStr),[Re===Zu?Iu:ac,hu[Oe],hu[le],hu[qe]]},function(ye,Oe,le){var qe=ye.constants.stencilOps;Yt.optional(function(){ye.assert(Oe,le+"&&typeof "+le+'==="object"',"invalid "+Re)});function or(Ir){return Yt.optional(function(){ye.assert(Oe,'!("'+Ir+'" in '+le+")||("+le+"."+Ir+" in "+qe+")","invalid "+Re+"."+Ir+", must be one of "+Object.keys(hu))}),Oe.def('"',Ir,'" in ',le,"?",qe,"[",le,".",Ir,"]:",lu)}return[Re===Zu?Iu:ac,or("fail"),or("zfail"),or("zpass")]});case ll:return Xe(function(ye){Yt.commandType(ye,"object",ke,te.commandStr);var Oe=ye.factor|0,le=ye.units|0;return Yt.commandType(Oe,"number",ke+".factor",te.commandStr),Yt.commandType(le,"number",ke+".units",te.commandStr),[Oe,le]},function(ye,Oe,le){Yt.optional(function(){ye.assert(Oe,le+"&&typeof "+le+'==="object"',"invalid "+Re)});var qe=Oe.def(le,".factor|0"),or=Oe.def(le,".units|0");return[qe,or]});case cl:return Xe(function(ye){var Oe=0;return ye==="front"?Oe=ac:ye==="back"&&(Oe=Iu),Yt.command(!!Oe,ke,te.commandStr),Oe},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,le+'==="front"||'+le+'==="back"',"invalid cull.face")}),Oe.def(le,'==="front"?',ac,":",Iu)});case yf:return Xe(function(ye){return Yt.command(typeof ye=="number"&&ye>=lr.lineWidthDims[0]&&ye<=lr.lineWidthDims[1],"invalid line width, must be a positive number between "+lr.lineWidthDims[0]+" and "+lr.lineWidthDims[1],te.commandStr),ye},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,"typeof "+le+'==="number"&&'+le+">="+lr.lineWidthDims[0]+"&&"+le+"<="+lr.lineWidthDims[1],"invalid line width")}),le});case Ws:return Xe(function(ye){return Yt.commandParameter(ye,_l,ke,te.commandStr),_l[ye]},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,le+'==="cw"||'+le+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Oe.def(le+'==="cw"?'+xl+":"+Yc)});case fl:return Xe(function(ye){return Yt.command(La(ye)&&ye.length===4,"color.mask must be length 4 array",te.commandStr),ye.map(function(Oe){return!!Oe})},function(ye,Oe,le){return Yt.optional(function(){ye.assert(Oe,ye.shared.isArrayLike+"("+le+")&&"+le+".length===4","invalid color.mask")}),Fn(4,function(qe){return"!!"+le+"["+qe+"]"})});case mf:return Xe(function(ye){Yt.command(typeof ye=="object"&&ye,ke,te.commandStr);var Oe="value"in ye?ye.value:1,le=!!ye.invert;return Yt.command(typeof Oe=="number"&&Oe>=0&&Oe<=1,"sample.coverage.value must be a number between 0 and 1",te.commandStr),[Oe,le]},function(ye,Oe,le){Yt.optional(function(){ye.assert(Oe,le+"&&typeof "+le+'==="object"',"invalid sample.coverage")});var qe=Oe.def('"value" in ',le,"?+",le,".value:1"),or=Oe.def("!!",le,".invert");return[qe,or]})}}),nr}function vi(ge,te){var Pe=ge.static,tr=ge.dynamic,nr={};return Object.keys(Pe).forEach(function(Re){var ke=Pe[Re],Xe;if(typeof ke=="number"||typeof ke=="boolean")Xe=ro(function(){return ke});else if(typeof ke=="function"){var ye=ke._reglType;ye==="texture2d"||ye==="textureCube"?Xe=ro(function(Oe){return Oe.link(ke)}):ye==="framebuffer"||ye==="framebufferCube"?(Yt.command(ke.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Re+'"',te.commandStr),Xe=ro(function(Oe){return Oe.link(ke.color[0])})):Yt.commandRaise('invalid data for uniform "'+Re+'"',te.commandStr)}else La(ke)?Xe=ro(function(Oe){var le=Oe.global.def("[",Fn(ke.length,function(qe){return Yt.command(typeof ke[qe]=="number"||typeof ke[qe]=="boolean","invalid uniform "+Re,Oe.commandStr),ke[qe]}),"]");return le}):Yt.commandRaise('invalid or missing data for uniform "'+Re+'"',te.commandStr);Xe.value=ke,nr[Re]=Xe}),Object.keys(tr).forEach(function(Re){var ke=tr[Re];nr[Re]=es(ke,function(Xe,ye){return Xe.invoke(ye,ke)})}),nr}function fa(ge,te){var Pe=ge.static,tr=ge.dynamic,nr={};return Object.keys(Pe).forEach(function(Re){var ke=Pe[Re],Xe=fe.id(Re),ye=new z;if(Vc(ke))ye.state=Hu,ye.buffer=Lr.getBuffer(Lr.create(ke,ts,!1,!0)),ye.type=0;else{var Oe=Lr.getBuffer(ke);if(Oe)ye.state=Hu,ye.buffer=Oe,ye.type=0;else if(Yt.command(typeof ke=="object"&&ke,"invalid data for attribute "+Re,te.commandStr),"constant"in ke){var le=ke.constant;ye.buffer="null",ye.state=il,typeof le=="number"?ye.x=le:(Yt.command(La(le)&&le.length>0&&le.length<=4,"invalid constant for attribute "+Re,te.commandStr),vf.forEach(function(Nn,ga){ga<le.length&&(ye[Nn]=le[ga])}))}else{Vc(ke.buffer)?Oe=Lr.getBuffer(Lr.create(ke.buffer,ts,!1,!0)):Oe=Lr.getBuffer(ke.buffer),Yt.command(!!Oe,'missing buffer for attribute "'+Re+'"',te.commandStr);var qe=ke.offset|0;Yt.command(qe>=0,'invalid offset for attribute "'+Re+'"',te.commandStr);var or=ke.stride|0;Yt.command(or>=0&&or<256,'invalid stride for attribute "'+Re+'", must be integer betweeen [0, 255]',te.commandStr);var Ir=ke.size|0;Yt.command(!("size"in ke)||Ir>0&&Ir<=4,'invalid size for attribute "'+Re+'", must be 1,2,3,4',te.commandStr);var kr=!!ke.normalized,Er=0;"type"in ke&&(Yt.commandParameter(ke.type,fo,"invalid type for attribute "+Re,te.commandStr),Er=fo[ke.type]);var Qr=ke.divisor|0;"divisor"in ke&&(Yt.command(Qr===0||ot,'cannot specify divisor for attribute "'+Re+'", instancing not supported',te.commandStr),Yt.command(Qr>=0,'invalid divisor for attribute "'+Re+'"',te.commandStr)),Yt.optional(function(){var Nn=te.commandStr,ga=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ke).forEach(function(_n){Yt.command(ga.indexOf(_n)>=0,'unknown parameter "'+_n+'" for attribute pointer "'+Re+'" (valid parameters are '+ga+")",Nn)})}),ye.buffer=Oe,ye.state=Hu,ye.size=Ir,ye.normalized=kr,ye.type=Er||Oe.dtype,ye.offset=qe,ye.stride=or,ye.divisor=Qr}}nr[Re]=ro(function(Nn,ga){var _n=Nn.attribCache;if(Xe in _n)return _n[Xe];var jn={isStream:!1};return Object.keys(ye).forEach(function(oa){jn[oa]=ye[oa]}),ye.buffer&&(jn.buffer=Nn.link(ye.buffer),jn.type=jn.type||jn.buffer+".dtype"),_n[Xe]=jn,jn})}),Object.keys(tr).forEach(function(Re){var ke=tr[Re];function Xe(ye,Oe){var le=ye.invoke(Oe,ke),qe=ye.shared,or=ye.constants,Ir=qe.isBufferArgs,kr=qe.buffer;Yt.optional(function(){ye.assert(Oe,le+"&&(typeof "+le+'==="object"||typeof '+le+'==="function")&&('+Ir+"("+le+")||"+kr+".getBuffer("+le+")||"+kr+".getBuffer("+le+".buffer)||"+Ir+"("+le+'.buffer)||("constant" in '+le+"&&(typeof "+le+'.constant==="number"||'+qe.isArrayLike+"("+le+".constant))))",'invalid dynamic attribute "'+Re+'"')});var Er={isStream:Oe.def(!1)},Qr=new z;Qr.state=Hu,Object.keys(Qr).forEach(function(jn){Er[jn]=Oe.def(""+Qr[jn])});var Nn=Er.buffer,ga=Er.type;Oe("if(",Ir,"(",le,")){",Er.isStream,"=true;",Nn,"=",kr,".createStream(",ts,",",le,");",ga,"=",Nn,".dtype;","}else{",Nn,"=",kr,".getBuffer(",le,");","if(",Nn,"){",ga,"=",Nn,".dtype;",'}else if("constant" in ',le,"){",Er.state,"=",il,";","if(typeof "+le+'.constant === "number"){',Er[vf[0]],"=",le,".constant;",vf.slice(1).map(function(jn){return Er[jn]}).join("="),"=0;","}else{",vf.map(function(jn,oa){return Er[jn]+"="+le+".constant.length>"+oa+"?"+le+".constant["+oa+"]:0;"}).join(""),"}}else{","if(",Ir,"(",le,".buffer)){",Nn,"=",kr,".createStream(",ts,",",le,".buffer);","}else{",Nn,"=",kr,".getBuffer(",le,".buffer);","}",ga,'="type" in ',le,"?",or.glTypes,"[",le,".type]:",Nn,".dtype;",Er.normalized,"=!!",le,".normalized;");function _n(jn){Oe(Er[jn],"=",le,".",jn,"|0;")}return _n("size"),_n("offset"),_n("stride"),_n("divisor"),Oe("}}"),Oe.exit("if(",Er.isStream,"){",kr,".destroyStream(",Nn,");","}"),Er}nr[Re]=es(ke,Xe)}),nr}function Yi(ge,te){var Pe=ge.static,tr=ge.dynamic;if(Hf in Pe){var nr=Pe[Hf];return nr!==null&&Kr.getVAO(nr)===null&&(nr=Kr.createVAO(nr)),ro(function(ke){return ke.link(Kr.getVAO(nr))})}else if(Hf in tr){var Re=tr[Hf];return es(Re,function(ke,Xe){var ye=ke.invoke(Xe,Re);return Xe.def(ke.shared.vao+".getVAO("+ye+")")})}return null}function Ya(ge){var te=ge.static,Pe=ge.dynamic,tr={};return Object.keys(te).forEach(function(nr){var Re=te[nr];tr[nr]=ro(function(ke,Xe){return typeof Re=="number"||typeof Re=="boolean"?""+Re:ke.link(Re)})}),Object.keys(Pe).forEach(function(nr){var Re=Pe[nr];tr[nr]=es(Re,function(ke,Xe){return ke.invoke(Xe,Re)})}),tr}function Da(ge,te,Pe,tr,nr){var Re=ge.static,ke=ge.dynamic;Yt.optional(function(){var _n=[qu,fu,xf,Cu,wf,Pc,Au,Rc,bf,Hf].concat(Ft);function jn(oa){Object.keys(oa).forEach(function(Za){Yt.command(_n.indexOf(Za)>=0,'unknown parameter "'+Za+'"',nr.commandStr)})}jn(Re),jn(ke)});var Xe=Mn(ge,te),ye=en(ge,nr),Oe=In(ge,ye,nr),le=ia(ge,nr),qe=qn(ge,nr),or=Un(ge,nr,Xe);function Ir(_n){var jn=Oe[_n];jn&&(qe[_n]=jn)}Ir(Qs),Ir(Me(Vf));var kr=Object.keys(qe).length>0,Er={framebuffer:ye,draw:le,shader:or,state:qe,dirty:kr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Er.profile=un(ge,nr),Er.uniforms=vi(Pe,nr),Er.drawVAO=Er.scopeVAO=Yi(ge,nr),!Er.drawVAO&&or.program&&!Xe&&Ae.angle_instanced_arrays){var Qr=!0,Nn=or.program.attributes.map(function(_n){var jn=te.static[_n];return Qr=Qr&&!!jn,jn});if(Qr&&Nn.length>0){var ga=Kr.getVAO(Kr.createVAO(Nn));Er.drawVAO=new fs(null,null,null,function(_n,jn){return _n.link(ga)}),Er.useVAO=!0}}return Xe?Er.useVAO=!0:Er.attributes=fa(te,nr),Er.context=Ya(tr,nr),Er}function Ri(ge,te,Pe){var tr=ge.shared,nr=tr.context,Re=ge.scope();Object.keys(Pe).forEach(function(ke){te.save(nr,"."+ke);var Xe=Pe[ke],ye=Xe.append(ge,te);Array.isArray(ye)?Re(nr,".",ke,"=[",ye.join(),"];"):Re(nr,".",ke,"=",ye,";")}),te(Re)}function Bi(ge,te,Pe,tr){var nr=ge.shared,Re=nr.gl,ke=nr.framebuffer,Xe;dt&&(Xe=te.def(nr.extensions,".webgl_draw_buffers"));var ye=ge.constants,Oe=ye.drawBuffer,le=ye.backBuffer,qe;Pe?qe=Pe.append(ge,te):qe=te.def(ke,".next"),tr||te("if(",qe,"!==",ke,".cur){"),te("if(",qe,"){",Re,".bindFramebuffer(",El,",",qe,".framebuffer);"),dt&&te(Xe,".drawBuffersWEBGL(",Oe,"[",qe,".colorAttachments.length]);"),te("}else{",Re,".bindFramebuffer(",El,",null);"),dt&&te(Xe,".drawBuffersWEBGL(",le,");"),te("}",ke,".cur=",qe,";"),tr||te("}")}function bo(ge,te,Pe){var tr=ge.shared,nr=tr.gl,Re=ge.current,ke=ge.next,Xe=tr.current,ye=tr.next,Oe=ge.cond(Xe,".dirty");Ft.forEach(function(le){var qe=Me(le);if(!(qe in Pe.state)){var or,Ir;if(qe in ke){or=ke[qe],Ir=Re[qe];var kr=Fn(mt[qe].length,function(Qr){return Oe.def(or,"[",Qr,"]")});Oe(ge.cond(kr.map(function(Qr,Nn){return Qr+"!=="+Ir+"["+Nn+"]"}).join("||")).then(nr,".",Qt[qe],"(",kr,");",kr.map(function(Qr,Nn){return Ir+"["+Nn+"]="+Qr}).join(";"),";"))}else{or=Oe.def(ye,".",qe);var Er=ge.cond(or,"!==",Xe,".",qe);Oe(Er),qe in oe?Er(ge.cond(or).then(nr,".enable(",oe[qe],");").else(nr,".disable(",oe[qe],");"),Xe,".",qe,"=",or,";"):Er(nr,".",Qt[qe],"(",or,");",Xe,".",qe,"=",or,";")}}}),Object.keys(Pe.state).length===0&&Oe(Xe,".dirty=false;"),te(Oe)}function rs(ge,te,Pe,tr){var nr=ge.shared,Re=ge.current,ke=nr.current,Xe=nr.gl;Cl(Object.keys(Pe)).forEach(function(ye){var Oe=Pe[ye];if(!(tr&&!tr(Oe))){var le=Oe.append(ge,te);if(oe[ye]){var qe=oe[ye];Nu(Oe)?le?te(Xe,".enable(",qe,");"):te(Xe,".disable(",qe,");"):te(ge.cond(le).then(Xe,".enable(",qe,");").else(Xe,".disable(",qe,");")),te(ke,".",ye,"=",le,";")}else if(La(le)){var or=Re[ye];te(Xe,".",Qt[ye],"(",le,");",le.map(function(Ir,kr){return or+"["+kr+"]="+Ir}).join(";"),";")}else te(Xe,".",Qt[ye],"(",le,");",ke,".",ye,"=",le,";")}})}function $i(ge,te){ot&&(ge.instancing=te.def(ge.shared.extensions,".angle_instanced_arrays"))}function pa(ge,te,Pe,tr,nr){var Re=ge.shared,ke=ge.stats,Xe=Re.current,ye=Re.timer,Oe=Pe.profile;function le(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var qe,or;function Ir(_n){qe=te.def(),_n(qe,"=",le(),";"),typeof nr=="string"?_n(ke,".count+=",nr,";"):_n(ke,".count++;"),m&&(tr?(or=te.def(),_n(or,"=",ye,".getNumPendingQueries();")):_n(ye,".beginQuery(",ke,");"))}function kr(_n){_n(ke,".cpuTime+=",le(),"-",qe,";"),m&&(tr?_n(ye,".pushScopeStats(",or,",",ye,".getNumPendingQueries(),",ke,");"):_n(ye,".endQuery();"))}function Er(_n){var jn=te.def(Xe,".profile");te(Xe,".profile=",_n,";"),te.exit(Xe,".profile=",jn,";")}var Qr;if(Oe){if(Nu(Oe)){Oe.enable?(Ir(te),kr(te.exit),Er("true")):Er("false");return}Qr=Oe.append(ge,te),Er(Qr)}else Qr=te.def(Xe,".profile");var Nn=ge.block();Ir(Nn),te("if(",Qr,"){",Nn,"}");var ga=ge.block();kr(ga),te.exit("if(",Qr,"){",ga,"}")}function ns(ge,te,Pe,tr,nr){var Re=ge.shared;function ke(ye){switch(ye){case $f:case Qf:case Tu:return 2;case _f:case Cf:case tc:return 3;case Kf:case Af:case Xc:return 4;default:return 1}}function Xe(ye,Oe,le){var qe=Re.gl,or=te.def(ye,".location"),Ir=te.def(Re.attributes,"[",or,"]"),kr=le.state,Er=le.buffer,Qr=[le.x,le.y,le.z,le.w],Nn=["buffer","normalized","offset","stride"];function ga(){te("if(!",Ir,".buffer){",qe,".enableVertexAttribArray(",or,");}");var jn=le.type,oa;if(le.size?oa=te.def(le.size,"||",Oe):oa=Oe,te("if(",Ir,".type!==",jn,"||",Ir,".size!==",oa,"||",Nn.map(function(Ki){return Ir+"."+Ki+"!=="+le[Ki]}).join("||"),"){",qe,".bindBuffer(",ts,",",Er,".buffer);",qe,".vertexAttribPointer(",[or,oa,jn,le.normalized,le.stride,le.offset],");",Ir,".type=",jn,";",Ir,".size=",oa,";",Nn.map(function(Ki){return Ir+"."+Ki+"="+le[Ki]+";"}).join(""),"}"),ot){var Za=le.divisor;te("if(",Ir,".divisor!==",Za,"){",ge.instancing,".vertexAttribDivisorANGLE(",[or,Za],");",Ir,".divisor=",Za,";}")}}function _n(){te("if(",Ir,".buffer){",qe,".disableVertexAttribArray(",or,");",Ir,".buffer=null;","}if(",vf.map(function(jn,oa){return Ir+"."+jn+"!=="+Qr[oa]}).join("||"),"){",qe,".vertexAttrib4f(",or,",",Qr,");",vf.map(function(jn,oa){return Ir+"."+jn+"="+Qr[oa]+";"}).join(""),"}")}kr===Hu?ga():kr===il?_n():(te("if(",kr,"===",Hu,"){"),ga(),te("}else{"),_n(),te("}"))}tr.forEach(function(ye){var Oe=ye.name,le=Pe.attributes[Oe],qe;if(le){if(!nr(le))return;qe=le.append(ge,te)}else{if(!nr(Hc))return;var or=ge.scopeAttrib(Oe);Yt.optional(function(){ge.assert(te,or+".state","missing attribute "+Oe)}),qe={},Object.keys(new z).forEach(function(Ir){qe[Ir]=te.def(or,".",Ir)})}Xe(ge.link(ye),ke(ye.info.type),qe)})}function oi(ge,te,Pe,tr,nr){for(var Re=ge.shared,ke=Re.gl,Xe,ye=0;ye<tr.length;++ye){var Oe=tr[ye],le=Oe.name,qe=Oe.info.type,or=Pe.uniforms[le],Ir=ge.link(Oe),kr=Ir+".location",Er;if(or){if(!nr(or))continue;if(Nu(or)){var Qr=or.value;if(Yt.command(Qr!==null&&typeof Qr!="undefined",'missing uniform "'+le+'"',ge.commandStr),qe===nc||qe===$u){Yt.command(typeof Qr=="function"&&(qe===nc&&(Qr._reglType==="texture2d"||Qr._reglType==="framebuffer")||qe===$u&&(Qr._reglType==="textureCube"||Qr._reglType==="framebufferCube")),"invalid texture for uniform "+le,ge.commandStr);var Nn=ge.link(Qr._texture||Qr.color[0]._texture);te(ke,".uniform1i(",kr,",",Nn+".bind());"),te.exit(Nn,".unbind();")}else if(qe===ec||qe===rc||qe===Tf){Yt.optional(function(){Yt.command(La(Qr),"invalid matrix for uniform "+le,ge.commandStr),Yt.command(qe===ec&&Qr.length===4||qe===rc&&Qr.length===9||qe===Tf&&Qr.length===16,"invalid length for matrix uniform "+le,ge.commandStr)});var ga=ge.global.def("new Float32Array(["+Array.prototype.slice.call(Qr)+"])"),_n=2;qe===rc?_n=3:qe===Tf&&(_n=4),te(ke,".uniformMatrix",_n,"fv(",kr,",false,",ga,");")}else{switch(qe){case Mf:Yt.commandType(Qr,"number","uniform "+le,ge.commandStr),Xe="1f";break;case $f:Yt.command(La(Qr)&&Qr.length===2,"uniform "+le,ge.commandStr),Xe="2f";break;case _f:Yt.command(La(Qr)&&Qr.length===3,"uniform "+le,ge.commandStr),Xe="3f";break;case Kf:Yt.command(La(Qr)&&Qr.length===4,"uniform "+le,ge.commandStr),Xe="4f";break;case Jf:Yt.commandType(Qr,"boolean","uniform "+le,ge.commandStr),Xe="1i";break;case Js:Yt.commandType(Qr,"number","uniform "+le,ge.commandStr),Xe="1i";break;case Tu:Yt.command(La(Qr)&&Qr.length===2,"uniform "+le,ge.commandStr),Xe="2i";break;case Qf:Yt.command(La(Qr)&&Qr.length===2,"uniform "+le,ge.commandStr),Xe="2i";break;case tc:Yt.command(La(Qr)&&Qr.length===3,"uniform "+le,ge.commandStr),Xe="3i";break;case Cf:Yt.command(La(Qr)&&Qr.length===3,"uniform "+le,ge.commandStr),Xe="3i";break;case Xc:Yt.command(La(Qr)&&Qr.length===4,"uniform "+le,ge.commandStr),Xe="4i";break;case Af:Yt.command(La(Qr)&&Qr.length===4,"uniform "+le,ge.commandStr),Xe="4i";break}te(ke,".uniform",Xe,"(",kr,",",La(Qr)?Array.prototype.slice.call(Qr):Qr,");")}continue}else Er=or.append(ge,te)}else{if(!nr(Hc))continue;Er=te.def(Re.uniforms,"[",fe.id(le),"]")}qe===nc?(Yt(!Array.isArray(Er),"must specify a scalar prop for textures"),te("if(",Er,"&&",Er,'._reglType==="framebuffer"){',Er,"=",Er,".color[0];","}")):qe===$u&&(Yt(!Array.isArray(Er),"must specify a scalar prop for cube maps"),te("if(",Er,"&&",Er,'._reglType==="framebufferCube"){',Er,"=",Er,".color[0];","}")),Yt.optional(function(){function zo(vu,Uh){ge.assert(te,vu,'bad data or missing for uniform "'+le+'".  '+Uh)}function yh(vu){Yt(!Array.isArray(Er),"must not specify an array type for uniform"),zo("typeof "+Er+'==="'+vu+'"',"invalid type, expected "+vu)}function Vs(vu,Uh){Array.isArray(Er)?Yt(Er.length===vu,"must have length "+vu):zo(Re.isArrayLike+"("+Er+")&&"+Er+".length==="+vu,"invalid vector, should have length "+vu,ge.commandStr)}function ku(vu){Yt(!Array.isArray(Er),"must not specify a value type"),zo("typeof "+Er+'==="function"&&'+Er+'._reglType==="texture'+(vu===Fo?"2d":"Cube")+'"',"invalid texture type",ge.commandStr)}switch(qe){case Js:yh("number");break;case Qf:Vs(2,"number");break;case Cf:Vs(3,"number");break;case Af:Vs(4,"number");break;case Mf:yh("number");break;case $f:Vs(2,"number");break;case _f:Vs(3,"number");break;case Kf:Vs(4,"number");break;case Jf:yh("boolean");break;case Tu:Vs(2,"boolean");break;case tc:Vs(3,"boolean");break;case Xc:Vs(4,"boolean");break;case ec:Vs(4,"number");break;case rc:Vs(9,"number");break;case Tf:Vs(16,"number");break;case nc:ku(Fo);break;case $u:ku(Zf);break}});var jn=1;switch(qe){case nc:case $u:var oa=te.def(Er,"._texture");te(ke,".uniform1i(",kr,",",oa,".bind());"),te.exit(oa,".unbind();");continue;case Js:case Jf:Xe="1i";break;case Qf:case Tu:Xe="2i",jn=2;break;case Cf:case tc:Xe="3i",jn=3;break;case Af:case Xc:Xe="4i",jn=4;break;case Mf:Xe="1f";break;case $f:Xe="2f",jn=2;break;case _f:Xe="3f",jn=3;break;case Kf:Xe="4f",jn=4;break;case ec:Xe="Matrix2fv";break;case rc:Xe="Matrix3fv";break;case Tf:Xe="Matrix4fv";break}if(te(ke,".uniform",Xe,"(",kr,","),Xe.charAt(0)==="M"){var Za=Math.pow(qe-ec+2,2),Ki=ge.global.def("new Float32Array(",Za,")");Array.isArray(Er)?te("false,(",Fn(Za,function(zo){return Ki+"["+zo+"]="+Er[zo]}),",",Ki,")"):te("false,(Array.isArray(",Er,")||",Er," instanceof Float32Array)?",Er,":(",Fn(Za,function(zo){return Ki+"["+zo+"]="+Er+"["+zo+"]"}),",",Ki,")")}else jn>1?te(Fn(jn,function(zo){return Array.isArray(Er)?Er[zo]:Er+"["+zo+"]"})):(Yt(!Array.isArray(Er),"uniform value must not be an array"),te(Er));te(");")}}function Xn(ge,te,Pe,tr){var nr=ge.shared,Re=nr.gl,ke=nr.draw,Xe=tr.draw;function ye(){var oa=Xe.elements,Za,Ki=te;return oa?((oa.contextDep&&tr.contextDynamic||oa.propDep)&&(Ki=Pe),Za=oa.append(ge,Ki)):Za=Ki.def(ke,".",Cu),Za&&Ki("if("+Za+")"+Re+".bindBuffer("+gl+","+Za+".buffer.buffer);"),Za}function Oe(){var oa=Xe.count,Za,Ki=te;return oa?((oa.contextDep&&tr.contextDynamic||oa.propDep)&&(Ki=Pe),Za=oa.append(ge,Ki),Yt.optional(function(){oa.MISSING&&ge.assert(te,"false","missing vertex count"),oa.DYNAMIC&&ge.assert(Ki,Za+">=0","missing vertex count")})):(Za=Ki.def(ke,".",Au),Yt.optional(function(){ge.assert(Ki,Za+">=0","missing vertex count")})),Za}var le=ye();function qe(oa){var Za=Xe[oa];return Za?Za.contextDep&&tr.contextDynamic||Za.propDep?Za.append(ge,Pe):Za.append(ge,te):te.def(ke,".",oa)}var or=qe(wf),Ir=qe(Pc),kr=Oe();if(typeof kr=="number"){if(kr===0)return}else Pe("if(",kr,"){"),Pe.exit("}");var Er,Qr;ot&&(Er=qe(Rc),Qr=ge.instancing);var Nn=le+".type",ga=Xe.elements&&Nu(Xe.elements);function _n(){function oa(){Pe(Qr,".drawElementsInstancedANGLE(",[or,kr,Nn,Ir+"<<(("+Nn+"-"+Gl+")>>1)",Er],");")}function Za(){Pe(Qr,".drawArraysInstancedANGLE(",[or,Ir,kr,Er],");")}le?ga?oa():(Pe("if(",le,"){"),oa(),Pe("}else{"),Za(),Pe("}")):Za()}function jn(){function oa(){Pe(Re+".drawElements("+[or,kr,Nn,Ir+"<<(("+Nn+"-"+Gl+")>>1)"]+");")}function Za(){Pe(Re+".drawArrays("+[or,Ir,kr]+");")}le?ga?oa():(Pe("if(",le,"){"),oa(),Pe("}else{"),Za(),Pe("}")):Za()}ot&&(typeof Er!="number"||Er>=0)?typeof Er=="string"?(Pe("if(",Er,">0){"),_n(),Pe("}else if(",Er,"<0){"),jn(),Pe("}")):_n():jn()}function Pa(ge,te,Pe,tr,nr){var Re=Hr(),ke=Re.proc("body",nr);return Yt.optional(function(){Re.commandStr=te.commandStr,Re.command=Re.link(te.commandStr)}),ot&&(Re.instancing=ke.def(Re.shared.extensions,".angle_instanced_arrays")),ge(Re,ke,Pe,tr),Re.compile().body}function ja(ge,te,Pe,tr){$i(ge,te),Pe.useVAO?Pe.drawVAO?te(ge.shared.vao,".setVAO(",Pe.drawVAO.append(ge,te),");"):te(ge.shared.vao,".setVAO(",ge.shared.vao,".targetVAO);"):(te(ge.shared.vao,".setVAO(null);"),ns(ge,te,Pe,tr.attributes,function(){return!0})),oi(ge,te,Pe,tr.uniforms,function(){return!0}),Xn(ge,te,te,Pe)}function no(ge,te){var Pe=ge.proc("draw",1);$i(ge,Pe),Ri(ge,Pe,te.context),Bi(ge,Pe,te.framebuffer),bo(ge,Pe,te),rs(ge,Pe,te.state),pa(ge,Pe,te,!1,!0);var tr=te.shader.progVar.append(ge,Pe);if(Pe(ge.shared.gl,".useProgram(",tr,".program);"),te.shader.program)ja(ge,Pe,te,te.shader.program);else{Pe(ge.shared.vao,".setVAO(null);");var nr=ge.global.def("{}"),Re=Pe.def(tr,".id"),ke=Pe.def(nr,"[",Re,"]");Pe(ge.cond(ke).then(ke,".call(this,a0);").else(ke,"=",nr,"[",Re,"]=",ge.link(function(Xe){return Pa(ja,ge,te,Xe,1)}),"(",tr,");",ke,".call(this,a0);"))}Object.keys(te.state).length>0&&Pe(ge.shared.current,".dirty=true;")}function du(ge,te,Pe,tr){ge.batchId="a1",$i(ge,te);function nr(){return!0}ns(ge,te,Pe,tr.attributes,nr),oi(ge,te,Pe,tr.uniforms,nr),Xn(ge,te,te,Pe)}function Ku(ge,te,Pe,tr){$i(ge,te);var nr=Pe.contextDep,Re=te.def(),ke="a0",Xe="a1",ye=te.def();ge.shared.props=ye,ge.batchId=Re;var Oe=ge.scope(),le=ge.scope();te(Oe.entry,"for(",Re,"=0;",Re,"<",Xe,";++",Re,"){",ye,"=",ke,"[",Re,"];",le,"}",Oe.exit);function qe(Nn){return Nn.contextDep&&nr||Nn.propDep}function or(Nn){return!qe(Nn)}if(Pe.needsContext&&Ri(ge,le,Pe.context),Pe.needsFramebuffer&&Bi(ge,le,Pe.framebuffer),rs(ge,le,Pe.state,qe),Pe.profile&&qe(Pe.profile)&&pa(ge,le,Pe,!1,!0),tr)Pe.useVAO?Pe.drawVAO?qe(Pe.drawVAO)?le(ge.shared.vao,".setVAO(",Pe.drawVAO.append(ge,le),");"):Oe(ge.shared.vao,".setVAO(",Pe.drawVAO.append(ge,Oe),");"):Oe(ge.shared.vao,".setVAO(",ge.shared.vao,".targetVAO);"):(Oe(ge.shared.vao,".setVAO(null);"),ns(ge,Oe,Pe,tr.attributes,or),ns(ge,le,Pe,tr.attributes,qe)),oi(ge,Oe,Pe,tr.uniforms,or),oi(ge,le,Pe,tr.uniforms,qe),Xn(ge,Oe,le,Pe);else{var Ir=ge.global.def("{}"),kr=Pe.shader.progVar.append(ge,le),Er=le.def(kr,".id"),Qr=le.def(Ir,"[",Er,"]");le(ge.shared.gl,".useProgram(",kr,".program);","if(!",Qr,"){",Qr,"=",Ir,"[",Er,"]=",ge.link(function(Nn){return Pa(du,ge,Pe,Nn,2)}),"(",kr,");}",Qr,".call(this,a0[",Re,"],",Re,");")}}function Se(ge,te){var Pe=ge.proc("batch",2);ge.batchId="0",$i(ge,Pe);var tr=!1,nr=!0;Object.keys(te.context).forEach(function(Ir){tr=tr||te.context[Ir].propDep}),tr||(Ri(ge,Pe,te.context),nr=!1);var Re=te.framebuffer,ke=!1;Re?(Re.propDep?tr=ke=!0:Re.contextDep&&tr&&(ke=!0),ke||Bi(ge,Pe,Re)):Bi(ge,Pe,null),te.state.viewport&&te.state.viewport.propDep&&(tr=!0);function Xe(Ir){return Ir.contextDep&&tr||Ir.propDep}bo(ge,Pe,te),rs(ge,Pe,te.state,function(Ir){return!Xe(Ir)}),(!te.profile||!Xe(te.profile))&&pa(ge,Pe,te,!1,"a1"),te.contextDep=tr,te.needsContext=nr,te.needsFramebuffer=ke;var ye=te.shader.progVar;if(ye.contextDep&&tr||ye.propDep)Ku(ge,Pe,te,null);else{var Oe=ye.append(ge,Pe);if(Pe(ge.shared.gl,".useProgram(",Oe,".program);"),te.shader.program)Ku(ge,Pe,te,te.shader.program);else{Pe(ge.shared.vao,".setVAO(null);");var le=ge.global.def("{}"),qe=Pe.def(Oe,".id"),or=Pe.def(le,"[",qe,"]");Pe(ge.cond(or).then(or,".call(this,a0,a1);").else(or,"=",le,"[",qe,"]=",ge.link(function(Ir){return Pa(Ku,ge,te,Ir,2)}),"(",Oe,");",or,".call(this,a0,a1);"))}}Object.keys(te.state).length>0&&Pe(ge.shared.current,".dirty=true;")}function dr(ge,te){var Pe=ge.proc("scope",3);ge.batchId="a2";var tr=ge.shared,nr=tr.current;Ri(ge,Pe,te.context),te.framebuffer&&te.framebuffer.append(ge,Pe),Cl(Object.keys(te.state)).forEach(function(ke){var Xe=te.state[ke],ye=Xe.append(ge,Pe);La(ye)?ye.forEach(function(Oe,le){Pe.set(ge.next[ke],"["+le+"]",Oe)}):Pe.set(tr.next,"."+ke,ye)}),pa(ge,Pe,te,!0,!0),[Cu,Pc,Au,Rc,wf].forEach(function(ke){var Xe=te.draw[ke];Xe&&Pe.set(tr.draw,"."+ke,""+Xe.append(ge,Pe))}),Object.keys(te.uniforms).forEach(function(ke){var Xe=te.uniforms[ke].append(ge,Pe);Array.isArray(Xe)&&(Xe="["+Xe.join()+"]"),Pe.set(tr.uniforms,"["+fe.id(ke)+"]",Xe)}),Object.keys(te.attributes).forEach(function(ke){var Xe=te.attributes[ke].append(ge,Pe),ye=ge.scopeAttrib(ke);Object.keys(new z).forEach(function(Oe){Pe.set(ye,"."+Oe,Xe[Oe])})}),te.scopeVAO&&Pe.set(tr.vao,".targetVAO",te.scopeVAO.append(ge,Pe));function Re(ke){var Xe=te.shader[ke];Xe&&Pe.set(tr.shader,"."+ke,Xe.append(ge,Pe))}Re(fu),Re(xf),Object.keys(te.state).length>0&&(Pe(nr,".dirty=true;"),Pe.exit(nr,".dirty=true;")),Pe("a1(",ge.shared.context,",a0,",ge.batchId,");")}function ur(ge){if(!(typeof ge!="object"||La(ge))){for(var te=Object.keys(ge),Pe=0;Pe<te.length;++Pe)if(Br.isDynamic(ge[te[Pe]]))return!0;return!1}}function xn(ge,te,Pe){var tr=te.static[Pe];if(!tr||!ur(tr))return;var nr=ge.global,Re=Object.keys(tr),ke=!1,Xe=!1,ye=!1,Oe=ge.global.def("{}");Re.forEach(function(qe){var or=tr[qe];if(Br.isDynamic(or)){typeof or=="function"&&(or=tr[qe]=Br.unbox(or));var Ir=es(or,null);ke=ke||Ir.thisDep,ye=ye||Ir.propDep,Xe=Xe||Ir.contextDep}else{switch(nr(Oe,".",qe,"="),typeof or){case"number":nr(or);break;case"string":nr('"',or,'"');break;case"object":Array.isArray(or)&&nr("[",or.join(),"]");break;default:nr(ge.link(or));break}nr(";")}});function le(qe,or){Re.forEach(function(Ir){var kr=tr[Ir];if(Br.isDynamic(kr)){var Er=qe.invoke(or,kr);or(Oe,".",Ir,"=",Er,";")}})}te.dynamic[Pe]=new Br.DynamicVariable(Nc,{thisDep:ke,contextDep:Xe,propDep:ye,ref:Oe,append:le}),delete te.static[Pe]}function Hn(ge,te,Pe,tr,nr){var Re=Hr();Re.stats=Re.link(nr),Object.keys(te.static).forEach(function(Xe){xn(Re,te,Xe)}),pl.forEach(function(Xe){xn(Re,ge,Xe)});var ke=Da(ge,te,Pe,tr,Re);return no(Re,ke),dr(Re,ke),Se(Re,ke),ut(Re.compile(),{destroy:function(){ke.shader.program.destroy()}})}return{next:Ct,current:mt,procs:function(){var ge=Hr(),te=ge.proc("poll"),Pe=ge.proc("refresh"),tr=ge.block();te(tr),Pe(tr);var nr=ge.shared,Re=nr.gl,ke=nr.next,Xe=nr.current;tr(Xe,".dirty=false;"),Bi(ge,te),Bi(ge,Pe,null,!0);var ye;ot&&(ye=ge.link(ot)),Ae.oes_vertex_array_object&&Pe(ge.link(Ae.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Oe=0;Oe<lr.maxAttributes;++Oe){var le=Pe.def(nr.attributes,"[",Oe,"]"),qe=ge.cond(le,".buffer");qe.then(Re,".enableVertexAttribArray(",Oe,");",Re,".bindBuffer(",ts,",",le,".buffer.buffer);",Re,".vertexAttribPointer(",Oe,",",le,".size,",le,".type,",le,".normalized,",le,".stride,",le,".offset);").else(Re,".disableVertexAttribArray(",Oe,");",Re,".vertexAttrib4f(",Oe,",",le,".x,",le,".y,",le,".z,",le,".w);",le,".buffer=null;"),Pe(qe),ot&&Pe(ye,".vertexAttribDivisorANGLE(",Oe,",",le,".divisor);")}return Pe(ge.shared.vao,".currentVAO=null;",ge.shared.vao,".setVAO(",ge.shared.vao,".targetVAO);"),Object.keys(oe).forEach(function(or){var Ir=oe[or],kr=tr.def(ke,".",or),Er=ge.block();Er("if(",kr,"){",Re,".enable(",Ir,")}else{",Re,".disable(",Ir,")}",Xe,".",or,"=",kr,";"),Pe(Er),te("if(",kr,"!==",Xe,".",or,"){",Er,"}")}),Object.keys(Qt).forEach(function(or){var Ir=Qt[or],kr=mt[or],Er,Qr,Nn=ge.block();if(Nn(Re,".",Ir,"("),La(kr)){var ga=kr.length;Er=ge.global.def(ke,".",or),Qr=ge.global.def(Xe,".",or),Nn(Fn(ga,function(_n){return Er+"["+_n+"]"}),");",Fn(ga,function(_n){return Qr+"["+_n+"]="+Er+"["+_n+"];"}).join("")),te("if(",Fn(ga,function(_n){return Er+"["+_n+"]!=="+Qr+"["+_n+"]"}).join("||"),"){",Nn,"}")}else Er=tr.def(ke,".",or),Qr=tr.def(Xe,".",or),Nn(Er,");",Xe,".",or,"=",Er,";"),te("if(",Er,"!==",Qr,"){",Nn,"}");Pe(Nn)}),ge.compile()}(),compile:Hn}}function nh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ah=34918,vh=34919,ih=35007,zh=function(pt,fe){if(!fe.ext_disjoint_timer_query)return null;var Ae=[];function lr(){return Ae.pop()||fe.ext_disjoint_timer_query.createQueryEXT()}function Lr(ot){Ae.push(ot)}var cr=[];function br(ot){var dt=lr();fe.ext_disjoint_timer_query.beginQueryEXT(ih,dt),cr.push(dt),m(cr.length-1,cr.length,ot)}function Xr(){fe.ext_disjoint_timer_query.endQueryEXT(ih)}function qr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Kr=[];function Gr(){return Kr.pop()||new qr}function tn(ot){Kr.push(ot)}var d=[];function m(ot,dt,mt){var Ct=Gr();Ct.startQueryIndex=ot,Ct.endQueryIndex=dt,Ct.sum=0,Ct.stats=mt,d.push(Ct)}var k=[],z=[];function rt(){var ot,dt,mt=cr.length;if(mt!==0){z.length=Math.max(z.length,mt+1),k.length=Math.max(k.length,mt+1),k[0]=0,z[0]=0;var Ct=0;for(ot=0,dt=0;dt<cr.length;++dt){var Ft=cr[dt];fe.ext_disjoint_timer_query.getQueryObjectEXT(Ft,vh)?(Ct+=fe.ext_disjoint_timer_query.getQueryObjectEXT(Ft,ah),Lr(Ft)):cr[ot++]=Ft,k[dt+1]=Ct,z[dt+1]=ot}for(cr.length=ot,ot=0,dt=0;dt<d.length;++dt){var oe=d[dt],Qt=oe.startQueryIndex,Me=oe.endQueryIndex;oe.sum+=k[Me]-k[Qt];var Ue=z[Qt],wr=z[Me];wr===Ue?(oe.stats.gpuTime+=oe.sum/1e6,tn(oe)):(oe.startQueryIndex=Ue,oe.endQueryIndex=wr,d[ot++]=oe)}d.length=ot}}return{beginQuery:br,endQuery:Xr,pushScopeStats:m,update:rt,getNumPendingQueries:function(){return cr.length},clear:function(){Ae.push.apply(Ae,cr);for(var ot=0;ot<Ae.length;ot++)fe.ext_disjoint_timer_query.deleteQueryEXT(Ae[ot]);cr.length=0,Ae.length=0},restore:function(){cr.length=0,Ae.length=0}}},oc=16384,ph=256,gh=1024,jc=34962,Al="webglcontextlost",sc="webglcontextrestored",Tl=1,uc=2,Zc=3;function oh(pt,fe){for(var Ae=0;Ae<pt.length;++Ae)if(pt[Ae]===fe)return Ae;return-1}function fc(pt){var fe=ua(pt);if(!fe)return null;var Ae=fe.gl,lr=Ae.getContextAttributes(),Lr=Ae.isContextLost(),cr=ra(Ae,fe);if(!cr)return null;var br=Qn(),Xr=nh(),qr=cr.extensions,Kr=zh(Ae,qr),Gr=Cn(),tn=Ae.drawingBufferWidth,d=Ae.drawingBufferHeight,m={tick:0,time:0,viewportWidth:tn,viewportHeight:d,framebufferWidth:tn,framebufferHeight:d,drawingBufferWidth:tn,drawingBufferHeight:d,pixelRatio:fe.pixelRatio},k={},z={elements:null,primitive:4,count:-1,offset:0,instances:-1},rt=Ao(Ae,qr),ot=co(Ae,Xr,fe,mt),dt=lf(Ae,qr,rt,Xr,ot);function mt(Xn){return dt.destroyBuffer(Xn)}var Ct=qo(Ae,qr,ot,Xr),Ft=Ac(Ae,br,Xr,fe),oe=Mc(Ae,qr,rt,function(){Ue.procs.poll()},m,Xr,fe),Qt=cf(Ae,qr,rt,Xr,fe),Me=Wu(Ae,qr,rt,oe,Qt,Xr),Ue=dh(Ae,br,qr,rt,ot,Ct,oe,Me,k,dt,Ft,z,m,Kr,fe),wr=Ic(Ae,Me,Ue.procs.poll,m,lr,qr,rt),Ze=Ue.next,Ke=Ae.canvas,Qe=[],Hr=[],un=[],en=[fe.onDestroy],In=null;function Mn(){if(Qe.length===0){Kr&&Kr.update(),In=null;return}In=cn.next(Mn),rs();for(var Xn=Qe.length-1;Xn>=0;--Xn){var Pa=Qe[Xn];Pa&&Pa(m,null,0)}Ae.flush(),Kr&&Kr.update()}function Un(){!In&&Qe.length>0&&(In=cn.next(Mn))}function ia(){In&&(cn.cancel(Mn),In=null)}function qn(Xn){Xn.preventDefault(),Lr=!0,ia(),Hr.forEach(function(Pa){Pa()})}function vi(Xn){Ae.getError(),Lr=!1,cr.restore(),Ft.restore(),ot.restore(),oe.restore(),Qt.restore(),Me.restore(),dt.restore(),Kr&&Kr.restore(),Ue.procs.refresh(),Un(),un.forEach(function(Pa){Pa()})}Ke&&(Ke.addEventListener(Al,qn,!1),Ke.addEventListener(sc,vi,!1));function fa(){Qe.length=0,ia(),Ke&&(Ke.removeEventListener(Al,qn),Ke.removeEventListener(sc,vi)),Ft.clear(),Me.clear(),Qt.clear(),oe.clear(),Ct.clear(),ot.clear(),dt.clear(),Kr&&Kr.clear(),en.forEach(function(Xn){Xn()})}function Yi(Xn){Yt(!!Xn,"invalid args to regl({...})"),Yt.type(Xn,"object","invalid args to regl({...})");function Pa(nr){var Re=ut({},nr);delete Re.uniforms,delete Re.attributes,delete Re.context,delete Re.vao,"stencil"in Re&&Re.stencil.op&&(Re.stencil.opBack=Re.stencil.opFront=Re.stencil.op,delete Re.stencil.op);function ke(Xe){if(Xe in Re){var ye=Re[Xe];delete Re[Xe],Object.keys(ye).forEach(function(Oe){Re[Xe+"."+Oe]=ye[Oe]})}}return ke("blend"),ke("depth"),ke("cull"),ke("stencil"),ke("polygonOffset"),ke("scissor"),ke("sample"),"vao"in nr&&(Re.vao=nr.vao),Re}function ja(nr,Re){var ke={},Xe={};return Object.keys(nr).forEach(function(ye){var Oe=nr[ye];if(Br.isDynamic(Oe)){Xe[ye]=Br.unbox(Oe,ye);return}else if(Re&&Array.isArray(Oe)){for(var le=0;le<Oe.length;++le)if(Br.isDynamic(Oe[le])){Xe[ye]=Br.unbox(Oe,ye);return}}ke[ye]=Oe}),{dynamic:Xe,static:ke}}var no=ja(Xn.context||{},!0),du=ja(Xn.uniforms||{},!0),Ku=ja(Xn.attributes||{},!1),Se=ja(Pa(Xn),!1),dr={gpuTime:0,cpuTime:0,count:0},ur=Ue.compile(Se,Ku,du,no,dr),xn=ur.draw,Hn=ur.batch,ge=ur.scope,te=[];function Pe(nr){for(;te.length<nr;)te.push(null);return te}function tr(nr,Re){var ke;if(Lr&&Yt.raise("context lost"),typeof nr=="function")return ge.call(this,null,nr,0);if(typeof Re=="function")if(typeof nr=="number")for(ke=0;ke<nr;++ke)ge.call(this,null,Re,ke);else if(Array.isArray(nr))for(ke=0;ke<nr.length;++ke)ge.call(this,nr[ke],Re,ke);else return ge.call(this,nr,Re,0);else if(typeof nr=="number"){if(nr>0)return Hn.call(this,Pe(nr|0),nr|0)}else if(Array.isArray(nr)){if(nr.length)return Hn.call(this,nr,nr.length)}else return xn.call(this,nr)}return ut(tr,{stats:dr,destroy:function(){ur.destroy()}})}var Ya=Me.setFBO=Yi({framebuffer:Br.define.call(null,Tl,"framebuffer")});function Da(Xn,Pa){var ja=0;Ue.procs.poll();var no=Pa.color;no&&(Ae.clearColor(+no[0]||0,+no[1]||0,+no[2]||0,+no[3]||0),ja|=oc),"depth"in Pa&&(Ae.clearDepth(+Pa.depth),ja|=ph),"stencil"in Pa&&(Ae.clearStencil(Pa.stencil|0),ja|=gh),Yt(!!ja,"called regl.clear with no buffer specified"),Ae.clear(ja)}function Ri(Xn){if(Yt(typeof Xn=="object"&&Xn,"regl.clear() takes an object as input"),"framebuffer"in Xn)if(Xn.framebuffer&&Xn.framebuffer_reglType==="framebufferCube")for(var Pa=0;Pa<6;++Pa)Ya(ut({framebuffer:Xn.framebuffer.faces[Pa]},Xn),Da);else Ya(Xn,Da);else Da(null,Xn)}function Bi(Xn){Yt.type(Xn,"function","regl.frame() callback must be a function"),Qe.push(Xn);function Pa(){var ja=oh(Qe,Xn);Yt(ja>=0,"cannot cancel a frame twice");function no(){var du=oh(Qe,no);Qe[du]=Qe[Qe.length-1],Qe.length-=1,Qe.length<=0&&ia()}Qe[ja]=no}return Un(),{cancel:Pa}}function bo(){var Xn=Ze.viewport,Pa=Ze.scissor_box;Xn[0]=Xn[1]=Pa[0]=Pa[1]=0,m.viewportWidth=m.framebufferWidth=m.drawingBufferWidth=Xn[2]=Pa[2]=Ae.drawingBufferWidth,m.viewportHeight=m.framebufferHeight=m.drawingBufferHeight=Xn[3]=Pa[3]=Ae.drawingBufferHeight}function rs(){m.tick+=1,m.time=pa(),bo(),Ue.procs.poll()}function $i(){oe.refresh(),bo(),Ue.procs.refresh(),Kr&&Kr.update()}function pa(){return(Cn()-Gr)/1e3}$i();function ns(Xn,Pa){Yt.type(Pa,"function","listener callback must be a function");var ja;switch(Xn){case"frame":return Bi(Pa);case"lost":ja=Hr;break;case"restore":ja=un;break;case"destroy":ja=en;break;default:Yt.raise("invalid event, must be one of frame,lost,restore,destroy")}return ja.push(Pa),{cancel:function(){for(var no=0;no<ja.length;++no)if(ja[no]===Pa){ja[no]=ja[ja.length-1],ja.pop();return}}}}var oi=ut(Yi,{clear:Ri,prop:Br.define.bind(null,Tl),context:Br.define.bind(null,uc),this:Br.define.bind(null,Zc),draw:Yi({}),buffer:function(Xn){return ot.create(Xn,jc,!1,!1)},elements:function(Xn){return Ct.create(Xn,!1)},texture:oe.create2D,cube:oe.createCube,renderbuffer:Qt.create,framebuffer:Me.create,framebufferCube:Me.createCube,vao:dt.createVAO,attributes:lr,frame:Bi,on:ns,limits:rt,hasExtension:function(Xn){return rt.extensions.indexOf(Xn.toLowerCase())>=0},read:wr,destroy:fa,_gl:Ae,_refresh:$i,poll:function(){rs(),Kr&&Kr.update()},now:pa,stats:Xr});return fe.onDone(null,oi),oi}return fc})},922062:function(Sr,G,ut){var wt,st,tt,Q,J,X,T,M,C,_,b,L,S,I,D,P,y,v,K,R,B,Y,W,q,H,et,ct,at,St,bt,zt,kt,Kt;(function(it){var gt=typeof ut.g=="object"?ut.g:typeof self=="object"?self:typeof this=="object"?this:{};wt=[G],st=function(re){it(Vt(gt,Vt(re)))}.apply(G,wt),st!==void 0&&(Sr.exports=st);function Vt(re,It){return re!==gt&&(typeof Object.create=="function"?Object.defineProperty(re,"__esModule",{value:!0}):re.__esModule=!0),function(Wt,$t){return re[Wt]=It?It(Wt,$t):$t}}})(function(it){var gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(It,Wt){It.__proto__=Wt}||function(It,Wt){for(var $t in Wt)Object.prototype.hasOwnProperty.call(Wt,$t)&&(It[$t]=Wt[$t])};tt=function(It,Wt){if(typeof Wt!="function"&&Wt!==null)throw new TypeError("Class extends value "+String(Wt)+" is not a constructor or null");gt(It,Wt);function $t(){this.constructor=It}It.prototype=Wt===null?Object.create(Wt):($t.prototype=Wt.prototype,new $t)},Q=Object.assign||function(It){for(var Wt,$t=1,ae=arguments.length;$t<ae;$t++){Wt=arguments[$t];for(var Bt in Wt)Object.prototype.hasOwnProperty.call(Wt,Bt)&&(It[Bt]=Wt[Bt])}return It},J=function(It,Wt){var $t={};for(var ae in It)Object.prototype.hasOwnProperty.call(It,ae)&&Wt.indexOf(ae)<0&&($t[ae]=It[ae]);if(It!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,ae=Object.getOwnPropertySymbols(It);Bt<ae.length;Bt++)Wt.indexOf(ae[Bt])<0&&Object.prototype.propertyIsEnumerable.call(It,ae[Bt])&&($t[ae[Bt]]=It[ae[Bt]]);return $t},X=function(It,Wt,$t,ae){var Bt=arguments.length,Ot=Bt<3?Wt:ae===null?ae=Object.getOwnPropertyDescriptor(Wt,$t):ae,Ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(It,Wt,$t,ae);else for(var pe=It.length-1;pe>=0;pe--)(Ht=It[pe])&&(Ot=(Bt<3?Ht(Ot):Bt>3?Ht(Wt,$t,Ot):Ht(Wt,$t))||Ot);return Bt>3&&Ot&&Object.defineProperty(Wt,$t,Ot),Ot},T=function(It,Wt){return function($t,ae){Wt($t,ae,It)}},M=function(It,Wt,$t,ae,Bt,Ot){function Ht(gr){if(gr!==void 0&&typeof gr!="function")throw new TypeError("Function expected");return gr}for(var pe=ae.kind,ve=pe==="getter"?"get":pe==="setter"?"set":"value",Tt=!Wt&&It?ae.static?It:It.prototype:null,Zt=Wt||(Tt?Object.getOwnPropertyDescriptor(Tt,ae.name):{}),Ce,Ut=!1,se=$t.length-1;se>=0;se--){var _e={};for(var $e in ae)_e[$e]=$e==="access"?{}:ae[$e];for(var $e in ae.access)_e.access[$e]=ae.access[$e];_e.addInitializer=function(gr){if(Ut)throw new TypeError("Cannot add initializers after decoration has completed");Ot.push(Ht(gr||null))};var fr=(0,$t[se])(pe==="accessor"?{get:Zt.get,set:Zt.set}:Zt[ve],_e);if(pe==="accessor"){if(fr===void 0)continue;if(fr===null||typeof fr!="object")throw new TypeError("Object expected");(Ce=Ht(fr.get))&&(Zt.get=Ce),(Ce=Ht(fr.set))&&(Zt.set=Ce),(Ce=Ht(fr.init))&&Bt.unshift(Ce)}else(Ce=Ht(fr))&&(pe==="field"?Bt.unshift(Ce):Zt[ve]=Ce)}Tt&&Object.defineProperty(Tt,ae.name,Zt),Ut=!0},C=function(It,Wt,$t){for(var ae=arguments.length>2,Bt=0;Bt<Wt.length;Bt++)$t=ae?Wt[Bt].call(It,$t):Wt[Bt].call(It);return ae?$t:void 0},_=function(It){return typeof It=="symbol"?It:"".concat(It)},b=function(It,Wt,$t){return typeof Wt=="symbol"&&(Wt=Wt.description?"[".concat(Wt.description,"]"):""),Object.defineProperty(It,"name",{configurable:!0,value:$t?"".concat($t," ",Wt):Wt})},L=function(It,Wt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(It,Wt)},S=function(It,Wt,$t,ae){function Bt(Ot){return Ot instanceof $t?Ot:new $t(function(Ht){Ht(Ot)})}return new($t||($t=Promise))(function(Ot,Ht){function pe(Zt){try{Tt(ae.next(Zt))}catch(Ce){Ht(Ce)}}function ve(Zt){try{Tt(ae.throw(Zt))}catch(Ce){Ht(Ce)}}function Tt(Zt){Zt.done?Ot(Zt.value):Bt(Zt.value).then(pe,ve)}Tt((ae=ae.apply(It,Wt||[])).next())})},I=function(It,Wt){var $t={label:0,sent:function(){if(Ot[0]&1)throw Ot[1];return Ot[1]},trys:[],ops:[]},ae,Bt,Ot,Ht;return Ht={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ht[Symbol.iterator]=function(){return this}),Ht;function pe(Tt){return function(Zt){return ve([Tt,Zt])}}function ve(Tt){if(ae)throw new TypeError("Generator is already executing.");for(;Ht&&(Ht=0,Tt[0]&&($t=0)),$t;)try{if(ae=1,Bt&&(Ot=Tt[0]&2?Bt.return:Tt[0]?Bt.throw||((Ot=Bt.return)&&Ot.call(Bt),0):Bt.next)&&!(Ot=Ot.call(Bt,Tt[1])).done)return Ot;switch(Bt=0,Ot&&(Tt=[Tt[0]&2,Ot.value]),Tt[0]){case 0:case 1:Ot=Tt;break;case 4:return $t.label++,{value:Tt[1],done:!1};case 5:$t.label++,Bt=Tt[1],Tt=[0];continue;case 7:Tt=$t.ops.pop(),$t.trys.pop();continue;default:if(Ot=$t.trys,!(Ot=Ot.length>0&&Ot[Ot.length-1])&&(Tt[0]===6||Tt[0]===2)){$t=0;continue}if(Tt[0]===3&&(!Ot||Tt[1]>Ot[0]&&Tt[1]<Ot[3])){$t.label=Tt[1];break}if(Tt[0]===6&&$t.label<Ot[1]){$t.label=Ot[1],Ot=Tt;break}if(Ot&&$t.label<Ot[2]){$t.label=Ot[2],$t.ops.push(Tt);break}Ot[2]&&$t.ops.pop(),$t.trys.pop();continue}Tt=Wt.call(It,$t)}catch(Zt){Tt=[6,Zt],Bt=0}finally{ae=Ot=0}if(Tt[0]&5)throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}},D=function(It,Wt){for(var $t in It)$t!=="default"&&!Object.prototype.hasOwnProperty.call(Wt,$t)&&zt(Wt,It,$t)},zt=Object.create?function(It,Wt,$t,ae){ae===void 0&&(ae=$t);var Bt=Object.getOwnPropertyDescriptor(Wt,$t);(!Bt||("get"in Bt?!Wt.__esModule:Bt.writable||Bt.configurable))&&(Bt={enumerable:!0,get:function(){return Wt[$t]}}),Object.defineProperty(It,ae,Bt)}:function(It,Wt,$t,ae){ae===void 0&&(ae=$t),It[ae]=Wt[$t]},P=function(It){var Wt=typeof Symbol=="function"&&Symbol.iterator,$t=Wt&&It[Wt],ae=0;if($t)return $t.call(It);if(It&&typeof It.length=="number")return{next:function(){return It&&ae>=It.length&&(It=void 0),{value:It&&It[ae++],done:!It}}};throw new TypeError(Wt?"Object is not iterable.":"Symbol.iterator is not defined.")},y=function(It,Wt){var $t=typeof Symbol=="function"&&It[Symbol.iterator];if(!$t)return It;var ae=$t.call(It),Bt,Ot=[],Ht;try{for(;(Wt===void 0||Wt-- >0)&&!(Bt=ae.next()).done;)Ot.push(Bt.value)}catch(pe){Ht={error:pe}}finally{try{Bt&&!Bt.done&&($t=ae.return)&&$t.call(ae)}finally{if(Ht)throw Ht.error}}return Ot},v=function(){for(var It=[],Wt=0;Wt<arguments.length;Wt++)It=It.concat(y(arguments[Wt]));return It},K=function(){for(var It=0,Wt=0,$t=arguments.length;Wt<$t;Wt++)It+=arguments[Wt].length;for(var ae=Array(It),Bt=0,Wt=0;Wt<$t;Wt++)for(var Ot=arguments[Wt],Ht=0,pe=Ot.length;Ht<pe;Ht++,Bt++)ae[Bt]=Ot[Ht];return ae},R=function(It,Wt,$t){if($t||arguments.length===2)for(var ae=0,Bt=Wt.length,Ot;ae<Bt;ae++)(Ot||!(ae in Wt))&&(Ot||(Ot=Array.prototype.slice.call(Wt,0,ae)),Ot[ae]=Wt[ae]);return It.concat(Ot||Array.prototype.slice.call(Wt))},B=function(It){return this instanceof B?(this.v=It,this):new B(It)},Y=function(It,Wt,$t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae=$t.apply(It,Wt||[]),Bt,Ot=[];return Bt={},Ht("next"),Ht("throw"),Ht("return"),Bt[Symbol.asyncIterator]=function(){return this},Bt;function Ht(Ut){ae[Ut]&&(Bt[Ut]=function(se){return new Promise(function(_e,$e){Ot.push([Ut,se,_e,$e])>1||pe(Ut,se)})})}function pe(Ut,se){try{ve(ae[Ut](se))}catch(_e){Ce(Ot[0][3],_e)}}function ve(Ut){Ut.value instanceof B?Promise.resolve(Ut.value.v).then(Tt,Zt):Ce(Ot[0][2],Ut)}function Tt(Ut){pe("next",Ut)}function Zt(Ut){pe("throw",Ut)}function Ce(Ut,se){Ut(se),Ot.shift(),Ot.length&&pe(Ot[0][0],Ot[0][1])}},W=function(It){var Wt,$t;return Wt={},ae("next"),ae("throw",function(Bt){throw Bt}),ae("return"),Wt[Symbol.iterator]=function(){return this},Wt;function ae(Bt,Ot){Wt[Bt]=It[Bt]?function(Ht){return($t=!$t)?{value:B(It[Bt](Ht)),done:!1}:Ot?Ot(Ht):Ht}:Ot}},q=function(It){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Wt=It[Symbol.asyncIterator],$t;return Wt?Wt.call(It):(It=typeof P=="function"?P(It):It[Symbol.iterator](),$t={},ae("next"),ae("throw"),ae("return"),$t[Symbol.asyncIterator]=function(){return this},$t);function ae(Ot){$t[Ot]=It[Ot]&&function(Ht){return new Promise(function(pe,ve){Ht=It[Ot](Ht),Bt(pe,ve,Ht.done,Ht.value)})}}function Bt(Ot,Ht,pe,ve){Promise.resolve(ve).then(function(Tt){Ot({value:Tt,done:pe})},Ht)}},H=function(It,Wt){return Object.defineProperty?Object.defineProperty(It,"raw",{value:Wt}):It.raw=Wt,It};var Vt=Object.create?function(It,Wt){Object.defineProperty(It,"default",{enumerable:!0,value:Wt})}:function(It,Wt){It.default=Wt};et=function(It){if(It&&It.__esModule)return It;var Wt={};if(It!=null)for(var $t in It)$t!=="default"&&Object.prototype.hasOwnProperty.call(It,$t)&&zt(Wt,It,$t);return Vt(Wt,It),Wt},ct=function(It){return It&&It.__esModule?It:{default:It}},at=function(It,Wt,$t,ae){if($t==="a"&&!ae)throw new TypeError("Private accessor was defined without a getter");if(typeof Wt=="function"?It!==Wt||!ae:!Wt.has(It))throw new TypeError("Cannot read private member from an object whose class did not declare it");return $t==="m"?ae:$t==="a"?ae.call(It):ae?ae.value:Wt.get(It)},St=function(It,Wt,$t,ae,Bt){if(ae==="m")throw new TypeError("Private method is not writable");if(ae==="a"&&!Bt)throw new TypeError("Private accessor was defined without a setter");if(typeof Wt=="function"?It!==Wt||!Bt:!Wt.has(It))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ae==="a"?Bt.call(It,$t):Bt?Bt.value=$t:Wt.set(It,$t),$t},bt=function(It,Wt){if(Wt===null||typeof Wt!="object"&&typeof Wt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof It=="function"?Wt===It:It.has(Wt)},kt=function(It,Wt,$t){if(Wt!=null){if(typeof Wt!="object"&&typeof Wt!="function")throw new TypeError("Object expected.");var ae;if($t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");ae=Wt[Symbol.asyncDispose]}if(ae===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");ae=Wt[Symbol.dispose]}if(typeof ae!="function")throw new TypeError("Object not disposable.");It.stack.push({value:Wt,dispose:ae,async:$t})}else $t&&It.stack.push({async:!0});return Wt};var re=typeof SuppressedError=="function"?SuppressedError:function(It,Wt,$t){var ae=new Error($t);return ae.name="SuppressedError",ae.error=It,ae.suppressed=Wt,ae};Kt=function(It){function Wt(ae){It.error=It.hasError?new re(ae,It.error,"An error was suppressed during disposal."):ae,It.hasError=!0}function $t(){for(;It.stack.length;){var ae=It.stack.pop();try{var Bt=ae.dispose&&ae.dispose.call(ae.value);if(ae.async)return Promise.resolve(Bt).then($t,function(Ot){return Wt(Ot),$t()})}catch(Ot){Wt(Ot)}}if(It.hasError)throw It.error}return $t()},it("__extends",tt),it("__assign",Q),it("__rest",J),it("__decorate",X),it("__param",T),it("__esDecorate",M),it("__runInitializers",C),it("__propKey",_),it("__setFunctionName",b),it("__metadata",L),it("__awaiter",S),it("__generator",I),it("__exportStar",D),it("__createBinding",zt),it("__values",P),it("__read",y),it("__spread",v),it("__spreadArrays",K),it("__spreadArray",R),it("__await",B),it("__asyncGenerator",Y),it("__asyncDelegator",W),it("__asyncValues",q),it("__makeTemplateObject",H),it("__importStar",et),it("__importDefault",ct),it("__classPrivateFieldGet",at),it("__classPrivateFieldSet",St),it("__classPrivateFieldIn",bt),it("__addDisposableResource",kt),it("__disposeResources",Kt)})},185524:function(Sr,G,ut){"use strict";ut.r(G),ut.d(G,{__addDisposableResource:function(){return zt},__assign:function(){return tt},__asyncDelegator:function(){return W},__asyncGenerator:function(){return Y},__asyncValues:function(){return q},__await:function(){return B},__awaiter:function(){return L},__classPrivateFieldGet:function(){return at},__classPrivateFieldIn:function(){return bt},__classPrivateFieldSet:function(){return St},__createBinding:function(){return D},__decorate:function(){return J},__disposeResources:function(){return kt},__esDecorate:function(){return T},__exportStar:function(){return I},__extends:function(){return st},__generator:function(){return S},__importDefault:function(){return ct},__importStar:function(){return et},__makeTemplateObject:function(){return H},__metadata:function(){return b},__param:function(){return X},__propKey:function(){return C},__read:function(){return y},__rest:function(){return Q},__runInitializers:function(){return M},__setFunctionName:function(){return _},__spread:function(){return v},__spreadArray:function(){return R},__spreadArrays:function(){return K},__values:function(){return P}});var wt=ut(922062);const{__extends:st,__assign:tt,__rest:Q,__decorate:J,__param:X,__esDecorate:T,__runInitializers:M,__propKey:C,__setFunctionName:_,__metadata:b,__awaiter:L,__generator:S,__exportStar:I,__createBinding:D,__values:P,__read:y,__spread:v,__spreadArrays:K,__spreadArray:R,__await:B,__asyncGenerator:Y,__asyncDelegator:W,__asyncValues:q,__makeTemplateObject:H,__importStar:et,__importDefault:ct,__classPrivateFieldGet:at,__classPrivateFieldSet:St,__classPrivateFieldIn:bt,__addDisposableResource:zt,__disposeResources:kt}=wt;G.default=wt}}]);
